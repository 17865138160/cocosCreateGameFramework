System.register("chunks:///_virtual/JsonOb.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"000b00Lx19Ke4hAFc9/Qlnh","JsonOb",void 0);const r=Object.prototype,o="[object Object]",c="[object Array]",s=["push","pop","shift","unshift","sort","reverse","splice"];t("JsonOb",class{constructor(t,e){r.toString.call(t)!==o&&r.toString.call(t)!==c&&console.error("请传入一个对象或数组"),this._callback=e,this.observe(t)}observe(t,e){r.toString.call(t)===c&&this.overrideArrayProto(t,e),Object.keys(t).forEach((s=>{let i=this,n=t[s],l=e&&e.slice();l?l.push(s):l=[s],Object.defineProperty(t,s,{get:function(){return n},set:function(t){n!==t&&("[object Object]"===r.toString.call(t)&&i.observe(t,l),i._callback(t,n,l),n=t)}}),r.toString.call(t[s])!==o&&r.toString.call(t[s])!==c||this.observe(t[s],l)}),this)}overrideArrayProto(t,e){var r,o=Array.prototype,c=Object.create(Array.prototype),i=this;s.forEach((t=>{Object.defineProperty(c,t,{value:function(){var c=this.slice();return r=o[t].apply(this,arguments),i.observe(this,e),i._callback(this,c,e),r}})})),t.__proto__=c}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/GameConfig.ts",["cc","./Logger.ts"],(function(t){"use strict";var e,a;return{setters:[function(t){e=t.cclegacy},function(t){a=t.Logger}],execute:function(){e._RF.push({},"00d524dw2FMdaDkmM7kaSH8","GameConfig",void 0);t("GameConfig",class{getConfigPath(t){return"config/game/"+t}getRolePath(t){return`content/role/${t}`}get version(){return this._data.config.version}get package(){return this._data.config.package}get frameRate(){return this._data.config.frameRate}get localDataKey(){return this._data.config.localDataKey}get localDataIv(){return this._data.config.localDataIv}get httpServer(){return this._data.config.httpServer}get httpTimeout(){return this._data.config.httpTimeout}get language(){return this._data.language.type||["zh"]}get languagePathJson(){return this._data.language.path.json||"language/json"}get languagePathTexture(){return this._data.language.path.texture||"language/texture"}constructor(t){this._data=null;let e=t.json;this._data=Object.freeze(e),a.logConfig(this._data,"游戏配置")}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/Decorator.ts",["cc","./BTreeNode.ts","./BehaviorTree.ts"],(function(e){"use strict";var t,o,r;return{setters:[function(e){t=e.cclegacy},function(e){o=e.BTreeNode},function(e){r=e.BehaviorTree}],execute:function(){t._RF.push({},"0455agxsbxHlYleJPDpJX3l","Decorator",void 0);e("Decorator",class extends o{constructor(e){super(),e&&(this.node=r.getNode(e))}setNode(e){this.node=r.getNode(e)}start(){this.node.setControl(this),this.node.start(),super.start()}end(){this.node.end()}run(e){this.node.run(e)}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/NetState.ts",["cc","./EventDispatcher.ts"],(function(t){"use strict";var e,n,a,i;return{setters:[function(t){e=t.cclegacy,n=t.sys,a=t.log},function(t){i=t.EventDispatcher}],execute:function(){let c,s;t({NetworkEvent:void 0,NetworkState:void 0}),e._RF.push({},"06a3ayfWydC8pY/lWnVtcRP","NetState",void 0),function(t){t.CHANGE="NetworkEvent.CHANGE"}(c||(c=t("NetworkEvent",{}))),function(t){t.UNKNOWN="unknown",t.ONLINE="online",t.OFFLINE="offline"}(s||(s=t("NetworkState",{})));class o extends i{constructor(){super(),this._state=s.UNKNOWN,n.isBrowser&&this._webInit()}get state(){return this._state}changeState(t){this._state!==t&&(this._state=t,a("[Network] "+t),this.dispatchEvent(c.CHANGE,t))}_webInit(){this._callback(navigator.onLine);let t=window,e=document.body;e.addEventListener?(t.addEventListener("online",(()=>{this._callback(!0)}),!0),t.addEventListener("offline",(()=>{this._callback(!1)}),!0)):e.attachEvent?(t.attachEvent("ononline",(()=>{this._callback(!0)})),t.attachEvent("onoffline",(()=>{this._callback(!1)}))):(t.ononline=()=>{this._callback(!0)},t.onoffline=()=>{this._callback(!1)}),n.isMobile||(window.onLineHandler=()=>{this._callback(!0)},window.offLineHandler=()=>{this._callback(!1)})}_callback(t){t?this.changeState(s.ONLINE):this.changeState(s.OFFLINE)}}t("Network",o);t("network",new o);e._RF.pop()}}}));

System.register("chunks:///_virtual/RoleModelComp.ts",["cc","./ECS.ts","./ViewModel.ts","./RoleNumericMap.ts"],(function(e){"use strict";var t,s,i,o;return{setters:[function(e){t=e.cclegacy},function(e){s=e.ecs},function(e){i=e.VM},function(e){o=e.RoleNumericMap}],execute:function(){var n;t._RF.push({},"0b313MKJh1LE6DVFdJyex29","RoleModelComp",void 0);e("RoleModelComp",s.register("RoleModel")(n=class extends s.Comp{get name(){return this._name}set name(e){this._name=e,this.vm.name=e}constructor(){super(),this.id=-1,this._name="",this.anim="model1",this.attributes=null,this.vm={},this.attributes=new o(this.vm)}vmAdd(){i.add(this.vm,"Role")}vmRemove(){i.remove("Role")}reset(){for(var e in this.vmRemove(),this.id=-1,this.name="",this.vm)this.vm[e]=0}toString(){console.log(`【${this.name}】的属性"--------------------------------------------`),this.attributes.forEach(((e,t)=>{console.log(t,e.value)}))}})||n);t._RF.pop()}}}));

System.register("chunks:///_virtual/Md5.ts",["cc"],(function(r){"use strict";var n;return{setters:[function(r){n=r.cclegacy}],execute:function(){r("md5",(function(r){var n=function(r,n){return r<<n|r>>>32-n},t=function(r,n){var t,o,e,u,c;return e=2147483648&r,u=2147483648&n,c=(1073741823&r)+(1073741823&n),(t=1073741824&r)&(o=1073741824&n)?2147483648^c^e^u:t|o?1073741824&c?3221225472^c^e^u:1073741824^c^e^u:c^e^u},o=function(r,o,e,u,c,i,f){return r=t(r,t(t(function(r,n,t){return r&n|~r&t}(o,e,u),c),f)),t(n(r,i),o)},e=function(r,o,e,u,c,i,f){return r=t(r,t(t(function(r,n,t){return r&t|n&~t}(o,e,u),c),f)),t(n(r,i),o)},u=function(r,o,e,u,c,i,f){return r=t(r,t(t(function(r,n,t){return r^n^t}(o,e,u),c),f)),t(n(r,i),o)},c=function(r,o,e,u,c,i,f){return r=t(r,t(t(function(r,n,t){return n^(r|~t)}(o,e,u),c),f)),t(n(r,i),o)},i=function(r){for(var n,t=r.length,o=t+8,e=16*((o-o%64)/64+1),u=Array(e-1),c=0,i=0;i<t;)c=i%4*8,u[n=(i-i%4)/4]=u[n]|r.charCodeAt(i)<<c,i++;return c=i%4*8,u[n=(i-i%4)/4]=u[n]|128<<c,u[e-2]=t<<3,u[e-1]=t>>>29,u},f=function(r){var n,t="",o="";for(n=0;n<=3;n++)t+=(o="0"+(r>>>8*n&255).toString(16)).substr(o.length-2,2);return t},a=function(r){r=r.toString().replace(/\x0d\x0a/g,"\n");for(var n="",t=0;t<r.length;t++){var o=r.charCodeAt(t);o<128?n+=String.fromCharCode(o):o>127&&o<2048?(n+=String.fromCharCode(o>>6|192),n+=String.fromCharCode(63&o|128)):(n+=String.fromCharCode(o>>12|224),n+=String.fromCharCode(o>>6&63|128),n+=String.fromCharCode(63&o|128))}return n};return function(r){var n,g,C,h,d,s,v,S,m,l=Array();for(r=a(r),l=i(r),s=1732584193,v=4023233417,S=2562383102,m=271733878,n=0;n<l.length;n+=16)g=s,C=v,h=S,d=m,s=o(s,v,S,m,l[n+0],7,3614090360),m=o(m,s,v,S,l[n+1],12,3905402710),S=o(S,m,s,v,l[n+2],17,606105819),v=o(v,S,m,s,l[n+3],22,3250441966),s=o(s,v,S,m,l[n+4],7,4118548399),m=o(m,s,v,S,l[n+5],12,1200080426),S=o(S,m,s,v,l[n+6],17,2821735955),v=o(v,S,m,s,l[n+7],22,4249261313),s=o(s,v,S,m,l[n+8],7,1770035416),m=o(m,s,v,S,l[n+9],12,2336552879),S=o(S,m,s,v,l[n+10],17,4294925233),v=o(v,S,m,s,l[n+11],22,2304563134),s=o(s,v,S,m,l[n+12],7,1804603682),m=o(m,s,v,S,l[n+13],12,4254626195),S=o(S,m,s,v,l[n+14],17,2792965006),v=o(v,S,m,s,l[n+15],22,1236535329),s=e(s,v,S,m,l[n+1],5,4129170786),m=e(m,s,v,S,l[n+6],9,3225465664),S=e(S,m,s,v,l[n+11],14,643717713),v=e(v,S,m,s,l[n+0],20,3921069994),s=e(s,v,S,m,l[n+5],5,3593408605),m=e(m,s,v,S,l[n+10],9,38016083),S=e(S,m,s,v,l[n+15],14,3634488961),v=e(v,S,m,s,l[n+4],20,3889429448),s=e(s,v,S,m,l[n+9],5,568446438),m=e(m,s,v,S,l[n+14],9,3275163606),S=e(S,m,s,v,l[n+3],14,4107603335),v=e(v,S,m,s,l[n+8],20,1163531501),s=e(s,v,S,m,l[n+13],5,2850285829),m=e(m,s,v,S,l[n+2],9,4243563512),S=e(S,m,s,v,l[n+7],14,1735328473),v=e(v,S,m,s,l[n+12],20,2368359562),s=u(s,v,S,m,l[n+5],4,4294588738),m=u(m,s,v,S,l[n+8],11,2272392833),S=u(S,m,s,v,l[n+11],16,1839030562),v=u(v,S,m,s,l[n+14],23,4259657740),s=u(s,v,S,m,l[n+1],4,2763975236),m=u(m,s,v,S,l[n+4],11,1272893353),S=u(S,m,s,v,l[n+7],16,4139469664),v=u(v,S,m,s,l[n+10],23,3200236656),s=u(s,v,S,m,l[n+13],4,681279174),m=u(m,s,v,S,l[n+0],11,3936430074),S=u(S,m,s,v,l[n+3],16,3572445317),v=u(v,S,m,s,l[n+6],23,76029189),s=u(s,v,S,m,l[n+9],4,3654602809),m=u(m,s,v,S,l[n+12],11,3873151461),S=u(S,m,s,v,l[n+15],16,530742520),v=u(v,S,m,s,l[n+2],23,3299628645),s=c(s,v,S,m,l[n+0],6,4096336452),m=c(m,s,v,S,l[n+7],10,1126891415),S=c(S,m,s,v,l[n+14],15,2878612391),v=c(v,S,m,s,l[n+5],21,4237533241),s=c(s,v,S,m,l[n+12],6,1700485571),m=c(m,s,v,S,l[n+3],10,2399980690),S=c(S,m,s,v,l[n+10],15,4293915773),v=c(v,S,m,s,l[n+1],21,2240044497),s=c(s,v,S,m,l[n+8],6,1873313359),m=c(m,s,v,S,l[n+15],10,4264355552),S=c(S,m,s,v,l[n+6],15,2734768916),v=c(v,S,m,s,l[n+13],21,1309151649),s=c(s,v,S,m,l[n+4],6,4149444226),m=c(m,s,v,S,l[n+11],10,3174756917),S=c(S,m,s,v,l[n+2],15,718787259),v=c(v,S,m,s,l[n+9],21,3951481745),s=t(s,g),v=t(v,C),S=t(S,h),m=t(m,d);return(f(s)+f(v)+f(S)+f(m)).toLowerCase()}(r)})),n._RF.push({},"0c84ez5VEZDIoBzPnQonY0a","Md5",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/Main.ts",["cc","./ECS.ts","./Root.ts","./SingletonModuleComp.ts","./Initialize.ts"],(function(t){"use strict";var n,i,c,e,s,o;return{setters:[function(t){n=t.cclegacy,i=t._decorator},function(t){c=t.ecs},function(t){e=t.Root},function(t){s=t.smc},function(t){o=t.Initialize}],execute:function(){var r;n._RF.push({},"0eec0s4qrZF7onPlYBrD+y+","Main",void 0);const{ccclass:a,property:u}=i;t("Main",a("Main")(r=class extends e{start(){}async run(){s.initialize=c.getEntity(o)}})||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/RoleViewInfoComp.ts",["cc","./ECS.ts","./Oops.ts","./GameUIConfig.ts","./CCComp.ts","./SingletonModuleComp.ts"],(function(o){"use strict";var e,n,t,s,c,i,p,r;return{setters:[function(o){e=o.cclegacy,n=o.Node,t=o._decorator},function(o){s=o.ecs},function(o){c=o.oops},function(o){i=o.UIID},function(o){p=o.CCComp},function(o){r=o.SingletonModuleComp}],execute:function(){var u;e._RF.push({},"0f2264R4d1JMpV/ODghFMkE","RoleViewInfoComp",void 0);const{ccclass:l,property:a}=t;o("RoleViewInfoComp",l("RoleViewInfoComp")(u=s.register("RoleViewInfo",!1)(u=class extends p{onLoad(){this.node.on(n.EventType.TOUCH_END,this.onTouchEnd,this)}onTouchEnd(o){switch(o.target.name){case"btn_levelup":s.getSingleton(r).account.AccountModel.role.upgrade();break;case"btn_close":c.gui.remove(i.Demo_Role_Info)}o.propagationStopped=!0}reset(){this.node.destroy()}})||u)||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["cc"],(function(e){"use strict";var t,a,i;return{setters:[function(e){t=e.cclegacy,a=e.game,i=e.Game}],execute:function(){t._RF.push({},"0f970oluwZApqGulaR0ouqP","GameManager",void 0);var s=1;e("GameManager",class{constructor(e){this.root=e,this.gameTimeScaleExtend()}setTimeScale(e){s=e}gameTimeScaleExtend(){a._calculateDT=function(e){return e||(e=performance.now()),this._deltaTime=e>this._startTime?(e-this._startTime)/1e3:0,this._deltaTime>i.DEBUG_DT_THRESHOLD&&(this._deltaTime=this.frameTime/1e3),this._startTime=e,this._deltaTime*s}}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/RotateUtil.ts",["cc","./Vec3Util.ts"],(function(t){"use strict";var o,r,e,a,i;return{setters:[function(t){o=t.cclegacy,r=t.Quat,e=t.Vec3,a=t.toRadian},function(t){i=t.Vec3Util}],execute:function(){o._RF.push({},"103324kr75Hi5d7RZCcRt3P","RotateUtil",void 0);t("RotateUtil",class{static rotateAround(t,o,e){var a=new r;r.rotateAround(a,t.getRotation(),o.normalize(),e),t.setRotation(a)}static rotateAroundTarget(t,o,a,i){var n=t.worldPosition,s=o.worldPosition,c=new r,l=new e;r.fromAxisAngle(c,a,i),e.subtract(l,s,n),e.transformQuat(l,l,c),e.add(l,n,l),o.setWorldPosition(l),r.rotateAround(c,o.worldRotation,a,i),r.normalize(c,c),o.setWorldRotation(c)}static circularEdgePosition(t,o,n){let s=i.z.multiplyScalar(o),c=i.sub(s,t),l=new e;var u=new r;return r.fromAxisAngle(u,e.UP,a(n)),e.transformQuat(l,c,u),e.add(l,t,l),l}}),o._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageLabel.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./LanguageData.ts"],(function(e){"use strict";var t,a,i,n,r,s,o,p,l,u,h;return{setters:[function(e){t=e.cclegacy,a=e.CCString,i=e._decorator,n=e.Component,r=e.warn,s=e.Label,o=e.RichText,p=e.error},function(e){l=e.applyDecoratedDescriptor,u=e.initializerDefineProperty},function(e){h=e.LanguageData}],execute:function(){var g,c,d,m,b,_,L,y,f,D,I,z,v,C;t._RF.push({},"110c8vEd5NEPL/N9meGQnaX","LanguageLabel",void 0);const{ccclass:w,property:k,menu:S}=i;let U=e("LangLabelParamsItem",w("LangLabelParamsItem")((d=l((c=class{constructor(){u(this,"key",d,this),u(this,"value",m,this)}}).prototype,"key",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=l(c.prototype,"value",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=c))||g);e("LanguageLabel",(b=w("LanguageLabel"),_=S("ui/language/LanguageLabel"),L=k({type:U,displayName:"params"}),y=k({type:U,displayName:"params"}),f=k({serializable:!0}),D=k({type:a,serializable:!0}),b(I=_((v=l((z=class extends n{constructor(...e){super(...e),u(this,"_params",v,this),u(this,"_dataID",C,this),this.initFontSize=0,this._needUpdate=!1}set params(e){this._params=e,this._needUpdate=!0}get params(){return this._params||[]}get dataID(){return this._dataID||""}set dataID(e){this._dataID=e,this._needUpdate=!0}get string(){let e=h.getLangByID(this._dataID);return e&&this._params.length>0&&this._params.forEach((t=>{e=e.replace(`%{${t.key}}`,t.value)})),e||(r("[LanguageLabel] 未找到语言标识，使用dataID替换"),e=this._dataID),e}language(){this._needUpdate=!0}onLoad(){this._needUpdate=!0,this.getComponent(s)||this.getComponent(o)?(this.getComponent(o)&&(this.initFontSize=this.getComponent(o).fontSize),this.getComponent(s)&&(this.initFontSize=this.getComponent(s).fontSize)):p(this.node.name,this._dataID)}getLabelFont(e){switch(e){case"zh":case"tr":return"SimHei"}return"Helvetica"}setVars(e,t){let a=!1;for(let i=0;i<this._params.length;i++){let n=this._params[i];n.key===e&&(n.value=t,a=!0)}if(!a){let a=new U;a.key=e,a.value=t,this._params.push(a)}this._needUpdate=!0}update(){this._needUpdate&&(this.updateLabel(),this._needUpdate=!1)}updateLabel(){do{if(!this._dataID)break;let e=this.getComponent(s);if(!e&&(e=this.getComponent(o),!e)){r("[LanguageLabel], 该节点没有cc.Label || cc.RichText组件");break}e.string=this.string}while(0)}}).prototype,"_params",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l(z.prototype,"params",[y],Object.getOwnPropertyDescriptor(z.prototype,"params"),z.prototype),C=l(z.prototype,"_dataID",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l(z.prototype,"dataID",[D],Object.getOwnPropertyDescriptor(z.prototype,"dataID"),z.prototype),I=z))||I)||I));t._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageSprite.ts",["cc","./Logger.ts","./_rollupPluginModLoBabelHelpers.js","./ResLoader.ts","./LanguageData.ts"],(function(e){"use strict";var t,a,r,i,n,o,s,p,u,g,l,c;return{setters:[function(e){t=e.cclegacy,a=e.CCString,r=e._decorator,i=e.Component,n=e.SpriteFrame,o=e.Sprite,s=e.UITransform},function(e){p=e.Logger},function(e){u=e.applyDecoratedDescriptor,g=e.initializerDefineProperty},function(e){l=e.resLoader},function(e){c=e.LanguageData}],execute:function(){var d,S,f,h,D,L,y,b,m;t._RF.push({},"11b96k/RIZF57Loehxyl6Hs","LanguageSprite",void 0);const{ccclass:I,property:z,menu:_}=r;e("LanguageSprite",(d=I("LanguageSprite"),S=_("ui/language/LanguageSprite"),f=z({serializable:!0}),h=z({type:a,serializable:!0}),D=z({tooltip:"是否设置为图片原始资源大小"}),d(L=S((b=u((y=class extends i{constructor(...e){super(...e),g(this,"_dataID",b,this),g(this,"isRawSize",m,this)}get dataID(){return this._dataID||""}set dataID(e){this._dataID=e,this.updateSprite()}start(){this.updateSprite()}language(){this.updateSprite()}updateSprite(){let e=`language/texture/${c.current}/${this.dataID}/spriteFrame`,t=l.get(e,n);if(t){let e=this.getComponent(o);if(e.spriteFrame=t,this.isRawSize){var a;let r=t._originalSize;null===(a=e.getComponent(s))||void 0===a||a.setContentSize(r)}}else p.erroring("[LanguageSprite] 资源不存在 "+e)}}).prototype,"_dataID",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u(y.prototype,"dataID",[h],Object.getOwnPropertyDescriptor(y.prototype,"dataID"),y.prototype),m=u(y.prototype,"isRawSize",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),L=y))||L)||L));t._RF.pop()}}}));

System.register("chunks:///_virtual/GameUIConfig.ts",["cc","./LayerManager.ts"],(function(e){"use strict";var o,a;return{setters:[function(e){o=e.cclegacy},function(e){a=e.LayerType}],execute:function(){let n;e("UIID",void 0),o._RF.push({},"14663z2+5JJIYupyDayZnc3","GameUIConfig",void 0),function(e){e[e.Loading=1]="Loading",e[e.Window=2]="Window",e[e.Netinstable=3]="Netinstable",e[e.Demo=4]="Demo",e[e.Demo_Role_Info=5]="Demo_Role_Info"}(n||(n=e("UIID",{})));e("UIConfigData",{[n.Loading]:{layer:a.UI,prefab:"loading/prefab/loading"},[n.Netinstable]:{layer:a.PopUp,prefab:"common/prefab/netinstable"},[n.Window]:{layer:a.Dialog,prefab:"common/prefab/window"},[n.Demo]:{layer:a.UI,prefab:"gui/prefab/demo"},[n.Demo_Role_Info]:{layer:a.UI,prefab:"gui/prefab/role_info"}});o._RF.pop()}}}));

System.register("chunks:///_virtual/VMParent.ts",["cc","./ViewModel.ts"],(function(t){"use strict";var e,n,s,o;return{setters:[function(t){e=t.cclegacy,n=t._decorator,s=t.Component},function(t){o=t.VM}],execute:function(){var a;e._RF.push({},"15ccciO+ZRH476sPKD/LvB7","VMParent",void 0);const{ccclass:i,help:r,executionOrder:c}=n;t("default",i(a=c(-1)(a=r("https://github.com/wsssheep/cocos_creator_mvvm_tools/blob/master/docs/VMParent.md")(a=class extends s{constructor(...t){super(...t),this.tag="_temp",this.data={},this.VM=o}onLoad(){if(null==this.data)return;this.tag="_temp<"+this.node.uuid.replace(".","")+">",o.add(this.data,this.tag);let t=this.getVMComponents();for(let e=0;e<t.length;e++){const n=t[e];this.replaceVMPath(n,this.tag)}this.onBind()}onBind(){}onUnBind(){}replaceVMPath(t,e){let n=t.watchPath;if(1==t.templateMode){let n=t.watchPathArr;if(n)for(let t=0;t<n.length;t++){const s=n[t];n[t]=s.replace("*",e)}}else"*"===n.split(".")[0]&&(t.watchPath=n.replace("*",e))}getVMComponents(){let t=this.node.getComponentsInChildren("VMBase"),e=this.node.getComponentsInChildren("VMParent").filter((t=>t.uuid!==this.uuid)),n=[];return e.forEach((t=>{n=n.concat(t.getComponentsInChildren("VMBase"))})),t=t.filter((t=>n.indexOf(t)<0)),t}onDestroy(){this.onUnBind(),o.remove(this.tag),this.data=null}})||a)||a)||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/FlashSprite.ts",["cc"],(function(t){"use strict";var i,e,s,a;return{setters:[function(t){i=t.cclegacy,e=t._decorator,s=t.Component,a=t.Sprite}],execute:function(){var r;i._RF.push({},"186cbGDUSZOTJw+WfcDn1Is","FlashSprite",void 0);const{ccclass:h,property:n}=e;t("default",h("FlashSprite")(r=class extends s{constructor(...t){super(...t),this.duration=.5,this._median=0,this._time=0,this._material=null}onLoad(){this._median=this.duration/2,this._material=this.node.getComponent(a).getMaterial(0),this._material.setProperty("u_rate",1)}update(t){if(this._time>0){this._time-=t,this._time=this._time<0?0:this._time;let i=2*Math.abs(this._time-this._median)/this.duration;this._material.setProperty("u_rate",i)}}clickFlash(){this._time=this.duration}})||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/JsonUtil.ts",["cc","./ResLoader.ts","./Config.ts"],(function(e){"use strict";var t,s,a,n,o;return{setters:[function(e){t=e.cclegacy,s=e.JsonAsset,a=e.error},function(e){n=e.resLoader},function(e){o=e.config}],execute:function(){t._RF.push({},"1a24ank4nRC46jfzaIfOmtQ","JsonUtil",void 0);var i=new Map;e("JsonUtil",class{static get(e){if(i.has(e))return i.get(e)}static load(e,t){if(i.has(e))t(i.get(e));else{var r=o.game.getConfigPath(e);n.load(r,s,((s,n)=>{s&&a(s.message),i.set(e,n.json),t(n.json)}))}}static loadAsync(e){return new Promise(((t,r)=>{if(i.has(e))t(i.get(e));else{var c=o.game.getConfigPath(e);n.load(c,s,((s,n)=>{s&&a(s.message),i.set(e,n.json),t(n.json)}))}}))}static release(e){var t=o.game.getConfigPath(e);i.delete(e),n.release(t)}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/ResLoader.ts",["cc"],(function(e){"use strict";var s,r,l,o,t,n;return{setters:[function(e){s=e.assetManager,r=e.error,l=e.js,o=e.Asset,t=e.resources,n=e.cclegacy}],execute:function(){n._RF.push({},"1a2e4jFffpHrYjrpxbnC760","ResLoader",void 0);class a{loadBundle(e,l){return new Promise(((o,t)=>{s.loadBundle(e,{version:l},((e,s)=>{if(e)return r(e);o(s)}))}))}parseLoadResArgs(e,s,r,t){let n=e,a=s,d=r,u=t;if(void 0===t){const e=l.isChildClassOf(s,o);r?(u=r,e&&(d=null)):void 0!==r||e||(u=s,d=null,a=null),void 0===r||e||(d=s,a=null)}return{paths:n,type:a,onProgress:d,onComplete:u}}loadByBundleAndArgs(e,s){s.dir?e.loadDir(s.paths,s.type,s.onProgress,s.onComplete):(s.paths,e.load(s.paths,s.type,s.onProgress,s.onComplete))}loadByArgs(e){if(e.bundle)if(s.bundles.has(e.bundle)){let r=s.bundles.get(e.bundle);this.loadByBundleAndArgs(r,e)}else s.loadBundle(e.bundle,((s,r)=>{s||this.loadByBundleAndArgs(r,e)}));else this.loadByBundleAndArgs(t,e)}load(e,s,r,l,o){let t=null;"string"==typeof s||s instanceof Array?(t=this.parseLoadResArgs(s,r,l,o),t.bundle=e):t=this.parseLoadResArgs(e,s,r,l),this.loadByArgs(t)}loadDir(e,s,r,l,o){let t=null;"string"==typeof s?(t=this.parseLoadResArgs(s,r,l,o),t.bundle=e):t=this.parseLoadResArgs(e,s,r,l),t.dir=t.paths,this.loadByArgs(t)}loadRemote(e,...r){s.loadRemote(e,r)}release(e,r="resources"){var l=s.getBundle(r);null==l||l.release(e)}releaseDir(e,r="resources"){var l=s.getBundle(r),o=null==l?void 0:l.getDirWithPath(e);null==o||o.map((function(e){var r=s.assets.get(e.uuid);s.releaseAsset(r)})),""==e&&"resources"!=r&&l&&s.removeBundle(l)}get(e,r,l="resources"){return s.getBundle(l).get(e,r)}dump(){s.assets.forEach(((e,s)=>{console.log(s)})),console.log(`当前资源总数:${s.assets.count}`)}}e("default",a);e("resLoader",new a);n._RF.pop()}}}));

System.register("chunks:///_virtual/UIMap.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"1bd03ggtItIIajoqd0I4VGL","UIMap",void 0);class n{constructor(){this.parent=null,this.child=[]}}t("UIMap",class{constructor(){this.nodes=new Map}init(t,e){for(var s in this.manager=t,e){var a=e[s],r=new n;r.id=parseInt(s),r.pid=a.parent,r.name=a.name,r.panel=a.panel,this.nodes.set(r.id,r)}this.nodes.forEach(((t,e)=>{t.parent=this.nodes.get(t.pid),t.parent&&t.parent.child.push(t)}))}pathFinding(t,e){var n=this.nodes.get(t),s=this.nodes.get(e),a=this.findUp(n),r=this.findUp(s);return a.forEach((t=>{this.manager.remove(t.id,!0)})),r.forEach((t=>{this.manager.open(t.id)})),{paths_close:a,paths_open:r}}findUp(t){for(var e=[],n=t;null!=n.parent;)e.push(n),n=n.parent;return e}release(){this.nodes.clear()}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonEffect.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./ResLoader.ts","./ButtonSimple.ts"],(function(t){"use strict";var e,n,o,i,a,s,c,r;return{setters:[function(t){e=t.cclegacy,n=t._decorator,o=t.Animation,i=t.AnimationClip},function(t){a=t.applyDecoratedDescriptor,s=t.initializerDefineProperty},function(t){c=t.resLoader},function(t){r=t.default}],execute:function(){var u,l,d,f,p,m;e._RF.push({},"1be36hrGO5Oz6Eapg6ygW03","ButtonEffect",void 0);const{ccclass:h,property:b,menu:_}=n;t("default",(u=h("ButtonEffect"),l=_("ui/button/ButtonEffect"),d=b({tooltip:"是否开启"}),u(f=l((m=a((p=class extends r{constructor(...t){super(...t),s(this,"disabledEffect",m,this)}onLoad(){this.anim=this.node.addComponent(o);var t=c.get("common/anim/button_scale_start",i),e=c.get("common/anim/button_scale_end",i);this.anim.defaultClip=t,this.anim.createState(t,null==t?void 0:t.name),this.anim.createState(e,null==e?void 0:e.name),super.onLoad()}onTouchtStart(t){this.disabledEffect||this.anim.play("button_scale_start")}onTouchEnd(t){this.disabledEffect||this.anim.play("button_scale_end"),super.onTouchEnd(t)}}).prototype,"disabledEffect",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=p))||f)||f));e._RF.pop()}}}));

System.register("chunks:///_virtual/Sequence.ts",["cc","./BranchNode.ts"],(function(s){"use strict";var e,c;return{setters:[function(s){e=s.cclegacy},function(s){c=s.BranchNode}],execute:function(){e._RF.push({},"1ef80bgYZBPXqCDIpzHpbBJ","Sequence",void 0);s("Sequence",class extends c{_run(s){this._nodeRunning?this._nodeRunning.run(this._blackboard):super._run()}constructor(s){super(s)}success(){super.success(),this._actualTask+=1,this._actualTask<this.children.length?this._run(this._blackboard):this._control.success()}fail(){super.fail(),this._control.fail()}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/BehaviorTree.ts",["cc","./BTreeNode.ts"],(function(t){"use strict";var e,r,s;return{setters:[function(t){e=t.cclegacy,r=t.log},function(t){s=t.BTreeNode}],execute:function(){e._RF.push({},"22a91RP3fNG/rWWAXlmM4BT","BehaviorTree",void 0);var i=0;class o{get started(){return this._started}constructor(t,e){this._started=!1,i+=1,this.title=t.constructor.name+"(btree_"+i+")",this._root=t,this._blackboard=e}setObject(t){this._blackboard=t}run(){this._started&&r('行为树"'+this.title+'"未调用步骤，但在最后一次调用步骤时有一个任务未完成。'),this._started=!0;var t=o.getNode(this._root);this._current=t,t.setControl(this),t.start(this._blackboard),t.run(this._blackboard)}running(t){this._started=!1}success(){this._current.end(this._blackboard),this._started=!1}fail(){this._current.end(this._blackboard),this._started=!1}static register(t,e){this._registeredNodes.set(t,e)}static getNode(t){var e=t instanceof s?t:this._registeredNodes.get(t);if(!e)throw new Error('The node "'+t+'" could not be looked up. Maybe it was never registered?');return e}}t("BehaviorTree",o),o._registeredNodes=new Map,e._RF.pop()}}}));

System.register("chunks:///_virtual/VMCompsEdit.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(e){"use strict";var t,r,i,o,n,s,a,l,c;return{setters:[function(e){t=e.cclegacy,r=e.CCString,i=e.Enum,o=e.Node,n=e._decorator,s=e.Component,a=e.log},function(e){l=e.applyDecoratedDescriptor,c=e.initializerDefineProperty}],execute:function(){var p,h,u,g,_,d,E,T,b,P,f,C,y,N,O,m,A,w,M,v,L,H,D;t._RF.push({},"2359eFXKF5HFYS74K7Y17/U","VMCompsEdit",void 0);const{ccclass:R,property:k,executeInEditMode:j,menu:S,help:V}=n;var z;!function(e){e[e.SEARCH_COMPONENT=0]="SEARCH_COMPONENT",e[e.ENABLE_COMPONENT=1]="ENABLE_COMPONENT",e[e.REPLACE_WATCH_PATH=2]="REPLACE_WATCH_PATH",e[e.DELETE_COMPONENT=3]="DELETE_COMPONENT"}(z||(z={}));e("default",(p=S("ModelViewer/Edit-Comps (快速组件操作)"),h=V("https://github.com/wsssheep/cocos_creator_mvvm_tools/blob/master/docs/VMCompsEdit.md"),u=k({type:[r]}),g=k({type:i(z)}),_=k({tooltip:"勾选后,会自动查找 find list 中填写的组件",visible:function(){return this.actionType===z.SEARCH_COMPONENT}}),d=k({tooltip:"勾选后,会批量激活 find list 中填写的组件",visible:function(){return this.actionType===z.ENABLE_COMPONENT}}),E=k({tooltip:"勾选后,会批量关闭 find list 中填写的组件",visible:function(){return this.actionType===z.ENABLE_COMPONENT}}),T=k({tooltip:"允许删除节点的组件,确定需要移除请勾选,防止误操作",visible:function(){return this.actionType===z.DELETE_COMPONENT}}),b=k({tooltip:"勾选后,会批量删除 find list 中填写的组件",displayName:"[ X DELETE X ]",visible:function(){return this.allowDelete&&this.actionType===z.DELETE_COMPONENT}}),P=k({tooltip:"勾选后,会批量替换掉指定的路径",visible:function(){return this.actionType===z.REPLACE_WATCH_PATH}}),f=k({tooltip:"匹配的路径,匹配规则: 搜索开头为 game的路径",visible:function(){return this.actionType===z.REPLACE_WATCH_PATH}}),C=k({tooltip:"替换的路径,将匹配到的路径替换",visible:function(){return this.actionType===z.REPLACE_WATCH_PATH}}),y=k({tooltip:"是否搜集绑定VM组件的节点?",visible:function(){return this.actionType===z.SEARCH_COMPONENT}}),N=k({type:[o],readonly:!0,tooltip:"收集到绑定了VM组件相关的节点，可以自己跳转过去",visible:function(){return this.canCollectNodes&&this.actionType===z.SEARCH_COMPONENT}}),R(O=j(O=p(O=h((A=l((m=class extends s{constructor(...e){super(...e),c(this,"findList",A,this),c(this,"actionType",w,this),c(this,"allowDelete",M,this),c(this,"targetPath",v,this),c(this,"replacePath",L,this),c(this,"canCollectNodes",H,this),c(this,"collectNodes",D,this)}get findTrigger(){return!1}set findTrigger(e){this.setComponents(0)}get enableTrigger(){return!1}set enableTrigger(e){this.setComponents(1)}get disableTrigger(){return!1}set disableTrigger(e){this.setComponents(2)}get deleteTrigger(){return!1}set deleteTrigger(e){this.setComponents(3)}get replaceTrigger(){return!1}set replaceTrigger(e){this.setComponents(4)}onLoad(){{let e=this.getNodePath(this.node);console.error("you forget delete MVEditFinder,[path]",e)}}setComponents(e){let t=this.findList,r="搜索到当前节点下面的组件";switch(e){case 0:r="搜索到当前节点下面的组件";break;case 1:r="激活以下节点的组件";break;case 2:r="关闭以下节点的组件";break;case 3:r="删除以下节点的组件";break;case 4:r="替换以下节点的路径"}a(r),a("______________________"),t.forEach((t=>{this.searchComponent(t,e)})),a("______________________")}searchComponent(e,t=0){this.collectNodes=[];let r=this.node.getComponentsInChildren(e);null==r||r.length<1||(a("["+e+"]:"),r.forEach((e=>{let r="";switch(t<=3&&(r=!0===e.templateMode?e.watchPathArr?":[Path:"+e.watchPathArr.join("|")+"]":"":e.watchPath?":[Path:"+e.watchPath+"]":""),a(this.getNodePath(e.node)+r),t){case 0:this.canCollectNodes&&-1===this.collectNodes.indexOf(e.node)&&this.collectNodes.push(e.node);break;case 1:e.enabled=!0;break;case 2:e.enabled=!1;break;case 3:e.node.removeComponent(e);break;case 4:let t=this.targetPath,r=this.replacePath;if(!0===e.templateMode)for(let i=0;i<e.watchPathArr.length;i++){const o=e.watchPathArr[i];e.watchPathArr[i]=this.replaceNodePath(o,t,r)}else e.watchPath=this.replaceNodePath(e.watchPath,t,r)}})))}replaceNodePath(e,t,r){let i=e.split("."),o=t.split("."),n=r.split("."),s=!0;for(let e=0;e<o.length;e++)if(i[e]!==o[e]){s=!1;break}if(!0===s){for(let e=0;e<n.length;e++)i[e]=n[e];a(" 路径更新:",e,">>>",i.join("."))}return i.join(".")}getNodePath(e){let t=e,r=[];for(;t;){let e=t.getParent();if(!e)break;r.push(t.name),t=e}return r.reverse().join("/")}}).prototype,"findList",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["VMBase","VMParent"]}}),w=l(m.prototype,"actionType",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.SEARCH_COMPONENT}}),l(m.prototype,"findTrigger",[_],Object.getOwnPropertyDescriptor(m.prototype,"findTrigger"),m.prototype),l(m.prototype,"enableTrigger",[d],Object.getOwnPropertyDescriptor(m.prototype,"enableTrigger"),m.prototype),l(m.prototype,"disableTrigger",[E],Object.getOwnPropertyDescriptor(m.prototype,"disableTrigger"),m.prototype),M=l(m.prototype,"allowDelete",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l(m.prototype,"deleteTrigger",[b],Object.getOwnPropertyDescriptor(m.prototype,"deleteTrigger"),m.prototype),l(m.prototype,"replaceTrigger",[P],Object.getOwnPropertyDescriptor(m.prototype,"replaceTrigger"),m.prototype),v=l(m.prototype,"targetPath",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"game"}}),L=l(m.prototype,"replacePath",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"*"}}),H=l(m.prototype,"canCollectNodes",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),D=l(m.prototype,"collectNodes",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=m))||O)||O)||O)||O));t._RF.pop()}}}));

System.register("chunks:///_virtual/TimerManager.ts",["cc","./EventDispatcher.ts"],(function(e){"use strict";var t,s;return{setters:[function(e){t=e.cclegacy},function(e){s=e.EventDispatcher}],execute:function(){t._RF.push({},"24613PC+NpCr5pZ3aJOaQgB","TimerManager",void 0);const i=e("guid",(function(){let e="";for(let t=1;t<=32;t++){e+=Math.floor(16*Math.random()).toString(16),8!=t&&12!=t&&16!=t&&20!=t||(e+="-")}return e}));class l extends s{constructor(e){super(),this.schedules={},this._scheduleCount=1,this.initTime=(new Date).getTime(),this._$serverTimeElasped=0,this.component=e,this.schedule(this.onUpdate.bind(this),1)}serverTimeElasped(e){return e&&(this._$serverTimeElasped=e),this._$serverTimeElasped}format(e,t){let s={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(let t in s)new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?s[t]:("00"+s[t]).substr((""+s[t]).length)));return e}getTime(){return this.getLocalTime()-this.initTime}getLocalTime(){return Date.now()}schedule(e,t){let s="schedule_"+this._scheduleCount++;return this.schedules[s]=e,this.component.schedule(e,t),s}scheduleOnce(e,t=0){let s="scheduleOnce_"+this._scheduleCount++;return this.schedules[s]=e,this.component.scheduleOnce((()=>{let e=this.schedules[s];e&&e(),this.unschedule(s)}),Math.max(t,0)),s}unschedule(e){let t=this.schedules[e];t&&(this.component.unschedule(t),delete this.schedules[e])}unscheduleAllCallbacks(){for(let e in this.schedules)this.component.unschedule(this.schedules[e]);this.schedules={}}onUpdate(e){for(let e in l.times){let t=l.times[e];t.object[t.field]>0&&(t.object[t.field]--,0==t.object[t.field]?this.timerComplete(t):t.onSecond&&t.onSecond.call(t.object))}}save(){for(let e in l.times)l.times[e].startTime=this.getTime()}load(){for(let e in l.times){let t=Math.floor((this.getTime()-(l.times[e].startTime||this.getTime()))/1e3),s=l.times[e];s.object[s.field]=s.object[s.field]-t,s.object[s.field]<0&&(s.object[s.field]=0,this.timerComplete(s)),l.times[e].startTime=null}}timerComplete(e){e.onComplete&&e.onComplete.call(e.object),e.event&&this.dispatchEvent(e.event)}registerObject(e,t,s,n){let h={};return h.id=i(),h.object=e,h.field=t,h.onSecond=s,h.onComplete=n,l.times[h.id]=h,h.id}unRegisterObject(e){l.times[e]&&delete l.times[e]}register(e,t,s){let i={};i.id=e,i.event=e,i.object=t,i.field=s,l.times[i.id]=i}unRegister(e){l.times[e]&&delete l.times[e]}}e("TimerManager",l),l.times={};e("Timer",class{get elapsedTime(){return this._elapsedTime}get step(){return this._step}set step(e){this._step=e,this._elapsedTime=0}get progress(){return this._elapsedTime/this._step}constructor(e=0){this.callback=null,this._elapsedTime=0,this._step=0,this.step=e}update(e){var t;return this._elapsedTime+=e,this._elapsedTime>=this._step&&(this._elapsedTime-=this._step,null===(t=this.callback)||void 0===t||t.call(this),!0)}reset(){this._elapsedTime=0}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["cc","./StorageManager.ts","./AudioEffect.ts","./AudioMusic.ts"],(function(t){"use strict";var s,i,e,c,u,a,h;return{setters:[function(t){s=t.cclegacy,i=t.Component,e=t.Node,c=t.game},function(t){u=t.storage},function(t){a=t.AudioEffect},function(t){h=t.AudioMusic}],execute:function(){s._RF.push({},"252f0z+vPNL8Y/jsLYmomtw","AudioManager",void 0);class _ extends i{constructor(...t){super(...t),this.local_data={},this._volume_music=1,this._volume_effect=1,this._switch_music=!0,this._switch_effect=!0,this._uuid="10000",this._localStorageTag=""}static get instance(){if(null==this._instance){var t=new e("UIAudioManager");c.addPersistRootNode(t),this._instance=t.addComponent(_),this._instance.init();var s=new e("UIMusic");s.parent=t,this._instance.music=s.addComponent(h);var i=new e("UIEffect");i.parent=t,this._instance.effect=i.addComponent(a)}return this._instance}init(){let t=u.get(this._localStorageTag);if(t){try{this.local_data=JSON.parse(t),this._volume_music=this.local_data.volume_music,this._volume_effect=this.local_data.volume_effect,this._switch_music=this.local_data.switch_music,this._switch_effect=this.local_data.switch_effect}catch(t){this.local_data={},this._volume_music=1,this._volume_effect=1,this._switch_music=!0,this._switch_effect=!0}this.music.volume=this._volume_music,this.effect.volume=this._volume_effect}}setUuid(t){this._uuid=t,this._localStorageTag=`game_audio_${this._uuid}`}playMusic(t,s=null){this._switch_music&&(this.music.load(t),this.music.onComplete=s)}playEffect(t){this._switch_effect&&this.effect.load(t)}get musicVolume(){return this._volume_music}set musicVolume(t){this._volume_music=t,this.music.volume=t}get effectVolume(){return this._volume_effect}set effectVolume(t){this._volume_effect=t,this.effect.volume=t}getSwitchMusic(){return this._switch_music}setSwitchMusic(t){this._switch_music=t,0==t&&this.music.stop()}getSwitchEffect(){return this._switch_effect}setSwitchEffect(t){this._switch_effect=t,0==t&&this.effect.stop()}resumeAll(){this.music&&(this.music.play(),this.effect.play())}pauseAll(){this.music&&(this.music.pause(),this.effect.pause())}stopAll(){this.music&&(this.music.stop(),this.effect.stop())}save(){this.local_data.volume_music=this._volume_music,this.local_data.volume_effect=this._volume_effect,this.local_data.switch_music=this._switch_music,this.local_data.switch_effect=this._switch_effect;let t=JSON.stringify(this.local_data);u.set(this._localStorageTag,t)}}t("AudioManager",_),s._RF.pop()}}}));

System.register("chunks:///_virtual/LayerPopup.ts",["cc","./LayerUI.ts"],(function(e){"use strict";var t,s,r,a;return{setters:[function(e){t=e.cclegacy,s=e.Layers,r=e.BlockInputEvents},function(e){a=e.LayerUI}],execute:function(){t._RF.push({},"25d07BQBCFADaSsh/I3GrTX","LayerPopup",void 0);e("LayerPopUp",class extends a{constructor(e){super(e),this.init()}init(){this.layer=s.Enum.UI_2D,this.black=this.addComponent(r),this.black.enabled=!1}add(e,t,s){return this.black.enabled=!0,super.add(e,t,s)}remove(e,t){super.remove(e,t),this.black.enabled=!1}removeByUuid(e,t){super.removeByUuid(e,t),this.black.enabled=!1}clear(e){super.clear(e),this.black.enabled=!1,this.active=!1}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/RoleModelBaseComp.ts",["cc","./ECS.ts","./ViewModel.ts","./RoleEnum.ts","./RoleModelComp.ts"],(function(e){"use strict";var t,s,i,o,l;return{setters:[function(e){t=e.cclegacy},function(e){s=e.ecs},function(e){i=e.VM},function(e){o=e.RoleAttributeType},function(e){l=e.RoleModelComp}],execute:function(){var r;t._RF.push({},"26768Up8GVNw5SfVX2XclVH","RoleModelBaseComp",void 0);e("RoleModelBaseComp",s.register("RoleModelBase")(r=class extends s.Comp{constructor(...e){super(...e),this.vm={},this._power=0,this._physical=0,this._agile=0}get power(){return this._power}set power(e){this._power=e,this.ent.get(l).attributes.get(o.power).base=e,this.vm[o.power]=e}get physical(){return this._physical}set physical(e){this._physical=e,this.ent.get(l).attributes.get(o.physical).base=e,this.vm[o.physical]=e}get agile(){return this._agile}set agile(e){this._agile=e,this.ent.get(l).attributes.get(o.agile).base=e,this.vm[o.agile]=e}vmAdd(){i.add(this.vm,"RoleBase")}vmRemove(){i.remove("RoleBase")}reset(){for(var e in this.vmRemove(),this.vm)this.vm[e]=0}})||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorController.ts",["cc","./AnimatorParams.ts","./AnimatorState.ts"],(function(t){"use strict";var e,a,s,n;return{setters:[function(t){e=t.error,a=t.cclegacy},function(t){s=t.default},function(t){n=t.default}],execute:function(){a._RF.push({},"27946mn0AFJPJTrVQQKvSU/","AnimatorController",void 0);t("default",class{get curState(){return this._curState}get params(){return this._params}get states(){return this._states}constructor(t,e){this._jsonData=null,this._animator=null,this._params=null,this._states=null,this._anyState=null,this._curState=null,this._changeCount=0,this.animCompleteState=null,this.animComplete=!1,this._animator=t,this._jsonData=e,this._states=new Map,this._params=new s(e.parameters),this.init(e)}init(t){if(t.states.length<=0)return void e("[AnimatorController.init] 状态机json错误");let a=t.defaultState;this._anyState=new n(t.anyState,this);for(let e=0;e<t.states.length;e++){let a=new n(t.states[e],this);this._states.set(a.name,a)}this.changeState(a)}updateState(){this._curState.checkAndTrans(),this._curState!==this._anyState&&null!==this._anyState&&this._anyState.checkAndTrans()}updateAnimator(){this._changeCount=0,this.updateState(),this.animComplete&&this.animCompleteState.loop&&(this.animComplete=!1),this.params.resetAllAutoTrigger()}onAnimationComplete(){this.animComplete=!0,this.animCompleteState=this._curState}play(t){this._states.has(t)&&this._curState.name!==t&&(this.animComplete=!1,this.changeState(t))}changeState(t){if(this._changeCount++,this._changeCount>1e3)e("[AnimatorController.changeState] error: 状态切换递归调用超过1000次，transition设置可能出错!");else if(!this._states.has(t)||null!==this._curState&&this._curState.name===t)e(`[AnimatorController.changeState] error state: ${t}`);else{let e=this._curState;this._curState=this._states.get(t),this._animator.onStateChange(e,this._curState),this.updateState()}}}),a._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageData.ts",["cc"],(function(t){"use strict";var a;return{setters:[function(t){a=t.cclegacy}],execute:function(){a._RF.push({},"27fb3sjD81JlIP2KFTSWUp4","LanguageData",void 0);class e{static getLangByID(t){return e.data[t]||t}}t("LanguageData",e),e.current="",e.data={},a._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvent.ts",["cc"],(function(e){"use strict";var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){let t;e("GameEvent",void 0),n._RF.push({},"28ac0rWU79HGpJWrnyK01Gn","GameEvent",void 0),function(e){e.GameServerConnected="GameServerConnected",e.LoginSuccess="LoginSuccess"}(t||(t=e("GameEvent",{}))),n._RF.pop()}}}));

System.register("chunks:///_virtual/RoleViewController.ts",["cc","./Oops.ts"],(function(o){"use strict";var e,t,n,i,r,s,c;return{setters:[function(o){e=o.cclegacy,t=o._decorator,n=o.Component,i=o.Node,r=o.UITransform,s=o.v3},function(o){c=o.oops}],execute:function(){var l;e._RF.push({},"2a2ffJk1U9GaJF7CVOOUP2i","RoleViewController",void 0);const{ccclass:a,property:h}=t;o("RoleViewController",a("RoleViewController")(l=class extends n{constructor(...o){super(...o),this.role=null}onLoad(){c.gui.game.on(i.EventType.TOUCH_END,this.onTouchEnd,this)}onTouchEnd(o){var e=this.node.parent.getComponent(r),t=o.getUILocation().x-e.contentSize.width/2,n=o.getUILocation().y-e.contentSize.height/2;this.role.move(s(t,n)),t<this.role.RoleView.node.position.x?this.role.RoleView.animator.left():this.role.RoleView.animator.right()}onDestroy(){c.gui.game.off(i.EventType.TOUCH_END,this.onTouchEnd,this)}})||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/VMProgress.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./StringFormat.ts","./VMCustom.ts"],(function(t){"use strict";var e,r,i,a,s,o,n;return{setters:[function(t){e=t.cclegacy,r=t.CCString,i=t._decorator},function(t){a=t.applyDecoratedDescriptor,s=t.initializerDefineProperty},function(t){o=t.StringFormatFunction},function(t){n=t.default}],execute:function(){var l,h,u,c,p,m,V,g,d,f;e._RF.push({},"2a50eqI7JZNV5Sh0y/Qd9C6","VMProgress",void 0);const{ccclass:P,property:b,menu:w,help:A}=i;t("default",(l=w("ModelViewer/VM-Progress (VM-进度条)"),h=A("https://github.com/wsssheep/cocos_creator_mvvm_tools/blob/master/docs/VMProgress.md"),u=b({visible:!1,override:!0}),c=b({type:[r],tooltip:"第一个值是min 值，第二个值 是 max 值，会计算出两者的比例"}),p=b({visible:function(){return"string"===this.componentProperty},tooltip:"字符串格式化，和 VMLabel 的字段一样，需要填入对应的格式化字符串"}),P(m=l(m=h((g=a((V=class extends n{constructor(...t){super(...t),s(this,"watchPath",g,this),s(this,"watchPathArr",d,this),this.templateMode=!0,s(this,"stringFormat",f,this)}onLoad(){(this.watchPathArr.length<2||"[min]"==this.watchPathArr[0]||"[max]"==this.watchPathArr[1])&&console.error("VMProgress must have two values!"),super.onLoad()}start(){this.onValueInit()}onValueInit(){let t=this.watchPathArr.length;for(let e=0;e<t;e++)this.templateValueArr[e]=this.VM.getValue(this.watchPathArr[e]);let e=this.templateValueArr[0]/this.templateValueArr[1];this.setComponentValue(e)}setComponentValue(t){if(""!==this.stringFormat){let e=o.deal(t,this.stringFormat);super.setComponentValue(e)}else super.setComponentValue(t)}onValueController(t,e){let r=Math.round(t*this.templateValueArr[1]);Number.isNaN(r)&&(r=0),this.VM.setValue(this.watchPathArr[0],r)}onValueChanged(t,e,r){if(!1===this.templateMode)return;let i=r.join("."),a=this.watchPathArr.findIndex((t=>t===i));a>=0&&(this.templateValueArr[a]=t);let s=this.templateValueArr[0]/this.templateValueArr[1];s>1&&(s=1),(s<0||Number.isNaN(s))&&(s=0),this.setComponentValue(s)}}).prototype,"watchPath",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=a(V.prototype,"watchPathArr",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["[min]","[max]"]}}),f=a(V.prototype,"stringFormat",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=V))||m)||m)||m));e._RF.pop()}}}));

System.register("chunks:///_virtual/Config.ts",["cc","./GameConfig.ts","./ResLoader.ts","./Oops.ts","./BuildTimeConstants.ts","./GameQueryConfig.ts","./GameUIConfig.ts"],(function(t){"use strict";var e,i,n,s,o,a,c,f,g;return{setters:[function(t){e=t.cclegacy,i=t.JsonAsset,n=t.game},function(t){s=t.GameConfig},function(t){o=t.resLoader},function(t){a=t.oops},function(t){c=t.BuildTimeConstants},function(t){f=t.GameQueryConfig},function(t){g=t.UIConfigData}],execute:function(){e._RF.push({},"2f208nl7EtG/KCHb2wZ7C9P","Config",void 0);class u{init(t){let e="config/config";o.load(e,i,(()=>{var i=o.get(e);this.btc=new c,this.query=new f,this.game=new s(i),n.frameRate=this.game.frameRate,a.http.server=this.game.httpServer,a.http.timeout=this.game.httpTimeout,a.storage.init(this.game.localDataKey,this.game.localDataIv),a.gui.init(g),t()}))}}t("Config",u);t("config",new u);e._RF.pop()}}}));

System.register("chunks:///_virtual/VMBase.ts",["cc","./ViewModel.ts"],(function(t){"use strict";var e,h,n,a,i;return{setters:[function(t){e=t.cclegacy,h=t._decorator,n=t.Component,a=t.log},function(t){i=t.VM}],execute:function(){var s;e._RF.push({},"2f6f36IvUdPO7xynnVTPgzb","VMBase",void 0);const{ccclass:o,property:l}=h;t("default",o(s=class extends n{constructor(...t){super(...t),this.watchPath="",this.watchPathArr=[],this.templateMode=!1,this.templateValueArr=[],this.VM=i}onLoad(){let t=this.watchPath.split(".");for(let e=1;e<t.length;e++){if("*"==t[e]){let h=this.node.parent.children.findIndex((t=>t===this.node));h<=0&&(h=0),t[e]=h.toString();break}}this.watchPath=t.join(".");let e=this.watchPathArr;if(e.length>=1)for(let t=0;t<e.length;t++){let h=e[t].split(".");for(let t=1;t<h.length;t++){if("*"==h[t]){let e=this.node.parent.children.findIndex((t=>t===this.node));e<=0&&(e=0),h[t]=e.toString();break}}this.watchPathArr[t]=h.join(".")}""==this.watchPath&&""==this.watchPathArr.join("")&&a("可能未设置路径的节点:",this.node.parent.name+"."+this.node.name)}onEnable(){this.templateMode?this.setMultPathEvent(!0):""!=this.watchPath&&this.VM.bindPath(this.watchPath,this.onValueChanged,this),this.onValueInit()}onDisable(){this.templateMode?this.setMultPathEvent(!1):""!=this.watchPath&&this.VM.unbindPath(this.watchPath,this.onValueChanged,this)}setMultPathEvent(t=!0){let e=this.watchPathArr;for(let h=0;h<e.length;h++){const n=e[h];t?this.VM.bindPath(n,this.onValueChanged,this):this.VM.unbindPath(n,this.onValueChanged,this)}}onValueInit(){}onValueChanged(t,e,h){}})||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/LanguagePack.ts",["cc","./Logger.ts","./ResLoader.ts","./LanguageData.ts","./LanguageLabel.ts","./LanguageSprite.ts"],(function(e){"use strict";var t,a,n,s,g,o,l,r,u,i;return{setters:[function(e){t=e.cclegacy,a=e.JsonAsset,n=e.director,s=e.warn,g=e.error},function(e){o=e.Logger},function(e){l=e.resLoader},function(e){r=e.LanguageData},function(e){u=e.LanguageLabel},function(e){i=e.LanguageSprite}],execute:function(){t._RF.push({},"2ffebyj59xIc4v4BZty8SDm","LanguagePack",void 0);e("LanguagePack",class{constructor(){this._langjsonPath="lang_json",this._langTexturePath="lang_texture"}setAssetsPath(e,t){e&&(this._langjsonPath=e),t&&(this._langTexturePath=t)}updateLanguage(e){let t=l.get(`${this._langjsonPath}/${e}`,a);if(t&&t.json){r.data=t.json;let e=n.getScene().children;for(let t=0;t<e.length;++t){let a=e[t].getComponentsInChildren(u);for(let e=0;e<a.length;e++)a[e].language();let n=e[t].getComponentsInChildren(i);for(let e=0;e<n.length;e++)n[e].language()}}else s("没有找到指定语言内容配置",e)}loadLanguageAssets(e,t){let n=`${this._langTexturePath}/${e}`,s=`${this._langjsonPath}/${e}`;l.loadDir(n,(r=>{if(r)return g(r),void t(r);o.logConfig(n,"下载语言包 textures 资源"),l.load(s,a,(a=>{if(a)return g(a),void t(a);o.logConfig(s,"下载语言包 json 资源"),t(a,e)}))}))}releaseLanguageAssets(e){let t=`${this._langTexturePath}/${e}`;l.releaseDir(t),o.logBusiness(t,"释放语言图片资源");let a=`${this._langjsonPath}/${e}`;l.release(a),o.logBusiness(a,"释放语言文字资源")}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/Account.ts",["cc","./MessageManager.ts","./ECS.ts","./GameEvent.ts","./AccountModelComp.ts","./AccountNetData.ts"],(function(e){"use strict";var t,n,c,s,o,a,r;return{setters:[function(e){t=e.cclegacy},function(e){n=e.Message},function(e){c=e.ecs},function(e){s=e.GameEvent},function(e){o=e.AccountModelComp},function(e){a=e.AccountNetDataComp,r=e.AccountNetDataSystem}],execute:function(){t._RF.push({},"33c06qSPa9MRbTUOf1u+7SR","Account",void 0);class i extends c.Entity{init(){this.addComponents(o),this.addEvent()}destroy(){this.removeEvent(),super.destroy()}addEvent(){n.on(s.GameServerConnected,this.onHandler,this)}removeEvent(){n.off(s.GameServerConnected,this.onHandler,this)}onHandler(e,t){switch(e){case s.GameServerConnected:this.getPlayer()}}connect(){n.dispatchEvent(s.GameServerConnected)}getPlayer(){this.add(a)}}e("Account",i);class u extends c.System{constructor(){super(),this.add(new r)}}e("EcsAccountSystem",u),t._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorState.ts",["cc","./AnimatorTransition.ts"],(function(t){"use strict";var i,s;return{setters:[function(t){i=t.cclegacy},function(t){s=t.default}],execute:function(){i._RF.push({},"35bc99JMwxHma93NXeqlzTA","AnimatorState",void 0);t("default",class{get name(){return this._name}get motion(){return this._motion}get loop(){return this._loop}get multi(){return this._multi}get speed(){return this._speed}set speed(t){this._speed=t}constructor(t,i){this._name="",this._motion="",this._loop=!1,this._speed=1,this._multi="",this._transitions=[],this._ac=null,this._name=t.state,this._motion=t.motion||"",this._loop=t.loop||!1,this._speed=t.speed||1,this._multi=t.multiplier||"",this._ac=i;for(let e=0;e<t.transitions.length;e++){let n=new s(t.transitions[e],i);n.isValid()&&this._transitions.push(n)}}checkAndTrans(){for(let t=0;t<this._transitions.length;t++){let i=this._transitions[t];if(i&&i.check())return void i.doTrans()}}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/Language.ts",["cc","./Logger.ts","./EventDispatcher.ts","./LanguageData.ts","./LanguagePack.ts"],(function(e){"use strict";var t,a,n,s,g,u,r;return{setters:[function(e){t=e.cclegacy,a=e.warn,n=e.error},function(e){s=e.Logger},function(e){g=e.EventDispatcher},function(e){u=e.LanguageData},function(e){r=e.LanguagePack}],execute:function(){let i;e("LanguageEvent",void 0),t._RF.push({},"3757cxZqLZObIdvP/gQ6Yuj","Language",void 0),function(e){e.CHANGE="LanguageEvent.CHANGE",e.RELEASE_RES="LanguageEvent.RELEASE_RES"}(i||(i=e("LanguageEvent",{})));e("LanguageManager",class extends g{constructor(...e){super(...e),this._support=["zh","en","tr"],this._languagePack=new r}set supportLanguages(e){this._support=e}get current(){return u.current}get languages(){return this._support}isExist(e){return this.languages.indexOf(e)>-1}getNextLang(){let e=this.languages,t=e.indexOf(u.current);return e[(t+1)%e.length]}setLanguage(e,t){e||(e="zh"),e=e.toLowerCase(),this.languages.indexOf(e)<0&&(a("当前不支持该语种"+e+" 将自动切换到 zh 语种!"),e="zh"),e!==u.current?this.loadLanguageAssets(e,((a,g)=>{if(a)return n("语言资源包下载失败",a),void t(!1);s.logConfig(`当前语言为【${e}】`),u.current=e,this._languagePack.updateLanguage(e),this.dispatchEvent(i.CHANGE,g),t(!0)})):t(!1)}setAssetsPath(e,t){this._languagePack.setAssetsPath(e,t)}getLangByID(e){return u.getLangByID(e)}loadLanguageAssets(e,t){return e=e.toLowerCase(),this._languagePack.loadLanguageAssets(e,t)}releaseLanguageAssets(e){e=e.toLowerCase(),this._languagePack.releaseLanguageAssets(e),this.dispatchEvent(i.RELEASE_RES,e)}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/Vec3Util.ts",["cc","./MathUtil.ts"],(function(t){"use strict";var e,r,a,n;return{setters:[function(t){e=t.cclegacy,r=t.Vec3,a=t.Mat4},function(t){n=t.MathUtil}],execute:function(){e._RF.push({},"38947ih8d5EQ7HG4buug+SR","Vec3Util",void 0);class i{static get x(){return new r(1,0,0)}static get y(){return new r(0,1,0)}static get z(){return new r(0,0,1)}static get left(){return new r(-1,0,0)}static get right(){return new r(1,0,0)}static get up(){return new r(0,1,0)}static get down(){return new r(0,-1,0)}static get forward(){return new r(0,0,1)}static get back(){return new r(0,0,-1)}static get one(){return new r(1,1,1)}static get zero(){return new r(0,0,0)}static progress(t,e,a){var i=new r;return i.x=n.progress(t.x,e.x,a),i.y=n.progress(t.y,e.y,a),i.z=n.progress(t.z,e.z,a),i}static add(t,e){var a=new r;return r.add(a,t,e),a}static sub(t,e){var a=new r;return r.subtract(a,t,e),a}static mul(t,e){var a=new r;return r.multiplyScalar(a,t,e),a}static div(t,e){var a=new r;return a.x=t.x/e,a.y=t.y/e,a.z=t.z/e,a}static equals(t,e){return t.x==e.x&&t.y==e.y&&t.z==e.z}static magnitude(t){return t.length()}static normalize(t){return new r(t.x,t.y,t.z).normalize()}static direction(t,e){var a=new r;return r.subtract(a,e,t),a.normalize()}static distance(t,e){return r.distance(t,e)}static lerp(t,e,r){return this.bezierOne(r,t,e)}static slerp(t,e,a){if(a<=0)return t;if(a>=1)return e;var n=this.rotateTo(t,e,r.angle(t,e)/Math.PI*180*a),i=e.length()*a+t.length()*(1-a);return n.normalize().multiplyScalar(i)}static rotateTo(t,e,n){if(0==r.angle(t,e))return e;var i=new r;r.cross(i,t,e),i.normalize();var c=n*Math.PI/180,l=new a;return l.rotate(c,i),new r(t.x*l.m00+t.y*l.m04+t.z*l.m08,t.x*l.m01+t.y*l.m05+t.z*l.m09,t.x*l.m02+t.y*l.m06+t.z*l.m10)}static bezierOne(t,e,r){t>1?t=1:t<0&&(t=0);var a=e.clone(),n=r.clone();return a.multiplyScalar(1-t).add(n.multiplyScalar(t))}static bezierTwo(t,e,r,a){t>1?t=1:t<0&&(t=0);var n=1-t,i=t*t,c=e.clone(),l=e.clone(),s=r.clone(),u=a.clone();return l.add(c.multiplyScalar(n*n)),l.add(s.multiplyScalar(2*n*t)),l.add(u.multiplyScalar(i)),l}static bezierThree(t,e,r,a,n){t>1?t=1:t<0&&(t=0);var i=1-t,c=i*i,l=c*i,s=t*t,u=s*t,o=e.clone(),d=e.clone(),m=r.clone(),y=a.clone(),z=n.clone();return d.add(o.multiplyScalar(l)),d.add(m.multiplyScalar(3*c*t)),d.add(y.multiplyScalar(3*i*s)),d.add(z.multiplyScalar(u)),d}static dot(t,e){var r=t,a=e;return r.x*a.x+r.y*a.y+r.z*a.z}static cross(t,e){var a=new r(1,0,0),n=new r(0,1,0),i=new r(0,0,1),c=new r(t.x,t.y,t.z),l=new r(e.x,e.y,e.z),s=a.multiplyScalar(c.y*l.z-l.y*c.z),u=n.multiplyScalar(l.x*c.z-c.x*l.z),o=i.multiplyScalar(c.x*l.y-l.x*c.y);return s.add(u).add(o)}static angle(t,e){var r=this.dot(t.clone().normalize(),e.clone().normalize());return Math.acos(r)/Math.PI*180*Math.sign(r)}static dirAngle(t,e){var r=i.cross(t,e);return i.angle(t,e)*Math.sign(i.dot(r.normalize(),i.cross(e.normalize(),t.normalize())))}}t("Vec3Util",i),e._RF.pop()}}}));

System.register("chunks:///_virtual/EffectFinishedRelease.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./EffectSingleCase.ts"],(function(e){"use strict";var t,i,n,s,o,a,c;return{setters:[function(e){t=e.cclegacy,i=e.Animation,n=e._decorator,s=e.Component},function(e){o=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){c=e.EffectSingleCase}],execute:function(){var r,l,p,f,u;t._RF.push({},"39094ZZkaxEopI3+Rf9Bpyk","EffectFinishedRelease",void 0);const{ccclass:h,property:d}=n;e("EffectFinishedRelease",(r=h("EffectFinishedRelease"),l=d({type:i,tooltip:"资源对象池类型名"}),r((u=o((f=class extends s{constructor(...e){super(...e),a(this,"anim",u,this)}onLoad(){this.anim.on(i.EventType.FINISHED,this.onFinished,this),this.anim.on(i.EventType.LASTFRAME,this.onFinished,this)}start(){this.anim.play()}onFinished(){c.instance.put(this.node)}}).prototype,"anim",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p));t._RF.pop()}}}));

System.register("chunks:///_virtual/BhvButtonGroup.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(t){"use strict";var i,n,e,r,o,a,l,s,u,p;return{setters:[function(t){i=t.cclegacy,n=t.Enum,e=t.Button,r=t.SpriteFrame,o=t.EventHandler,a=t._decorator,l=t.color,s=t.Component},function(t){u=t.applyDecoratedDescriptor,p=t.initializerDefineProperty}],execute:function(){var c,h,b,f,m,d,v,E,y,C,g,T,S,z,L,R,w,D,I,N,_,H,O,B,P,x,M,A,G,X,k;i._RF.push({},"41df676L55LvJ52uxkQpfxJ","BhvButtonGroup",void 0);const{ccclass:F,property:J,menu:U}=a;var j;!function(t){t[t.CHILDREN_INDEX=0]="CHILDREN_INDEX",t[t.CHILDREN_NAME=1]="CHILDREN_NAME"}(j||(j={}));t("default",(c=U("添加特殊行为/UI/Button Group(一组按钮控制)"),h=J({type:n(e.Transition)}),b=J({visible:function(){return this.transition===e.Transition.COLOR}}),f=J({visible:function(){return this.transition===e.Transition.COLOR}}),m=J({visible:function(){return this.transition===e.Transition.COLOR}}),d=J({visible:function(){return this.transition===e.Transition.COLOR}}),v=J({type:r,visible:function(){return this.transition===e.Transition.SPRITE}}),E=J({type:r,visible:function(){return this.transition===e.Transition.SPRITE}}),y=J({type:r,visible:function(){return this.transition===e.Transition.SPRITE}}),C=J({type:r,visible:function(){return this.transition===e.Transition.SPRITE}}),g=J({visible:function(){return this.transition===e.Transition.SCALE||this.transition===e.Transition.COLOR}}),T=J({visible:function(){return this.transition===e.Transition.SCALE}}),S=J({type:n(j)}),z=J({type:[o]}),L=J({tooltip:"规避3.x引擎BUG，EventHandler.component位为空导致找不到触发事件的脚本名的问题",readonly:!0}),F(R=c((D=u((w=class extends s{constructor(...t){super(...t),p(this,"transition",D,this),p(this,"hoverColor",I,this),p(this,"normalColor",N,this),p(this,"pressedColor",_,this),p(this,"disabledColor",H,this),p(this,"normalSprite",O,this),p(this,"pressedSprite",B,this),p(this,"hoverSprite",P,this),p(this,"disabledSprite",x,this),p(this,"duration",M,this),p(this,"zoomScale",A,this),p(this,"paramType",G,this),p(this,"touchEvents",X,this),p(this,"EventHandler_component",k,this)}onLoad(){this.node.children.forEach(((t,i)=>{let n=t.getComponent(e);null==n&&(n=t.addComponent(e)),this.touchEvents.forEach((e=>{let r=new o;r.component=""==e.component?this.EventHandler_component:e.component,r.handler=e.handler,r.target=e.target,this.paramType===j.CHILDREN_INDEX?r.customEventData=i.toString():r.customEventData=t.name,n.clickEvents.push(r)}))}))}}).prototype,"transition",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e.Transition.NONE}}),I=u(w.prototype,"hoverColor",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return l(255,255,255)}}),N=u(w.prototype,"normalColor",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return l(214,214,214)}}),_=u(w.prototype,"pressedColor",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return l(211,211,211)}}),H=u(w.prototype,"disabledColor",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return l(124,124,124)}}),O=u(w.prototype,"normalSprite",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=u(w.prototype,"pressedSprite",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=u(w.prototype,"hoverSprite",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=u(w.prototype,"disabledSprite",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=u(w.prototype,"duration",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),A=u(w.prototype,"zoomScale",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.1}}),G=u(w.prototype,"paramType",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.CHILDREN_INDEX}}),X=u(w.prototype,"touchEvents",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=u(w.prototype,"EventHandler_component",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"VMModify"}}),R=w))||R)||R));i._RF.pop()}}}));

System.register("chunks:///_virtual/NetGameTips.ts",["cc","./Logger.ts","./MessageManager.ts","./GameEvent.ts","./TipsManager.ts"],(function(e){"use strict";var t,n,s,c,o;return{setters:[function(e){t=e.cclegacy},function(e){n=e.Logger},function(e){s=e.Message},function(e){c=e.GameEvent},function(e){o=e.tips}],execute:function(){t._RF.push({},"446e8kFjPpJwq94XGBFl1Tc","NetGameTips",void 0);e("NetGameTips",class{connectTips(e){e?(n.logNet("游戏服务器正在连接"),o.netInstableOpen()):(n.logNet("游戏服务器连接成功"),o.netInstableClose(),s.dispatchEvent(c.GameServerConnected))}disconnectTips(){o.alert("net_server_disconnected",(()=>{}))}reconnectTips(e){}requestTips(e){}responseErrorCode(e){console.log("游戏服务器错误码",e),e<0?o.alert("netcode_"+e,(()=>{})):o.alert("netcode_"+e)}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorSkeletal.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./AnimatorAnimation.ts"],(function(t){"use strict";var i,e,a,n,o,r,s,l;return{setters:[function(t){i=t.cclegacy,e=t.SkeletalAnimation,a=t.CCFloat,n=t._decorator,o=t.game},function(t){r=t.applyDecoratedDescriptor,s=t.initializerDefineProperty},function(t){l=t.default}],execute:function(){var u,c,m,p,h,_;i._RF.push({},"45bd5Mc5AhIlqNsx24/MSJu","AnimatorSkeletal",void 0);const{ccclass:d,property:S,requireComponent:M,disallowMultiple:f,menu:y}=n;t("AnimatorSkeletal",(u=M(e),c=y("animator/AnimatorSkeletal"),m=S({type:a,tooltip:"动画切换过度时间"}),d(p=f(p=u(p=c((_=r((h=class extends l{constructor(...t){super(...t),s(this,"duration",_,this),this.cross_duration=0,this.current_time=0}onLoad(){this.cross_duration=1e3*this.duration}playAnimation(t,i){t&&(o.totalTime-this.current_time>this.cross_duration?this._animation.crossFade(t,this.duration):this._animation.play(t),this.current_time=o.totalTime,this._animState=this._animation.getState(t),this._animState&&(this._wrapModeMap.has(this._animState)||this._wrapModeMap.set(this._animState,this._animState.wrapMode),this._animState.wrapMode=i?2:this._wrapModeMap.get(this._animState)))}}).prototype,"duration",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),p=h))||p)||p)||p)||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/ArrayUtil.ts",["cc"],(function(t){"use strict";var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"4613b2zY/dMSaGPBGo6eti3","ArrayUtil",void 0);t("default",class{static noRepeated(t){for(var r=[t[0]],e=1;e<t.length;e++){for(var a=!1,n=0;n<r.length;n++)if(t[e]==r[n]){a=!0;break}a||r.push(t[e])}return r}static copy2DArray(t){let r=[];for(let e=0;e<t.length;e++)r.push(t[e].concat());return r}static fisherYatesShuffle(t){let r=t.length;for(;r;){let e=Math.floor(Math.random()*r--),a=t[r];t[r]=t[e],t[e]=a}return t}static confound(t){return t.slice().sort((()=>Math.random()-.5))}static flattening(t){for(;t.some((t=>Array.isArray(t)));)t=[].concat.apply([],t);return t}static removeItem(t,r){var e=t.concat();for(let a=0;a<e.length;a++){if(r==e[a]){t.splice(a,1);break}}}static combineArrays(t,r){return[...t,...r]}static getRandomValueInArray(t){return t[Math.floor(Math.random()*t.length)]}}),r._RF.pop()}}}));

System.register("chunks:///_virtual/Demo.ts",["cc","./ECS.ts","./Oops.ts","./GameUIConfig.ts","./SingletonModuleComp.ts","./TipsManager.ts"],(function(n){"use strict";var t,o,e,c,a,u,s,g;return{setters:[function(n){t=n.cclegacy,o=n._decorator,e=n.Component},function(n){c=n.ecs},function(n){a=n.oops},function(n){u=n.UIID},function(n){s=n.SingletonModuleComp},function(n){g=n.tips}],execute:function(){var l;t._RF.push({},"46770277MVCUJmttx/Kqt/a","Demo",void 0);const{ccclass:i,property:_}=o;n("Demo",i("Demo")(l=class extends e{constructor(...n){super(...n),this.lang=!0}onLoad(){}btn_long(n,t){a.gui.toast(t)}btn_level_up(n,t){c.getSingleton(s).account.AccountModel.role.upgrade()}btn_attack(n,t){c.getSingleton(s).account.AccountModel.role.attack()}btn_change_job9(n,t){c.getSingleton(s).account.AccountModel.role.changeJob(9)}btn_change_job5(n,t){c.getSingleton(s).account.AccountModel.role.changeJob(5)}btn_change_job1(n,t){c.getSingleton(s).account.AccountModel.role.changeJob(1)}btn_open_role_info(n,t){a.gui.open(u.Demo_Role_Info)}btn_language(n,t){console.log(a.language.getLangByID("notify_show")),0==this.lang?(this.lang=!0,a.language.setLanguage("zh",(()=>{}))):(this.lang=!1,a.language.setLanguage("en",(()=>{})))}btn_common_prompt(n,t){g.test((()=>{})),g.test((()=>{}))}btn_notify_show(n,t){a.gui.toast("common_prompt_content")}netInstableOpen(n,t){g.netInstableOpen(),setTimeout((()=>{g.netInstableClose()}),2e3)}btn_audio_open1(n,t){a.audio.musicVolume=.5,a.audio.playMusic("audios/nocturne")}btn_audio_open2(n,t){a.audio.playEffect("audios/Gravel")}})||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/VMState.ts",["cc","./ViewModel.ts","./_rollupPluginModLoBabelHelpers.js","./VMBase.ts"],(function(e){"use strict";var t,i,n,o,a,r,l,u,c,s,h,p,f,N;return{setters:[function(e){t=e.cclegacy,i=e.Enum,n=e.CCInteger,o=e.Node,a=e._decorator,r=e.color,l=e.Button,u=e.Sprite,c=e.Renderable2D,s=e.UIOpacity},function(e){h=e.VM},function(e){p=e.applyDecoratedDescriptor,f=e.initializerDefineProperty},function(e){N=e.default}],execute:function(){var C,b,d,O,m,E,v,A,y,_,T,g,D,V,M,w,I,S,P,k,L,R,z,B,U,Y,F,X,x,G,j;t._RF.push({},"47052uw/Y5O1LXaLObj4ARx","VMState",void 0);const{ccclass:H,property:q,menu:J,help:K}=a;var Q,W,Z;!function(e){e[e["=="]=0]="==",e[e["!="]=1]="!=",e[e[">"]=2]=">",e[e[">="]=3]=">=",e[e["<"]=4]="<",e[e["<="]=5]="<=",e[e.range=6]="range"}(Q||(Q={})),function(e){e[e.NODE_ACTIVE=0]="NODE_ACTIVE",e[e.NODE_VISIBLE=1]="NODE_VISIBLE",e[e.NODE_OPACITY=2]="NODE_OPACITY",e[e.NODE_COLOR=3]="NODE_COLOR",e[e.COMPONENT_CUSTOM=4]="COMPONENT_CUSTOM",e[e.SPRITE_GRAYSCALE=5]="SPRITE_GRAYSCALE",e[e.BUTTON_INTERACTABLE=6]="BUTTON_INTERACTABLE"}(W||(W={})),function(e){e[e.NODE_INDEX=0]="NODE_INDEX",e[e.NODE_NAME=1]="NODE_NAME"}(Z||(Z={}));e("default",(C=J("ModelViewer/VM-State (VM状态控制)"),b=K("https://github.com/wsssheep/cocos_creator_mvvm_tools/blob/master/docs/VMState.md"),d=q({tooltip:"遍历子节点,根据子节点的名字或名字转换为值，判断值满足条件 来激活"}),O=q({type:i(Q)}),m=q({type:i(Z),tooltip:"遍历子节点,根据子节点的名字转换为值，判断值满足条件 来激活",visible:function(){return!0===this.foreachChildMode}}),E=q({displayName:"Value: a",visible:function(){return!1===this.foreachChildMode}}),v=q({displayName:"Value: b",visible:function(){return!1===this.foreachChildMode&&this.condition===Q.range}}),A=q({type:i(W),tooltip:"一旦满足条件就对节点执行操作"}),y=q({visible:function(){return this.valueAction===W.NODE_OPACITY},range:[0,255],type:n,displayName:"Action Opacity"}),_=q({visible:function(){return this.valueAction===W.NODE_COLOR},displayName:"Action Color"}),T=q({visible:function(){return this.valueAction===W.COMPONENT_CUSTOM},displayName:"Component Name"}),g=q({visible:function(){return this.valueAction===W.COMPONENT_CUSTOM},displayName:"Component Property"}),D=q({visible:function(){return this.valueAction===W.COMPONENT_CUSTOM},displayName:"Default Value"}),V=q({visible:function(){return this.valueAction===W.COMPONENT_CUSTOM},displayName:"Action Value"}),M=q({type:[o],tooltip:"需要执行条件的节点，如果不填写则默认会执行本节点以及本节点的所有子节点 的状态"}),H(w=C(w=b((S=p((I=class extends N{constructor(...e){super(...e),f(this,"watchPath",S,this),f(this,"foreachChildMode",P,this),f(this,"condition",k,this),f(this,"foreachChildType",L,this),f(this,"valueA",R,this),f(this,"valueB",z,this),f(this,"valueAction",B,this),f(this,"valueActionOpacity",U,this),f(this,"valueActionColor",Y,this),f(this,"valueComponentName",F,this),f(this,"valueComponentProperty",X,this),f(this,"valueComponentDefaultValue",x,this),f(this,"valueComponentActionValue",G,this),f(this,"watchNodes",j,this)}onLoad(){super.onLoad(),0==this.watchNodes.length&&(this.valueAction!==W.NODE_ACTIVE&&!1===this.foreachChildMode&&this.watchNodes.push(this.node),this.watchNodes=this.watchNodes.concat(this.node.children))}start(){this.enabled&&this.onValueInit()}onValueInit(){let e=h.getValue(this.watchPath);this.checkNodeFromValue(e)}onValueChanged(e,t,i){this.checkNodeFromValue(e)}checkNodeFromValue(e){if(this.foreachChildMode)this.watchNodes.forEach(((t,i)=>{let n=this.foreachChildType===Z.NODE_INDEX?i:t.name,o=this.conditionCheck(e,n);this.setNodeState(t,o)}));else{let t=this.conditionCheck(e,this.valueA,this.valueB);this.setNodesStates(t)}}setNodesStates(e){let t=this.watchNodes,i=e;t.forEach((e=>{this.setNodeState(e,i)}))}setNodeState(e,t){let i=t;switch(this.valueAction){case W.NODE_ACTIVE:e.active=!!i;break;case W.NODE_VISIBLE:{let t=e.getComponent(s);if(null==t&&(t=e.addComponent(s)),t){t.opacity=i?255:0;break}}case W.NODE_OPACITY:{let t=e.getComponent(s);if(null==t&&(t=e.addComponent(s)),t){t.opacity=i?this.valueActionOpacity:255;break}}case W.NODE_COLOR:{let t=e.getComponent(c);if(t){t.color=i?this.valueActionColor:r(255,255,255);break}}case W.COMPONENT_CUSTOM:let t=e.getComponent(this.valueComponentName);if(null==t)return;this.valueComponentProperty in t&&(t[this.valueComponentProperty]=i?this.valueComponentActionValue:this.valueComponentDefaultValue);break;case W.SPRITE_GRAYSCALE:{let t=e.getComponent(u);if(t){t.grayscale=i;break}}case W.BUTTON_INTERACTABLE:{let t=e.getComponent(l);if(t){t.interactable=i;break}}}}conditionCheck(e,t,i){let n=Q;switch(this.condition){case n["=="]:if(e==t)return!0;break;case n["!="]:if(e!=t)return!0;break;case n["<"]:if(e<t)return!0;break;case n[">"]:if(e>t)return!0;break;case n[">="]:if(e>=t)return!0;break;case n["<"]:if(e<t)return!0;break;case n["<="]:if(e<=t)return!0;break;case n.range:if(e>=t&&e<=i)return!0}return!1}}).prototype,"watchPath",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),P=p(I.prototype,"foreachChildMode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=p(I.prototype,"condition",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Q["=="]}}),L=p(I.prototype,"foreachChildType",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Z.NODE_INDEX}}),R=p(I.prototype,"valueA",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=p(I.prototype,"valueB",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=p(I.prototype,"valueAction",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return W.NODE_ACTIVE}}),U=p(I.prototype,"valueActionOpacity",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Y=p(I.prototype,"valueActionColor",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return r(155,155,155)}}),F=p(I.prototype,"valueComponentName",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),X=p(I.prototype,"valueComponentProperty",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=p(I.prototype,"valueComponentDefaultValue",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),G=p(I.prototype,"valueComponentActionValue",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),j=p(I.prototype,"watchNodes",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=I))||w)||w)||w));t._RF.pop()}}}));

System.register("chunks:///_virtual/AccountModelComp.ts",["cc","./ECS.ts"],(function(e){"use strict";var c,t;return{setters:[function(e){c=e.cclegacy},function(e){t=e.ecs}],execute:function(){var o;c._RF.push({},"48e3172BRZA+ZLehWBTVmsA","AccountModelComp",void 0);e("AccountModelComp",t.register("AccountModel")(o=class extends t.Comp{constructor(...e){super(...e),this.currency={},this.role=null}reset(){}})||o);c._RF.pop()}}}));

System.register("chunks:///_virtual/VMLabel.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./StringFormat.ts","./VMBase.ts"],(function(t){"use strict";var e,i,r,l,a,n,s,o;return{setters:[function(t){e=t.cclegacy,i=t.CCString,r=t._decorator,l=t.error},function(t){a=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){s=t.StringFormatFunction},function(t){o=t.default}],execute:function(){var h,c,u,p,m,b,g,f,d,V,L,M;e._RF.push({},"545c05XsG9GDJispEGWKvYv","VMLabel",void 0);const{ccclass:T,property:y,menu:x,executeInEditMode:w,help:A}=r,F="cc.Label";t("default",(h=x("ModelViewer/VM-Label(文本VM)"),c=A("https://github.com/wsssheep/cocos_creator_mvvm_tools/blob/master/docs/VMLabel.md"),u=y({tooltip:"是否启用模板代码,只能在运行时之前设置,\n将会动态解析模板语法 {{0}},并且自动设置监听的路径"}),p=y({readonly:!0}),m=y({visible:function(){return!1===this.templateMode}}),b=y({type:[i],visible:function(){return!0===this.templateMode}}),T(g=w(g=h(g=c((d=a((f=class extends o{constructor(...t){super(...t),n(this,"templateMode",d,this),n(this,"labelType",V,this),n(this,"watchPath",L,this),n(this,"watchPathArr",M,this),this.templateValueArr=[],this.templateFormatArr=[],this.originText=null}onRestore(){this.checkLabel()}onLoad(){super.onLoad(),this.checkLabel(),this.templateMode&&(this.originText=this.getLabelValue(),this.parseTemplate())}start(){this.onValueInit()}parseTemplate(){let t=/\{\{(.+?)\}\}/,e=this.originText.match(/\{\{(.+?)\}\}/g);if(null!=e)for(let i=0;i<e.length;i++){let r=e[i].match(t)[1].split(":")[1]||"";this.templateFormatArr[i]=r}}getReplaceText(){if(!this.originText)return"";let t=/\{\{(.+?)\}\}/,e=this.originText.match(/\{\{(.+?)\}\}/g);if(null==e)return"";let i=this.originText;for(let r=0;r<e.length;r++){const l=e[r];let a,n=l.match(t),s=parseInt(n[1]||"0")||0,o=this.templateFormatArr[r];a=this.templateValueArr[s],i=i.replace(l,this.getValueFromFormat(a,o))}return i}getValueFromFormat(t,e){return s.deal(t,e)}onValueInit(){if(!1===this.templateMode)this.setLabelValue(this.VM.getValue(this.watchPath));else{let t=this.watchPathArr.length;for(let e=0;e<t;e++)this.templateValueArr[e]=this.VM.getValue(this.watchPathArr[e],"?");this.setLabelValue(this.getReplaceText())}}onValueChanged(t,e,i){if(!1===this.templateMode)this.setLabelValue(t);else{let e=i.join("."),r=this.watchPathArr.findIndex((t=>t===e));r>=0&&(this.templateValueArr[r]=t,this.setLabelValue(this.getReplaceText()))}}setLabelValue(t){this.getComponent(this.labelType).string=t+""}getLabelValue(){return this.getComponent(this.labelType).string}checkLabel(){let t=["cc.Label","cc.RichText","cc.EditBox"];for(let e=0;e<t.length;e++){const i=t[e];if(this.node.getComponent(i))return this.labelType=i,!0}return l("没有挂载任何label组件"),!1}}).prototype,"templateMode",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V=a(f.prototype,"labelType",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F}}),L=a(f.prototype,"watchPath",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),M=a(f.prototype,"watchPathArr",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=f))||g)||g)||g)||g));e._RF.pop()}}}));

System.register("chunks:///_virtual/ViewModel.ts",["cc","./JsonOb.ts"],(function(t){"use strict";var e,i,n;return{setters:[function(t){e=t.cclegacy,i=t.director},function(t){n=t.JsonOb}],execute:function(){e._RF.push({},"54f75k4X+RP0qaXOzrfZysL","ViewModel",void 0);const o="VC:";function r(t,e,i,n=""){let o=e.split(".");for(let r=0;r<o.length;r++){const s=o[r];if(s in t==!1){console.error("["+s+"] not find in "+n+"."+e);break}r==o.length-1?t[s]=i:t=t[s]}}function s(t,e,i,n=""){let o=e.split(".");for(let r=0;r<o.length;r++){const s=o[r];if(s in t==!1)return console.error("["+s+"] not find in "+n+"."+e),i;t=t[s]}return null==t&&(t=i),t}class l{constructor(t,e){this._tag=null,this.active=!0,this.emitToRootPath=!1,new n(t,this._callback.bind(this)),this.$data=t,this._tag=e}_callback(t,e,n){if(1==this.active){let r=o+this._tag+"."+n.join(".");if(i.emit(r,t,e,[this._tag].concat(n)),this.emitToRootPath&&i.emit(o+this._tag,t,e,n),n.length>=2)for(let t=0;t<n.length-1;t++){n[t]}}}setValue(t,e){r(this.$data,t,e,this._tag)}getValue(t,e){return s(this.$data,t,e,this._tag)}}t("VM",new class{constructor(){this._mvs=new Map,this.setObjValue=r,this.getObjValue=s}add(t,e="global",i=!1){let n=new l(t,e),o=this._mvs.get(e);e.includes(".")?console.error("cant write . in tag:",e):o?console.error("already set VM tag:"+e):(n.emitToRootPath=i,this._mvs.set(e,n))}remove(t){this._mvs.delete(t)}get(t){return this._mvs.get(t)}addValue(t,e){let i=(t=t.trim()).split(".");i.length<2&&console.error("Cant find path:"+t);let n=this.get(i[0]);if(!n)return void console.error("Cant Set VM:"+i[0]);let o=i.slice(1).join(".");n.setValue(o,n.getValue(o)+e)}getValue(t,e){let i=(t=t.trim()).split(".");if(i.length<2)return void console.error("Get Value Cant find path:"+t);let n=this.get(i[0]);if(n)return n.getValue(i.slice(1).join("."),e);console.error("Cant Get VM:"+i[0])}setValue(t,e){let i=(t=t.trim()).split(".");if(i.length<2)return void console.error("Set Value Cant find path:"+t);let n=this.get(i[0]);n?n.setValue(i.slice(1).join("."),e):console.error("Cant Set VM:"+i[0])}bindPath(t,e,n,r){""!=(t=t.trim())?"*"!==t.split(".")[0]?i.on(o+t,e,n,r):console.error(t,"路径不合法,可能错误覆盖了 VMParent 的onLoad 方法, 或者父节点并未挂载 VMParent 相关的组件脚本"):console.error(n.node.name,"节点绑定的路径为空")}unbindPath(t,e,n){"*"!==(t=t.trim()).split(".")[0]?i.off(o+t,e,n):console.error(t,"路径不合法,可能错误覆盖了 VMParent 的onLoad 方法, 或者父节点并未挂载 VMParent 相关的组件脚本")}inactive(){this._mvs.forEach((t=>{t.active=!1}))}active(){this._mvs.forEach((t=>{t.active=!1}))}});e._RF.pop()}}}));

System.register("chunks:///_virtual/RoleNumeric.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){let s;e("RoleModuleType",void 0),t._RF.push({},"5565079T3JNp7JldpSO7spj","RoleNumeric",void 0),function(e){e[e.Base=0]="Base",e[e.Job=1]="Job",e[e.Level=2]="Level",e[e.Equip=3]="Equip",e[e.Decorator=4]="Decorator",e[e.Skill=5]="Skill"}(s||(s=e("RoleModuleType",{})));e("RoleNumeric",class{constructor(e,t){this.onUpdate=null,this.type=null,this.value=0,this.values=new Map,this.type=e,this.attributes=t;var l=s;for(var u in l){var i=Number(u);i>-1&&this.values.set(i,0)}}getValue(e){return this.values.get(e)}setValue(e,t){this.values.set(e,t),this.update()}update(){var e=0;this.values.forEach((t=>{e+=t})),this.value=e,this.onUpdate&&this.onUpdate(this)}reset(){this.values.clear(),this.update()}get base(){return this.getValue(s.Base)}set base(e){this.setValue(s.Base,e)}get level(){return this.getValue(s.Level)}set level(e){this.setValue(s.Level,e)}get job(){return this.getValue(s.Job)}set job(e){this.setValue(s.Job,e)}get equip(){return this.getValue(s.Equip)}set equip(e){this.setValue(s.Equip,e)}get decorator(){return this.getValue(s.Decorator)}set decorator(e){this.setValue(s.Decorator,e)}get skill(){return this.getValue(s.Skill)}set skill(e){this.setValue(s.Skill,e)}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/LabelTime.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Oops.ts"],(function(t){"use strict";var e,i,r,o,s,a;return{setters:[function(t){e=t.cclegacy,i=t._decorator,r=t.Label},function(t){o=t.applyDecoratedDescriptor,s=t.initializerDefineProperty},function(t){a=t.oops}],execute:function(){var n,l,c,h,u,m,p,d,b,f,y,g;e._RF.push({},"57786GMN6RPbaAT9b9RmX18","LabelTime",void 0);const{ccclass:D,property:z,menu:F}=i;t("default",(n=D("LabelTime"),l=F("ui/label/LabelTime"),c=z({tooltip:"到计时间总时间（单位秒）"}),h=z({tooltip:"天数数据格式化"}),u=z({tooltip:"时间格式化"}),m=z({tooltip:"是否有00"}),n(p=l((b=o((d=class extends r{constructor(...t){super(...t),s(this,"countDown",b,this),s(this,"dayFormat",f,this),s(this,"timeFormat",y,this),s(this,"zeroize",g,this)}replace(t,...e){return t.replace(/\{(\d+)\}/g,(function(t,i){return e[i]}))}format(){let t=this.countDown,e=Math.floor(t/86400);t-=86400*e;let i=Math.floor(t/3600);t-=3600*i;let r=Math.floor(t/60);t-=60*r;let o=t;if(this.dateDisable=this.dateDisable||!1,0==e&&0==i&&0==r&&0==o)this.zeroize?this.result=this.replace(this.timeFormat,"00","00","00"):this.result=this.replace(this.timeFormat,"0","0","0");else if(e>0&&!this.dateDisable){let t=this.dayFormat,r=t.indexOf("{1}");0==i&&r>-1&&(t=t.substring(0,r-1));let o=t;e>1&&t.indexOf("days")<0&&(o=o.replace("day","days")),e<2&&(o=o.replace("days","day")),this.result=this.replace(o,e,i)}else i+=24*e,this.zeroize?this.result=this.replace(this.timeFormat,this.coverString(i),this.coverString(r),this.coverString(o)):this.result=this.replace(this.timeFormat,i,r,o);this.string=this.result}coverString(t){return t<10?"0"+t:t.toString()}setDateDisable(t){this.dateDisable=t}setCdTime(t){this.countDown=t,this.format()}start(){this.format(),this.timeId=a.timer.registerObject(this,"countDown",this.onSecond,this.onComplete)}onDestroy(){a.timer.unRegisterObject(this.timeId)}onSecond(){this.format(),this.second&&this.second(this.node)}onComplete(){this.format(),this.complete&&this.complete(this.node)}}).prototype,"countDown",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3}}),f=o(d.prototype,"dayFormat",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"{0} day"}}),y=o(d.prototype,"timeFormat",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"{0}:{1}:{2}"}}),g=o(d.prototype,"zeroize",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p=d))||p)||p));e._RF.pop()}}}));

System.register("chunks:///_virtual/NetNode.ts",["cc","./Logger.ts"],(function(e){"use strict";var t,s,i,n;return{setters:[function(e){t=e.cclegacy,s=e.error,i=e.warn},function(e){n=e.Logger}],execute:function(){e({NetNodeState:void 0,NetTipsType:void 0}),t._RF.push({},"57f0fB90kNBUJ98yyu+jxjx","NetNode",void 0);var r=["已关闭","连接中","验证中","可传输数据"];let o,c;!function(e){e[e.Connecting=0]="Connecting",e[e.ReConnecting=1]="ReConnecting",e[e.Requesting=2]="Requesting"}(o||(o=e("NetTipsType",{}))),function(e){e[e.Closed=0]="Closed",e[e.Connecting=1]="Connecting",e[e.Checking=2]="Checking",e[e.Working=3]="Working"}(c||(c=e("NetNodeState",{})));e("NetNode",class{constructor(){this._connectOptions=null,this._autoReconnect=0,this._isSocketInit=!1,this._isSocketOpen=!1,this._state=c.Closed,this._socket=null,this._networkTips=null,this._protocolHelper=null,this._connectedCallback=null,this._disconnectCallback=null,this._callbackExecuter=null,this._keepAliveTimer=null,this._receiveMsgTimer=null,this._reconnectTimer=null,this._heartTime=1e4,this._receiveTime=6e6,this._reconnetTimeOut=8e6,this._requests=Array(),this._listener={}}init(e,t,s=null,i=null){n.logNet("网络初始化"),this._socket=e,this._protocolHelper=t,this._networkTips=s,this._callbackExecuter=i||((e,t)=>{e.callback.call(e.target,t)})}connect(e){return!(!this._socket||this._state!=c.Closed)&&(this._isSocketInit||this.initSocket(),this._state=c.Connecting,this._socket.connect(e)?(null==this._connectOptions&&"number"==typeof e.autoReconnect&&(this._autoReconnect=e.autoReconnect),this._connectOptions=e,this.updateNetTips(o.Connecting,!0),!0):(this.updateNetTips(o.Connecting,!1),!1))}initSocket(){this._socket&&(this._socket.onConnected=e=>{this.onConnected(e)},this._socket.onMessage=e=>{this.onMessage(e)},this._socket.onError=e=>{this.onError(e)},this._socket.onClosed=e=>{this.onClosed(e)},this._isSocketInit=!0)}updateNetTips(e,t){this._networkTips&&(e==o.Requesting?this._networkTips.requestTips(t):e==o.Connecting?this._networkTips.connectTips(t):e==o.ReConnecting&&this._networkTips.reconnectTips(t))}onConnected(e){n.logNet("网络已连接"),this._isSocketOpen=!0,null!==this._connectedCallback?(this._state=c.Checking,this._connectedCallback((()=>{this.onChecked()}))):this.onChecked(),n.logNet(`网络已连接当前状态为【${r[this._state]}】`)}onChecked(){n.logNet("连接验证成功，进入工作状态"),this._state=c.Working,this.updateNetTips(o.Connecting,!1),this.updateNetTips(o.ReConnecting,!1);var e=this._requests.concat();if(e.length>0){n.logNet(`请求【${this._requests.length}】个待发送的信息`);for(var t=0;t<e.length;){let s=e[t];this._socket.send(s.buffer),null==s.rspObject||""!=s.rspCmd?e.splice(t,1):++t}this.updateNetTips(o.Requesting,this._requests.length>0)}}onMessage(e){var t=JSON.parse(e);if(!this._protocolHelper.checkResponsePackage(t))return void s("校验接受消息数据异常");this._protocolHelper.handlerResponsePackage(t)||this._networkTips&&this._networkTips.responseErrorCode(t.code),this.resetReceiveMsgTimer(),this.resetHearbeatTimer();let i=this._protocolHelper.getPackageId(t);if(n.logNet(`接受到命令【${i}】的消息`),this._requests.length>0){for(let e in this._requests){let s=this._requests[e];if(s.rspCmd==i&&s.rspObject){n.logNet(`触发请求命令【${i}】的回调`),this._callbackExecuter(s.rspObject,t.data),this._requests.splice(parseInt(e),1);break}}0==this._requests.length?this.updateNetTips(o.Requesting,!1):n.logNet(`请求队列中还有【${this._requests.length}】个请求在等待`)}let r=this._listener[i];if(null!=r)for(const e of r)n.logNet(`触发监听命令【${i}】的回调`),this._callbackExecuter(e,t.data)}onError(e){s(e)}onClosed(e){this.clearTimer(),!this._disconnectCallback||this._disconnectCallback()?this.isAutoReconnect()?(this.updateNetTips(o.ReConnecting,!0),this._reconnectTimer=setTimeout((()=>{this._socket.close(),this._state=c.Closed,this.connect(this._connectOptions),this._autoReconnect>0&&(this._autoReconnect-=1)}),this._reconnetTimeOut)):this._state=c.Closed:n.logNet("断开连接")}close(e,t){this.clearTimer(),this._listener={},this._requests.length=0,this._networkTips&&(this._networkTips.connectTips(!1),this._networkTips.reconnectTips(!1),this._networkTips.requestTips(!1)),this._socket?this._socket.close(e,t):this._state=c.Closed}closeSocket(e,t){this._socket&&this._socket.close(e,t)}send(e,t=!1){return this._state==c.Working||t?this._socket.send(e):this._state==c.Checking||this._state==c.Connecting?(this._requests.push({buffer:e,rspCmd:"",rspObject:null}),n.logNet(`当前状态为【${r[this._state]}】,繁忙并缓冲发送数据`),0):(s(`当前状态为【${r[this._state]}】,请求错误`),-1)}request(e,t,s=!0,i=!1){var n=this._protocolHelper.handlerRequestPackage(e);this.base_request(e,n,t,s,i)}requestUnique(e,t,s=!0,i=!1){var r=this._protocolHelper.handlerRequestPackage(e);for(let e=0;e<this._requests.length;++e)if(this._requests[e].rspCmd==r)return n.logNet(`命令【${r}】重复请求`),!1;return this.base_request(e,r,t,s,i),!0}base_request(e,t,s,i=!0,r=!1){var l=JSON.stringify(e);(this._state==c.Working||r)&&this._socket.send(l),n.logNet(`队列命令为【${t}】的请求，等待请求数据的回调`),this._requests.push({buffer:l,rspCmd:t,rspObject:s}),i&&this.updateNetTips(o.Requesting,!0)}setResponeHandler(e,t,i){return null==t?(s(`命令为【${e}】设置响应处理程序错误`),!1):(this._listener[e]=[{target:i,callback:t}],!0)}addResponeHandler(e,t,i){if(null==t)return s(`命令为【${e}】添加响应处理程序错误`),!1;let n={target:i,callback:t};if(null==this._listener[e])this._listener[e]=[n];else{-1==this.getNetListenersIndex(e,n)&&this._listener[e].push(n)}return!0}removeResponeHandler(e,t,s){if(null!=this._listener[e]&&null!=t){let i=this.getNetListenersIndex(e,{target:s,callback:t});-1!=i&&this._listener[e].splice(i,1)}}cleanListeners(e=""){""==e?this._listener={}:delete this._listener[e]}getNetListenersIndex(e,t){let s=-1;for(let i=0;i<this._listener[e].length;i++){let n=this._listener[e][i];if(n.callback==t.callback&&n.target==t.target){s=i;break}}return s}resetReceiveMsgTimer(){null!==this._receiveMsgTimer&&clearTimeout(this._receiveMsgTimer),this._receiveMsgTimer=setTimeout((()=>{i("接收消息定时器关闭网络连接"),this._socket.close()}),this._receiveTime)}resetHearbeatTimer(){null!==this._keepAliveTimer&&clearTimeout(this._keepAliveTimer),this._keepAliveTimer=setTimeout((()=>{n.logNet("网络节点保持活跃发送心跳信息"),this.send(this._protocolHelper.getHearbeat())}),this._heartTime)}clearTimer(){null!==this._receiveMsgTimer&&clearTimeout(this._receiveMsgTimer),null!==this._keepAliveTimer&&clearTimeout(this._keepAliveTimer),null!==this._reconnectTimer&&clearTimeout(this._reconnectTimer)}isAutoReconnect(){return 0!=this._autoReconnect}rejectReconnect(){this._autoReconnect=0,this.clearTimer()}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/IControl.ts",["cc"],(function(){"use strict";var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"58450TyE3JB069KO8P5+hl4","IControl",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/AudioMusic.ts",["cc","./ResLoader.ts"],(function(s){"use strict";var t,i,e,r,u,o;return{setters:[function(s){t=s.cclegacy,i=s._decorator,e=s.AudioSource,r=s.AudioClip,u=s.error},function(s){o=s.resLoader}],execute:function(){var l;t._RF.push({},"5c1f3kqGetBiIv48/CvuaQv","AudioMusic",void 0);const{ccclass:c,menu:h}=i;s("AudioMusic",c("AudioMusic")(l=class extends e{constructor(...s){super(...s),this.onComplete=null,this._progress=0,this._url=null,this._isPlay=!1}get progress(){return this._progress=this.currentTime/this.duration,this._progress}set progress(s){this._progress=s,this.currentTime=s*this.duration}load(s,t){o.load(s,r,((i,e)=>{i&&u(i),this.playing&&(this.stop(),o.release(this._url)),this.clip=e,this.currentTime=0,this.play(),t&&t(),this._url=s}))}update(s){this.currentTime>0&&(this._isPlay=!0),this._isPlay&&0==this.playing&&(this._isPlay=!1,this.onComplete&&this.onComplete())}release(){this._url&&(o.release(this._url),this._url=null)}})||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/RootSystem.ts",["cc","./ECS.ts","./Role.ts","./Account.ts","./EcsPositionSystem.ts"],(function(t){"use strict";var s,e,c,o,n;return{setters:[function(t){s=t.cclegacy},function(t){e=t.ecs},function(t){c=t.EcsRoleSystem},function(t){o=t.EcsAccountSystem},function(t){n=t.EcsPositionSystem}],execute:function(){s._RF.push({},"5f57bSBu5VI4qFH27JpZu6K","RootSystem",void 0);class u extends e.RootSystem{constructor(){super(),this.add(new n),this.add(new o),this.add(new c)}}t("RootSystem",u),s._RF.pop()}}}));

System.register("chunks:///_virtual/RoleViewComp.ts",["cc","./ECS.ts","./_rollupPluginModLoBabelHelpers.js","./RoleEvent.ts","./CCComp.ts","./RoleViewAnimator.ts","./RoleViewController.ts","./RoleViewLoader.ts"],(function(e){"use strict";var o,t,n,i,r,l,s,a,c,p,u;return{setters:[function(e){o=e.cclegacy,t=e.sp,n=e._decorator},function(e){i=e.ecs},function(e){r=e.applyDecoratedDescriptor,l=e.initializerDefineProperty},function(e){s=e.RoleEvent},function(e){a=e.CCComp},function(e){c=e.RoleViewAnimator},function(e){p=e.RoleViewController},function(e){u=e.RoleViewLoader}],execute:function(){var h,d,m,C,R,f;o._RF.push({},"60726sarbtIDJfLLE+75yKL","RoleViewComp",void 0);const{ccclass:w,property:V}=n;e("RoleViewComp",(h=w("RoleViewComp"),d=i.register("RoleView",!1),m=V({type:t.Skeleton,tooltip:"角色动画"}),h(C=d((f=r((R=class extends a{constructor(...e){super(...e),l(this,"spine",f,this),this.loader=null,this.animator=null,this.controller=null}onLoad(){var e=this.ent;this.loader=this.node.addComponent(u),this.loader.load(e.RoleModel.anim),this.animator=this.spine.getComponent(c),this.animator.role=e,this.controller=this.node.addComponent(p),this.controller.role=e,this.on(s.ChangeJob,this.onHandler,this)}onHandler(e,o){switch(e){case s.ChangeJob:this.animator.refresh()}}reset(){this.node.destroy()}}).prototype,"spine",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=R))||C)||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/FlashSpine.ts",["cc"],(function(t){"use strict";var e,i,s,a,n;return{setters:[function(t){e=t.cclegacy,i=t._decorator,s=t.Component,a=t.sp,n=t.Material}],execute:function(){var r;e._RF.push({},"636cfxY0jdEZ79McA+klivm","FlashSpine",void 0);const{ccclass:o,property:h}=i;t("default",o("FlashSpine")(r=class extends s{constructor(...t){super(...t),this.duration=.5,this._median=0,this._time=0,this._material=null,this._skeleton=null}onLoad(){this._median=this.duration/2,this._skeleton=this.node.getComponent(a.Skeleton),this._material=this._skeleton.customMaterial,this._material.setProperty("u_rate",1)}update(t){if(this._time>0){this._time-=t,this._time=this._time<0?0:this._time;let e=2*Math.abs(this._time-this._median)/this.duration,i=new n;i.copy(this._material),this._skeleton.customMaterial=i,i.setProperty("u_rate",e)}}clickFlash(){this._time=this.duration}})||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/RoleModelJobComp.ts",["cc","./ECS.ts","./RoleEnum.ts","./RoleModelComp.ts","./JsonUtil.ts"],(function(t){"use strict";var e,o,i,s,a;return{setters:[function(t){e=t.cclegacy},function(t){o=t.ecs},function(t){i=t.RoleAttributeType},function(t){s=t.RoleModelComp},function(t){a=t.JsonUtil}],execute:function(){var r,n,l;e._RF.push({},"6414fy1WmVLuaszw7+aE64/","RoleModelJobComp",void 0);t("RoleModelJobComp",o.register("RoleModelJob")((l=n=class t extends o.Comp{constructor(...t){super(...t),this._id=-1}init(e){var o=a.get(t.TableName);this.data=o[e],console.log(`【职业编号】${e},力量：${this.power},敏捷：${this.agile} `);var r=this.ent.get(s).attributes;r.get(i.power).job=this.power,r.get(i.agile).job=this.agile}get id(){return this._id}set id(t){this.init(t),this._id=t}get armsName(){return this.data.armsName}get power(){return this.data.power}get agile(){return this.data.agile}get weaponType(){return this.data.weaponType}reset(){this._id=-1,this.data=null}},n.TableName="arms",r=l))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/SpineFinishedRelease.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./ResLoader.ts"],(function(e){"use strict";var t,s,i,n,o,r,a;return{setters:[function(e){t=e.cclegacy,s=e._decorator,i=e.Component,n=e.sp},function(e){o=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){a=e.resLoader}],execute:function(){var h,p,l;t._RF.push({},"64c19hfOCFDR7ZP9ZHrY69u","SpineFinishedRelease",void 0);const{ccclass:c,property:u}=s;e("SpineFinishedRelease",c("SpineFinishedRelease")((l=o((p=class extends i{constructor(...e){super(...e),r(this,"isDestroy",l,this),this.resPath=null}setResPath(e){this.resPath=e}onLoad(){this.spine=this.getComponent(n.Skeleton),this.spine.setCompleteListener(this.onSpineComplete.bind(this)),this.resPath?a.load(this.resPath,n.SkeletonData,((e,t)=>{e?console.error(`加载【${this.resPath}】的 SPINE 资源不存在`):(this.spine.skeletonData=t,this.spine.setAnimation(0,"animation",!1))})):this.spine.setAnimation(0,"animation",!1)}onSpineComplete(){this.isDestroy?this.node.destroy():this.node.removeFromParent()}}).prototype,"isDestroy",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),h=p))||h);t._RF.pop()}}}));

System.register("chunks:///_virtual/CommonPrompt.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Oops.ts","./LanguageLabel.ts"],(function(t){"use strict";var e,n,i,o,c,l,s;return{setters:[function(t){e=t.cclegacy,n=t._decorator,i=t.Component},function(t){o=t.applyDecoratedDescriptor,c=t.initializerDefineProperty},function(t){l=t.oops},function(t){s=t.LanguageLabel}],execute:function(){var a,r,u,h,f,b,p,g,d,_,m;e._RF.push({},"653bf8VPC5Fn49zFJFqXVgx","CommonPrompt",void 0);const{ccclass:y,property:k,menu:C}=n;t("default",(a=y("CommonPrompt"),r=k(s),u=k(s),h=k(s),f=k(s),a((g=o((p=class extends i{constructor(...t){super(...t),c(this,"lab_title",g,this),c(this,"lab_content",d,this),c(this,"lab_ok",_,this),c(this,"lab_cancel",m,this),this.config={}}onTouchEnd(t,e){switch(t.target.name){case"btn_ok":this.onOk();break;case"btn_cancel":this.onCancel()}}onAdded(t={}){this.config=t||{},this.setTitle(),this.setContent(),this.setBtnOkLabel(),this.setBtnCancelLabel(),this.node.active=!0}setTitle(){this.lab_title.dataID=this.config.title}setContent(){this.lab_content.dataID=this.config.content}setBtnOkLabel(){this.lab_ok.dataID=this.config.okWord}setBtnCancelLabel(){this.lab_cancel.dataID=this.config.cancelWord,this.lab_cancel.node.parent.active=this.config.needCancel||!1}onOk(){"function"==typeof this.config.okFunc&&this.config.okFunc(),this.close()}onClose(){"function"==typeof this.config.closeFunc&&this.config.closeFunc(),this.close()}onCancel(){"function"==typeof this.config.cancelFunc&&this.config.cancelFunc(),this.close()}close(){l.gui.removeByNode(this.node)}onDestroy(){this.config=null}}).prototype,"lab_title",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=o(p.prototype,"lab_content",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=o(p.prototype,"lab_ok",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=o(p.prototype,"lab_cancel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=p))||b));e._RF.pop()}}}));

System.register("chunks:///_virtual/DrawMeshSector.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(e){"use strict";var t,r,i,s,a,n,o,u,c,h,l;return{setters:[function(e){t=e.cclegacy,r=e.Material,i=e._decorator,s=e.Component,a=e.MeshRenderer,n=e.macro,o=e.Vec3,u=e.gfx,c=e.utils},function(e){h=e.applyDecoratedDescriptor,l=e.initializerDefineProperty}],execute:function(){var p,d,f,m,g,M,b,y,v,w,R;t._RF.push({},"696924EnDdA7YKa9VYTB+/y","DrawMeshSector",void 0);const{ccclass:A,property:D}=i;e("DrawMeshSector",(p=A("DrawSectorMesh"),d=D({type:r}),f=D({tooltip:"外圈半径"}),m=D({tooltip:"内圈半径"}),g=D({tooltip:"扇形角度"}),p((y=h((b=class extends s{constructor(...e){super(...e),l(this,"mat",y,this),l(this,"radius",v,this),l(this,"innerRadius",w,this),l(this,"angledegree",R,this)}start(){this.createMesh()}createMesh(){const e=this.addComponent(a),t=Math.floor(this.angledegree/4)+1;for(var r=[],i=2*t+2,s=new Array(i),h=this.angledegree*n.RAD,l=h,p=h/t,d=0;d<i;d+=2){var f=Math.cos(l),m=Math.sin(l);s[d]=new o(this.radius*f,0,this.radius*m),s[d+1]=new o(this.innerRadius*f,0,this.innerRadius*m),l-=p,r.push(s[d].x),r.push(s[d].y),r.push(s[d].z),r.push(s[d+1].x),r.push(s[d+1].y),r.push(s[d+1].z)}for(var g=6*t,M=new Array(g),b=(d=0,0);d<g;d+=6,b+=2)M[d]=b,M[d+1]=b+3,M[d+2]=b+1,M[d+3]=b+2,M[d+4]=b+3,M[d+5]=b;var y=[];for(d=0;d<i;d++){var v=s[d].x/this.radius/2+.5,w=s[d].z/this.radius/2+.5;y.push(v,w)}var R={positions:r,indices:M,uvs:y,primitiveMode:u.PrimitiveMode.TRIANGLE_FAN,attributes:[{name:u.AttributeName.ATTR_NORMAL,format:u.Format.RGB32F}]};const A=c.createMesh(R);e.mesh=A,e.material=this.mat}}).prototype,"mat",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=h(b.prototype,"radius",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),w=h(b.prototype,"innerRadius",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),R=h(b.prototype,"angledegree",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),M=b))||M));t._RF.pop()}}}));

System.register("chunks:///_virtual/AccountNetData.ts",["cc","./MessageManager.ts","./ECS.ts","./StorageManager.ts","./Oops.ts","./GameEvent.ts","./NetConfig.ts","./Role.ts","./AccountModelComp.ts"],(function(e){"use strict";var t,o,s,a,c,l,n,i,d;return{setters:[function(e){t=e.cclegacy,o=e.v3},function(e){s=e.Message},function(e){a=e.ecs},function(e){c=e.storage},function(e){l=e.oops},function(e){n=e.GameEvent},null,function(e){i=e.Role},function(e){d=e.AccountModelComp}],execute:function(){var r;t._RF.push({},"699d51NeD5NRb69k81G+Znx","AccountNetData",void 0);let u=e("AccountNetDataComp",a.register("AccountNetData")(r=class extends a.Comp{reset(){}})||r);class g extends a.ComblockSystem{filter(){return a.allOf(u,d)}entityEnter(e){let t=t=>{this.setLocalStorage(t.id),this.createRole(e,t),s.dispatchEvent(n.LoginSuccess)};t({id:1,name:"Oops",power:10,agile:10,physical:10,lv:1,jobId:1}),e.remove(u)}createRole(e,t){var s=a.getEntity(i);s.RoleModel.id=t.id,s.RoleModel.name=t.name,s.RoleModelBase.power=t.power,s.RoleModelBase.agile=t.agile,s.RoleModelBase.physical=t.physical,s.upgrade(t.lv),s.RoleModelJob.id=t.jobId,s.RoleModel.vmAdd(),s.RoleModelLevel.vmAdd(),s.RoleModelBase.vmAdd(),s.load(l.gui.game,o(0,-300,0)),e.AccountModel.role=s}setLocalStorage(e){c.setUser(e),c.set("account",e)}}e("AccountNetDataSystem",g),t._RF.pop()}}}));

System.register("chunks:///_virtual/MessageManager.ts",["cc"],(function(e){"use strict";var t,s,n;return{setters:[function(e){t=e.cclegacy,s=e.warn,n=e.log}],execute:function(){t._RF.push({},"6ace4f1UCxCjqeyvfvEJgyN","MessageManager",void 0);class l{}e("MessageEventData",class{constructor(){this.events={}}on(e,t,s){let n=this.events[e];null==n&&(n=[],this.events[e]=n);let i=new l;i.event=e,i.listener=t,i.obj=s,n.push(i),o.on(e,t,s)}off(e){let t=this.events[e];if(t){for(let s of t)o.off(e,s.listener,s.obj);delete this.events[e]}}dispatchEvent(e,t=null){o.dispatchEvent(e,t)}removes(){for(let e in this.events)this.off(e)}});class i{constructor(){this.events={}}on(e,t,n){if(!e||!t)return void s(`注册【${e}】事件的侦听器函数为空`);let i=this.events[e];null==i&&(i=[],this.events[e]=i);let o=i.length;for(let l=0;l<o;l++){let o=i[l];o.listener==t&&o.obj==n&&s(`名为【${e}】的事件重复注册侦听器`)}let r=new l;r.event=e,r.listener=t,r.obj=n,i.push(r)}once(e,t,s){let n=(l,i)=>{this.off(e,n,s),n=null,t.call(s,l,i)};this.on(e,n,s)}off(e,t,s){let l=this.events[e];if(!l)return void n(`名为【${e}】的事件不存在`);let i=l.length;for(let e=0;e<i;e++){let n=l[e];if(n.listener==t&&n.obj==s){l.splice(e,1);break}}0==l.length&&delete this.events[e]}dispatchEvent(e,t=null){let s=this.events[e];if(null!=s){let n=s.concat(),l=n.length;for(let s=0;s<l;s++){let l=n[s];l.listener.call(l.obj,e,t)}}}}i.Instance=new i;const o=e("Message",i.Instance);t._RF.pop()}}}));

System.register("chunks:///_virtual/FreeFlightCamera.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(e){"use strict";var t,o,i,n,s,h,r,a,c,p,l;return{setters:[function(e){t=e.cclegacy,o=e.KeyCode,i=e.CCFloat,n=e._decorator,s=e.math,h=e.Component,r=e.input,a=e.Input,c=e.game},function(e){p=e.applyDecoratedDescriptor,l=e.initializerDefineProperty}],execute:function(){var d,y,u,_,v,C,S,T,f,m,E,g;t._RF.push({},"6c841mU+4JNvqwHy5tJsJh0","FreeFlightCamera",void 0);const{ccclass:x,property:k,menu:w}=n,{Vec2:z,Vec3:F,Quat:U}=s,b=new z,A=new z,D=new F,O=new U,H="W".charCodeAt(0),K="S".charCodeAt(0),L="A".charCodeAt(0),M="D".charCodeAt(0),P="Q".charCodeAt(0),W="E".charCodeAt(0),N=o.SHIFT_LEFT;e("FreeFlightCamera",(d=x("FreeFlightCamera"),y=w("oops/camera/FreeFlightCamera"),u=k({type:i,tooltip:"移动速度"}),_=k({type:i,tooltip:"按Shift键后的速度"}),v=k({type:i,slide:!0,range:[.05,.5,.01],tooltip:"移动后惯性效果"}),C=k({type:i,tooltip:"旋转速度"}),d(S=y((f=p((T=class extends h{constructor(...e){super(...e),l(this,"moveSpeed",f,this),l(this,"moveSpeedShiftScale",m,this),l(this,"damp",E,this),l(this,"rotateSpeed",g,this),this._euler=new F,this._velocity=new F,this._position=new F,this._speedScale=1}onLoad(){r.on(a.EventType.MOUSE_WHEEL,this.onMouseWheel,this),r.on(a.EventType.KEY_DOWN,this.onKeyDown,this),r.on(a.EventType.KEY_UP,this.onKeyUp,this),r.on(a.EventType.TOUCH_START,this.onTouchStart,this),r.on(a.EventType.TOUCH_MOVE,this.onTouchMove,this),r.on(a.EventType.TOUCH_END,this.onTouchEnd,this),F.copy(this._euler,this.node.eulerAngles),F.copy(this._position,this.node.position)}onDestroy(){r.off(a.EventType.MOUSE_WHEEL,this.onMouseWheel,this),r.off(a.EventType.KEY_DOWN,this.onKeyDown,this),r.off(a.EventType.KEY_UP,this.onKeyUp,this),r.off(a.EventType.TOUCH_START,this.onTouchStart,this),r.off(a.EventType.TOUCH_MOVE,this.onTouchMove,this),r.off(a.EventType.TOUCH_END,this.onTouchEnd,this)}update(e){F.transformQuat(D,this._velocity,this.node.rotation),F.scaleAndAdd(this._position,this._position,D,this.moveSpeed*this._speedScale),F.lerp(D,this.node.position,this._position,e/this.damp),this.node.setPosition(D),U.fromEuler(O,this._euler.x,this._euler.y,this._euler.z),U.slerp(O,this.node.rotation,O,e/this.damp),this.node.setRotation(O)}onMouseWheel(e){const t=-e.getScrollY()*this.moveSpeed*.1;F.transformQuat(D,F.UNIT_Z,this.node.rotation),F.scaleAndAdd(this._position,this.node.position,D,t)}onKeyDown(e){const t=this._velocity;e.keyCode===N?this._speedScale=this.moveSpeedShiftScale:e.keyCode===H?0===t.z&&(t.z=-1):e.keyCode===K?0===t.z&&(t.z=1):e.keyCode===L?0===t.x&&(t.x=-1):e.keyCode===M?0===t.x&&(t.x=1):e.keyCode===P?0===t.y&&(t.y=-1):e.keyCode===W&&0===t.y&&(t.y=1)}onKeyUp(e){const t=this._velocity;e.keyCode===N?this._speedScale=1:e.keyCode===H?t.z<0&&(t.z=0):e.keyCode===K?t.z>0&&(t.z=0):e.keyCode===L?t.x<0&&(t.x=0):e.keyCode===M?t.x>0&&(t.x=0):e.keyCode===P?t.y<0&&(t.y=0):e.keyCode===W&&t.y>0&&(t.y=0)}onTouchStart(e){c.canvas.requestPointerLock()}onTouchMove(e){e.getStartLocation(b),b.x>.4*c.canvas.width?(e.getDelta(A),this._euler.y-=A.x*this.rotateSpeed*.1,this._euler.x+=A.y*this.rotateSpeed*.1):(e.getLocation(A),z.subtract(A,A,b),this._velocity.x=.01*A.x,this._velocity.z=.01*-A.y)}onTouchEnd(e){document.exitPointerLock&&document.exitPointerLock(),e.getStartLocation(b),b.x<.4*c.canvas.width&&(this._velocity.x=0,this._velocity.z=0)}}).prototype,"moveSpeed",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),m=p(T.prototype,"moveSpeedShiftScale",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),E=p(T.prototype,"damp",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),g=p(T.prototype,"rotateSpeed",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),S=T))||S)||S));t._RF.pop()}}}));

System.register("chunks:///_virtual/WebSock.ts",["cc","./Logger.ts"],(function(s){"use strict";var e,t;return{setters:[function(s){e=s.cclegacy},function(s){t=s.Logger}],execute:function(){e._RF.push({},"70df2VbIU9B66Fr+op8FKJp","WebSock",void 0);s("WebSock",class{constructor(){this._ws=null,this.onConnected=null,this.onMessage=null,this.onError=null,this.onClosed=null}connect(s){if(this._ws&&this._ws.readyState===WebSocket.CONNECTING)return t.logNet("websocket connecting, wait for a moment..."),!1;let e=null;if(s.url)e=s.url;else{let t=s.ip,o=s.port;e=`${s.protocol}://${t}:${o}`}return this._ws=new WebSocket(e),this._ws.binaryType=s.binaryType?s.binaryType:"arraybuffer",this._ws.onmessage=s=>{(0,this.onMessage)(s.data)},this._ws.onopen=this.onConnected,this._ws.onerror=this.onError,this._ws.onclose=this.onClosed,!0}send(s){return this._ws&&this._ws.readyState==WebSocket.OPEN?(this._ws.send(s),1):-1}close(s,e){this._ws&&this._ws.close(s,e)}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/BhvRollNumber.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(t){"use strict";var e,i,l,r,a,o,s,u;return{setters:[function(t){e=t.cclegacy,i=t.Label,l=t.Enum,r=t._decorator,a=t.Component,o=t.lerp},function(t){s=t.applyDecoratedDescriptor,u=t.initializerDefineProperty}],execute:function(){var n,h,c,p,b,g,m,E,f,y,d,T,v,_,M,S,R,V,w;e._RF.push({},"72d13dwmG9LS4gkJhSuAp3F","BhvRollNumber",void 0);const{ccclass:F,property:I,menu:N}=r;var k;!function(t){t[t.INTEGER=0]="INTEGER",t[t.FIXED_2=1]="FIXED_2",t[t.TIMER=2]="TIMER",t[t.PERCENTAGE=3]="PERCENTAGE",t[t.KMBT_FIXED2=4]="KMBT_FIXED2",t[t.CUSTOMER=5]="CUSTOMER"}(k||(k={}));t("default",(n=N("添加特殊行为/UI/Roll Number (滚动数字)"),h=I({type:i,tooltip:"需要滚动的 Label 组件,如果不进行设置，就会从自己的节点自动查找"}),c=I({tooltip:"当前的滚动值(开始的滚动值)"}),p=I({tooltip:"是否显示正负符号"}),b=I({tooltip:"滚动的目标值"}),g=I({tooltip:"滚动的线性差值",step:.01,max:1,min:0}),m=I({tooltip:"是否在开始时就播放"}),E=I({tooltip:"在滚动之前会等待几秒",step:.1,max:1,min:0}),f=I({type:l(k),tooltip:"是否在开始时就播放"}),F(y=n((T=s((d=class extends a{constructor(...t){super(...t),u(this,"label",T,this),u(this,"value",v,this),u(this,"showPlusSymbol",_,this),u(this,"_targetValue",M,this),u(this,"lerp",S,this),u(this,"playAtStart",R,this),u(this,"runWaitTimer",V,this),u(this,"valueType",w,this),this._custom_callback=null,this.isScrolling=!1}get targetValue(){return this._targetValue}set targetValue(t){this._targetValue=t,this.scroll()}onLoad(){null==this.label&&(this.label=this.node.getComponent(i)),this.playAtStart&&(this.updateLabel(),this.scroll())}scroll(){this.isScrolling||(this.runWaitTimer>0?this.scheduleOnce((()=>{this.isScrolling=!0}),this.runWaitTimer):this.isScrolling=!0)}stop(){this.value=this.targetValue,this.isScrolling=!1,this.updateLabel()}init(t,e,i){this.targetValue=e||0,this.value=t||0,this.lerp=i||.1}scrollTo(t){null!=t&&(this.targetValue=t)}updateLabel(){let t=this.value,e="";switch(this.valueType){case k.INTEGER:e=Math.round(t)+"";break;case k.FIXED_2:e=t.toFixed(2);break;case k.TIMER:e=function(t=0,e=!0){let i=Math.floor(t),l=Math.floor(i/3600),r=Math.floor(i%3600/60),a=i%60,o=""+r,s=""+a;a<10&&(s="0"+a);return e?(r<10&&(o="0"+r),l+":"+o+":"+s):(o=""+(r+60*l),r<10&&(o="0"+r),o+":"+s)}(t);break;case k.PERCENTAGE:e=Math.round(100*t)+"%";break;case k.KMBT_FIXED2:e=t>=Number.MAX_VALUE?"MAX":t>1e12?(t/1e12).toFixed(2)+"T":t>1e9?(t/1e9).toFixed(2)+"B":t>1e6?(t/1e6).toFixed(2)+"M":t>1e3?(t/1e3).toFixed(2)+"K":Math.round(t).toString();break;case k.CUSTOMER:this._custom_callback&&(e=this._custom_callback(this.value,this.targetValue))}if(this.showPlusSymbol&&(t>0?e="+"+e:t<0&&(e="-"+e)),this.label){if(e===this.label.string)return;this.label.string=e}}update(t){if(0!=this.isScrolling)return this.value=o(this.value,this.targetValue,this.lerp),this.updateLabel(),Math.abs(this.value-this.targetValue)<=1e-4?(this.value=this.targetValue,void(this.isScrolling=!1)):void 0}}).prototype,"label",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=s(d.prototype,"value",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=s(d.prototype,"showPlusSymbol",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s(d.prototype,"targetValue",[b],Object.getOwnPropertyDescriptor(d.prototype,"targetValue"),d.prototype),M=s(d.prototype,"_targetValue",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),S=s(d.prototype,"lerp",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),R=s(d.prototype,"playAtStart",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),V=s(d.prototype,"runWaitTimer",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=s(d.prototype,"valueType",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.INTEGER}}),y=d))||y)||y));e._RF.pop()}}}));

System.register("chunks:///_virtual/RoleUpgrade.ts",["cc","./ECS.ts","./RoleEnum.ts","./RoleModelLevelComp.ts"],(function(e){"use strict";var t,l,r,o;return{setters:[function(e){t=e.cclegacy},function(e){l=e.ecs},function(e){r=e.RoleAttributeType},function(e){o=e.RoleModelLevelComp}],execute:function(){var s;t._RF.push({},"7750bmim9xAjqAgrvhP5she","RoleUpgrade",void 0);let n=e("RoleUpgradeComp",l.register("RoleUpgrade")(s=class extends l.Comp{constructor(...e){super(...e),this.lv=0}reset(){this.lv=0}})||s);class u extends l.ComblockSystem{filter(){return l.allOf(n,o)}entityEnter(e){let t=e.RoleModel,l=e.RoleModelLevel,o=e.RoleUpgrade;0==o.lv?l.vm.lv++:l.vm.lv=o.lv,l.rtluCurrent.init(l.vm.lv),t.attributes.get(r.hp).level=l.rtluCurrent.hp,l.rtluNext.init(l.vm.lv+1),l.vm.expNext=l.rtluNext.needexp,e.remove(n)}}e("RoleUpgradeSystem",u),t._RF.pop()}}}));

System.register("chunks:///_virtual/UrlParse.ts",["cc"],(function(t){"use strict";var r,e;return{setters:[function(t){r=t.cclegacy,e=t.sys}],execute:function(){r._RF.push({},"78fceiOv1NCb7uWGfkM9dld","UrlParse",void 0);t("UrlParse",class{get query(){return this._data}constructor(){this._data=null,e.isBrowser?this._data=this.parseUrl():this._data={}}parseUrl(){if("object"!=typeof window)return{};if(!window.document)return{};let t=window.document.location.href.toString().split("?");if("string"==typeof t[1]){t=t[1].split("&");let r={};for(let e=0,s=t.length;e<s;++e){let s=t[e].split("=");r[s[0]]=s[1]}return r}return{}}}),r._RF.pop()}}}));

System.register("chunks:///_virtual/Logger.ts",["cc"],(function(t){"use strict";var s,e,i,n;return{setters:[function(t){s=t.cclegacy,e=t.error,i=t.warn,n=t.log}],execute:function(){let r;t("LogType",void 0),s._RF.push({},"79a44hR9nRKE5qDKgss3EHr","Logger",void 0),function(t){t[t.Net=1]="Net",t[t.Model=2]="Model",t[t.Business=4]="Business",t[t.View=8]="View",t[t.Config=16]="Config",t[t.Trace=32]="Trace"}(r||(r=t("LogType",{})));class a{static init(){this.tags=r.Net|r.Model|r.Business|r.View|r.Config|r.Trace}static start(){console.time("Time")}static end(){console.timeEnd("Time")}static table(t,s){this.isOpen(r.Trace)&&console.table(t)}static trace(t,s){this.print(r.Trace,t,"",s)}static logNet(t,s){this.orange(r.Net,t,s)}static logModel(t,s){this.violet(r.Model,t,s)}static logBusiness(t,s){this.blue(r.Business,t,s)}static logView(t,s){this.green(r.View,t,s)}static logConfig(t,s){this.gray(r.Config,t,s)}static erroring(t){e("[ERROR]"+t)}static warning(t){i("[WARN]:"+t)}static orange(t,s,e){this.print(t,s,"color:#ee7700;",e)}static violet(t,s,e){this.print(t,s,"color:Violet;",e)}static blue(t,s,e){this.print(t,s,"color:#3a5fcd;",e)}static green(t,s,e){this.print(t,s,"color:green;",e)}static gray(t,s,e){this.print(t,s,"color:gray;",e)}static isOpen(t){return 0!=(this.tags&t)}static print(t,s,e,i){if(this.isOpen(t)){var r=console.log||n;i?r.call(null,"%c%s%s%s:%s%o",e,this.getDateString(),"["+t+"]",this.stack(5),i,s):r.call(null,"%c%s%s%s:%o",e,this.getDateString(),"["+t+"]",this.stack(5),s)}}static stack(t){var s=(new Error).stack.split("\n"),e=[];s.forEach((t=>{var s=(t=t.substring(7)).split(" ");s.length<2?e.push(s[0]):e.push({[s[0]]:s[1]})}));var i,n=[],r=[];if(t<e.length-1)for(var a in e[t]){if(2==(r=a.split(".")).length)n=r.concat();else{var o=(i=e[t][a]).lastIndexOf("/"),c=i.lastIndexOf(".");if(o>-1&&c>-1){var g=i.substring(o+1,c);n.push(g)}else n.push(i)}}return 1==n.length?"["+n[0]+".ts]":2==n.length?"["+n[0]+".ts->"+n[1]+"]":""}static getDateString(){let t=new Date,s=t.getHours().toString(),e="";return e+=(1==s.length?"0"+s:s)+":",s=t.getMinutes().toString(),e+=(1==s.length?"0"+s:s)+":",s=t.getSeconds().toString(),e+=(1==s.length?"0"+s:s)+":",s=t.getMilliseconds().toString(),1==s.length&&(s="00"+s),2==s.length&&(s="0"+s),e+=s,e="["+e+"]",e}}t("Logger",a),a.tags=0,a.init(),s._RF.pop()}}}));

System.register("chunks:///_virtual/CCVMParentComp.ts",["cc","./EventDispatcher.ts","./ViewUtil.ts","./VMParent.ts"],(function(e){"use strict";var t,s,i,n,c;return{setters:[function(e){t=e.cclegacy,s=e._decorator},function(e){i=e.EventDispatcher},function(e){n=e.ViewUtil},function(e){c=e.default}],execute:function(){var a,r,h;t._RF.push({},"79aa4PPcl5Dc6NT5Rj38Vsv","CCVMParentComp",void 0);const{ccclass:o,property:p}=s;e("CCVMParentComp",o("CCVMParentComp")((h=r=class extends c{constructor(...e){super(...e),this.nodes=new Map,this._eventDispatcher=null,this._isBindMessageActive=!1}get(e){return this.nodes.get(e)}onLoad(){n.nodeTreeInfoLite(this.node,this.nodes),super.onLoad()}get eventDispatcher(){return this._eventDispatcher||(this._eventDispatcher=new i),this._eventDispatcher}bindMessageActive(){this._isBindMessageActive=!0}unbindMessageActive(){this._isBindMessageActive=!1}on(e,t,s){this.eventDispatcher.on(e,((e,i)=>{this.isValid?this._isBindMessageActive?this.node.active&&t.call(s,e,i):t.call(s,e,i):this._eventDispatcher&&(this._eventDispatcher.destroy(),this._eventDispatcher=null)}),s)}off(e){this._eventDispatcher&&this._eventDispatcher.off(e)}dispatchEvent(e,t=null){this.eventDispatcher.dispatchEvent(e,t)}onDestroy(){this._eventDispatcher&&(this._eventDispatcher.destroy(),this._eventDispatcher=null),this.nodes.clear()}},r.tid=-1,a=h))||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/RoleChangeJob.ts",["cc","./MessageManager.ts","./ECS.ts","./RoleModelJobComp.ts","./RoleEvent.ts"],(function(e){"use strict";var o,t,n,s,l;return{setters:[function(e){o=e.cclegacy},function(e){t=e.Message},function(e){n=e.ecs},function(e){s=e.RoleModelJobComp},function(e){l=e.RoleEvent}],execute:function(){var c;o._RF.push({},"7ab8aezTB1GUIE0zFSbG9gU","RoleChangeJob",void 0);let a=e("RoleChangeJobComp",n.register("RoleChangeJob")(c=class extends n.Comp{constructor(...e){super(...e),this.jobId=-1}reset(){this.jobId=-1}})||c);class r extends n.ComblockSystem{filter(){return n.allOf(a,s)}entityEnter(e){e.RoleModelJob.id=e.RoleChangeJob.jobId,t.dispatchEvent(l.ChangeJob),e.remove(a)}}e("RoleChangeJobSystem",r),o._RF.pop()}}}));

System.register("chunks:///_virtual/LayerManager.ts",["cc","./GUI.ts","./DelegateComponent.ts","./LayerUI.ts","./LayerPopup.ts","./LayerDialog.ts","./LayerNotify.ts","./UIMap.ts"],(function(e){"use strict";var t,a,i,r,s,o,n,l,h,p,d,c,u;return{setters:[function(e){t=e.cclegacy,a=e.warn,i=e.Node,r=e.Camera,s=e.Layers,o=e.Widget},function(e){n=e.GUI},function(e){l=e.DelegateComponent},function(e){h=e.LayerUI},function(e){p=e.LayerPopUp},function(e){d=e.LayerDialog},function(e){c=e.LayerNotify},function(e){u=e.UIMap}],execute:function(){let g;e("LayerType",void 0),t._RF.push({},"7ba675xFGdHqIOykTysNzEu","LayerManager",void 0),function(e){e.Game="LayerGame",e.UI="LayerUI",e.PopUp="LayerPopUp",e.Dialog="LayerDialog",e.Alert="LayerAlert",e.Notify="LayerNotify",e.Guide="LayerGuide"}(g||(g=e("LayerType",{})));e("LayerManager",class{get portrait(){return this.root.getComponent(n).portrait}init(e){this.configs=e}toast(e,t=!1){this.notify.show(e,t)}setConfig(e,t){this.configs[e]=t}setUIMap(e){null==this.uiMap&&(this.uiMap=new u),this.uiMap.init(this,e)}open(e,t=null,i){var r=this.configs[e];if(null!=r)switch(r.layer){case g.UI:this.ui.add(r,t,i);break;case g.PopUp:this.popup.add(r,t,i);break;case g.Dialog:this.dialog.add(r,t,i);break;case g.Alert:this.alert.add(r,t,i)}else a(`打开编号为【${e}】的界面失败，配置信息不存在`)}has(e){var t=this.configs[e];if(null!=t){var i=!1;switch(t.layer){case g.UI:i=this.ui.has(t.prefab);break;case g.PopUp:i=this.popup.has(t.prefab);break;case g.Dialog:i=this.dialog.has(t.prefab);break;case g.Alert:i=this.alert.has(t.prefab)}return i}a(`编号为【${e}】的界面失败，配置信息不存在`)}remove(e,t=!0){var i=this.configs[e];if(null!=i)switch(i.layer){case g.UI:this.ui.remove(i.prefab,t);break;case g.PopUp:this.popup.remove(i.prefab,t);break;case g.Dialog:this.dialog.remove(i.prefab,t);break;case g.Alert:this.alert.remove(i.prefab,t)}else a(`删除编号为【${e}】的界面失败，配置信息不存在`)}removeByNode(e,t=!1){if(e instanceof i){let i=e.getComponent(l);i&&i.viewParams?e.parent.removeByUuid(i.viewParams.uuid,t):(a("当前删除的node不是通过界面管理器添加到舞台上"),e.destroy())}else;}clear(e=!1){this.ui.clear(e),this.popup.clear(e),this.dialog.clear(e),this.alert.clear(e)}constructor(e){this.configs={},this.root=e,this.camera=this.root.getComponentInChildren(r),this.game=this.create_node(g.Game),this.ui=new h(g.UI),this.popup=new p(g.PopUp),this.dialog=new d(g.Dialog),this.alert=new d(g.Alert),this.notify=new c(g.Notify),this.guide=this.create_node(g.Guide),e.addChild(this.game),e.addChild(this.ui),e.addChild(this.popup),e.addChild(this.dialog),e.addChild(this.alert),e.addChild(this.notify),e.addChild(this.guide)}create_node(e){var t=new i(e);t.layer=s.Enum.UI_2D;var a=t.addComponent(o);return a.isAlignLeft=a.isAlignRight=a.isAlignTop=a.isAlignBottom=!0,a.left=a.right=a.top=a.bottom=0,a.alignMode=2,a.enabled=!0,t}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/VMModify.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./VMBase.ts"],(function(t){"use strict";var e,a,i,l,s,u;return{setters:[function(t){e=t.cclegacy,a=t.Enum,i=t._decorator},function(t){l=t.applyDecoratedDescriptor,s=t.initializerDefineProperty},function(t){u=t.default}],execute:function(){var r,h,n,o,c,M,p,v,m,d,V,b,f,w;e._RF.push({},"7d2a4voaOJJGJZRWFPG6Bk7","VMModify",void 0);const{ccclass:y,property:P,menu:g,help:I}=i;var _;!function(t){t[t.MIN=0]="MIN",t[t.MAX=1]="MAX",t[t.MIN_MAX=2]="MIN_MAX"}(_||(_={}));t("default",(r=g("ModelViewer/VM-Modify(修改Model)"),h=I("https://github.com/wsssheep/cocos_creator_mvvm_tools/blob/master/docs/VMModify.md"),n=P({tooltip:"监视对象路径"}),o=P({tooltip:"是不启用取值范围限制"}),c=P({type:a(_),visible:function(){return!0===this.valueClamp}}),M=P({visible:function(){return!0===this.valueClamp&&this.valueClampMode!==_.MAX}}),p=P({visible:function(){return!0===this.valueClamp&&this.valueClampMode!==_.MIN}}),y(v=r(v=h((d=l((m=class extends u{constructor(...t){super(...t),s(this,"watchPath",d,this),s(this,"valueClamp",V,this),s(this,"valueClampMode",b,this),s(this,"valueMin",f,this),s(this,"valueMax",w,this)}clampValue(t){let e=this.valueMin,a=this.valueMax;if(0==this.valueClamp)return t;switch(this.valueClampMode){case _.MIN_MAX:t>a&&(t=a),t<e&&(t=e);break;case _.MIN:t<e&&(t=e);break;case _.MAX:t>a&&(t=a)}return t}vAddInt(t,e){this.vAdd(t,e,!0)}vSubInt(t,e){this.vSub(t,e,!0)}vMulInt(t,e){this.vMul(t,e,!0)}vDivInt(t,e){this.vDiv(t,e,!0)}vAdd(t,e,a=!1){let i=parseFloat(e),l=this.VM.getValue(this.watchPath,0)+i;a&&(l=Math.round(l)),this.VM.setValue(this.watchPath,this.clampValue(l))}vSub(t,e,a=!1){let i=parseFloat(e),l=this.VM.getValue(this.watchPath,0)-i;a&&(l=Math.round(l)),this.VM.setValue(this.watchPath,this.clampValue(l))}vMul(t,e,a=!1){let i=parseFloat(e),l=this.VM.getValue(this.watchPath,0)*i;a&&(l=Math.round(l)),this.VM.setValue(this.watchPath,this.clampValue(l))}vDiv(t,e,a=!1){let i=parseFloat(e),l=this.VM.getValue(this.watchPath,0)/i;a&&(l=Math.round(l)),this.VM.setValue(this.watchPath,this.clampValue(l))}vString(t,e){let a=e;this.VM.setValue(this.watchPath,a)}vNumberInt(t,e){this.vNumber(t,e,!0)}vNumber(t,e,a=!1){let i=parseFloat(e);a&&(i=Math.round(i)),this.VM.setValue(this.watchPath,this.clampValue(i))}}).prototype,"watchPath",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),V=l(m.prototype,"valueClamp",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=l(m.prototype,"valueClampMode",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.MIN_MAX}}),f=l(m.prototype,"valueMin",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=l(m.prototype,"valueMax",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=m))||v)||v)||v));e._RF.pop()}}}));

System.register("chunks:///_virtual/EngineMessage.ts",["cc"],(function(e){"use strict";var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){let s;e("EngineMessage",void 0),n._RF.push({},"7f501QO1RxMga77T4lWLiW6","EngineMessage",void 0),function(e){e.GAME_ENTER="EngineMessage.GAME_ENTER",e.GAME_EXIT="EngineMessage.GAME_EXIT",e.GAME_RESIZE="EngineMessage.GAME_RESIZE"}(s||(s=e("EngineMessage",{}))),n._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorParams.ts",["cc","./AnimatorCondition.ts"],(function(t){"use strict";var e,a;return{setters:[function(t){e=t.cclegacy},function(t){a=t.ParamType}],execute:function(){e._RF.push({},"7f6ebsLyohDvZbURlFDp/dz","AnimatorParams",void 0);t("default",class{constructor(t){this._paramMap=new Map,t.forEach((t=>{let e={type:t.type,value:t.init};this._paramMap.set(t.param,e)}))}getParamType(t){let e=this._paramMap.get(t);return e?e.type:null}setNumber(t,e){let r=this._paramMap.get(t);r&&r.type===a.NUMBER&&(r.value=e)}setBool(t,e){let r=this._paramMap.get(t);r&&r.type===a.BOOLEAN&&(r.value=e?1:0)}setTrigger(t){let e=this._paramMap.get(t);e&&e.type===a.TRIGGER&&(e.value=1)}resetTrigger(t){let e=this._paramMap.get(t);e&&e.type===a.TRIGGER&&(e.value=0)}autoTrigger(t){let e=this._paramMap.get(t);e&&e.type===a.AUTO_TRIGGER&&(e.value=1)}resetAutoTrigger(t){let e=this._paramMap.get(t);e&&e.type===a.AUTO_TRIGGER&&(e.value=0)}resetAllAutoTrigger(){this._paramMap.forEach(((t,e)=>{t.type===a.AUTO_TRIGGER&&(t.value=0)}))}getNumber(t){let e=this._paramMap.get(t);return e&&e.type===a.NUMBER?e.value:0}getBool(t){let e=this._paramMap.get(t);return e&&e.type===a.BOOLEAN?e.value:0}getTrigger(t){let e=this._paramMap.get(t);return e&&e.type===a.TRIGGER?e.value:0}getAutoTrigger(t){let e=this._paramMap.get(t);return e&&e.type===a.AUTO_TRIGGER?e.value:0}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/HttpRequest.ts",["cc"],(function(e){"use strict";var t,r,s;return{setters:[function(e){t=e.cclegacy,r=e.error,s=e.warn}],execute:function(){e("HttpEvent",void 0),t._RF.push({},"806e5t8UetFy4spn89dnuan","HttpRequest",void 0);var n={},a={};let u;!function(e){e.NO_NETWORK="http_request_no_network",e.UNKNOWN_ERROR="http_request_unknown_error",e.TIMEOUT="http_request_timout"}(u||(u=e("HttpEvent",{})));e("HttpRequest",class{constructor(){this.server="http://192.168.1.150/",this.timeout=1e4}get(e,t,r){this.sendRequest(e,null,!1,t,r)}getWithParams(e,t,r,s){this.sendRequest(e,t,!1,r,s)}getByArraybuffer(e,t,r){this.sendRequest(e,null,!1,t,r,"arraybuffer",!1)}getWithParamsByArraybuffer(e,t,r,s){this.sendRequest(e,t,!1,r,s,"arraybuffer",!1)}post(e,t,r,s){this.sendRequest(e,t,!0,r,s)}abort(e){var t=n[this.server+e];t&&t.abort()}getParamString(e){var t="";for(var r in e){let n=e[r];if(n instanceof Object)for(var s in n)t+=`${s}=${n[s]}&`;else t+=`${r}=${n}&`}return t.substr(0,t.length-1)}sendRequest(e,t,i,o,l,d,h=!0,c=this.timeout){var f,p,v;if(null!=e&&""!=e)if(f=0==e.toLocaleLowerCase().indexOf("http")?e:this.server+e,t?(v=this.getParamString(t),p=f.indexOf("?")>-1?f+"&"+v:f+"?"+v):p=f,null==n[p]||a[p]!=v){var R=new XMLHttpRequest;n[p]=R,a[p]=v,i?R.open("POST",f):R.open("GET",p),R.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var O={};O.url=f,O.params=t,h&&(R.timeout=c,R.ontimeout=()=>{this.deleteCache(p),O.event=u.TIMEOUT,l&&l(O)}),R.onloadend=e=>{if(500==R.status){if(this.deleteCache(p),null==l)return;O.event=u.NO_NETWORK,l&&l(O)}},R.onerror=()=>{this.deleteCache(p),null!=l&&(0==R.readyState||1==R.readyState||0==R.status?O.event=u.NO_NETWORK:O.event=u.UNKNOWN_ERROR,l&&l(O))},R.onreadystatechange=()=>{if(4==R.readyState&&(this.deleteCache(p),200==R.status&&o))if("arraybuffer"==d)R.responseType=d,o&&o(R.response);else{var e=JSON.parse(R.response);null!=e.code?0==e.code?o&&o(e.data):l&&l(e):o&&o(e)}},null==t||""==t?R.send():R.send(v)}else s(`地址【${f}】已正在请求中，不能重复请求`);else r("请求地址不能为空")}deleteCache(e){delete n[e],delete a[e]}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/Defines.ts",["cc"],(function(s){"use strict";var e;return{setters:[function(s){e=s.cclegacy}],execute:function(){e._RF.push({},"82d3a9c71JEkI95d3qscHm8","Defines",void 0);s("ViewParams",class{constructor(){this.valid=!0,this.node=null}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/StringFormat.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"85fe8Gc6h5Ava+JsdbBs8cR","StringFormat",void 0);t("StringFormatFunction",new class{deal(t,e){if(""===e)return t;let r=(e=e.toLowerCase().trim()).match(/^[a-z|A-Z]+/gi),i=e.match(/\d+$/gi),s="",n=0,a="";if(r&&(s=r[0]),i&&(n=parseInt(i[0])),"number"==typeof t)switch(s){case"int":a=this.int(t);break;case"fix":a=this.fix(t,n);break;case"kmbt":a=this.KMBT(t);break;case"per":a=this.per(t,n);break;case"sep":a=this.sep(t)}else{switch(s){case"limit":a=this.limit(t,n)}a=t}return a}sep(t){return Math.round(t).toString().replace(new RegExp("(\\d)(?=(\\d{3})+$)","ig"),"$1,")}time_m(t){}time_s(t){}time_ms(t){}timeStamp(t){return new Date(t).toString()}per(t,e){return Math.round(100*t).toFixed(e)}int(t){return Math.round(t)}fix(t,e){return t.toFixed(e)}limit(t,e){return t.substring(0,e)}KMBT(t,e="en"){return this.compressUnit(t,[1e3,1e6,1e9,1e12],["","K","M","B","T"],2)}compressUnit(t,e,r,i=2){let s,n=e,a=r,c="";for(s=0;s<n.length;s++){if(t<n[s]){c=s>0?(t/n[s-1]).toFixed(i):t.toFixed(0);break}}return c+a[s]}});e._RF.pop()}}}));

System.register("chunks:///_virtual/ObjectUtil.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"86827QLFSRM7Zojsx0WqWuQ","ObjectUtil",void 0);t("default",class{static isObject(t){return"[object Object]"===Object.prototype.toString.call(t)}static deepCopy(t){if(null==t||"object"!=typeof t)return t;let e=null;if(t instanceof Date)return e=new Date,e.setTime(t.getTime()),e;if(t instanceof Array){e=[];for(let n=0,r=t.length;n<r;n++)e[n]=this.deepCopy(t[n]);return e}if(t instanceof Object){e={};for(const n in t)t.hasOwnProperty(n)&&(e[n]=this.deepCopy(t[n]));return e}console.warn(`不支持的类型：${e}`)}static copy(t){return JSON.parse(JSON.stringify(t))}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/MGOBE.js",["./cjs-loader.mjs"],(function(e,t){"use strict";var n;return{setters:[function(e){n=e.default}],execute:function(){let r;e("default",void 0),n.define(t.meta.url,(function(t,i,o,s,a){n.createRequireWithReqMap({},i);var _;_=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){var r;e.exports=r=r||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},i=r.lib={},o=i.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=i.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||_).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=s<<24-(r+o)%4*8}else for(o=0;o<i;o+=4)t[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],i=function(t){t=t;var n=987654321,r=4294967295;return function(){var i=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return i/=4294967296,(i+=.5)*(e.random()>.5?1:-1)}},o=0;o<t;o+=4){var a=i(4294967296*(n||e.random()));n=987654071*a(),r.push(4294967296*a()|0)}return new s.init(r,t)}}),a=r.enc={},_=a.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new s.init(n,t/2)}},E=a.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new s.init(n,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(E.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return E.parse(unescape(encodeURIComponent(e)))}},d=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o),_=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*o,E=e.min(4*_,i);if(_){for(var l=0;l<_;l+=o)this._doProcessBlock(r,l);var d=r.splice(0,_);n.sigBytes-=E}return new s.init(d,E)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),u=(i.Hasher=d.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new u.HMAC.init(e,n).finalize(t)}}}),r.algo={});return r}(Math)},function(e,t){},function(e){e.exports=JSON.parse('{"sdkType":1,"version":"1.3.9"}')},function(e,t,n){var r,i,o;e.exports=(o=n(0),i=(r=o).lib.WordArray,r.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],o=0;o<n;o+=3)for(var s=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)i.push(r.charAt(s>>>6*(3-a)&63));var _=r.charAt(64);if(_)for(;i.length%4;)i.push(_);return i.join("")},parse:function(e){var t=e.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var o=0;o<n.length;o++)r[n.charCodeAt(o)]=o}var s=n.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return function(e,t,n){for(var r=[],o=0,s=0;s<t;s++)if(s%4){var a=n[e.charCodeAt(s-1)]<<s%4*2,_=n[e.charCodeAt(s)]>>>6-s%4*2;r[o>>>2]|=(a|_)<<24-o%4*8,o++}return i.create(r,o)}(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},o.enc.Base64)},function(e,t,n){var r;e.exports=(r=n(0),n(5),n(6),r.HmacSHA1)},function(e,t,n){var r,i,o,s,a,_,E,l;e.exports=(i=(r=l=n(0)).lib,o=i.WordArray,s=i.Hasher,a=r.algo,_=[],E=a.SHA1=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],E=0;E<80;E++){if(E<16)_[E]=0|e[t+E];else{var l=_[E-3]^_[E-8]^_[E-14]^_[E-16];_[E]=l<<1|l>>>31}var d=(r<<5|r>>>27)+a+_[E];d+=E<20?1518500249+(i&o|~i&s):E<40?1859775393+(i^o^s):E<60?(i&o|i&s|o&s)-1894007588:(i^o^s)-899497514,a=s,s=o,o=i<<30|i>>>2,i=r,r=d}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),r.SHA1=s._createHelper(E),r.HmacSHA1=s._createHmacHelper(E),l.SHA1)},function(e,t,n){var r,i,o;e.exports=(i=(r=n(0)).lib.Base,o=r.enc.Utf8,void(r.algo.HMAC=i.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),s=this._iKey=t.clone(),a=i.words,_=s.words,E=0;E<n;E++)a[E]^=1549556828,_[E]^=909522486;i.sigBytes=s.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))},function(e,t,n){var r,i;void 0===(i="function"==typeof(r=function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i,o,s="";this.escapeRegExp=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},this.parseInt=function(e,t){return/^(-|\+)?([0-9]+|Infinity)$/.test(e)?parseInt(e,t):NaN},this.seps="cfhistuCFHISTU",this.minLength=0<parseInt(n,10)?n:0,this.salt="string"==typeof t?t:"","string"==typeof r&&(this.alphabet=r);for(var a=0;a!==this.alphabet.length;a++)-1===s.indexOf(this.alphabet.charAt(a))&&(s+=this.alphabet.charAt(a));if(this.alphabet=s,this.alphabet.length<16)throw"error: alphabet must contain at least X unique characters".replace("X",16);if(-1!==this.alphabet.search(" "))throw"error: alphabet cannot contain spaces";for(var _=0;_!==this.seps.length;_++){var E=this.alphabet.indexOf(this.seps.charAt(_));-1===E?this.seps=this.seps.substr(0,_)+" "+this.seps.substr(_+1):this.alphabet=this.alphabet.substr(0,E)+" "+this.alphabet.substr(E+1)}this.alphabet=this.alphabet.replace(/ /g,""),this.seps=this.seps.replace(/ /g,""),this.seps=this._shuffle(this.seps,this.salt),(!this.seps.length||3.5<this.alphabet.length/this.seps.length)&&(i=Math.ceil(this.alphabet.length/3.5))>this.seps.length&&(o=i-this.seps.length,this.seps+=this.alphabet.substr(0,o),this.alphabet=this.alphabet.substr(o)),this.alphabet=this._shuffle(this.alphabet,this.salt);var l=Math.ceil(this.alphabet.length/12);this.alphabet.length<3?(this.guards=this.seps.substr(0,l),this.seps=this.seps.substr(l)):(this.guards=this.alphabet.substr(0,l),this.alphabet=this.alphabet.substr(l))}var t;return(t=[{key:"encode",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return"";if(t[0]&&t[0].constructor===Array&&!(t=t[0]).length)return"";for(var r=0;r!==t.length;r++)if(t[r]=this.parseInt(t[r],10),!(0<=t[r]))return"";return this._encode(t)}},{key:"decode",value:function(e){return e&&e.length&&"string"==typeof e?this._decode(e,this.alphabet):[]}},{key:"encodeHex",value:function(e){if(e=e.toString(),!/^[0-9a-fA-F]+$/.test(e))return"";for(var t=e.match(/[\w\W]{1,12}/g),n=0;n!==t.length;n++)t[n]=parseInt("1"+t[n],16);return this.encode.apply(this,t)}},{key:"decodeHex",value:function(e){for(var t=[],n=this.decode(e),r=0;r!==n.length;r++)t+=n[r].toString(16).substr(1);return t}},{key:"_encode",value:function(e){for(var t,n=this.alphabet,r=0,i=0;i!==e.length;i++)r+=e[i]%(i+100);for(var o=t=n.charAt(r%n.length),s=0;s!==e.length;s++){var a=e[s],_=o+this.salt+n;n=this._shuffle(n,_.substr(0,n.length));var E=this._toAlphabet(a,n);if(t+=E,s+1<e.length){var l=(a%=E.charCodeAt(0)+s)%this.seps.length;t+=this.seps.charAt(l)}}if(t.length<this.minLength){var d=(r+t[0].charCodeAt(0))%this.guards.length,u=this.guards[d];(t=u+t).length<this.minLength&&(d=(r+t[2].charCodeAt(0))%this.guards.length,t+=u=this.guards[d])}for(var h=parseInt(n.length/2,10);t.length<this.minLength;){var c=(t=(n=this._shuffle(n,n)).substr(h)+t+n.substr(0,h)).length-this.minLength;0<c&&(t=t.substr(c/2,this.minLength))}return t}},{key:"_decode",value:function(e,t){var n=[],r=0,i=new RegExp("[".concat(this.escapeRegExp(this.guards),"]"),"g"),o=e.replace(i," "),s=o.split(" ");if(3!==s.length&&2!==s.length||(r=1),void 0!==(o=s[r])[0]){var a=o[0];o=o.substr(1),i=new RegExp("[".concat(this.escapeRegExp(this.seps),"]"),"g"),s=(o=o.replace(i," ")).split(" ");for(var _=0;_!==s.length;_++){var E=s[_],l=a+this.salt+t;t=this._shuffle(t,l.substr(0,t.length)),n.push(this._fromAlphabet(E,t))}this.encode(n)!==e&&(n=[])}return n}},{key:"_shuffle",value:function(e,t){var n;if(!t.length)return e;for(var r=(e=e.split("")).length-1,i=0,o=0,s=0;0<r;r--,i++){i%=t.length,o+=n=t.charCodeAt(i);var a=e[s=(n+i+o)%r];e[s]=e[r],e[r]=a}return e.join("")}},{key:"_toAlphabet",value:function(e,t){for(var n="";n=t.charAt(e%t.length)+n,e=parseInt(e/t.length,10););return n}},{key:"_fromAlphabet",value:function(e,t){return e.split("").map((function(e){return t.indexOf(e)})).reduce((function(e,n){return e*t.length+n}),0)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();e.default=t})?r.apply(t,[t]):r)||(e.exports=i)},function(e,t,n){(function(r){var i,o,s;o=[n(10)],void 0===(s="function"==typeof(i=function(e,t){var i,o={};return o.ByteBuffer=e,o.Long=e.Long||null,o.VERSION="5.0.3",o.WIRE_TYPES={},o.WIRE_TYPES.VARINT=0,o.WIRE_TYPES.BITS64=1,o.WIRE_TYPES.LDELIM=2,o.WIRE_TYPES.STARTGROUP=3,o.WIRE_TYPES.ENDGROUP=4,o.WIRE_TYPES.BITS32=5,o.PACKABLE_WIRE_TYPES=[o.WIRE_TYPES.VARINT,o.WIRE_TYPES.BITS64,o.WIRE_TYPES.BITS32],o.TYPES={int32:{name:"int32",wireType:o.WIRE_TYPES.VARINT,defaultValue:0},uint32:{name:"uint32",wireType:o.WIRE_TYPES.VARINT,defaultValue:0},sint32:{name:"sint32",wireType:o.WIRE_TYPES.VARINT,defaultValue:0},int64:{name:"int64",wireType:o.WIRE_TYPES.VARINT,defaultValue:o.Long?o.Long.ZERO:void 0},uint64:{name:"uint64",wireType:o.WIRE_TYPES.VARINT,defaultValue:o.Long?o.Long.UZERO:void 0},sint64:{name:"sint64",wireType:o.WIRE_TYPES.VARINT,defaultValue:o.Long?o.Long.ZERO:void 0},bool:{name:"bool",wireType:o.WIRE_TYPES.VARINT,defaultValue:!1},double:{name:"double",wireType:o.WIRE_TYPES.BITS64,defaultValue:0},string:{name:"string",wireType:o.WIRE_TYPES.LDELIM,defaultValue:""},bytes:{name:"bytes",wireType:o.WIRE_TYPES.LDELIM,defaultValue:null},fixed32:{name:"fixed32",wireType:o.WIRE_TYPES.BITS32,defaultValue:0},sfixed32:{name:"sfixed32",wireType:o.WIRE_TYPES.BITS32,defaultValue:0},fixed64:{name:"fixed64",wireType:o.WIRE_TYPES.BITS64,defaultValue:o.Long?o.Long.UZERO:void 0},sfixed64:{name:"sfixed64",wireType:o.WIRE_TYPES.BITS64,defaultValue:o.Long?o.Long.ZERO:void 0},float:{name:"float",wireType:o.WIRE_TYPES.BITS32,defaultValue:0},enum:{name:"enum",wireType:o.WIRE_TYPES.VARINT,defaultValue:0},message:{name:"message",wireType:o.WIRE_TYPES.LDELIM,defaultValue:null},group:{name:"group",wireType:o.WIRE_TYPES.STARTGROUP,defaultValue:null}},o.MAP_KEY_TYPES=[o.TYPES.int32,o.TYPES.sint32,o.TYPES.sfixed32,o.TYPES.uint32,o.TYPES.fixed32,o.TYPES.int64,o.TYPES.sint64,o.TYPES.sfixed64,o.TYPES.uint64,o.TYPES.fixed64,o.TYPES.bool,o.TYPES.string,o.TYPES.bytes],o.ID_MIN=1,o.ID_MAX=536870911,o.convertFieldsToCamelCase=!1,o.populateAccessors=!0,o.populateDefaults=!0,o.Util=((i={}).IS_NODE=!("object"!=typeof r||r+""!="[object process]"||r.browser),i.XHR=function(){for(var e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],t=null,n=0;n<e.length;n++){try{t=e[n]()}catch(e){continue}break}if(!t)throw Error("XMLHttpRequest is not supported");return t},i.fetch=function(e,t){if(t&&"function"!=typeof t&&(t=null),i.IS_NODE){var r=n(12);if(t)r.readFile(e,(function(e,n){t(e?null:""+n)}));else try{return r.readFileSync(e)}catch(e){return null}}else{var o=i.XHR();if(o.open("GET",e,!!t),o.setRequestHeader("Accept","text/plain"),"function"==typeof o.overrideMimeType&&o.overrideMimeType("text/plain"),!t)return o.send(null),200==o.status||0==o.status&&"string"==typeof o.responseText?o.responseText:null;if(o.onreadystatechange=function(){4==o.readyState&&(200==o.status||0==o.status&&"string"==typeof o.responseText?t(o.responseText):t(null))},4==o.readyState)return;o.send(null)}},i.toCamelCase=function(e){return e.replace(/_([a-zA-Z])/g,(function(e,t){return t.toUpperCase()}))},i),o.Lang={DELIM:/[\s\{\}=;:\[\],'"\(\)<>]/g,RULE:/^(?:required|optional|repeated|map)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,FQTYPEREF:/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0[xX][0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/,BOOL:/^(?:true|false)$/i,ID:/^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\s/,STRING:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,STRING_DQ:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,STRING_SQ:/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g},o.DotProto=function(e,t){var n={},r=function(e){this.source=e+"",this.index=0,this.line=1,this.stack=[],this._stringOpen=null},i=r.prototype;i._readString=function(){var e='"'===this._stringOpen?t.STRING_DQ:t.STRING_SQ;e.lastIndex=this.index-1;var n=e.exec(this.source);if(!n)throw Error("unterminated string");return this.index=e.lastIndex,this.stack.push(this._stringOpen),this._stringOpen=null,n[1]},i.next=function(){if(this.stack.length>0)return this.stack.shift();if(this.index>=this.source.length)return null;if(null!==this._stringOpen)return this._readString();var e,n,r;do{for(e=!1;t.WHITESPACE.test(r=this.source.charAt(this.index));)if("\n"===r&&++this.line,++this.index===this.source.length)return null;if("/"===this.source.charAt(this.index))if(++this.index,"/"===this.source.charAt(this.index)){for(;"\n"!==this.source.charAt(++this.index);)if(this.index==this.source.length)return null;++this.index,++this.line,e=!0}else{if("*"!==(r=this.source.charAt(this.index)))return"/";do{if("\n"===r&&++this.line,++this.index===this.source.length)return null;n=r,r=this.source.charAt(this.index)}while("*"!==n||"/"!==r);++this.index,e=!0}}while(e);if(this.index===this.source.length)return null;var i=this.index;if(t.DELIM.lastIndex=0,!t.DELIM.test(this.source.charAt(i++)))for(;i<this.source.length&&!t.DELIM.test(this.source.charAt(i));)++i;var o=this.source.substring(this.index,this.index=i);return'"'!==o&&"'"!==o||(this._stringOpen=o),o},i.peek=function(){if(0===this.stack.length){var e=this.next();if(null===e)return null;this.stack.push(e)}return this.stack[0]},i.skip=function(e){var t=this.next();if(t!==e)throw Error("illegal '"+t+"', '"+e+"' expected")},i.omit=function(e){return this.peek()===e&&(this.next(),!0)},i.toString=function(){return"Tokenizer ("+this.index+"/"+this.source.length+" at line "+this.line+")"},n.Tokenizer=r;var o=function(e){this.tn=new r(e),this.proto3=!1},s=o.prototype;function a(e,n){var r=-1,i=1;if("-"==e.charAt(0)&&(i=-1,e=e.substring(1)),t.NUMBER_DEC.test(e))r=parseInt(e);else if(t.NUMBER_HEX.test(e))r=parseInt(e.substring(2),16);else{if(!t.NUMBER_OCT.test(e))throw Error("illegal id value: "+(i<0?"-":"")+e);r=parseInt(e.substring(1),8)}if(r=i*r|0,!n&&r<0)throw Error("illegal id value: "+(i<0?"-":"")+e);return r}function _(e){var n=1;if("-"==e.charAt(0)&&(n=-1,e=e.substring(1)),t.NUMBER_DEC.test(e))return n*parseInt(e,10);if(t.NUMBER_HEX.test(e))return n*parseInt(e.substring(2),16);if(t.NUMBER_OCT.test(e))return n*parseInt(e.substring(1),8);if("inf"===e)return n*(1/0);if("nan"===e)return NaN;if(t.NUMBER_FLT.test(e))return n*parseFloat(e);throw Error("illegal number value: "+(n<0?"-":"")+e)}function E(e,t,n){void 0===e[t]?e[t]=n:(Array.isArray(e[t])||(e[t]=[e[t]]),e[t].push(n))}return s.parse=function(){var e,n,r={name:"[ROOT]",package:null,messages:[],enums:[],imports:[],options:{},services:[]},i=!0;try{for(;e=this.tn.next();)switch(e){case"package":if(!i||null!==r.package)throw Error("unexpected 'package'");if(e=this.tn.next(),!t.TYPEREF.test(e))throw Error("illegal package name: "+e);this.tn.skip(";"),r.package=e;break;case"import":if(!i)throw Error("unexpected 'import'");("public"===(e=this.tn.peek())||(n="weak"===e))&&this.tn.next(),e=this._readString(),this.tn.skip(";"),n||r.imports.push(e);break;case"syntax":if(!i)throw Error("unexpected 'syntax'");this.tn.skip("="),"proto3"===(r.syntax=this._readString())&&(this.proto3=!0),this.tn.skip(";");break;case"message":this._parseMessage(r,null),i=!1;break;case"enum":this._parseEnum(r),i=!1;break;case"option":this._parseOption(r);break;case"service":this._parseService(r);break;case"extend":this._parseExtend(r);break;default:throw Error("unexpected '"+e+"'")}}catch(e){throw e.message="Parse error at line "+this.tn.line+": "+e.message,e}return delete r.name,r},o.parse=function(e){return new o(e).parse()},s._readString=function(){var e,t,n="";do{if("'"!==(t=this.tn.next())&&'"'!==t)throw Error("illegal string delimiter: "+t);n+=this.tn.next(),this.tn.skip(t),e=this.tn.peek()}while('"'===e||'"'===e);return n},s._readValue=function(e){var n=this.tn.peek();if('"'===n||"'"===n)return this._readString();if(this.tn.next(),t.NUMBER.test(n))return _(n);if(t.BOOL.test(n))return"true"===n.toLowerCase();if(e&&t.TYPEREF.test(n))return n;throw Error("illegal value: "+n)},s._parseOption=function(e,n){var r=this.tn.next(),i=!1;if("("===r&&(i=!0,r=this.tn.next()),!t.TYPEREF.test(r))throw Error("illegal option name: "+r);var o=r;i&&(this.tn.skip(")"),o="("+o+")",r=this.tn.peek(),t.FQTYPEREF.test(r)&&(o+=r,this.tn.next())),this.tn.skip("="),this._parseOptionValue(e,o),n||this.tn.skip(";")},s._parseOptionValue=function(e,n){var r=this.tn.peek();if("{"!==r)E(e.options,n,this._readValue(!0));else for(this.tn.skip("{");"}"!==(r=this.tn.next());){if(!t.NAME.test(r))throw Error("illegal option name: "+n+"."+r);this.tn.omit(":")?E(e.options,n+"."+r,this._readValue(!0)):this._parseOptionValue(e,n+"."+r)}},s._parseService=function(e){var n=this.tn.next();if(!t.NAME.test(n))throw Error("illegal service name at line "+this.tn.line+": "+n);var r={name:n,rpc:{},options:{}};for(this.tn.skip("{");"}"!==(n=this.tn.next());)if("option"===n)this._parseOption(r);else{if("rpc"!==n)throw Error("illegal service token: "+n);this._parseServiceRPC(r)}this.tn.omit(";"),e.services.push(r)},s._parseServiceRPC=function(e){var n=this.tn.next();if(!t.NAME.test(n))throw Error("illegal rpc service method name: "+n);var r=n,i={request:null,response:null,request_stream:!1,response_stream:!1,options:{}};if(this.tn.skip("("),"stream"===(n=this.tn.next()).toLowerCase()&&(i.request_stream=!0,n=this.tn.next()),!t.TYPEREF.test(n))throw Error("illegal rpc service request type: "+n);if(i.request=n,this.tn.skip(")"),"returns"!==(n=this.tn.next()).toLowerCase())throw Error("illegal rpc service request type delimiter: "+n);if(this.tn.skip("("),"stream"===(n=this.tn.next()).toLowerCase()&&(i.response_stream=!0,n=this.tn.next()),i.response=n,this.tn.skip(")"),"{"===(n=this.tn.peek())){for(this.tn.next();"}"!==(n=this.tn.next());){if("option"!==n)throw Error("illegal rpc service token: "+n);this._parseOption(i)}this.tn.omit(";")}else this.tn.skip(";");void 0===e.rpc&&(e.rpc={}),e.rpc[r]=i},s._parseMessage=function(e,n){var r=!!n,i=this.tn.next(),o={name:"",fields:[],enums:[],messages:[],options:{},services:[],oneofs:{}};if(!t.NAME.test(i))throw Error("illegal "+(r?"group":"message")+" name: "+i);for(o.name=i,r&&(this.tn.skip("="),n.id=a(this.tn.next()),o.isGroup=!0),"["===(i=this.tn.peek())&&n&&this._parseFieldOptions(n),this.tn.skip("{");"}"!==(i=this.tn.next());)if(t.RULE.test(i))this._parseMessageField(o,i);else if("oneof"===i)this._parseMessageOneOf(o);else if("enum"===i)this._parseEnum(o);else if("message"===i)this._parseMessage(o);else if("option"===i)this._parseOption(o);else if("service"===i)this._parseService(o);else if("extensions"===i)o.hasOwnProperty("extensions")?o.extensions=o.extensions.concat(this._parseExtensionRanges()):o.extensions=this._parseExtensionRanges();else if("reserved"===i)this._parseIgnored();else if("extend"===i)this._parseExtend(o);else{if(!t.TYPEREF.test(i))throw Error("illegal message token: "+i);if(!this.proto3)throw Error("illegal field rule: "+i);this._parseMessageField(o,"optional",i)}return this.tn.omit(";"),e.messages.push(o),o},s._parseIgnored=function(){for(;";"!==this.tn.peek();)this.tn.next();this.tn.skip(";")},s._parseMessageField=function(e,n,r){if(!t.RULE.test(n))throw Error("illegal message field rule: "+n);var i,o={rule:n,type:"",name:"",options:{},id:0};if("map"===n){if(r)throw Error("illegal type: "+r);if(this.tn.skip("<"),i=this.tn.next(),!t.TYPE.test(i)&&!t.TYPEREF.test(i))throw Error("illegal message field type: "+i);if(o.keytype=i,this.tn.skip(","),i=this.tn.next(),!t.TYPE.test(i)&&!t.TYPEREF.test(i))throw Error("illegal message field: "+i);if(o.type=i,this.tn.skip(">"),i=this.tn.next(),!t.NAME.test(i))throw Error("illegal message field name: "+i);o.name=i,this.tn.skip("="),o.id=a(this.tn.next()),"["===(i=this.tn.peek())&&this._parseFieldOptions(o),this.tn.skip(";")}else if("group"===(r=void 0!==r?r:this.tn.next())){var s=this._parseMessage(e,o);if(!/^[A-Z]/.test(s.name))throw Error("illegal group name: "+s.name);o.type=s.name,o.name=s.name.toLowerCase(),this.tn.omit(";")}else{if(!t.TYPE.test(r)&&!t.TYPEREF.test(r))throw Error("illegal message field type: "+r);if(o.type=r,i=this.tn.next(),!t.NAME.test(i))throw Error("illegal message field name: "+i);o.name=i,this.tn.skip("="),o.id=a(this.tn.next()),"["===(i=this.tn.peek())&&this._parseFieldOptions(o),this.tn.skip(";")}return e.fields.push(o),o},s._parseMessageOneOf=function(e){var n=this.tn.next();if(!t.NAME.test(n))throw Error("illegal oneof name: "+n);var r,i=n,o=[];for(this.tn.skip("{");"}"!==(n=this.tn.next());)(r=this._parseMessageField(e,"optional",n)).oneof=i,o.push(r.id);this.tn.omit(";"),e.oneofs[i]=o},s._parseFieldOptions=function(e){this.tn.skip("[");for(var t=!0;"]"!==this.tn.peek();)t||this.tn.skip(","),this._parseOption(e,!0),t=!1;this.tn.next()},s._parseEnum=function(e){var n={name:"",values:[],options:{}},r=this.tn.next();if(!t.NAME.test(r))throw Error("illegal name: "+r);for(n.name=r,this.tn.skip("{");"}"!==(r=this.tn.next());)if("option"===r)this._parseOption(n);else{if(!t.NAME.test(r))throw Error("illegal name: "+r);this.tn.skip("=");var i={name:r,id:a(this.tn.next(),!0)};"["===(r=this.tn.peek())&&this._parseFieldOptions({options:{}}),this.tn.skip(";"),n.values.push(i)}this.tn.omit(";"),e.enums.push(n)},s._parseExtensionRanges=function(){var t,n,r,i=[];do{for(n=[];;){switch(t=this.tn.next()){case"min":r=e.ID_MIN;break;case"max":r=e.ID_MAX;break;default:r=_(t)}if(n.push(r),2===n.length)break;if("to"!==this.tn.peek()){n.push(r);break}this.tn.next()}i.push(n)}while(this.tn.omit(","));return this.tn.skip(";"),i},s._parseExtend=function(e){var n=this.tn.next();if(!t.TYPEREF.test(n))throw Error("illegal extend reference: "+n);var r={ref:n,fields:[]};for(this.tn.skip("{");"}"!==(n=this.tn.next());)if(t.RULE.test(n))this._parseMessageField(r,n);else{if(!t.TYPEREF.test(n))throw Error("illegal extend token: "+n);if(!this.proto3)throw Error("illegal field rule: "+n);this._parseMessageField(r,"optional",n)}return this.tn.omit(";"),e.messages.push(r),r},s.toString=function(){return"Parser at line "+this.tn.line},n.Parser=o,n}(o,o.Lang),o.Reflect=function(t){var n={},r=function(e,t,n){this.builder=e,this.parent=t,this.name=n,this.className},i=r.prototype;i.fqn=function(){for(var e=this.name,t=this;null!=(t=t.parent);)e=t.name+"."+e;return e},i.toString=function(e){return(e?this.className+" ":"")+this.fqn()},i.build=function(){throw Error(this.toString(!0)+" cannot be built directly")},n.T=r;var o=function(e,t,n,i,o){r.call(this,e,t,n),this.className="Namespace",this.children=[],this.options=i||{},this.syntax=o||"proto2"},s=o.prototype=Object.create(r.prototype);s.getChildren=function(e){if(null==(e=e||null))return this.children.slice();for(var t=[],n=0,r=this.children.length;n<r;++n)this.children[n]instanceof e&&t.push(this.children[n]);return t},s.addChild=function(e){var t;if(t=this.getChild(e.name))if(t instanceof l.Field&&t.name!==t.originalName&&null===this.getChild(t.originalName))t.name=t.originalName;else{if(!(e instanceof l.Field&&e.name!==e.originalName&&null===this.getChild(e.originalName)))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+e.name);e.name=e.originalName}this.children.push(e)},s.getChild=function(e){for(var t="number"==typeof e?"id":"name",n=0,r=this.children.length;n<r;++n)if(this.children[n][t]===e)return this.children[n];return null},s.resolve=function(e,t){var r,i="string"==typeof e?e.split("."):e,o=this,s=0;if(""===i[s]){for(;null!==o.parent;)o=o.parent;s++}do{do{if(!(o instanceof n.Namespace)){o=null;break}if(!(r=o.getChild(i[s]))||!(r instanceof n.T)||t&&!(r instanceof n.Namespace)){o=null;break}o=r,s++}while(s<i.length);if(null!=o)break;if(null!==this.parent)return this.parent.resolve(e,t)}while(null!=o);return o},s.qn=function(e){var t=[],r=e;do{t.unshift(r.name),r=r.parent}while(null!==r);for(var i=1;i<=t.length;i++){var o=t.slice(t.length-i);if(e===this.resolve(o,e instanceof n.Namespace))return o.join(".")}return e.fqn()},s.build=function(){for(var e,t={},n=this.children,r=0,i=n.length;r<i;++r)(e=n[r])instanceof o&&(t[e.name]=e.build());return Object.defineProperty&&Object.defineProperty(t,"$options",{value:this.buildOpt()}),t},s.buildOpt=function(){for(var e={},t=Object.keys(this.options),n=0,r=t.length;n<r;++n){var i=t[n],o=this.options[t[n]];e[i]=o}return e},s.getOption=function(e){return void 0===e?this.options:void 0!==this.options[e]?this.options[e]:null},n.Namespace=o;var a=function(e,n,r,i,o){if(this.type=e,this.resolvedType=n,this.isMapKey=r,this.syntax=i,this.name=o,r&&t.MAP_KEY_TYPES.indexOf(e)<0)throw Error("Invalid map key type: "+e.name)},_=a.prototype;function E(e,n){if(e&&"number"==typeof e.low&&"number"==typeof e.high&&"boolean"==typeof e.unsigned&&e.low==e.low&&e.high==e.high)return new t.Long(e.low,e.high,void 0===n?e.unsigned:n);if("string"==typeof e)return t.Long.fromString(e,n||!1,10);if("number"==typeof e)return t.Long.fromNumber(e,n||!1);throw Error("not convertible to Long")}a.defaultFieldValue=function(n){if("string"==typeof n&&(n=t.TYPES[n]),void 0===n.defaultValue)throw Error("default value for type "+n.name+" is not supported");return n==t.TYPES.bytes?new e(0):n.defaultValue},_.toString=function(){return(this.name||"")+(this.isMapKey?"map":"value")+" element"},_.verifyValue=function(n){var r=this;function i(e,t){throw Error("Illegal value for "+r.toString(!0)+" of type "+r.type.name+": "+e+" ("+t+")")}switch(this.type){case t.TYPES.int32:case t.TYPES.sint32:case t.TYPES.sfixed32:return("number"!=typeof n||n==n&&n%1!=0)&&i(typeof n,"not an integer"),n>4294967295?0|n:n;case t.TYPES.uint32:case t.TYPES.fixed32:return("number"!=typeof n||n==n&&n%1!=0)&&i(typeof n,"not an integer"),n<0?n>>>0:n;case t.TYPES.int64:case t.TYPES.sint64:case t.TYPES.sfixed64:if(t.Long)try{return E(n,!1)}catch(e){i(typeof n,e.message)}else i(typeof n,"requires Long.js");case t.TYPES.uint64:case t.TYPES.fixed64:if(t.Long)try{return E(n,!0)}catch(e){i(typeof n,e.message)}else i(typeof n,"requires Long.js");case t.TYPES.bool:return"boolean"!=typeof n&&i(typeof n,"not a boolean"),n;case t.TYPES.float:case t.TYPES.double:return"number"!=typeof n&&i(typeof n,"not a number"),n;case t.TYPES.string:return"string"==typeof n||n&&n instanceof String||i(typeof n,"not a string"),""+n;case t.TYPES.bytes:return e.isByteBuffer(n)?n:e.wrap(n,"base64");case t.TYPES.enum:var o=this.resolvedType.getChildren(t.Reflect.Enum.Value);for(a=0;a<o.length;a++){if(o[a].name==n)return o[a].id;if(o[a].id==n)return o[a].id}if("proto3"===this.syntax)return("number"!=typeof n||n==n&&n%1!=0)&&i(typeof n,"not an integer"),(n>4294967295||n<0)&&i(typeof n,"not in range for uint32"),n;i(n,"not a valid enum value");case t.TYPES.group:case t.TYPES.message:if(n&&"object"==typeof n||i(typeof n,"object expected"),n instanceof this.resolvedType.clazz)return n;if(n instanceof t.Builder.Message){var s={};for(var a in n)n.hasOwnProperty(a)&&(s[a]=n[a]);n=s}return new this.resolvedType.clazz(n)}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+n+" (undefined type "+this.type+")")},_.calculateLength=function(n,r){if(null===r)return 0;var i;switch(this.type){case t.TYPES.int32:return r<0?e.calculateVarint64(r):e.calculateVarint32(r);case t.TYPES.uint32:return e.calculateVarint32(r);case t.TYPES.sint32:return e.calculateVarint32(e.zigZagEncode32(r));case t.TYPES.fixed32:case t.TYPES.sfixed32:case t.TYPES.float:return 4;case t.TYPES.int64:case t.TYPES.uint64:return e.calculateVarint64(r);case t.TYPES.sint64:return e.calculateVarint64(e.zigZagEncode64(r));case t.TYPES.fixed64:case t.TYPES.sfixed64:return 8;case t.TYPES.bool:return 1;case t.TYPES.enum:return e.calculateVarint32(r);case t.TYPES.double:return 8;case t.TYPES.string:return i=e.calculateUTF8Bytes(r),e.calculateVarint32(i)+i;case t.TYPES.bytes:if(r.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+r.remaining()+" bytes remaining");return e.calculateVarint32(r.remaining())+r.remaining();case t.TYPES.message:return i=this.resolvedType.calculate(r),e.calculateVarint32(i)+i;case t.TYPES.group:return(i=this.resolvedType.calculate(r))+e.calculateVarint32(n<<3|t.WIRE_TYPES.ENDGROUP)}throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+r+" (unknown type)")},_.encodeValue=function(n,r,i){if(null===r)return i;switch(this.type){case t.TYPES.int32:r<0?i.writeVarint64(r):i.writeVarint32(r);break;case t.TYPES.uint32:i.writeVarint32(r);break;case t.TYPES.sint32:i.writeVarint32ZigZag(r);break;case t.TYPES.fixed32:i.writeUint32(r);break;case t.TYPES.sfixed32:i.writeInt32(r);break;case t.TYPES.int64:case t.TYPES.uint64:i.writeVarint64(r);break;case t.TYPES.sint64:i.writeVarint64ZigZag(r);break;case t.TYPES.fixed64:i.writeUint64(r);break;case t.TYPES.sfixed64:i.writeInt64(r);break;case t.TYPES.bool:"string"==typeof r?i.writeVarint32("false"===r.toLowerCase()?0:!!r):i.writeVarint32(r?1:0);break;case t.TYPES.enum:i.writeVarint32(r);break;case t.TYPES.float:i.writeFloat32(r);break;case t.TYPES.double:i.writeFloat64(r);break;case t.TYPES.string:i.writeVString(r);break;case t.TYPES.bytes:if(r.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+r.remaining()+" bytes remaining");var o=r.offset;i.writeVarint32(r.remaining()),i.append(r),r.offset=o;break;case t.TYPES.message:var s=(new e).LE();this.resolvedType.encode(r,s),i.writeVarint32(s.offset),i.append(s.flip());break;case t.TYPES.group:this.resolvedType.encode(r,i),i.writeVarint32(n<<3|t.WIRE_TYPES.ENDGROUP);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+r+" (unknown type)")}return i},_.decode=function(e,n,r){if(n!=this.type.wireType)throw Error("Unexpected wire type for element");var i,o;switch(this.type){case t.TYPES.int32:return 0|e.readVarint32();case t.TYPES.uint32:return e.readVarint32()>>>0;case t.TYPES.sint32:return 0|e.readVarint32ZigZag();case t.TYPES.fixed32:return e.readUint32()>>>0;case t.TYPES.sfixed32:return 0|e.readInt32();case t.TYPES.int64:return e.readVarint64();case t.TYPES.uint64:return e.readVarint64().toUnsigned();case t.TYPES.sint64:return e.readVarint64ZigZag();case t.TYPES.fixed64:return e.readUint64();case t.TYPES.sfixed64:return e.readInt64();case t.TYPES.bool:return!!e.readVarint32();case t.TYPES.enum:return e.readVarint32();case t.TYPES.float:return e.readFloat();case t.TYPES.double:return e.readDouble();case t.TYPES.string:return e.readVString();case t.TYPES.bytes:if(o=e.readVarint32(),e.remaining()<o)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+o+" required but got only "+e.remaining());return(i=e.clone()).limit=i.offset+o,e.offset+=o,i;case t.TYPES.message:return o=e.readVarint32(),this.resolvedType.decode(e,o);case t.TYPES.group:return this.resolvedType.decode(e,-1,r)}throw Error("[INTERNAL] Illegal decode type")},_.valueFromString=function(n){if(!this.isMapKey)throw Error("valueFromString() called on non-map-key element");switch(this.type){case t.TYPES.int32:case t.TYPES.sint32:case t.TYPES.sfixed32:case t.TYPES.uint32:case t.TYPES.fixed32:return this.verifyValue(parseInt(n));case t.TYPES.int64:case t.TYPES.sint64:case t.TYPES.sfixed64:case t.TYPES.uint64:case t.TYPES.fixed64:return this.verifyValue(n);case t.TYPES.bool:return"true"===n;case t.TYPES.string:return this.verifyValue(n);case t.TYPES.bytes:return e.fromBinary(n)}},_.valueToString=function(e){if(!this.isMapKey)throw Error("valueToString() called on non-map-key element");return this.type===t.TYPES.bytes?e.toString("binary"):e.toString()},n.Element=a;var l=function(e,t,n,r,i,s){o.call(this,e,t,n,r,s),this.className="Message",this.extensions=void 0,this.clazz=null,this.isGroup=!!i,this._fields=null,this._fieldsById=null,this._fieldsByName=null},d=l.prototype=Object.create(o.prototype);function u(e,n){var r=n.readVarint32(),i=7&r,o=r>>>3;switch(i){case t.WIRE_TYPES.VARINT:do{r=n.readUint8()}while(128==(128&r));break;case t.WIRE_TYPES.BITS64:n.offset+=8;break;case t.WIRE_TYPES.LDELIM:r=n.readVarint32(),n.offset+=r;break;case t.WIRE_TYPES.STARTGROUP:u(o,n);break;case t.WIRE_TYPES.ENDGROUP:if(o===e)return!1;throw Error("Illegal GROUPEND after unknown group: "+o+" ("+e+" expected)");case t.WIRE_TYPES.BITS32:n.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+e+": "+i)}return!0}d.build=function(n){if(this.clazz&&!n)return this.clazz;var r=function(t,n){var r=n.getChildren(t.Reflect.Message.Field),i=n.getChildren(t.Reflect.Message.OneOf),o=function(s,a){t.Builder.Message.call(this);for(var _=0,E=i.length;_<E;++_)this[i[_].name]=null;for(_=0,E=r.length;_<E;++_){var l=r[_];this[l.name]=l.repeated?[]:l.map?new t.Map(l):null,!l.required&&"proto3"!==n.syntax||null===l.defaultValue||(this[l.name]=l.defaultValue)}var d;if(arguments.length>0)if(1!==arguments.length||null===s||"object"!=typeof s||!("function"!=typeof s.encode||s instanceof o)||Array.isArray(s)||s instanceof t.Map||e.isByteBuffer(s)||s instanceof ArrayBuffer||t.Long&&s instanceof t.Long)for(_=0,E=arguments.length;_<E;++_)void 0!==(d=arguments[_])&&this.$set(r[_].name,d);else this.$set(s)},s=o.prototype=Object.create(t.Builder.Message.prototype);s.add=function(e,r,i){var o=n._fieldsByName[e];if(!i){if(!o)throw Error(this+"#"+e+" is undefined");if(!(o instanceof t.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: "+o.toString(!0));if(!o.repeated)throw Error(this+"#"+e+" is not a repeated field");r=o.verifyValue(r,!0)}return null===this[e]&&(this[e]=[]),this[e].push(r),this},s.$add=s.add,s.set=function(e,r,i){if(e&&"object"==typeof e){for(var o in i=r,e)e.hasOwnProperty(o)&&void 0!==(r=e[o])&&void 0===n._oneofsByName[o]&&this.$set(o,r,i);return this}var s=n._fieldsByName[e];if(i)this[e]=r;else{if(!s)throw Error(this+"#"+e+" is not a field: undefined");if(!(s instanceof t.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: "+s.toString(!0));this[s.name]=r=s.verifyValue(r)}if(s&&s.oneof){var a=this[s.oneof.name];null!==r?(null!==a&&a!==s.name&&(this[a]=null),this[s.oneof.name]=s.name):a===e&&(this[s.oneof.name]=null)}return this},s.$set=s.set,s.get=function(e,r){if(r)return this[e];var i=n._fieldsByName[e];if(!(i&&i instanceof t.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: undefined");if(!(i instanceof t.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: "+i.toString(!0));return this[i.name]},s.$get=s.get;for(var a=0;a<r.length;a++){var _=r[a];_ instanceof t.Reflect.Message.ExtensionField||n.builder.options.populateAccessors&&function(e){var t=e.originalName.replace(/(_[a-zA-Z])/g,(function(e){return e.toUpperCase().replace("_","")}));t=t.substring(0,1).toUpperCase()+t.substring(1);var r=e.originalName.replace(/([A-Z])/g,(function(e){return"_"+e})),i=function(t,n){return this[e.name]=n?t:e.verifyValue(t),this},o=function(){return this[e.name]};null===n.getChild("set"+t)&&(s["set"+t]=i),null===n.getChild("set_"+r)&&(s["set_"+r]=i),null===n.getChild("get"+t)&&(s["get"+t]=o),null===n.getChild("get_"+r)&&(s["get_"+r]=o)}(_)}function E(n,r,i,o){if(null===n||"object"!=typeof n){if(o&&o instanceof t.Reflect.Enum){var s=t.Reflect.Enum.getName(o.object,n);if(null!==s)return s}return n}if(e.isByteBuffer(n))return r?n.toBase64():n.toBuffer();if(t.Long.isLong(n))return i?n.toString():t.Long.fromValue(n);var a;if(Array.isArray(n))return a=[],n.forEach((function(e,t){a[t]=E(e,r,i,o)})),a;if(a={},n instanceof t.Map){for(var _=n.entries(),l=_.next();!l.done;l=_.next())a[n.keyElem.valueToString(l.value[0])]=E(l.value[1],r,i,n.valueElem.resolvedType);return a}var d=n.$type,u=void 0;for(var h in n)n.hasOwnProperty(h)&&(d&&(u=d.getChild(h))?a[h]=E(n[h],r,i,u.resolvedType):a[h]=E(n[h],r,i));return a}return s.encode=function(t,r){"boolean"==typeof t&&(r=t,t=void 0);var i=!1;t||(t=new e,i=!0);var o=t.littleEndian;try{return n.encode(this,t.LE(),r),(i?t.flip():t).LE(o)}catch(e){throw t.LE(o),e}},o.encode=function(e,t,n){return new o(e).encode(t,n)},s.calculate=function(){return n.calculate(this)},s.encodeDelimited=function(t,r){var i=!1;t||(t=new e,i=!0);var o=(new e).LE();return n.encode(this,o,r).flip(),t.writeVarint32(o.remaining()),t.append(o),i?t.flip():t},s.encodeAB=function(){try{return this.encode().toArrayBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toArrayBuffer()),e}},s.toArrayBuffer=s.encodeAB,s.encodeNB=function(){try{return this.encode().toBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBuffer()),e}},s.toBuffer=s.encodeNB,s.encode64=function(){try{return this.encode().toBase64()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBase64()),e}},s.toBase64=s.encode64,s.encodeHex=function(){try{return this.encode().toHex()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toHex()),e}},s.toHex=s.encodeHex,s.toRaw=function(e,t){return E(this,!!e,!!t,this.$type)},s.encodeJSON=function(){return JSON.stringify(E(this,!0,!0,this.$type))},o.decode=function(t,r,i){"string"==typeof r&&(i=r,r=-1),"string"==typeof t?t=e.wrap(t,i||"base64"):e.isByteBuffer(t)||(t=e.wrap(t));var o=t.littleEndian;try{var s=n.decode(t.LE(),r);return t.LE(o),s}catch(e){throw t.LE(o),e}},o.decodeDelimited=function(t,r){if("string"==typeof t?t=e.wrap(t,r||"base64"):e.isByteBuffer(t)||(t=e.wrap(t)),t.remaining()<1)return null;var i=t.offset,o=t.readVarint32();if(t.remaining()<o)return t.offset=i,null;try{var s=n.decode(t.slice(t.offset,t.offset+o).LE());return t.offset+=o,s}catch(e){throw t.offset+=o,e}},o.decode64=function(e){return o.decode(e,"base64")},o.decodeHex=function(e){return o.decode(e,"hex")},o.decodeJSON=function(e){return new o(JSON.parse(e))},s.toString=function(){return n.toString()},Object.defineProperty&&(Object.defineProperty(o,"$options",{value:n.buildOpt()}),Object.defineProperty(s,"$options",{value:o.$options}),Object.defineProperty(o,"$type",{value:n}),Object.defineProperty(s,"$type",{value:n})),o}(t,this);this._fields=[],this._fieldsById={},this._fieldsByName={},this._oneofsByName={};for(var i,o=0,s=this.children.length;o<s;o++)if((i=this.children[o])instanceof p||i instanceof l||i instanceof g){if(r.hasOwnProperty(i.name))throw Error("Illegal reflect child of "+this.toString(!0)+": "+i.toString(!0)+" cannot override static property '"+i.name+"'");r[i.name]=i.build()}else if(i instanceof l.Field)i.build(),this._fields.push(i),this._fieldsById[i.id]=i,this._fieldsByName[i.name]=i;else if(i instanceof l.OneOf)this._oneofsByName[i.name]=i;else if(!(i instanceof l.OneOf||i instanceof m))throw Error("Illegal reflect child of "+this.toString(!0)+": "+this.children[o].toString(!0));return this.clazz=r},d.encode=function(e,t,n){for(var r,i,o=null,s=0,a=this._fields.length;s<a;++s)i=e[(r=this._fields[s]).name],r.required&&null===i?null===o&&(o=r):r.encode(n?i:r.verifyValue(i),t,e);if(null!==o){var _=Error("Missing at least one required field for "+this.toString(!0)+": "+o);throw _.encoded=t,_}return t},d.calculate=function(e){for(var t,n,r=0,i=0,o=this._fields.length;i<o;++i){if(n=e[(t=this._fields[i]).name],t.required&&null===n)throw Error("Missing at least one required field for "+this.toString(!0)+": "+t);r+=t.calculate(n,e)}return r},d.decode=function(e,n,r){"number"!=typeof n&&(n=-1);for(var i,o,s,a,_=e.offset,E=new this.clazz;e.offset<_+n||-1===n&&e.remaining()>0;){if(s=(i=e.readVarint32())>>>3,(o=7&i)===t.WIRE_TYPES.ENDGROUP){if(s!==r)throw Error("Illegal group end indicator for "+this.toString(!0)+": "+s+" ("+(r?r+" expected":"not a group")+")");break}if(a=this._fieldsById[s]){if(a.repeated&&!a.options.packed)E[a.name].push(a.decode(o,e));else if(a.map){var l=a.decode(o,e);E[a.name].set(l[0],l[1])}else if(E[a.name]=a.decode(o,e),a.oneof){var d=E[a.oneof.name];null!==d&&d!==a.name&&(E[d]=null),E[a.oneof.name]=a.name}}else switch(o){case t.WIRE_TYPES.VARINT:e.readVarint32();break;case t.WIRE_TYPES.BITS32:e.offset+=4;break;case t.WIRE_TYPES.BITS64:e.offset+=8;break;case t.WIRE_TYPES.LDELIM:var h=e.readVarint32();e.offset+=h;break;case t.WIRE_TYPES.STARTGROUP:for(;u(s,e););break;default:throw Error("Illegal wire type for unknown field "+s+" in "+this.toString(!0)+"#decode: "+o)}}for(var c=0,f=this._fields.length;c<f;++c)if(null===E[(a=this._fields[c]).name])if("proto3"===this.syntax)E[a.name]=a.defaultValue;else{if(a.required){var p=Error("Missing at least one required field for "+this.toString(!0)+": "+a.name);throw p.decoded=E,p}t.populateDefaults&&null!==a.defaultValue&&(E[a.name]=a.defaultValue)}return E},n.Message=l;var h=function(e,n,i,o,s,a,_,E,d,u){r.call(this,e,n,a),this.className="Message.Field",this.required="required"===i,this.repeated="repeated"===i,this.map="map"===i,this.keyType=o||null,this.type=s,this.resolvedType=null,this.id=_,this.options=E||{},this.defaultValue=null,this.oneof=d||null,this.syntax=u||"proto2",this.originalName=this.name,this.element=null,this.keyElement=null,!this.builder.options.convertFieldsToCamelCase||this instanceof l.ExtensionField||(this.name=t.Util.toCamelCase(this.name))},c=h.prototype=Object.create(r.prototype);c.build=function(){this.element=new a(this.type,this.resolvedType,!1,this.syntax,this.name),this.map&&(this.keyElement=new a(this.keyType,void 0,!0,this.syntax,this.name)),"proto3"!==this.syntax||this.repeated||this.map?void 0!==this.options.default&&(this.defaultValue=this.verifyValue(this.options.default)):this.defaultValue=a.defaultFieldValue(this.type)},c.verifyValue=function(e,n){n=n||!1;var r,i=this;function o(e,t){throw Error("Illegal value for "+i.toString(!0)+" of type "+i.type.name+": "+e+" ("+t+")")}if(null===e)return this.required&&o(typeof e,"required"),"proto3"===this.syntax&&this.type!==t.TYPES.message&&o(typeof e,"proto3 field without field presence cannot be null"),null;if(this.repeated&&!n){Array.isArray(e)||(e=[e]);var s=[];for(r=0;r<e.length;r++)s.push(this.element.verifyValue(e[r]));return s}return this.map&&!n?e instanceof t.Map?e:(e instanceof Object||o(typeof e,"expected ProtoBuf.Map or raw object for map field"),new t.Map(this,e)):(!this.repeated&&Array.isArray(e)&&o(typeof e,"no array expected"),this.element.verifyValue(e))},c.hasWirePresence=function(e,n){if("proto3"!==this.syntax)return null!==e;if(this.oneof&&n[this.oneof.name]===this.name)return!0;switch(this.type){case t.TYPES.int32:case t.TYPES.sint32:case t.TYPES.sfixed32:case t.TYPES.uint32:case t.TYPES.fixed32:return 0!==e;case t.TYPES.int64:case t.TYPES.sint64:case t.TYPES.sfixed64:case t.TYPES.uint64:case t.TYPES.fixed64:return 0!==e.low||0!==e.high;case t.TYPES.bool:return e;case t.TYPES.float:case t.TYPES.double:return 0!==e;case t.TYPES.string:return e.length>0;case t.TYPES.bytes:return e.remaining()>0;case t.TYPES.enum:return 0!==e;case t.TYPES.message:return null!==e;default:return!0}},c.encode=function(n,r,i){if(null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===n||this.repeated&&0==n.length)return r;try{var o;if(this.repeated)if(this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){r.writeVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),r.ensureCapacity(r.offset+=1);var s=r.offset;for(o=0;o<n.length;o++)this.element.encodeValue(this.id,n[o],r);var a=r.offset-s,_=e.calculateVarint32(a);if(_>1){var E=r.slice(s,r.offset);s+=_-1,r.offset=s,r.append(E)}r.writeVarint32(a,s-_)}else for(o=0;o<n.length;o++)r.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,n[o],r);else this.map?n.forEach((function(n,i,o){var s=e.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,i)+e.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,n);r.writeVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),r.writeVarint32(s),r.writeVarint32(8|this.keyType.wireType),this.keyElement.encodeValue(1,i,r),r.writeVarint32(16|this.type.wireType),this.element.encodeValue(2,n,r)}),this):this.hasWirePresence(n,i)&&(r.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,n,r))}catch(e){throw Error("Illegal value for "+this.toString(!0)+": "+n+" ("+e+")")}return r},c.calculate=function(n,r){if(n=this.verifyValue(n),null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===n||this.repeated&&0==n.length)return 0;var i=0;try{var o,s;if(this.repeated)if(this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){for(i+=e.calculateVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),s=0,o=0;o<n.length;o++)s+=this.element.calculateLength(this.id,n[o]);i+=e.calculateVarint32(s),i+=s}else for(o=0;o<n.length;o++)i+=e.calculateVarint32(this.id<<3|this.type.wireType),i+=this.element.calculateLength(this.id,n[o]);else this.map?n.forEach((function(n,r,o){var s=e.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,r)+e.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,n);i+=e.calculateVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),i+=e.calculateVarint32(s),i+=s}),this):this.hasWirePresence(n,r)&&(i+=e.calculateVarint32(this.id<<3|this.type.wireType),i+=this.element.calculateLength(this.id,n))}catch(e){throw Error("Illegal value for "+this.toString(!0)+": "+n+" ("+e+")")}return i},c.decode=function(e,n,r){var i,o;if(!(!this.map&&e==this.type.wireType||!r&&this.repeated&&this.options.packed&&e==t.WIRE_TYPES.LDELIM||this.map&&e==t.WIRE_TYPES.LDELIM))throw Error("Illegal wire type for field "+this.toString(!0)+": "+e+" ("+this.type.wireType+" expected)");if(e==t.WIRE_TYPES.LDELIM&&this.repeated&&this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0&&!r){o=n.readVarint32(),o=n.offset+o;for(var s=[];n.offset<o;)s.push(this.decode(this.type.wireType,n,!0));return s}if(this.map){var _=a.defaultFieldValue(this.keyType);if(i=a.defaultFieldValue(this.type),o=n.readVarint32(),n.remaining()<o)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+o+" required but got only "+n.remaining());var E=n.clone();for(E.limit=E.offset+o,n.offset+=o;E.remaining()>0;){var l=E.readVarint32();e=7&l;var d=l>>>3;if(1===d)_=this.keyElement.decode(E,e,d);else{if(2!==d)throw Error("Unexpected tag in map field key/value submessage");i=this.element.decode(E,e,d)}}return[_,i]}return this.element.decode(n,e,this.id)},n.Message.Field=h;var f=function(e,t,n,r,i,o,s){h.call(this,e,t,n,null,r,i,o,s),this.extension};f.prototype=Object.create(h.prototype),n.Message.ExtensionField=f,n.Message.OneOf=function(e,t,n){r.call(this,e,t,n),this.fields=[]};var p=function(e,t,n,r,i){o.call(this,e,t,n,r,i),this.className="Enum",this.object=null};p.getName=function(e,t){for(var n,r=Object.keys(e),i=0;i<r.length;++i)if(e[n=r[i]]===t)return n;return null},(p.prototype=Object.create(o.prototype)).build=function(e){if(this.object&&!e)return this.object;for(var n=new t.Builder.Enum,r=this.getChildren(p.Value),i=0,o=r.length;i<o;++i)n[r[i].name]=r[i].id;return Object.defineProperty&&Object.defineProperty(n,"$options",{value:this.buildOpt(),enumerable:!1}),this.object=n},n.Enum=p;var R=function(e,t,n,i){r.call(this,e,t,n),this.className="Enum.Value",this.id=i};R.prototype=Object.create(r.prototype),n.Enum.Value=R;var m=function(e,t,n,i){r.call(this,e,t,n),this.field=i};m.prototype=Object.create(r.prototype),n.Extension=m;var g=function(e,t,n,r){o.call(this,e,t,n,r),this.className="Service",this.clazz=null};(g.prototype=Object.create(o.prototype)).build=function(n){return this.clazz&&!n?this.clazz:this.clazz=function(t,n){for(var r=function(e){t.Builder.Service.call(this),this.rpcImpl=e||function(e,t,n){setTimeout(n.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0)}},i=r.prototype=Object.create(t.Builder.Service.prototype),o=n.getChildren(t.Reflect.Service.RPCMethod),s=0;s<o.length;s++)!function(t){i[t.name]=function(r,i){try{try{r=t.resolvedRequestType.clazz.decode(e.wrap(r))}catch(e){if(!(e instanceof TypeError))throw e}if(null===r||"object"!=typeof r)throw Error("Illegal arguments");r instanceof t.resolvedRequestType.clazz||(r=new t.resolvedRequestType.clazz(r)),this.rpcImpl(t.fqn(),r,(function(e,r){if(e)i(e);else{null===r&&(r="");try{r=t.resolvedResponseType.clazz.decode(r)}catch(e){}r&&r instanceof t.resolvedResponseType.clazz?i(null,r):i(Error("Illegal response type received in service method "+n.name+"#"+t.name))}}))}catch(e){setTimeout(i.bind(this,e),0)}},r[t.name]=function(e,n,i){new r(e)[t.name](n,i)},Object.defineProperty&&(Object.defineProperty(r[t.name],"$options",{value:t.buildOpt()}),Object.defineProperty(i[t.name],"$options",{value:r[t.name].$options}))}(o[s]);return Object.defineProperty&&(Object.defineProperty(r,"$options",{value:n.buildOpt()}),Object.defineProperty(i,"$options",{value:r.$options}),Object.defineProperty(r,"$type",{value:n}),Object.defineProperty(i,"$type",{value:n})),r}(t,this)},n.Service=g;var y=function(e,t,n,i){r.call(this,e,t,n),this.className="Service.Method",this.options=i||{}};(y.prototype=Object.create(r.prototype)).buildOpt=s.buildOpt,n.Service.Method=y;var S=function(e,t,n,r,i,o,s,a){y.call(this,e,t,n,a),this.className="Service.RPCMethod",this.requestName=r,this.responseName=i,this.requestStream=o,this.responseStream=s,this.resolvedRequestType=null,this.resolvedResponseType=null};return S.prototype=Object.create(y.prototype),n.Service.RPCMethod=S,n}(o),o.Builder=function(e,t,r){var i=function(e){this.ns=new r.Namespace(this,null,""),this.ptr=this.ns,this.resolved=!1,this.result=null,this.files={},this.importRoot=null,this.options=e||{}},o=i.prototype;return i.isMessage=function(e){return"string"==typeof e.name&&void 0===e.values&&void 0===e.rpc},i.isMessageField=function(e){return"string"==typeof e.rule&&"string"==typeof e.name&&"string"==typeof e.type&&void 0!==e.id},i.isEnum=function(e){return"string"==typeof e.name&&!(void 0===e.values||!Array.isArray(e.values)||0===e.values.length)},i.isService=function(e){return!("string"!=typeof e.name||"object"!=typeof e.rpc||!e.rpc)},i.isExtend=function(e){return"string"==typeof e.ref},o.reset=function(){return this.ptr=this.ns,this},o.define=function(e){if("string"!=typeof e||!t.TYPEREF.test(e))throw Error("illegal namespace: "+e);return e.split(".").forEach((function(e){var t=this.ptr.getChild(e);null===t&&this.ptr.addChild(t=new r.Namespace(this,this.ptr,e)),this.ptr=t}),this),this},o.create=function(t){if(!t)return this;if(Array.isArray(t)){if(0===t.length)return this;t=t.slice()}else t=[t];for(var n=[t];n.length>0;){if(t=n.pop(),!Array.isArray(t))throw Error("not a valid namespace: "+JSON.stringify(t));for(;t.length>0;){var o=t.shift();if(i.isMessage(o)){var s=new r.Message(this,this.ptr,o.name,o.options,o.isGroup,o.syntax),a={};o.oneofs&&Object.keys(o.oneofs).forEach((function(e){s.addChild(a[e]=new r.Message.OneOf(this,s,e))}),this),o.fields&&o.fields.forEach((function(e){if(null!==s.getChild(0|e.id))throw Error("duplicate or invalid field id in "+s.name+": "+e.id);if(e.options&&"object"!=typeof e.options)throw Error("illegal field options in "+s.name+"#"+e.name);var t=null;if("string"==typeof e.oneof&&!(t=a[e.oneof]))throw Error("illegal oneof in "+s.name+"#"+e.name+": "+e.oneof);e=new r.Message.Field(this,s,e.rule,e.keytype,e.type,e.name,e.id,e.options,t,o.syntax),t&&t.fields.push(e),s.addChild(e)}),this);var _=[];if(o.enums&&o.enums.forEach((function(e){_.push(e)})),o.messages&&o.messages.forEach((function(e){_.push(e)})),o.services&&o.services.forEach((function(e){_.push(e)})),o.extensions&&("number"==typeof o.extensions[0]?s.extensions=[o.extensions]:s.extensions=o.extensions),this.ptr.addChild(s),_.length>0){n.push(t),t=_,_=null,this.ptr=s,s=null;continue}_=null}else if(i.isEnum(o))s=new r.Enum(this,this.ptr,o.name,o.options,o.syntax),o.values.forEach((function(e){s.addChild(new r.Enum.Value(this,s,e.name,e.id))}),this),this.ptr.addChild(s);else if(i.isService(o))s=new r.Service(this,this.ptr,o.name,o.options),Object.keys(o.rpc).forEach((function(e){var t=o.rpc[e];s.addChild(new r.Service.RPCMethod(this,s,e,t.request,t.response,!!t.request_stream,!!t.response_stream,t.options))}),this),this.ptr.addChild(s);else{if(!i.isExtend(o))throw Error("not a valid definition: "+JSON.stringify(o));if(s=this.ptr.resolve(o.ref,!0))o.fields.forEach((function(t){if(null!==s.getChild(0|t.id))throw Error("duplicate extended field id in "+s.name+": "+t.id);if(s.extensions){var n=!1;if(s.extensions.forEach((function(e){t.id>=e[0]&&t.id<=e[1]&&(n=!0)})),!n)throw Error("illegal extended field id in "+s.name+": "+t.id+" (not within valid ranges)")}var i=t.name;this.options.convertFieldsToCamelCase&&(i=e.Util.toCamelCase(i));var o=new r.Message.ExtensionField(this,s,t.rule,t.type,this.ptr.fqn()+"."+i,t.id,t.options),a=new r.Extension(this,this.ptr,t.name,o);o.extension=a,this.ptr.addChild(a),s.addChild(o)}),this);else if(!/\.?google\.protobuf\./.test(o.ref))throw Error("extended message "+o.ref+" is not defined")}o=null,s=null}t=null,this.ptr=this.ptr.parent}return this.resolved=!1,this.result=null,this},o.import=function(t,r){var i="/";if("string"==typeof r){if(e.Util.IS_NODE&&(r=n(1).resolve(r)),!0===this.files[r])return this.reset();this.files[r]=!0}else if("object"==typeof r){var o,s=r.root;if(e.Util.IS_NODE&&(s=n(1).resolve(s)),(s.indexOf("\\")>=0||r.file.indexOf("\\")>=0)&&(i="\\"),o=e.Util.IS_NODE?n(1).join(s,r.file):s+i+r.file,!0===this.files[o])return this.reset();this.files[o]=!0}if(t.imports&&t.imports.length>0){var a,_=!1;"object"==typeof r?(this.importRoot=r.root,_=!0,a=this.importRoot,r=r.file,(a.indexOf("\\")>=0||r.indexOf("\\")>=0)&&(i="\\")):"string"==typeof r?this.importRoot?a=this.importRoot:r.indexOf("/")>=0?""===(a=r.replace(/\/[^\/]*$/,""))&&(a="/"):r.indexOf("\\")>=0?(a=r.replace(/\\[^\\]*$/,""),i="\\"):a=".":a=null;for(var E=0;E<t.imports.length;E++)if("string"==typeof t.imports[E]){if(!a)throw Error("cannot determine import root");var l=t.imports[E];if("google/protobuf/descriptor.proto"===l)continue;if(l=e.Util.IS_NODE?n(1).join(a,l):a+i+l,!0===this.files[l])continue;/\.proto$/i.test(l)&&!e.DotProto&&(l=l.replace(/\.proto$/,".json"));var d=e.Util.fetch(l);if(null===d)throw Error("failed to import '"+l+"' in '"+r+"': file not found");/\.json$/i.test(l)?this.import(JSON.parse(d+""),l):this.import(e.DotProto.Parser.parse(d),l)}else r?/\.(\w+)$/.test(r)?this.import(t.imports[E],r.replace(/^(.+)\.(\w+)$/,(function(e,t,n){return t+"_import"+E+"."+n}))):this.import(t.imports[E],r+"_import"+E):this.import(t.imports[E]);_&&(this.importRoot=null)}t.package&&this.define(t.package),t.syntax&&function e(t){t.messages&&t.messages.forEach((function(n){n.syntax=t.syntax,e(n)})),t.enums&&t.enums.forEach((function(e){e.syntax=t.syntax}))}(t);var u=this.ptr;return t.options&&Object.keys(t.options).forEach((function(e){u.options[e]=t.options[e]})),t.messages&&(this.create(t.messages),this.ptr=u),t.enums&&(this.create(t.enums),this.ptr=u),t.services&&(this.create(t.services),this.ptr=u),t.extends&&this.create(t.extends),this.reset()},o.resolveAll=function(){var n;if(null==this.ptr||"object"==typeof this.ptr.type)return this;if(this.ptr instanceof r.Namespace)this.ptr.children.forEach((function(e){this.ptr=e,this.resolveAll()}),this);else if(this.ptr instanceof r.Message.Field){if(t.TYPE.test(this.ptr.type))this.ptr.type=e.TYPES[this.ptr.type];else{if(!t.TYPEREF.test(this.ptr.type))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(!(n=(this.ptr instanceof r.Message.ExtensionField?this.ptr.extension.parent:this.ptr.parent).resolve(this.ptr.type,!0)))throw Error("unresolvable type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(this.ptr.resolvedType=n,n instanceof r.Enum){if(this.ptr.type=e.TYPES.enum,"proto3"===this.ptr.syntax&&"proto3"!==n.syntax)throw Error("proto3 message cannot reference proto2 enum")}else{if(!(n instanceof r.Message))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);this.ptr.type=n.isGroup?e.TYPES.group:e.TYPES.message}}if(this.ptr.map){if(!t.TYPE.test(this.ptr.keyType))throw Error("illegal key type for map field in "+this.ptr.toString(!0)+": "+this.ptr.keyType);this.ptr.keyType=e.TYPES[this.ptr.keyType]}"proto3"===this.ptr.syntax&&this.ptr.repeated&&void 0===this.ptr.options.packed&&-1!==e.PACKABLE_WIRE_TYPES.indexOf(this.ptr.type.wireType)&&(this.ptr.options.packed=!0)}else if(this.ptr instanceof e.Reflect.Service.Method){if(!(this.ptr instanceof e.Reflect.Service.RPCMethod))throw Error("illegal service type in "+this.ptr.toString(!0));if(!((n=this.ptr.parent.resolve(this.ptr.requestName,!0))&&n instanceof e.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.requestName);if(this.ptr.resolvedRequestType=n,!((n=this.ptr.parent.resolve(this.ptr.responseName,!0))&&n instanceof e.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.responseName);this.ptr.resolvedResponseType=n}else if(!(this.ptr instanceof e.Reflect.Message.OneOf||this.ptr instanceof e.Reflect.Extension||this.ptr instanceof e.Reflect.Enum.Value))throw Error("illegal object in namespace: "+typeof this.ptr+": "+this.ptr);return this.reset()},o.build=function(e){if(this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),null===this.result&&(this.result=this.ns.build()),!e)return this.result;for(var t="string"==typeof e?e.split("."):e,n=this.result,r=0;r<t.length;r++){if(!n[t[r]]){n=null;break}n=n[t[r]]}return n},o.lookup=function(e,t){return e?this.ns.resolve(e,t):this.ns},o.toString=function(){return"Builder"},i.Message=function(){},i.Enum=function(){},i.Service=function(){},i}(o,o.Lang,o.Reflect),o.Map=function(e,t){var n=function(e,n){if(!e.map)throw Error("field is not a map");if(this.field=e,this.keyElem=new t.Element(e.keyType,null,!0,e.syntax),this.valueElem=new t.Element(e.type,e.resolvedType,!1,e.syntax),this.map={},Object.defineProperty(this,"size",{get:function(){return Object.keys(this.map).length}}),n)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=this.keyElem.valueFromString(r[i]),s=this.valueElem.verifyValue(n[r[i]]);this.map[this.keyElem.valueToString(o)]={key:o,value:s}}},r=n.prototype;function i(e){var t=0;return{next:function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}}return r.clear=function(){this.map={}},r.delete=function(e){var t=this.keyElem.valueToString(this.keyElem.verifyValue(e)),n=t in this.map;return delete this.map[t],n},r.entries=function(){for(var e,t=[],n=Object.keys(this.map),r=0;r<n.length;r++)t.push([(e=this.map[n[r]]).key,e.value]);return i(t)},r.keys=function(){for(var e=[],t=Object.keys(this.map),n=0;n<t.length;n++)e.push(this.map[t[n]].key);return i(e)},r.values=function(){for(var e=[],t=Object.keys(this.map),n=0;n<t.length;n++)e.push(this.map[t[n]].value);return i(e)},r.forEach=function(e,t){for(var n,r=Object.keys(this.map),i=0;i<r.length;i++)e.call(t,(n=this.map[r[i]]).value,n.key,this)},r.set=function(e,t){var n=this.keyElem.verifyValue(e),r=this.valueElem.verifyValue(t);return this.map[this.keyElem.valueToString(n)]={key:n,value:r},this},r.get=function(e){var t=this.keyElem.valueToString(this.keyElem.verifyValue(e));if(t in this.map)return this.map[t].value},r.has=function(e){return this.keyElem.valueToString(this.keyElem.verifyValue(e))in this.map},n}(0,o.Reflect),o.loadProto=function(e,t,n){return("string"==typeof t||t&&"string"==typeof t.file&&"string"==typeof t.root)&&(n=t,t=void 0),o.loadJson(o.DotProto.Parser.parse(e),t,n)},o.protoFromString=o.loadProto,o.loadProtoFile=function(e,t,n){if(t&&"object"==typeof t?(n=t,t=null):t&&"function"==typeof t||(t=null),t)return o.Util.fetch("string"==typeof e?e:e.root+"/"+e.file,(function(r){if(null!==r)try{t(null,o.loadProto(r,n,e))}catch(e){t(e)}else t(Error("Failed to fetch file"))}));var r=o.Util.fetch("object"==typeof e?e.root+"/"+e.file:e);return null===r?null:o.loadProto(r,n,e)},o.protoFromFile=o.loadProtoFile,o.newBuilder=function(e){return void 0===(e=e||{}).convertFieldsToCamelCase&&(e.convertFieldsToCamelCase=o.convertFieldsToCamelCase),void 0===e.populateAccessors&&(e.populateAccessors=o.populateAccessors),new o.Builder(e)},o.loadJson=function(e,t,n){return("string"==typeof t||t&&"string"==typeof t.file&&"string"==typeof t.root)&&(n=t,t=null),t&&"object"==typeof t||(t=o.newBuilder()),"string"==typeof e&&(e=JSON.parse(e)),t.import(e,n),t.resolveAll(),t},o.loadJsonFile=function(e,t,n){if(t&&"object"==typeof t?(n=t,t=null):t&&"function"==typeof t||(t=null),t)return o.Util.fetch("string"==typeof e?e:e.root+"/"+e.file,(function(r){if(null!==r)try{t(null,o.loadJson(JSON.parse(r),n,e))}catch(e){t(e)}else t(Error("Failed to fetch file"))}));var r=o.Util.fetch("object"==typeof e?e.root+"/"+e.file:e);return null===r?null:o.loadJson(JSON.parse(r),n,e)},o})?i.apply(t,o):i)||(e.exports=s)}).call(this,n(9))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var _,E=[],l=!1,d=-1;function u(){l&&_&&(l=!1,_.length?E=_.concat(E):d=-1,E.length&&h())}function h(){if(!l){var e=a(u);l=!0;for(var t=E.length;t;){for(_=E,E=[];++d<t;)_&&_[d].run();d=-1,t=E.length}_=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function c(e,t){this.fun=e,this.array=t}function f(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];E.push(new c(e,t)),1!==E.length||l||a(h)},c.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.prependListener=f,i.prependOnceListener=f,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){var r,i,o;i=[n(11)],void 0===(o="function"==typeof(r=function(e){var t=function(e,n,i){if(void 0===e&&(e=t.DEFAULT_CAPACITY),void 0===n&&(n=t.DEFAULT_ENDIAN),void 0===i&&(i=t.DEFAULT_NOASSERT),!i){if((e|=0)<0)throw RangeError("Illegal capacity");n=!!n,i=!!i}this.buffer=0===e?r:new ArrayBuffer(e),this.view=0===e?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=e,this.littleEndian=n,this.noAssert=i};t.VERSION="5.0.1",t.LITTLE_ENDIAN=!0,t.BIG_ENDIAN=!1,t.DEFAULT_CAPACITY=16,t.DEFAULT_ENDIAN=t.BIG_ENDIAN,t.DEFAULT_NOASSERT=!1,t.Long=e||null;var n=t.prototype;n.__isByteBuffer__,Object.defineProperty(n,"__isByteBuffer__",{value:!0,enumerable:!1,configurable:!1});var r=new ArrayBuffer(0),i=String.fromCharCode;function o(e){var t=0;return function(){return t<e.length?e.charCodeAt(t++):null}}function s(){var e=[],t=[];return function(){if(0===arguments.length)return t.join("")+i.apply(String,e);e.length+arguments.length>1024&&(t.push(i.apply(String,e)),e.length=0),Array.prototype.push.apply(e,arguments)}}function a(e,t,n,r,i){var o,s,a=8*i-r-1,_=(1<<a)-1,E=_>>1,l=-7,d=n?i-1:0,u=n?-1:1,h=e[t+d];for(d+=u,o=h&(1<<-l)-1,h>>=-l,l+=a;l>0;o=256*o+e[t+d],d+=u,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+d],d+=u,l-=8);if(0===o)o=1-E;else{if(o===_)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),o-=E}return(h?-1:1)*s*Math.pow(2,o-r)}function _(e,t,n,r,i,o){var s,a,_,E=8*o-i-1,l=(1<<E)-1,d=l>>1,u=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,c=r?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(_=Math.pow(2,-s))<1&&(s--,_*=2),(t+=s+d>=1?u/_:u*Math.pow(2,1-d))*_>=2&&(s++,_/=2),s+d>=l?(a=0,s=l):s+d>=1?(a=(t*_-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[n+h]=255&a,h+=c,a/=256,i-=8);for(s=s<<i|a,E+=i;E>0;e[n+h]=255&s,h+=c,s/=256,E-=8);e[n+h-c]|=128*f}t.accessor=function(){return Uint8Array},t.allocate=function(e,n,r){return new t(e,n,r)},t.concat=function(e,n,r,i){"boolean"!=typeof n&&"string"==typeof n||(i=r,r=n,n=void 0);for(var o,s=0,a=0,_=e.length;a<_;++a)t.isByteBuffer(e[a])||(e[a]=t.wrap(e[a],n)),(o=e[a].limit-e[a].offset)>0&&(s+=o);if(0===s)return new t(0,r,i);var E,l=new t(s,r,i);for(a=0;a<_;)(o=(E=e[a++]).limit-E.offset)<=0||(l.view.set(E.view.subarray(E.offset,E.limit),l.offset),l.offset+=o);return l.limit=l.offset,l.offset=0,l},t.isByteBuffer=function(e){return!0===(e&&e.__isByteBuffer__)},t.type=function(){return ArrayBuffer},t.wrap=function(e,r,i,o){if("string"!=typeof r&&(o=i,i=r,r=void 0),"string"==typeof e)switch(void 0===r&&(r="utf8"),r){case"base64":return t.fromBase64(e,i);case"hex":return t.fromHex(e,i);case"binary":return t.fromBinary(e,i);case"utf8":return t.fromUTF8(e,i);case"debug":return t.fromDebug(e,i);default:throw Error("Unsupported encoding: "+r)}if(null===e||"object"!=typeof e)throw TypeError("Illegal buffer");var s;if(t.isByteBuffer(e))return(s=n.clone.call(e)).markedOffset=-1,s;if(e instanceof Uint8Array)s=new t(0,i,o),e.length>0&&(s.buffer=e.buffer,s.offset=e.byteOffset,s.limit=e.byteOffset+e.byteLength,s.view=new Uint8Array(e.buffer));else if(e instanceof ArrayBuffer)s=new t(0,i,o),e.byteLength>0&&(s.buffer=e,s.offset=0,s.limit=e.byteLength,s.view=e.byteLength>0?new Uint8Array(e):null);else{if("[object Array]"!==Object.prototype.toString.call(e))throw TypeError("Illegal buffer");(s=new t(e.length,i,o)).limit=e.length;for(var a=0;a<e.length;++a)s.view[a]=e[a]}return s},n.writeBitSet=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if(!(e instanceof Array))throw TypeError("Illegal BitSet: Not an array");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var r,i=t,o=e.length,s=o>>3,a=0;for(t+=this.writeVarint32(o,t);s--;)r=1&!!e[a++]|(1&!!e[a++])<<1|(1&!!e[a++])<<2|(1&!!e[a++])<<3|(1&!!e[a++])<<4|(1&!!e[a++])<<5|(1&!!e[a++])<<6|(1&!!e[a++])<<7,this.writeByte(r,t++);if(a<o){var _=0;for(r=0;a<o;)r|=(1&!!e[a++])<<_++;this.writeByte(r,t++)}return n?(this.offset=t,this):t-i},n.readBitSet=function(e){var t=void 0===e;t&&(e=this.offset);var n,r=this.readVarint32(e),i=r.value,o=i>>3,s=0,a=[];for(e+=r.length;o--;)n=this.readByte(e++),a[s++]=!!(1&n),a[s++]=!!(2&n),a[s++]=!!(4&n),a[s++]=!!(8&n),a[s++]=!!(16&n),a[s++]=!!(32&n),a[s++]=!!(64&n),a[s++]=!!(128&n);if(s<i){var _=0;for(n=this.readByte(e++);s<i;)a[s++]=!!(n>>_++&1)}return t&&(this.offset=e),a},n.readBytes=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+e+") <= "+this.buffer.byteLength)}var r=this.slice(t,t+e);return n&&(this.offset+=e),r},n.writeBytes=n.append,n.writeInt8=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=1,this.view[t]=e,n&&(this.offset+=1),this},n.writeByte=n.writeInt8,n.readInt8=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n=this.view[e];return 128==(128&n)&&(n=-(255-n+1)),t&&(this.offset+=1),n},n.readByte=n.readInt8,n.writeUint8=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=1,this.view[t]=e,n&&(this.offset+=1),this},n.writeUInt8=n.writeUint8,n.readUint8=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n=this.view[e];return t&&(this.offset+=1),n},n.readUInt8=n.readUint8,n.writeInt16=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),n&&(this.offset+=2),this},n.writeShort=n.writeInt16,n.readInt16=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[e],n|=this.view[e+1]<<8):(n=this.view[e]<<8,n|=this.view[e+1]),32768==(32768&n)&&(n=-(65535-n+1)),t&&(this.offset+=2),n},n.readShort=n.readInt16,n.writeUint16=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),n&&(this.offset+=2),this},n.writeUInt16=n.writeUint16,n.readUint16=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[e],n|=this.view[e+1]<<8):(n=this.view[e]<<8,n|=this.view[e+1]),t&&(this.offset+=2),n},n.readUInt16=n.readUint16,n.writeInt32=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=4,this.littleEndian?(this.view[t+3]=e>>>24&255,this.view[t+2]=e>>>16&255,this.view[t+1]=e>>>8&255,this.view[t]=255&e):(this.view[t]=e>>>24&255,this.view[t+1]=e>>>16&255,this.view[t+2]=e>>>8&255,this.view[t+3]=255&e),n&&(this.offset+=4),this},n.writeInt=n.writeInt32,n.readInt32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[e+2]<<16,n|=this.view[e+1]<<8,n|=this.view[e],n+=this.view[e+3]<<24>>>0):(n=this.view[e+1]<<16,n|=this.view[e+2]<<8,n|=this.view[e+3],n+=this.view[e]<<24>>>0),n|=0,t&&(this.offset+=4),n},n.readInt=n.readInt32,n.writeUint32=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=4,this.littleEndian?(this.view[t+3]=e>>>24&255,this.view[t+2]=e>>>16&255,this.view[t+1]=e>>>8&255,this.view[t]=255&e):(this.view[t]=e>>>24&255,this.view[t+1]=e>>>16&255,this.view[t+2]=e>>>8&255,this.view[t+3]=255&e),n&&(this.offset+=4),this},n.writeUInt32=n.writeUint32,n.readUint32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[e+2]<<16,n|=this.view[e+1]<<8,n|=this.view[e],n+=this.view[e+3]<<24>>>0):(n=this.view[e+1]<<16,n|=this.view[e+2]<<8,n|=this.view[e+3],n+=this.view[e]<<24>>>0),t&&(this.offset+=4),n},n.readUInt32=n.readUint32,e&&(n.writeInt64=function(t,n){var r=void 0===n;if(r&&(n=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t)),n+=8;var i=this.buffer.byteLength;n>i&&this.resize((i*=2)>n?i:n),n-=8;var o=t.low,s=t.high;return this.littleEndian?(this.view[n+3]=o>>>24&255,this.view[n+2]=o>>>16&255,this.view[n+1]=o>>>8&255,this.view[n]=255&o,n+=4,this.view[n+3]=s>>>24&255,this.view[n+2]=s>>>16&255,this.view[n+1]=s>>>8&255,this.view[n]=255&s):(this.view[n]=s>>>24&255,this.view[n+1]=s>>>16&255,this.view[n+2]=s>>>8&255,this.view[n+3]=255&s,n+=4,this.view[n]=o>>>24&255,this.view[n+1]=o>>>16&255,this.view[n+2]=o>>>8&255,this.view[n+3]=255&o),r&&(this.offset+=8),this},n.writeLong=n.writeInt64,n.readInt64=function(t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var r=0,i=0;this.littleEndian?(r=this.view[t+2]<<16,r|=this.view[t+1]<<8,r|=this.view[t],r+=this.view[t+3]<<24>>>0,t+=4,i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0,t+=4,r=this.view[t+1]<<16,r|=this.view[t+2]<<8,r|=this.view[t+3],r+=this.view[t]<<24>>>0);var o=new e(r,i,!1);return n&&(this.offset+=8),o},n.readLong=n.readInt64,n.writeUint64=function(t,n){var r=void 0===n;if(r&&(n=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t)),n+=8;var i=this.buffer.byteLength;n>i&&this.resize((i*=2)>n?i:n),n-=8;var o=t.low,s=t.high;return this.littleEndian?(this.view[n+3]=o>>>24&255,this.view[n+2]=o>>>16&255,this.view[n+1]=o>>>8&255,this.view[n]=255&o,n+=4,this.view[n+3]=s>>>24&255,this.view[n+2]=s>>>16&255,this.view[n+1]=s>>>8&255,this.view[n]=255&s):(this.view[n]=s>>>24&255,this.view[n+1]=s>>>16&255,this.view[n+2]=s>>>8&255,this.view[n+3]=255&s,n+=4,this.view[n]=o>>>24&255,this.view[n+1]=o>>>16&255,this.view[n+2]=o>>>8&255,this.view[n+3]=255&o),r&&(this.offset+=8),this},n.writeUInt64=n.writeUint64,n.readUint64=function(t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var r=0,i=0;this.littleEndian?(r=this.view[t+2]<<16,r|=this.view[t+1]<<8,r|=this.view[t],r+=this.view[t+3]<<24>>>0,t+=4,i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0,t+=4,r=this.view[t+1]<<16,r|=this.view[t+2]<<8,r|=this.view[t+3],r+=this.view[t]<<24>>>0);var o=new e(r,i,!0);return n&&(this.offset+=8),o},n.readUInt64=n.readUint64),n.writeFloat32=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=4,_(this.view,e,t,this.littleEndian,23,4),n&&(this.offset+=4),this},n.writeFloat=n.writeFloat32,n.readFloat32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var n=a(this.view,e,this.littleEndian,23,4);return t&&(this.offset+=4),n},n.readFloat=n.readFloat32,n.writeFloat64=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=8;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=8,_(this.view,e,t,this.littleEndian,52,8),n&&(this.offset+=8),this},n.writeDouble=n.writeFloat64,n.readFloat64=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var n=a(this.view,e,this.littleEndian,52,8);return t&&(this.offset+=8),n},n.readDouble=n.readFloat64,t.MAX_VARINT32_BYTES=5,t.calculateVarint32=function(e){return(e>>>=0)<128?1:e<16384?2:e<1<<21?3:e<1<<28?4:5},t.zigZagEncode32=function(e){return((e|=0)<<1^e>>31)>>>0},t.zigZagDecode32=function(e){return e>>>1^-(1&e)|0},n.writeVarint32=function(e,n){var r=void 0===n;if(r&&(n=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}var i,o=t.calculateVarint32(e);n+=o;var s=this.buffer.byteLength;for(n>s&&this.resize((s*=2)>n?s:n),n-=o,e>>>=0;e>=128;)i=127&e|128,this.view[n++]=i,e>>>=7;return this.view[n++]=e,r?(this.offset=n,this):o},n.writeVarint32ZigZag=function(e,n){return this.writeVarint32(t.zigZagEncode32(e),n)},n.readVarint32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n,r=0,i=0;do{if(!this.noAssert&&e>this.limit){var o=Error("Truncated");throw o.truncated=!0,o}n=this.view[e++],r<5&&(i|=(127&n)<<7*r),++r}while(0!=(128&n));return i|=0,t?(this.offset=e,i):{value:i,length:r}},n.readVarint32ZigZag=function(e){var n=this.readVarint32(e);return"object"==typeof n?n.value=t.zigZagDecode32(n.value):n=t.zigZagDecode32(n),n},e&&(t.MAX_VARINT64_BYTES=10,t.calculateVarint64=function(t){"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t));var n=t.toInt()>>>0,r=t.shiftRightUnsigned(28).toInt()>>>0,i=t.shiftRightUnsigned(56).toInt()>>>0;return 0==i?0==r?n<16384?n<128?1:2:n<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:i<128?9:10},t.zigZagEncode64=function(t){return"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftLeft(1).xor(t.shiftRight(63)).toUnsigned()},t.zigZagDecode64=function(t){return"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftRightUnsigned(1).xor(t.and(e.ONE).toSigned().negate()).toSigned()},n.writeVarint64=function(n,r){var i=void 0===r;if(i&&(r=this.offset),!this.noAssert){if("number"==typeof n)n=e.fromNumber(n);else if("string"==typeof n)n=e.fromString(n);else if(!(n&&n instanceof e))throw TypeError("Illegal value: "+n+" (not an integer or Long)");if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof n?n=e.fromNumber(n,!1):"string"==typeof n?n=e.fromString(n,!1):!1!==n.unsigned&&(n=n.toSigned());var o=t.calculateVarint64(n),s=n.toInt()>>>0,a=n.shiftRightUnsigned(28).toInt()>>>0,_=n.shiftRightUnsigned(56).toInt()>>>0;r+=o;var E=this.buffer.byteLength;switch(r>E&&this.resize((E*=2)>r?E:r),r-=o,o){case 10:this.view[r+9]=_>>>7&1;case 9:this.view[r+8]=9!==o?128|_:127&_;case 8:this.view[r+7]=8!==o?a>>>21|128:a>>>21&127;case 7:this.view[r+6]=7!==o?a>>>14|128:a>>>14&127;case 6:this.view[r+5]=6!==o?a>>>7|128:a>>>7&127;case 5:this.view[r+4]=5!==o?128|a:127&a;case 4:this.view[r+3]=4!==o?s>>>21|128:s>>>21&127;case 3:this.view[r+2]=3!==o?s>>>14|128:s>>>14&127;case 2:this.view[r+1]=2!==o?s>>>7|128:s>>>7&127;case 1:this.view[r]=1!==o?128|s:127&s}return i?(this.offset+=o,this):o},n.writeVarint64ZigZag=function(e,n){return this.writeVarint64(t.zigZagEncode64(e),n)},n.readVarint64=function(t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var r=t,i=0,o=0,s=0,a=0;if(i=127&(a=this.view[t++]),128&a&&(i|=(127&(a=this.view[t++]))<<7,(128&a||this.noAssert&&void 0===a)&&(i|=(127&(a=this.view[t++]))<<14,(128&a||this.noAssert&&void 0===a)&&(i|=(127&(a=this.view[t++]))<<21,(128&a||this.noAssert&&void 0===a)&&(o=127&(a=this.view[t++]),(128&a||this.noAssert&&void 0===a)&&(o|=(127&(a=this.view[t++]))<<7,(128&a||this.noAssert&&void 0===a)&&(o|=(127&(a=this.view[t++]))<<14,(128&a||this.noAssert&&void 0===a)&&(o|=(127&(a=this.view[t++]))<<21,(128&a||this.noAssert&&void 0===a)&&(s=127&(a=this.view[t++]),(128&a||this.noAssert&&void 0===a)&&(s|=(127&(a=this.view[t++]))<<7,128&a||this.noAssert&&void 0===a))))))))))throw Error("Buffer overrun");var _=e.fromBits(i|o<<28,o>>>4|s<<24,!1);return n?(this.offset=t,_):{value:_,length:t-r}},n.readVarint64ZigZag=function(n){var r=this.readVarint64(n);return r&&r.value instanceof e?r.value=t.zigZagDecode64(r.value):r=t.zigZagDecode64(r),r}),n.writeCString=function(e,t){var n=void 0===t;n&&(t=this.offset);var r,i=e.length;if(!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");for(r=0;r<i;++r)if(0===e.charCodeAt(r))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}i=l.calculateUTF16asUTF8(o(e))[1],t+=i+1;var s=this.buffer.byteLength;return t>s&&this.resize((s*=2)>t?s:t),t-=i+1,l.encodeUTF16toUTF8(o(e),function(e){this.view[t++]=e}.bind(this)),this.view[t++]=0,n?(this.offset=t,this):i},n.readCString=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n,r=e,i=-1;return l.decodeUTF8toUTF16(function(){if(0===i)return null;if(e>=this.limit)throw RangeError("Illegal range: Truncated data, "+e+" < "+this.limit);return 0===(i=this.view[e++])?null:i}.bind(this),n=s(),!0),t?(this.offset=e,n()):{string:n(),length:e-r}},n.writeIString=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var r,i=t;r=l.calculateUTF16asUTF8(o(e),this.noAssert)[1],t+=4+r;var s=this.buffer.byteLength;if(t>s&&this.resize((s*=2)>t?s:t),t-=4+r,this.littleEndian?(this.view[t+3]=r>>>24&255,this.view[t+2]=r>>>16&255,this.view[t+1]=r>>>8&255,this.view[t]=255&r):(this.view[t]=r>>>24&255,this.view[t+1]=r>>>16&255,this.view[t+2]=r>>>8&255,this.view[t+3]=255&r),t+=4,l.encodeUTF16toUTF8(o(e),function(e){this.view[t++]=e}.bind(this)),t!==i+4+r)throw RangeError("Illegal range: Truncated data, "+t+" == "+(t+4+r));return n?(this.offset=t,this):t-i},n.readIString=function(e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var r=e,i=this.readUint32(e),o=this.readUTF8String(i,t.METRICS_BYTES,e+=4);return e+=o.length,n?(this.offset=e,o.string):{string:o.string,length:e-r}},t.METRICS_CHARS="c",t.METRICS_BYTES="b",n.writeUTF8String=function(e,t){var n,r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var i=t;n=l.calculateUTF16asUTF8(o(e))[1],t+=n;var s=this.buffer.byteLength;return t>s&&this.resize((s*=2)>t?s:t),t-=n,l.encodeUTF16toUTF8(o(e),function(e){this.view[t++]=e}.bind(this)),r?(this.offset=t,this):t-i},n.writeString=n.writeUTF8String,t.calculateUTF8Chars=function(e){return l.calculateUTF16asUTF8(o(e))[0]},t.calculateUTF8Bytes=function(e){return l.calculateUTF16asUTF8(o(e))[1]},t.calculateString=t.calculateUTF8Bytes,n.readUTF8String=function(e,n,r){"number"==typeof n&&(r=n,n=void 0);var i=void 0===r;if(i&&(r=this.offset),void 0===n&&(n=t.METRICS_CHARS),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal length: "+e+" (not an integer)");if(e|=0,"number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var o,a=0,_=r;if(n===t.METRICS_CHARS){if(o=s(),l.decodeUTF8(function(){return a<e&&r<this.limit?this.view[r++]:null}.bind(this),(function(e){++a,l.UTF8toUTF16(e,o)})),a!==e)throw RangeError("Illegal range: Truncated data, "+a+" == "+e);return i?(this.offset=r,o()):{string:o(),length:r-_}}if(n===t.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+"+e+") <= "+this.buffer.byteLength)}var E=r+e;if(l.decodeUTF8toUTF16(function(){return r<E?this.view[r++]:null}.bind(this),o=s(),this.noAssert),r!==E)throw RangeError("Illegal range: Truncated data, "+r+" == "+E);return i?(this.offset=r,o()):{string:o(),length:r-_}}throw TypeError("Unsupported metrics: "+n)},n.readString=n.readUTF8String,n.writeVString=function(e,n){var r=void 0===n;if(r&&(n=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}var i,s,a=n;i=l.calculateUTF16asUTF8(o(e),this.noAssert)[1],s=t.calculateVarint32(i),n+=s+i;var _=this.buffer.byteLength;if(n>_&&this.resize((_*=2)>n?_:n),n-=s+i,n+=this.writeVarint32(i,n),l.encodeUTF16toUTF8(o(e),function(e){this.view[n++]=e}.bind(this)),n!==a+i+s)throw RangeError("Illegal range: Truncated data, "+n+" == "+(n+i+s));return r?(this.offset=n,this):n-a},n.readVString=function(e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r=e,i=this.readVarint32(e),o=this.readUTF8String(i.value,t.METRICS_BYTES,e+=i.length);return e+=o.length,n?(this.offset=e,o.string):{string:o.string,length:e-r}},n.append=function(e,n,r){"number"!=typeof n&&"string"==typeof n||(r=n,n=void 0);var i=void 0===r;if(i&&(r=this.offset),!this.noAssert){if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}e instanceof t||(e=t.wrap(e,n));var o=e.limit-e.offset;if(o<=0)return this;r+=o;var s=this.buffer.byteLength;return r>s&&this.resize((s*=2)>r?s:r),r-=o,this.view.set(e.view.subarray(e.offset,e.limit),r),e.offset+=o,i&&(this.offset+=o),this},n.appendTo=function(e,t){return e.append(this,t),this},n.assert=function(e){return this.noAssert=!e,this},n.capacity=function(){return this.buffer.byteLength},n.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},n.clone=function(e){var n=new t(0,this.littleEndian,this.noAssert);return e?(n.buffer=new ArrayBuffer(this.buffer.byteLength),n.view=new Uint8Array(n.buffer)):(n.buffer=this.buffer,n.view=this.view),n.offset=this.offset,n.markedOffset=this.markedOffset,n.limit=this.limit,n},n.compact=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(0===e&&t===this.buffer.byteLength)return this;var n=t-e;if(0===n)return this.buffer=r,this.view=null,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=0,this;var i=new ArrayBuffer(n),o=new Uint8Array(i);return o.set(this.view.subarray(e,t)),this.buffer=i,this.view=o,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=n,this},n.copy=function(e,n){if(void 0===e&&(e=this.offset),void 0===n&&(n=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal end: Not an integer");if(n>>>=0,e<0||e>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+n+" <= "+this.buffer.byteLength)}if(e===n)return new t(0,this.littleEndian,this.noAssert);var r=n-e,i=new t(r,this.littleEndian,this.noAssert);return i.offset=0,i.limit=r,i.markedOffset>=0&&(i.markedOffset-=e),this.copyTo(i,0,e,n),i},n.copyTo=function(e,n,r,i){var o,s;if(!this.noAssert&&!t.isByteBuffer(e))throw TypeError("Illegal target: Not a ByteBuffer");if(n=(s=void 0===n)?e.offset:0|n,r=(o=void 0===r)?this.offset:0|r,i=void 0===i?this.limit:0|i,n<0||n>e.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+n+" <= "+e.buffer.byteLength);if(r<0||i>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+r+" <= "+this.buffer.byteLength);var a=i-r;return 0===a?e:(e.ensureCapacity(n+a),e.view.set(this.view.subarray(r,i),n),o&&(this.offset+=a),s&&(e.offset+=a),this)},n.ensureCapacity=function(e){var t=this.buffer.byteLength;return t<e?this.resize((t*=2)>e?t:e):this},n.fill=function(e,t,n){var r=void 0===t;if(r&&(t=this.offset),"string"==typeof e&&e.length>0&&(e=e.charCodeAt(0)),void 0===t&&(t=this.offset),void 0===n&&(n=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal end: Not an integer");if(n>>>=0,t<0||t>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+n+" <= "+this.buffer.byteLength)}if(t>=n)return this;for(;t<n;)this.view[t++]=e;return r&&(this.offset=t),this},n.flip=function(){return this.limit=this.offset,this.offset=0,this},n.mark=function(e){if(e=void 0===e?this.offset:e,!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=e,this},n.order=function(e){if(!this.noAssert&&"boolean"!=typeof e)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!e,this},n.LE=function(e){return this.littleEndian=void 0===e||!!e,this},n.BE=function(e){return this.littleEndian=void 0!==e&&!e,this},n.prepend=function(e,n,r){"number"!=typeof n&&"string"==typeof n||(r=n,n=void 0);var i=void 0===r;if(i&&(r=this.offset),!this.noAssert){if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}e instanceof t||(e=t.wrap(e,n));var o=e.limit-e.offset;if(o<=0)return this;var s=o-r;if(s>0){var a=new ArrayBuffer(this.buffer.byteLength+s),_=new Uint8Array(a);_.set(this.view.subarray(r,this.buffer.byteLength),o),this.buffer=a,this.view=_,this.offset+=s,this.markedOffset>=0&&(this.markedOffset+=s),this.limit+=s,r+=s}else new Uint8Array(this.buffer);return this.view.set(e.view.subarray(e.offset,e.limit),r-o),e.offset=e.limit,i&&(this.offset-=o),this},n.prependTo=function(e,t){return e.prepend(this,t),this},n.printDebug=function(e){"function"!=typeof e&&(e=console.log.bind(console)),e(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0))},n.remaining=function(){return this.limit-this.offset},n.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},n.resize=function(e){if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal capacity: "+e+" (not an integer)");if((e|=0)<0)throw RangeError("Illegal capacity: 0 <= "+e)}if(this.buffer.byteLength<e){var t=new ArrayBuffer(e),n=new Uint8Array(t);n.set(this.view),this.buffer=t,this.view=n}return this},n.reverse=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}return e===t||Array.prototype.reverse.call(this.view.subarray(e,t)),this},n.skip=function(e){if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal length: "+e+" (not an integer)");e|=0}var t=this.offset+e;if(!this.noAssert&&(t<0||t>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+e+" <= "+this.buffer.byteLength);return this.offset=t,this},n.slice=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var n=this.clone();return n.offset=e,n.limit=t,n},n.toBuffer=function(e){var t=this.offset,n=this.limit;if(!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: Not an integer");if(t>>>=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal limit: Not an integer");if(n>>>=0,t<0||t>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+n+" <= "+this.buffer.byteLength)}if(!e&&0===t&&n===this.buffer.byteLength)return this.buffer;if(t===n)return r;var i=new ArrayBuffer(n-t);return new Uint8Array(i).set(new Uint8Array(this.buffer).subarray(t,n),0),i},n.toArrayBuffer=n.toBuffer,n.toString=function(e,t,n){if(void 0===e)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof e&&(n=t=e="utf8"),e){case"utf8":return this.toUTF8(t,n);case"base64":return this.toBase64(t,n);case"hex":return this.toHex(t,n);case"binary":return this.toBinary(t,n);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+e)}};var E=function(){for(var e={},t=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],n=[],r=0,i=t.length;r<i;++r)n[t[r]]=r;return e.encode=function(e,n){for(var r,i;null!==(r=e());)n(t[r>>2&63]),i=(3&r)<<4,null!==(r=e())?(n(t[63&((i|=r>>4&15)|r>>4&15)]),i=(15&r)<<2,null!==(r=e())?(n(t[63&(i|r>>6&3)]),n(t[63&r])):(n(t[63&i]),n(61))):(n(t[63&i]),n(61),n(61))},e.decode=function(e,t){var r,i,o;function s(e){throw Error("Illegal character code: "+e)}for(;null!==(r=e());)if(void 0===(i=n[r])&&s(r),null!==(r=e())&&(void 0===(o=n[r])&&s(r),t(i<<2>>>0|(48&o)>>4),null!==(r=e()))){if(void 0===(i=n[r])){if(61===r)break;s(r)}if(t((15&o)<<4>>>0|(60&i)>>2),null!==(r=e())){if(void 0===(o=n[r])){if(61===r)break;s(r)}t((3&i)<<6>>>0|o)}}},e.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)},e}();n.toBase64=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),t|=0,(e|=0)<0||t>this.capacity||e>t)throw RangeError("begin, end");var n;return E.encode(function(){return e<t?this.view[e++]:null}.bind(this),n=s()),n()},t.fromBase64=function(e,n){if("string"!=typeof e)throw TypeError("str");var r=new t(e.length/4*3,n),i=0;return E.decode(o(e),(function(e){r.view[i++]=e})),r.limit=i,r},t.btoa=function(e){return t.fromBinary(e).toBase64()},t.atob=function(e){return t.fromBase64(e).toBinary()},n.toBinary=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),t|=0,(e|=0)<0||t>this.capacity()||e>t)throw RangeError("begin, end");if(e===t)return"";for(var n=[],r=[];e<t;)n.push(this.view[e++]),n.length>=1024&&(r.push(String.fromCharCode.apply(String,n)),n=[]);return r.join("")+String.fromCharCode.apply(String,n)},t.fromBinary=function(e,n){if("string"!=typeof e)throw TypeError("str");for(var r,i=0,o=e.length,s=new t(o,n);i<o;){if((r=e.charCodeAt(i))>255)throw RangeError("illegal char code: "+r);s.view[i++]=r}return s.limit=o,s},n.toDebug=function(e){for(var t,n=-1,r=this.buffer.byteLength,i="",o="",s="";n<r;){if(-1!==n&&(i+=(t=this.view[n])<16?"0"+t.toString(16).toUpperCase():t.toString(16).toUpperCase(),e&&(o+=t>32&&t<127?String.fromCharCode(t):".")),++n,e&&n>0&&n%16==0&&n!==r){for(;i.length<51;)i+=" ";s+=i+o+"\n",i=o=""}n===this.offset&&n===this.limit?i+=n===this.markedOffset?"!":"|":n===this.offset?i+=n===this.markedOffset?"[":"<":n===this.limit?i+=n===this.markedOffset?"]":">":i+=n===this.markedOffset?"'":e||0!==n&&n!==r?" ":""}if(e&&" "!==i){for(;i.length<51;)i+=" ";s+=i+o+"\n"}return e?s:i},t.fromDebug=function(e,n,r){for(var i,o,s=e.length,a=new t((s+1)/3|0,n,r),_=0,E=0,l=!1,d=!1,u=!1,h=!1,c=!1;_<s;){switch(i=e.charAt(_++)){case"!":if(!r){if(d||u||h){c=!0;break}d=u=h=!0}a.offset=a.markedOffset=a.limit=E,l=!1;break;case"|":if(!r){if(d||h){c=!0;break}d=h=!0}a.offset=a.limit=E,l=!1;break;case"[":if(!r){if(d||u){c=!0;break}d=u=!0}a.offset=a.markedOffset=E,l=!1;break;case"<":if(!r){if(d){c=!0;break}d=!0}a.offset=E,l=!1;break;case"]":if(!r){if(h||u){c=!0;break}h=u=!0}a.limit=a.markedOffset=E,l=!1;break;case">":if(!r){if(h){c=!0;break}h=!0}a.limit=E,l=!1;break;case"'":if(!r){if(u){c=!0;break}u=!0}a.markedOffset=E,l=!1;break;case" ":l=!1;break;default:if(!r&&l){c=!0;break}if(o=parseInt(i+e.charAt(_++),16),!r&&(isNaN(o)||o<0||o>255))throw TypeError("Illegal str: Not a debug encoded string");a.view[E++]=o,l=!0}if(c)throw TypeError("Illegal str: Invalid symbol at "+_)}if(!r){if(!d||!h)throw TypeError("Illegal str: Missing offset or limit");if(E<a.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+E+" < "+s)}return a},n.toHex=function(e,t){if(e=void 0===e?this.offset:e,t=void 0===t?this.limit:t,!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}for(var n,r=new Array(t-e);e<t;)(n=this.view[e++])<16?r.push("0",n.toString(16)):r.push(n.toString(16));return r.join("")},t.fromHex=function(e,n,r){if(!r){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if(e.length%2!=0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var i,o=e.length,s=new t(o/2|0,n),a=0,_=0;a<o;a+=2){if(i=parseInt(e.substring(a,a+2),16),!r&&(!isFinite(i)||i<0||i>255))throw TypeError("Illegal str: Contains non-hex characters");s.view[_++]=i}return s.limit=_,s};var l=function(){var e={MAX_CODEPOINT:1114111,encodeUTF8:function(e,t){var n=null;for("number"==typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)n<128?t(127&n):n<2048?(t(n>>6&31|192),t(63&n|128)):n<65536?(t(n>>12&15|224),t(n>>6&63|128),t(63&n|128)):(t(n>>18&7|240),t(n>>12&63|128),t(n>>6&63|128),t(63&n|128)),n=null},decodeUTF8:function(e,t){for(var n,r,i,o,s=function(e){e=e.slice(0,e.indexOf(null));var t=Error(e.toString());throw t.name="TruncatedError",t.bytes=e,t};null!==(n=e());)if(0==(128&n))t(n);else if(192==(224&n))null===(r=e())&&s([n,r]),t((31&n)<<6|63&r);else if(224==(240&n))(null===(r=e())||null===(i=e()))&&s([n,r,i]),t((15&n)<<12|(63&r)<<6|63&i);else{if(240!=(248&n))throw RangeError("Illegal starting byte: "+n);(null===(r=e())||null===(i=e())||null===(o=e()))&&s([n,r,i,o]),t((7&n)<<18|(63&r)<<12|(63&i)<<6|63&o)}},UTF16toUTF8:function(e,t){for(var n,r=null;null!==(n=null!==r?r:e());)n>=55296&&n<=57343&&null!==(r=e())&&r>=56320&&r<=57343?(t(1024*(n-55296)+r-56320+65536),r=null):t(n);null!==r&&t(r)},UTF8toUTF16:function(e,t){var n=null;for("number"==typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)n<=65535?t(n):(t(55296+((n-=65536)>>10)),t(n%1024+56320)),n=null},encodeUTF16toUTF8:function(t,n){e.UTF16toUTF8(t,(function(t){e.encodeUTF8(t,n)}))},decodeUTF8toUTF16:function(t,n){e.decodeUTF8(t,(function(t){e.UTF8toUTF16(t,n)}))},calculateCodePoint:function(e){return e<128?1:e<2048?2:e<65536?3:4},calculateUTF8:function(e){for(var t,n=0;null!==(t=e());)n+=t<128?1:t<2048?2:t<65536?3:4;return n},calculateUTF16asUTF8:function(t){var n=0,r=0;return e.UTF16toUTF8(t,(function(e){++n,r+=e<128?1:e<2048?2:e<65536?3:4})),[n,r]}};return e}();return n.toUTF8=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var n;try{l.decodeUTF8toUTF16(function(){return e<t?this.view[e++]:null}.bind(this),n=s())}catch(n){if(e!==t)throw RangeError("Illegal range: Truncated data, "+e+" != "+t)}return n()},t.fromUTF8=function(e,n,r){if(!r&&"string"!=typeof e)throw TypeError("Illegal str: Not a string");var i=new t(l.calculateUTF16asUTF8(o(e),!0)[1],n,r),s=0;return l.encodeUTF16toUTF8(o(e),(function(e){i.view[s++]=e})),i.limit=s,i},t})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i;void 0===(i="function"==typeof(r=function(){function e(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function t(e){return!0===(e&&e.__isLong__)}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),e.isLong=t;var n={},r={};function i(e,t){var i,o,a;return t?(a=0<=(e>>>=0)&&e<256)&&(o=r[e])?o:(i=s(e,(0|e)<0?-1:0,!0),a&&(r[e]=i),i):(a=-128<=(e|=0)&&e<128)&&(o=n[e])?o:(i=s(e,e<0?-1:0,!1),a&&(n[e]=i),i)}function o(e,t){if(isNaN(e)||!isFinite(e))return t?f:c;if(t){if(e<0)return f;if(e>=d)return y}else{if(e<=-u)return S;if(e+1>=u)return g}return e<0?o(-e,t).neg():s(e%l|0,e/l|0,t)}function s(t,n,r){return new e(t,n,r)}e.fromInt=i,e.fromNumber=o,e.fromBits=s;var a=Math.pow;function _(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return c;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return _(e.substring(1),t,n).neg();for(var i=o(a(n,8)),s=c,E=0;E<e.length;E+=8){var l=Math.min(8,e.length-E),d=parseInt(e.substring(E,E+l),n);if(l<8){var u=o(a(n,l));s=s.mul(u).add(o(d))}else s=(s=s.mul(i)).add(o(d))}return s.unsigned=t,s}function E(t){return t instanceof e?t:"number"==typeof t?o(t):"string"==typeof t?_(t):s(t.low,t.high,t.unsigned)}e.fromString=_,e.fromValue=E;var l=4294967296,d=l*l,u=d/2,h=i(1<<24),c=i(0);e.ZERO=c;var f=i(0,!0);e.UZERO=f;var p=i(1);e.ONE=p;var R=i(1,!0);e.UONE=R;var m=i(-1);e.NEG_ONE=m;var g=s(-1,2147483647,!1);e.MAX_VALUE=g;var y=s(-1,-1,!0);e.MAX_UNSIGNED_VALUE=y;var S=s(0,-2147483648,!1);e.MIN_VALUE=S;var I=e.prototype;return I.toInt=function(){return this.unsigned?this.low>>>0:this.low},I.toNumber=function(){return this.unsigned?(this.high>>>0)*l+(this.low>>>0):this.high*l+(this.low>>>0)},I.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=o(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=o(a(e,6),this.unsigned),s=this,_="";;){var E=s.div(i),l=(s.sub(E.mul(i)).toInt()>>>0).toString(e);if((s=E).isZero())return l+_;for(;l.length<6;)l="0"+l;_=""+l+_}},I.getHighBits=function(){return this.high},I.getHighBitsUnsigned=function(){return this.high>>>0},I.getLowBits=function(){return this.low},I.getLowBitsUnsigned=function(){return this.low>>>0},I.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},I.isZero=function(){return 0===this.high&&0===this.low},I.isNegative=function(){return!this.unsigned&&this.high<0},I.isPositive=function(){return this.unsigned||this.high>=0},I.isOdd=function(){return 1==(1&this.low)},I.isEven=function(){return 0==(1&this.low)},I.equals=function(e){return t(e)||(e=E(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},I.eq=I.equals,I.notEquals=function(e){return!this.eq(e)},I.neq=I.notEquals,I.lessThan=function(e){return this.comp(e)<0},I.lt=I.lessThan,I.lessThanOrEqual=function(e){return this.comp(e)<=0},I.lte=I.lessThanOrEqual,I.greaterThan=function(e){return this.comp(e)>0},I.gt=I.greaterThan,I.greaterThanOrEqual=function(e){return this.comp(e)>=0},I.gte=I.greaterThanOrEqual,I.compare=function(e){if(t(e)||(e=E(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},I.comp=I.compare,I.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(p)},I.neg=I.negate,I.add=function(e){t(e)||(e=E(e));var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,a=e.high>>>16,_=65535&e.high,l=e.low>>>16,d=0,u=0,h=0,c=0;return h+=(c+=o+(65535&e.low))>>>16,u+=(h+=i+l)>>>16,d+=(u+=r+_)>>>16,d+=n+a,s((h&=65535)<<16|(c&=65535),(d&=65535)<<16|(u&=65535),this.unsigned)},I.subtract=function(e){return t(e)||(e=E(e)),this.add(e.neg())},I.sub=I.subtract,I.multiply=function(e){if(this.isZero())return c;if(t(e)||(e=E(e)),e.isZero())return c;if(this.eq(S))return e.isOdd()?S:c;if(e.eq(S))return this.isOdd()?S:c;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(h)&&e.lt(h))return o(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,a=65535&this.low,_=e.high>>>16,l=65535&e.high,d=e.low>>>16,u=65535&e.low,f=0,p=0,R=0,m=0;return R+=(m+=a*u)>>>16,p+=(R+=i*u)>>>16,R&=65535,p+=(R+=a*d)>>>16,f+=(p+=r*u)>>>16,p&=65535,f+=(p+=i*d)>>>16,p&=65535,f+=(p+=a*l)>>>16,f+=n*u+r*d+i*l+a*_,s((R&=65535)<<16|(m&=65535),(f&=65535)<<16|(p&=65535),this.unsigned)},I.mul=I.multiply,I.divide=function(e){if(t(e)||(e=E(e)),e.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?f:c;var n,r,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return f;if(e.gt(this.shru(1)))return R;i=f}else{if(this.eq(S))return e.eq(p)||e.eq(m)?S:e.eq(S)?p:(n=this.shr(1).div(e).shl(1)).eq(c)?e.isNegative()?p:m:(r=this.sub(e.mul(n)),i=n.add(r.div(e)));if(e.eq(S))return this.unsigned?f:c;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=c}for(r=this;r.gte(e);){n=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),_=s<=48?1:a(2,s-48),l=o(n),d=l.mul(e);d.isNegative()||d.gt(r);)d=(l=o(n-=_,this.unsigned)).mul(e);l.isZero()&&(l=p),i=i.add(l),r=r.sub(d)}return i},I.div=I.divide,I.modulo=function(e){return t(e)||(e=E(e)),this.sub(this.div(e).mul(e))},I.mod=I.modulo,I.not=function(){return s(~this.low,~this.high,this.unsigned)},I.and=function(e){return t(e)||(e=E(e)),s(this.low&e.low,this.high&e.high,this.unsigned)},I.or=function(e){return t(e)||(e=E(e)),s(this.low|e.low,this.high|e.high,this.unsigned)},I.xor=function(e){return t(e)||(e=E(e)),s(this.low^e.low,this.high^e.high,this.unsigned)},I.shiftLeft=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?s(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):s(0,this.low<<e-32,this.unsigned)},I.shl=I.shiftLeft,I.shiftRight=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?s(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):s(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},I.shr=I.shiftRight,I.shiftRightUnsigned=function(e){if(t(e)&&(e=e.toInt()),0==(e&=63))return this;var n=this.high;return e<32?s(this.low>>>e|n<<32-e,n>>>e,this.unsigned):s(32===e?n:n>>>e-32,0,this.unsigned)},I.shru=I.shiftRightUnsigned,I.toSigned=function(){return this.unsigned?s(this.low,this.high,!1):this},I.toUnsigned=function(){return this.unsigned?this:s(this.low,this.high,!0)},I.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},I.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24&255,255&e,e>>>8&255,e>>>16&255,e>>>24&255]},I.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t]},e})?r.apply(t,[]):r)||(e.exports=i)},function(e,t){},function(e){e.exports=JSON.parse('{"package":"mgobexs","syntax":"proto3","messages":[{"name":"ClientSendServerReqWrap1","syntax":"proto3","fields":[{"name":"version","type":"string","id":1},{"name":"appName","type":"string","id":2},{"name":"cmd","type":"string","id":3},{"name":"seq","type":"string","id":4},{"name":"clientIp","type":"string","id":5},{"name":"serviceIp","type":"string","id":6},{"name":"business","type":"string","id":7},{"name":"authKey","type":"string","id":8},{"name":"authType","type":"uint32","id":9},{"name":"authIp","type":"string","id":10},{"name":"gameId","type":"string","id":11},{"name":"uid","type":"uint64","id":12},{"name":"playerId","type":"string","id":13},{"name":"body","type":"bytes","id":14}]},{"name":"ServerSendClientBstWrap1","syntax":"proto3","fields":[{"name":"version","type":"string","id":1},{"name":"appName","type":"string","id":2},{"name":"cmd","type":"string","id":3},{"name":"seq","type":"string","id":4},{"name":"clientIp","type":"string","id":5},{"name":"serviceIp","type":"string","id":6},{"name":"business","type":"string","id":7},{"name":"authKey","type":"string","id":8},{"name":"authType","type":"uint32","id":9},{"name":"authIp","type":"string","id":10},{"name":"gameId","type":"string","id":11},{"name":"uid","type":"uint64","id":12},{"name":"playerId","type":"string","id":13},{"name":"body","type":"bytes","id":14}]},{"name":"ClientSendServerRspWrap1","syntax":"proto3","fields":[{"name":"seq","type":"string","id":1},{"name":"errCode","type":"int32","id":2},{"name":"errMsg","type":"string","id":3},{"name":"body","type":"bytes","id":4}]},{"name":"ClientSendServerReqWrap2","syntax":"proto3","fields":[{"name":"cmd","type":"ClientSendServerReqWrap2Cmd","id":1},{"name":"body","type":"bytes","id":2}]},{"name":"ClientSendServerRspWrap2","syntax":"proto3","fields":[{"name":"body","type":"bytes","id":1}]},{"name":"EventInfo","syntax":"proto3","fields":[{"name":"eventType","type":"EventType","id":1},{"name":"seq","type":"string","id":2},{"name":"body","type":"bytes","id":3}]},{"name":"EventNetworkState","syntax":"proto3","fields":[{"name":"gameId","type":"string","id":1},{"name":"playerId","type":"string","id":2},{"name":"networkState","type":"NetworkState","id":3}]},{"name":"HeartBeatReq","syntax":"proto3","fields":[{"name":"conType","type":"ConnectionType","id":1},{"name":"routeId","type":"string","id":2}]},{"name":"HeartBeatRsp","syntax":"proto3","fields":[]},{"name":"ServerSendClientBstWrap2","syntax":"proto3","fields":[{"name":"type","type":"ServerSendClientBstWrap2Type","id":1},{"name":"msg","type":"bytes","id":2}]},{"name":"NOUSEServerSendClientBstRspWrap2","syntax":"proto3","fields":[]},{"name":"CheckLoginReq","syntax":"proto3","fields":[{"name":"token","type":"string","id":1},{"name":"routeId","type":"string","id":2}]},{"name":"CheckLoginRsp","syntax":"proto3","fields":[]},{"name":"PushBodyType","syntax":"proto3","fields":[{"name":"pushMsg","type":"string","id":1}]},{"name":"LoginReq","syntax":"proto3","fields":[{"name":"gameId","type":"string","id":1},{"name":"openId","type":"string","id":2},{"name":"platform","type":"uint64","id":3},{"name":"channel","type":"uint64","id":4},{"name":"nonce","type":"uint64","id":5},{"name":"timestamp","type":"uint64","id":6},{"name":"sign","type":"string","id":7},{"name":"deviceId","type":"string","id":8},{"name":"mac","type":"string","id":9},{"name":"imei","type":"string","id":10}]},{"name":"LoginRsp","syntax":"proto3","fields":[{"name":"token","type":"string","id":1},{"name":"playerId","type":"string","id":2},{"name":"expireTime","type":"uint64","id":3},{"name":"sdkConfig","type":"SdkConfig","id":4}]},{"name":"SdkConfig","syntax":"proto3","fields":[{"name":"pingInterval","type":"uint32","id":1},{"name":"reportInterval","type":"uint32","id":2},{"name":"serverTime","type":"uint64","id":3},{"name":"enableUdp","type":"bool","id":4},{"name":"disableReport","type":"bool","id":5},{"name":"disableReqReport","type":"bool","id":6},{"name":"disableFrameReport","type":"bool","id":7},{"name":"minReportSize","type":"uint32","id":8}]},{"name":"LogoutReq","syntax":"proto3","fields":[]},{"name":"LogoutRsp","syntax":"proto3","fields":[]},{"name":"StartFrameSyncReq","syntax":"proto3","fields":[]},{"name":"StartFrameSyncRsp","syntax":"proto3","fields":[]},{"name":"StopFrameSyncReq","syntax":"proto3","fields":[]},{"name":"StopFrameSyncRsp","syntax":"proto3","fields":[]},{"name":"FrameItem","syntax":"proto3","fields":[{"name":"playerId","type":"string","id":1},{"name":"data","type":"string","id":2},{"name":"timestamp","type":"uint64","id":3}]},{"name":"SendFrameReq","syntax":"proto3","fields":[{"name":"roomId","type":"string","id":1},{"name":"item","type":"FrameItem","id":2}]},{"name":"SendFrameRsp","syntax":"proto3","fields":[]},{"name":"FrameExtInfo","syntax":"proto3","fields":[{"name":"seed","type":"uint64","id":1}]},{"name":"Frame","syntax":"proto3","fields":[{"name":"id","type":"uint64","id":1},{"rule":"repeated","name":"items","type":"FrameItem","id":2},{"name":"ext","type":"FrameExtInfo","id":3}]},{"name":"RequestFrameReq","syntax":"proto3","fields":[{"name":"roomId","type":"string","id":1},{"name":"beginFrameId","type":"uint64","id":2},{"name":"endFrameId","type":"uint64","id":3},{"name":"supportPartial","type":"bool","id":4}]},{"name":"RequestFrameRsp","syntax":"proto3","fields":[{"rule":"repeated","name":"frames","type":"Frame","id":1},{"name":"isPartial","type":"bool","id":2}]},{"name":"PlayerInfo","syntax":"proto3","fields":[{"name":"id","type":"string","id":1},{"name":"name","type":"string","id":2},{"name":"teamId","type":"string","id":3},{"name":"customPlayerStatus","type":"uint64","id":4},{"name":"customProfile","type":"string","id":5},{"name":"commonNetworkState","type":"NetworkState","id":6},{"name":"relayNetworkState","type":"NetworkState","id":7},{"name":"isRobot","type":"bool","id":8},{"rule":"repeated","name":"matchAttributes","type":"MatchAttribute","id":9}]},{"name":"TeamInfo","syntax":"proto3","fields":[{"name":"id","type":"string","id":1},{"name":"name","type":"string","id":2},{"name":"minPlayers","type":"uint32","id":3},{"name":"maxPlayers","type":"uint32","id":4}]},{"name":"RoomInfo","syntax":"proto3","fields":[{"name":"id","type":"string","id":1},{"name":"name","type":"string","id":2},{"name":"type","type":"string","id":3},{"name":"createType","type":"CreateRoomType","id":4},{"name":"maxPlayers","type":"uint64","id":5},{"name":"owner","type":"string","id":6},{"name":"isPrivate","type":"bool","id":9},{"name":"customProperties","type":"string","id":10},{"rule":"repeated","name":"playerList","type":"PlayerInfo","id":11},{"rule":"repeated","name":"teamList","type":"TeamInfo","id":13},{"name":"frameSyncState","type":"FrameSyncState","id":14},{"name":"frameRate","type":"uint32","id":15},{"name":"routeId","type":"string","id":16},{"name":"createTime","type":"uint64","id":17},{"name":"startGameTime","type":"uint64","id":18},{"name":"isForbidJoin","type":"bool","id":19}]},{"name":"CreateRoomReq","syntax":"proto3","fields":[{"name":"roomName","type":"string","id":1},{"name":"roomType","type":"string","id":2},{"name":"createType","type":"CreateRoomType","id":3},{"name":"maxPlayers","type":"uint64","id":4},{"name":"isPrivate","type":"bool","id":7},{"name":"customProperties","type":"string","id":8},{"name":"playerInfo","type":"PlayerInfo","id":9},{"name":"region","type":"string","id":11},{"name":"owner","type":"string","id":12},{"rule":"repeated","name":"playerList","type":"PlayerInfo","id":13},{"rule":"repeated","name":"teamList","type":"TeamInfo","id":14}]},{"name":"CreateRoomRsp","syntax":"proto3","fields":[{"name":"roomInfo","type":"RoomInfo","id":1}]},{"name":"JoinRoomReq","syntax":"proto3","fields":[{"name":"roomId","type":"string","id":1},{"name":"teamId","type":"string","id":2},{"name":"joinType","type":"JoinRoomType","id":3},{"name":"playerInfo","type":"PlayerInfo","id":4}]},{"name":"JoinRoomRsp","syntax":"proto3","fields":[{"name":"roomInfo","type":"RoomInfo","id":1}]},{"name":"LeaveRoomReq","syntax":"proto3","fields":[]},{"name":"LeaveRoomRsp","syntax":"proto3","fields":[{"name":"roomInfo","type":"RoomInfo","id":1}]},{"name":"DismissRoomReq","syntax":"proto3","fields":[{"name":"roomId","type":"string","id":1}]},{"name":"DismissRoomRsp","syntax":"proto3","fields":[]},{"name":"ChangeRoomReq","syntax":"proto3","fields":[{"name":"roomName","type":"string","id":1},{"name":"owner","type":"string","id":2},{"name":"isPrivate","type":"bool","id":5},{"name":"customProperties","type":"string","id":6},{"name":"isForbidJoin","type":"bool","id":7},{"rule":"repeated","name":"changeRoomOptionList","type":"ChangeRoomOption","id":8}]},{"name":"ChangeRoomRsp","syntax":"proto3","fields":[{"name":"roomInfo","type":"RoomInfo","id":4}]},{"name":"SvrChangeRoomReq","syntax":"proto3","fields":[{"name":"roomName","type":"string","id":1},{"name":"owner","type":"string","id":2},{"name":"isPrivate","type":"bool","id":5},{"name":"customProperties","type":"string","id":6},{"name":"isForbidJoin","type":"bool","id":7},{"name":"roomId","type":"string","id":8},{"rule":"repeated","name":"changeRoomOptionList","type":"ChangeRoomOption","id":9}]},{"name":"SvrChangeRoomRsp","syntax":"proto3","fields":[{"name":"roomInfo","type":"RoomInfo","id":4}]},{"name":"RemovePlayerReq","syntax":"proto3","fields":[{"name":"removePlayerId","type":"string","id":3}]},{"name":"RemovePlayerRsp","syntax":"proto3","fields":[{"name":"roomInfo","type":"RoomInfo","id":1}]},{"name":"SvrRemovePlayerReq","syntax":"proto3","fields":[{"name":"roomId","type":"string","id":1},{"name":"removePlayerId","type":"string","id":3}]},{"name":"SvrRemovePlayerRsp","syntax":"proto3","fields":[{"name":"roomInfo","type":"RoomInfo","id":1}]},{"name":"GetRoomByRoomIdReq","syntax":"proto3","fields":[{"name":"roomId","type":"string","id":1}]},{"name":"GetRoomByRoomIdRsp","syntax":"proto3","fields":[{"name":"roomInfo","type":"RoomInfo","id":1}]},{"name":"SendToClientReq","syntax":"proto3","fields":[{"name":"roomId","type":"string","id":1},{"rule":"repeated","name":"recvPlayerList","type":"string","id":2},{"name":"msg","type":"string","id":3}]},{"name":"SendToClientRsp","syntax":"proto3","fields":[]},{"name":"ChangeCustomPlayerStatusReq","syntax":"proto3","fields":[{"name":"customPlayerStatus","type":"uint64","id":1}]},{"name":"ChangeCustomPlayerStatusRsp","syntax":"proto3","fields":[{"name":"roomInfo","type":"RoomInfo","id":1}]},{"name":"SvrChangeCustomPlayerStatusReq","syntax":"proto3","fields":[{"name":"customPlayerStatus","type":"uint64","id":1}]},{"name":"SvrChangeCustomPlayerStatusRsp","syntax":"proto3","fields":[{"name":"roomInfo","type":"RoomInfo","id":1}]},{"name":"ChangePlayerNetworkStateReq","syntax":"proto3","fields":[{"name":"networkState","type":"NetworkState","id":1}]},{"name":"ChangePlayerNetworkStateRsp","syntax":"proto3","fields":[{"name":"roomInfo","type":"RoomInfo","id":1}]},{"name":"GetRoomListReq","syntax":"proto3","fields":[{"name":"gameId","type":"string","id":1},{"name":"pageNo","type":"uint32","id":2},{"name":"pageSize","type":"uint32","id":3},{"name":"roomType","type":"string","id":4},{"name":"isDesc","type":"bool","id":5}]},{"name":"GetRoomListRsp","syntax":"proto3","fields":[{"name":"gameId","type":"string","id":1},{"rule":"repeated","name":"roomList","type":"RoomInfo","id":2},{"name":"total","type":"uint64","id":3}]},{"name":"ChangeRoomPlayerProfileReq","syntax":"proto3","fields":[{"name":"customProfile","type":"string","id":1}]},{"name":"ChangeRoomPlayerProfileRsp","syntax":"proto3","fields":[{"name":"roomInfo","type":"RoomInfo","id":1}]},{"name":"ChangeGroupPlayerProfileReq","syntax":"proto3","fields":[{"name":"groupId","type":"string","id":1},{"name":"customProfile","type":"string","id":2}]},{"name":"ChangeGroupPlayerProfileRsp","syntax":"proto3","fields":[{"name":"groupInfo","type":"GroupInfo","id":1}]},{"name":"MatchRoomSimpleReq","syntax":"proto3","fields":[{"name":"roomType","type":"string","id":1},{"name":"maxPlayers","type":"uint64","id":2},{"name":"playerInfo","type":"PlayerInfo","id":3}]},{"name":"MatchRoomSimpleRsp","syntax":"proto3","fields":[{"name":"roomInfo","type":"RoomInfo","id":1}]},{"name":"MatchRoomComplexReq","syntax":"proto3","fields":[]},{"name":"MatchRoomComplexRsp","syntax":"proto3","fields":[]},{"name":"MatchPlayersSimpleReq","syntax":"proto3","fields":[]},{"name":"MatchPlayersSimpleRsp","syntax":"proto3","fields":[]},{"name":"MatchAttribute","syntax":"proto3","fields":[{"name":"name","type":"string","id":1},{"name":"value","type":"int32","id":2}]},{"name":"MatchPlayerInfo","syntax":"proto3","fields":[{"name":"id","type":"string","id":1},{"name":"name","type":"string","id":2},{"name":"customPlayerStatus","type":"uint64","id":3},{"name":"customProfile","type":"string","id":4},{"rule":"repeated","name":"matchAttributes","type":"MatchAttribute","id":5},{"name":"matchStatus","type":"MatchStatus","id":6},{"name":"teamId","type":"string","id":7},{"name":"region","type":"string","id":8},{"name":"teamLeader","type":"string","id":9},{"name":"sdkVersion","type":"string","id":10},{"name":"groupId","type":"string","id":11},{"name":"teamType","type":"string","id":12},{"name":"requestId","type":"string","id":13}]},{"name":"MatchGroupPlayerInfo","syntax":"proto3","fields":[{"name":"id","type":"string","id":1},{"name":"name","type":"string","id":2},{"name":"customPlayerStatus","type":"uint64","id":3},{"name":"customProfile","type":"string","id":4},{"rule":"repeated","name":"matchAttributes","type":"MatchAttribute","id":5},{"name":"matchStatus","type":"MatchStatus","id":6},{"name":"teamId","type":"string","id":7},{"name":"region","type":"string","id":8},{"name":"teamLeader","type":"string","id":9},{"name":"sdkVersion","type":"string","id":10},{"name":"groupId","type":"string","id":11},{"name":"teamType","type":"string","id":12},{"name":"requestId","type":"string","id":13}]},{"name":"MatchGroupInfo","syntax":"proto3","fields":[{"name":"id","type":"string","id":1},{"name":"leader","type":"string","id":2},{"rule":"repeated","name":"playerIdList","type":"string","id":3},{"rule":"repeated","name":"playerInfoList","type":"MatchPlayerInfo","id":4},{"rule":"repeated","name":"matchAttributes","type":"MatchAttribute","id":5},{"name":"region","type":"string","id":6},{"name":"sdkVersion","type":"string","id":7},{"name":"teamId","type":"string","id":8},{"name":"teamType","type":"string","id":12},{"name":"requestId","type":"string","id":13},{"name":"startMatchTime","type":"uint64","id":14},{"name":"isRobot","type":"bool","id":15}]},{"name":"MatchTeamInfo","syntax":"proto3","fields":[{"name":"teamId","type":"string","id":1},{"name":"teamName","type":"string","id":2},{"name":"teamLeader","type":"string","id":3},{"rule":"repeated","name":"members","type":"string","id":4},{"rule":"repeated","name":"matchAttributes","type":"MatchAttribute","id":5},{"rule":"repeated","name":"memberSdkVersions","type":"string","id":6},{"rule":"repeated","name":"groupIds","type":"string","id":7},{"rule":"repeated","name":"groupSdkVersions","type":"string","id":8},{"name":"teamType","type":"string","id":12}]},{"name":"ProgressPlayerInfo","syntax":"proto3","fields":[{"name":"playerId","type":"string","id":1},{"name":"teamName","type":"string","id":2},{"rule":"repeated","name":"matchAttributes","type":"MatchAttribute","id":3},{"name":"startMatchTime","type":"uint64","id":4}]},{"name":"MatchmakerTeam","syntax":"proto3","fields":[{"name":"name","type":"string","id":1},{"rule":"repeated","name":"players","type":"ProgressPlayerInfo","id":2}]},{"name":"MatchmakerData","syntax":"proto3","fields":[{"name":"matchId","type":"string","id":1},{"rule":"repeated","name":"teams","type":"MatchmakerTeam","id":2}]},{"name":"MatchPlacementInfo","syntax":"proto3","fields":[{"name":"gameId","type":"string","id":1},{"name":"matchCode","type":"string","id":2},{"name":"matchId","type":"string","id":3},{"name":"type","type":"MatchPlacementType","id":4},{"name":"createRoomReq","type":"CreateRoomReq","id":5},{"name":"matchmakerDataJson","type":"string","id":6},{"name":"status","type":"PlacementStatus","id":8},{"name":"resultBody","type":"bytes","id":9}]},{"name":"MgobePlacementJob","syntax":"proto3","fields":[{"name":"createRoomReq","type":"CreateRoomReq","id":1}]},{"name":"MgobePlacementResult","syntax":"proto3","fields":[{"name":"roomInfo","type":"RoomInfo","id":1}]},{"name":"GsePlacementJob","syntax":"proto3","fields":[{"name":"createRoomReq","type":"CreateRoomReq","id":1},{"name":"matchmakerData","type":"string","id":2}]},{"name":"GsePlacementResult","syntax":"proto3","fields":[{"name":"gseGameSession","type":"GseGameSession","id":1}]},{"name":"ThirdpartyPlacementJob","syntax":"proto3","fields":[]},{"name":"ThirdpartyPlacementResult","syntax":"proto3","fields":[]},{"name":"GsePlayerLatency","syntax":"proto3","fields":[{"name":"latencyInMilliseconds","type":"uint32","id":1},{"name":"playerId","type":"string","id":2},{"name":"regionIdentifier","type":"string","id":3}]},{"name":"GseGameProperty","syntax":"proto3","fields":[{"name":"key","type":"string","id":1},{"name":"value","type":"string","id":2}]},{"name":"GsePlacedPlayerSession","syntax":"proto3","fields":[{"name":"playerId","type":"string","id":1},{"name":"playerSessionId","type":"string","id":2}]},{"name":"GseGameSession","syntax":"proto3","fields":[{"name":"placementId","type":"string","id":1},{"name":"gameServerSessionQueueName","type":"string","id":2},{"rule":"repeated","name":"playerLatencies","type":"GsePlayerLatency","id":3},{"name":"status","type":"PlacementStatus","id":4},{"name":"dnsName","type":"string","id":5},{"name":"gameServerSessionId","type":"string","id":6},{"name":"gameServerSessionName","type":"string","id":7},{"name":"gameServerSessionRegion","type":"string","id":8},{"rule":"repeated","name":"gameProperties","type":"GseGameProperty","id":9},{"name":"maximumPlayerSessionCount","type":"uint32","id":10},{"name":"gameServerSessionData","type":"string","id":11},{"name":"ipAddress","type":"string","id":12},{"name":"port","type":"uint32","id":13},{"name":"matchmakerData","type":"string","id":14},{"rule":"repeated","name":"placedPlayerSessions","type":"GsePlacedPlayerSession","id":15},{"name":"startTime","type":"uint64","id":16},{"name":"endTime","type":"uint64","id":17}]},{"name":"PlaceMatchReq","syntax":"proto3","fields":[{"name":"seq","type":"string","id":1},{"name":"gameId","type":"string","id":2},{"name":"matchId","type":"string","id":3},{"name":"type","type":"MatchPlacementType","id":4},{"name":"jobBody","type":"bytes","id":5},{"name":"matchCode","type":"string","id":6}]},{"name":"PlaceMatchRsp","syntax":"proto3","fields":[{"name":"matchPlacementResult","type":"MatchPlacementResult","id":1}]},{"name":"MatchPlacementResult","syntax":"proto3","fields":[{"name":"seq","type":"string","id":1},{"name":"gameId","type":"string","id":2},{"name":"matchId","type":"string","id":3},{"name":"type","type":"MatchPlacementType","id":4},{"name":"status","type":"PlacementStatus","id":5},{"name":"resultBody","type":"bytes","id":6},{"name":"errCode","type":"int32","id":7},{"name":"matchCode","type":"string","id":8}]},{"name":"UpdateMatchPlacementResultReq","syntax":"proto3","fields":[{"name":"matchPlacementResult","type":"MatchPlacementResult","id":1}]},{"name":"UpdateMatchPlacementResultRsp","syntax":"proto3","fields":[]},{"name":"CmqPlacementResult","syntax":"proto3","fields":[{"name":"placementId","type":"string","id":1},{"name":"placementType","type":"MatchPlacementType","id":2},{"name":"resultBody","type":"bytes","id":3}]},{"name":"MatchPlayersReq","syntax":"proto3","fields":[{"name":"matchCode","type":"string","id":2},{"name":"playerInfo","type":"MatchPlayerInfo","id":3}]},{"name":"MatchPlayersRsp","syntax":"proto3","fields":[{"name":"matchCode","type":"string","id":1}]},{"name":"MatchGroupReq","syntax":"proto3","fields":[{"name":"matchCode","type":"string","id":1},{"rule":"repeated","name":"playerInfoList","type":"MatchGroupPlayerInfo","id":2}]},{"name":"MatchGroupRsp","syntax":"proto3","fields":[{"name":"matchCode","type":"string","id":1}]},{"name":"DescribeMatchReq","syntax":"proto3","fields":[{"rule":"repeated","name":"requestIdList","type":"string","id":1}]},{"name":"MatchProgress","syntax":"proto3","fields":[{"name":"requestId","type":"string","id":1},{"rule":"repeated","name":"playerIdList","type":"string","id":2},{"rule":"repeated","name":"playerInfoList","type":"MatchPlayerInfo","id":3},{"name":"status","type":"string","id":4},{"name":"eventType","type":"uint32","id":5},{"rule":"repeated","name":"playerInfoSuccessList","type":"PlayerInfo","id":6},{"rule":"repeated","name":"teamInfoList","type":"TeamInfo","id":7},{"name":"completedTime","type":"uint64","id":8},{"name":"startMatchTime","type":"uint64","id":9},{"name":"gameSessionConnectionInfo","type":"GameSessionConnectionInfo","id":10}]},{"name":"DescribeMatchRsp","syntax":"proto3","fields":[{"rule":"repeated","name":"matchProgressList","type":"MatchProgress","id":1}]},{"name":"CancelPlayerMatchReq","syntax":"proto3","fields":[{"name":"matchType","type":"MatchType","id":3}]},{"name":"CancelPlayerMatchRsp","syntax":"proto3","fields":[]},{"name":"ApiMatchGroupReq","syntax":"proto3","fields":[{"name":"matchCode","type":"string","id":1},{"rule":"repeated","name":"playerInfoList","type":"MatchPlayerInfo","id":2},{"name":"requestId","type":"string","id":3}]},{"name":"ApiMatchGroupRsp","syntax":"proto3","fields":[{"name":"requestId","type":"string","id":1}]},{"name":"ApiDescribeMatchReq","syntax":"proto3","fields":[{"rule":"repeated","name":"requestIdList","type":"string","id":1}]},{"name":"ApiDescribeMatchRsp","syntax":"proto3","fields":[{"rule":"repeated","name":"matchProgressList","type":"MatchProgress","id":1},{"name":"gameId","type":"string","id":2},{"name":"matchCode","type":"string","id":3},{"name":"startMatchTime","type":"uint64","id":4}]},{"name":"GameSessionConnectionInfo","syntax":"proto3","fields":[{"name":"dnsName","type":"string","id":1},{"name":"ipAddress","type":"string","id":2},{"rule":"repeated","name":"matchedPlayerSessions","type":"MatchedPlayerSession","id":3},{"name":"port","type":"int64","id":4}]},{"name":"MatchedPlayerSession","syntax":"proto3","fields":[{"name":"playerId","type":"string","id":1},{"name":"playerSessionId","type":"string","id":2}]},{"name":"StartMatchPlacement","syntax":"proto3","fields":[{"name":"region","type":"string","id":1},{"name":"placementId","type":"string","id":2},{"name":"queueName","type":"string","id":3},{"name":"maximumPlayerSessionCount","type":"int64","id":4},{"rule":"repeated","name":"desiredPlayerSessions","type":"DesiredPlayerSession","id":5},{"rule":"repeated","name":"gameProperties","type":"GameProperty","id":6},{"name":"matchMakerData","type":"string","id":7}]},{"name":"DesiredPlayerSession","syntax":"proto3","fields":[{"name":"playerId","type":"string","id":1},{"name":"playerData","type":"string","id":2}]},{"name":"GameProperty","syntax":"proto3","fields":[{"name":"key","type":"string","id":1},{"name":"value","type":"string","id":2}]},{"name":"ApiCancelPlayerMatchReq","syntax":"proto3","fields":[{"name":"matchType","type":"MatchType","id":1},{"rule":"repeated","name":"requestIdList","type":"string","id":2}]},{"name":"ApiCancelPlayerMatchRsp","syntax":"proto3","fields":[{"rule":"repeated","name":"requestIdList","type":"string","id":1}]},{"name":"CreateRoomBst","syntax":"proto3","fields":[{"name":"roomInfo","type":"RoomInfo","id":1}]},{"name":"DestroyRoomBst","syntax":"proto3","fields":[{"name":"roomInfo","type":"RoomInfo","id":1}]},{"name":"JoinRoomBst","syntax":"proto3","fields":[{"name":"roomInfo","type":"RoomInfo","id":1},{"name":"joinPlayerId","type":"string","id":2}]},{"name":"LeaveRoomBst","syntax":"proto3","fields":[{"name":"roomInfo","type":"RoomInfo","id":1},{"name":"leavePlayerId","type":"string","id":2}]},{"name":"RemovePlayerBst","syntax":"proto3","fields":[{"name":"roomInfo","type":"RoomInfo","id":1},{"name":"removePlayerId","type":"string","id":2}]},{"name":"DismissRoomBst","syntax":"proto3","fields":[{"name":"roomInfo","type":"RoomInfo","id":1}]},{"name":"ChangeRoomBst","syntax":"proto3","fields":[{"name":"roomInfo","type":"RoomInfo","id":1}]},{"name":"RecvFromClientBst","syntax":"proto3","fields":[{"name":"roomId","type":"string","id":1},{"name":"sendPlayerId","type":"string","id":2},{"name":"msg","type":"string","id":3}]},{"name":"ChangeCustomPlayerStatusBst","syntax":"proto3","fields":[{"name":"changePlayerId","type":"string","id":1},{"name":"customPlayerStatus","type":"uint64","id":2},{"name":"roomInfo","type":"RoomInfo","id":3}]},{"name":"ChangeRoomPlayerProfileBst","syntax":"proto3","fields":[{"name":"changePlayerId","type":"string","id":1},{"name":"customProfile","type":"string","id":2},{"name":"roomInfo","type":"RoomInfo","id":3}]},{"name":"ChangeGroupPlayerProfileBst","syntax":"proto3","fields":[{"name":"changePlayerId","type":"string","id":1},{"name":"customProfile","type":"string","id":2},{"name":"groupInfo","type":"GroupInfo","id":3}]},{"name":"ChangePlayerNetworkStateBst","syntax":"proto3","fields":[{"name":"changePlayerId","type":"string","id":1},{"name":"networkState","type":"NetworkState","id":2},{"name":"roomInfo","type":"RoomInfo","id":3},{"rule":"repeated","name":"groupIdList","type":"string","id":4}]},{"name":"MatchTimeoutBst","syntax":"proto3","fields":[{"name":"matchType","type":"MatchType","id":1},{"name":"errCode","type":"int32","id":2}]},{"name":"CancelMatchBst","syntax":"proto3","fields":[{"name":"matchCode","type":"string","id":1},{"name":"playerId","type":"string","id":2}]},{"name":"MatchPlayersBst","syntax":"proto3","fields":[{"name":"matchType","type":"MatchType","id":1},{"name":"roomInfo","type":"RoomInfo","id":2}]},{"name":"StartFrameSyncBst","syntax":"proto3","fields":[{"name":"roomInfo","type":"RoomInfo","id":1}]},{"name":"StopFrameSyncBst","syntax":"proto3","fields":[{"name":"roomInfo","type":"RoomInfo","id":1}]},{"name":"RecvFrameBst","syntax":"proto3","fields":[{"name":"frame","type":"Frame","id":1}]},{"name":"GameSvrCommunication","syntax":"proto3","fields":[{"name":"type","type":"GameSvrForwardType","id":1},{"name":"body","type":"bytes","id":2},{"name":"needRsp","type":"bool","id":3}]},{"name":"NotifyRelayConnectionReq","syntax":"proto3","fields":[{"name":"roomId","type":"string","id":1},{"name":"ip","type":"string","id":2},{"name":"port","type":"uint32","id":3}]},{"name":"NotifyRoomEventReq","syntax":"proto3","fields":[{"name":"cmd","type":"ServerSendClientBstWrap2Type","id":1},{"name":"msg","type":"bytes","id":2}]},{"name":"SendToGameSvrReq","syntax":"proto3","fields":[{"name":"roomId","type":"string","id":1},{"name":"playerId","type":"string","id":2},{"name":"data","type":"string","id":3}]},{"name":"SendToGameSvrRsp","syntax":"proto3","fields":[]},{"name":"RecvFromGameSvrBst","syntax":"proto3","fields":[{"name":"roomId","type":"string","id":1},{"rule":"repeated","name":"recvPlayerIdList","type":"string","id":2},{"name":"data","type":"string","id":3}]},{"name":"ClientRecvFromGameSvrRsp","syntax":"proto3","fields":[]},{"name":"GroupInfo","syntax":"proto3","fields":[{"name":"id","type":"string","id":1},{"name":"name","type":"string","id":2},{"name":"type","type":"GroupType","id":3},{"name":"maxPlayers","type":"uint64","id":4},{"name":"owner","type":"string","id":5},{"name":"customProperties","type":"string","id":6},{"name":"createTime","type":"uint64","id":7},{"name":"isForbidJoin","type":"bool","id":8},{"name":"isPersistent","type":"bool","id":9},{"rule":"repeated","name":"groupPlayerList","type":"GroupPlayerInfo","id":10}]},{"name":"GroupPlayerInfo","syntax":"proto3","fields":[{"name":"id","type":"string","id":1},{"name":"name","type":"string","id":2},{"name":"customGroupPlayerStatus","type":"uint64","id":3},{"name":"customGroupPlayerProfile","type":"string","id":4},{"name":"commonGroupNetworkState","type":"NetworkState","id":5}]},{"name":"CreateGroupReq","syntax":"proto3","fields":[{"name":"groupName","type":"string","id":1},{"name":"groupType","type":"GroupType","id":2},{"name":"maxPlayers","type":"uint64","id":3},{"name":"customProperties","type":"string","id":4},{"name":"playerInfo","type":"GroupPlayerInfo","id":5},{"name":"isForbidJoin","type":"bool","id":6},{"name":"isPersistent","type":"bool","id":7}]},{"name":"CreateGroupRsp","syntax":"proto3","fields":[{"name":"groupInfo","type":"GroupInfo","id":1}]},{"name":"JoinGroupReq","syntax":"proto3","fields":[{"name":"groupId","type":"string","id":1},{"name":"playerInfo","type":"GroupPlayerInfo","id":2}]},{"name":"JoinGroupRsp","syntax":"proto3","fields":[{"name":"groupInfo","type":"GroupInfo","id":1}]},{"name":"LeaveGroupReq","syntax":"proto3","fields":[{"name":"groupId","type":"string","id":1}]},{"name":"LeaveGroupRsp","syntax":"proto3","fields":[{"name":"groupInfo","type":"GroupInfo","id":1}]},{"name":"DismissGroupReq","syntax":"proto3","fields":[{"name":"groupId","type":"string","id":1}]},{"name":"DismissGroupRsp","syntax":"proto3","fields":[]},{"name":"ChangeGroupReq","syntax":"proto3","fields":[{"name":"groupId","type":"string","id":1},{"name":"groupName","type":"string","id":2},{"name":"owner","type":"string","id":3},{"name":"customProperties","type":"string","id":4},{"name":"isForbidJoin","type":"bool","id":5},{"rule":"repeated","name":"changeGroupOptionList","type":"ChangeGroupOption","id":6}]},{"name":"ChangeGroupRsp","syntax":"proto3","fields":[{"name":"groupInfo","type":"GroupInfo","id":1}]},{"name":"RemoveGroupPlayerReq","syntax":"proto3","fields":[{"name":"groupId","type":"string","id":1},{"name":"removePlayerId","type":"string","id":2}]},{"name":"RemoveGroupPlayerRsp","syntax":"proto3","fields":[{"name":"groupInfo","type":"GroupInfo","id":1}]},{"name":"GetGroupByGroupIdReq","syntax":"proto3","fields":[{"name":"groupId","type":"string","id":1}]},{"name":"GetGroupByGroupIdRsp","syntax":"proto3","fields":[{"name":"groupInfo","type":"GroupInfo","id":1}]},{"name":"GetMyGroupsReq","syntax":"proto3","fields":[]},{"name":"GetMyGroupsRsp","syntax":"proto3","fields":[{"rule":"repeated","name":"groupInfoList","type":"GroupInfo","id":1}]},{"name":"ChangeCustomGroupPlayerStatusReq","syntax":"proto3","fields":[{"name":"groupId","type":"string","id":1},{"name":"customGroupPlayerStatus","type":"uint64","id":2}]},{"name":"ChangeCustomGroupPlayerStatusRsp","syntax":"proto3","fields":[{"name":"groupInfo","type":"GroupInfo","id":1}]},{"name":"SendToGroupClientReq","syntax":"proto3","fields":[{"name":"groupId","type":"string","id":1},{"rule":"repeated","name":"recvPlayerList","type":"string","id":2},{"name":"msg","type":"string","id":3},{"name":"recvType","type":"GroupRecvType","id":4}]},{"name":"SendToGroupClientRsp","syntax":"proto3","fields":[]},{"name":"GroupPlayers","syntax":"proto3","fields":[{"name":"groupId","type":"string","id":1},{"rule":"repeated","name":"playerIdList","type":"string","id":2}]},{"name":"ChangeGroupPlayerNetworkReq","syntax":"proto3","fields":[{"name":"networkState","type":"NetworkState","id":1},{"name":"playerId","type":"string","id":2},{"name":"gameId","type":"string","id":3},{"name":"seq","type":"string","id":4}]},{"name":"ChangeGroupPlayerNetworkRsp","syntax":"proto3","fields":[{"rule":"repeated","name":"groupPlayers","type":"GroupPlayers","id":1}]},{"name":"JoinGroupBst","syntax":"proto3","fields":[{"name":"groupInfo","type":"GroupInfo","id":1},{"name":"joinPlayerId","type":"string","id":2}]},{"name":"LeaveGroupBst","syntax":"proto3","fields":[{"name":"groupInfo","type":"GroupInfo","id":1},{"name":"leavePlayerId","type":"string","id":2}]},{"name":"DismissGroupBst","syntax":"proto3","fields":[{"name":"groupInfo","type":"GroupInfo","id":1}]},{"name":"ChangeGroupBst","syntax":"proto3","fields":[{"name":"groupInfo","type":"GroupInfo","id":1}]},{"name":"RemoveGroupPlayerBst","syntax":"proto3","fields":[{"name":"groupInfo","type":"GroupInfo","id":1},{"name":"removePlayerId","type":"string","id":2}]},{"name":"ChangeGroupPlayerNetworkStateBst","syntax":"proto3","fields":[{"name":"groupInfo","type":"GroupInfo","id":1},{"name":"changePlayerId","type":"string","id":2},{"name":"networkState","type":"NetworkState","id":3}]},{"name":"ChangeCustomGroupPlayerStatusBst","syntax":"proto3","fields":[{"name":"groupInfo","type":"GroupInfo","id":1},{"name":"changePlayerId","type":"string","id":2},{"name":"customGroupPlayerStatus","type":"uint64","id":3}]},{"name":"RecvFromGroupClientBst","syntax":"proto3","fields":[{"name":"groupId","type":"string","id":1},{"name":"sendPlayerId","type":"string","id":2},{"name":"msg","type":"string","id":3}]}],"enums":[{"name":"ConnectionType","syntax":"proto3","values":[{"name":"COMMON","id":0},{"name":"RELAY","id":1}]},{"name":"EventType","syntax":"proto3","values":[{"name":"ET_Unknown","id":0},{"name":"ET_NetworkState","id":1}]},{"name":"ServerSendClientBstWrap2Type","syntax":"proto3","values":[{"name":"E_PUSH_TYPE_TEST","id":0},{"name":"E_PUSH_TYPE_RELAY","id":1},{"name":"E_PUSH_TYPE_GAMESVR","id":2},{"name":"E_PUSH_TYPE_JOIN_ROOM","id":100},{"name":"E_PUSH_TYPE_LEAVE_ROOM","id":101},{"name":"E_PUSH_TYPE_DISMISS_ROOM","id":102},{"name":"E_PUSH_TYPE_REMOVE_PLAYER","id":103},{"name":"E_PUSH_TYPE_MODIFY_ROOM_PROPERTY","id":104},{"name":"E_PUSH_TYPE_NETWORK_STATE","id":105},{"name":"E_PUSH_TYPE_ROOM_CHAT","id":106},{"name":"E_PUSH_TYPE_PLAYER_STATE","id":107},{"name":"E_PUSH_TYPE_START_GAME","id":108},{"name":"E_PUSH_TYPE_STOP_GAME","id":109},{"name":"E_PUSH_TYPE_CREATE_ROOM","id":110},{"name":"E_PUSH_TYPE_DESTROY_ROOM","id":111},{"name":"E_PUSH_TYPE_MODIFY_ROOM_PLAYER_PROFILE","id":112},{"name":"E_PUSH_TYPE_MATCH_SUCCESS","id":200},{"name":"E_PUSH_TYPE_MATCH_TIMEOUT","id":201},{"name":"E_PUSH_TYPE_MATCH_CANCEL","id":202},{"name":"E_PUSH_TYPE_JOIN_GROUP","id":500},{"name":"E_PUSH_TYPE_LEAVE_GROUP","id":501},{"name":"E_PUSH_TYPE_DISMISS_GROUP","id":502},{"name":"E_PUSH_TYPE_MODIFY_GROUP_PROPERTY","id":503},{"name":"E_PUSH_TYPE_REMOVE_GROUP_PLAYER","id":504},{"name":"E_PUSH_TYPE_GROUP_PLAYER_STATE","id":505},{"name":"E_PUSH_TYPE_GROUP_CHAT","id":506},{"name":"E_PUSH_TYPE_MODIFY_GROUP_PLAYER_PROFILE","id":507}]},{"name":"ClientSendServerReqWrap2Cmd","syntax":"proto3","values":[{"name":"E_CMD_INVALID","id":0},{"name":"E_CMD_HEART_BEAT_REQ","id":100},{"name":"E_CMD_CHECK_LOGIN_REQ","id":101},{"name":"E_CMD_LOGIN_TO_ROOM_REQ","id":102},{"name":"E_CMD_FORWARD_TO_RELAY_REQ","id":103},{"name":"E_CMD_LOGIN_REQ","id":1000},{"name":"E_CMD_LOGOUT_REQ","id":1001},{"name":"E_CMD_AUTH_REQ","id":1002},{"name":"E_CMD_QUERY_BY_PLAYER_ID_REQ","id":1003},{"name":"E_CMD_QUERY_BY_GAME_ID_REQ","id":1004},{"name":"E_CMD_GET_ROOM_DETAIL_REQ","id":2001},{"name":"E_CMD_JOIN_ROOM_REQ","id":2002},{"name":"E_CMD_QUIT_ROOM_REQ","id":2003},{"name":"E_CMD_CREATE_ROOM_REQ","id":2004},{"name":"E_CMD_DESTORY_ROOM_REQ","id":2005},{"name":"E_CMD_REMOVE_MEMBER_REQ","id":2006},{"name":"E_CMD_CHANGE_ROOM_PROPERTIS_REQ","id":2007},{"name":"E_CMD_DISSMISS_ROOM_REQ","id":2008},{"name":"E_CMD_CHANGE_PLAYER_STATE_REQ","id":2009},{"name":"E_CMD_CHANGE_PLAYER_NETWORK_STATE_REQ","id":2010},{"name":"E_CMD_ROOM_CHAT_REQ","id":2011},{"name":"E_CMD_START_FRAME_SYNC_REQ","id":2012},{"name":"E_CMD_STOP_FRAME_SYNC_REQ","id":2013},{"name":"E_CMD_GET_ROOM_LIST_REQ","id":2014},{"name":"E_CMD_SVR_REMOVE_MEMBER_REQ","id":2015},{"name":"E_CMD_SVR_CHANGE_ROOM_PROPERTIS_REQ","id":2016},{"name":"E_CMD_SVR_CHANGE_PLAYER_STATE_REQ","id":2017},{"name":"E_CMD_GET_ROOM_LIST_V2_REQ","id":2018},{"name":"E_CMD_CREATE_ROOM_FOR_THIRD_PARTY_REQ","id":2019},{"name":"E_CMD_CHANGE_ROOM_PLAYER_PROFILE","id":2020},{"name":"E_CMD_MATCH_ROOM_SIMPLE_REQ","id":3001},{"name":"E_CMD_MATCH_USER_SIMPLE_REQ","id":3002},{"name":"E_CMD_MATCH_CANCEL_MATCH_REQ","id":3003},{"name":"E_CMD_MATCH_ROOM_COMPLEX_REQ","id":3004},{"name":"E_CMD_MATCH_PLAYER_COMPLEX_REQ","id":3005},{"name":"E_CMD_MATCH_GROUP_REQ","id":3006},{"name":"E_CMD_RELAY_SEND_FRAME_REQ","id":4000},{"name":"E_CMD_RELAY_REQUEST_FRAME_REQ","id":4001},{"name":"E_CMD_RELAY_CLIENT_SENDTO_GAMESVR_REQ","id":4002},{"name":"E_CMD_RELAY_CLIENT_RECV_FROM_GAMESVR_REQ","id":4003},{"name":"E_CMD_NOTIFY_JOIN_ROOM","id":5000},{"name":"E_CMD_NOTIFY_QUIT_ROOM","id":5001},{"name":"E_CMD_NOTIFY_DESTORY_ROOM","id":5002},{"name":"E_CMD_NOTIFY_NET_STATE","id":5003},{"name":"E_CMD_NOTIFY_KICK_MEMBER","id":5004},{"name":"E_CMD_GET_ADDR_BY_ROUTER_ID_REQ","id":6000},{"name":"E_CMD_GET_GROUP_DETAIL_REQ","id":7001},{"name":"E_CMD_JOIN_GROUP_REQ","id":7002},{"name":"E_CMD_QUIT_GROUP_REQ","id":7003},{"name":"E_CMD_CREATE_GROUP_REQ","id":7004},{"name":"E_CMD_REMOVE_GROUP_MEMBER_REQ","id":7005},{"name":"E_CMD_CHANGE_GROUP_PROPERTIES_REQ","id":7006},{"name":"E_CMD_DISMISS_GROUP_REQ","id":7007},{"name":"E_CMD_CHANGE_GROUP_PLAYER_STATE_REQ","id":7008},{"name":"E_CMD_CHANGE_GROUP_PLAYER_NETWORK_STATE_REQ","id":7009},{"name":"E_CMD_GROUP_CHAT_REQ","id":7010},{"name":"E_CMD_GET_GROUP_LIST_REQ","id":7011},{"name":"E_CMD_CHANGE_GROUP_PLAYER_PROFILE","id":7012}]},{"name":"QAppProtoErrCode","syntax":"proto3","values":[{"name":"EC_OK","id":0},{"name":"EC_REQ_BAD_PKG","id":1},{"name":"EC_CMD_INVALID","id":2},{"name":"EC_PARAMS_INVALID","id":3},{"name":"EC_INNER_ERROR","id":4},{"name":"EC_TIME_OUT","id":5},{"name":"EC_SERVER_BUSY","id":6},{"name":"EC_NO_RIGHT","id":7},{"name":"EC_ACCESS_CMD_INVALID_ERR","id":200},{"name":"EC_ACCESS_CMD_GET_TOKEN_ERR","id":201},{"name":"EC_ACCESS_CMD_TOKEN_PRE_EXPIRE","id":202},{"name":"EC_ACCESS_CMD_INVALID_TOKEN","id":203},{"name":"EC_ACCESS_PUSH_SERIALIZE_ERR","id":204},{"name":"EC_ACCESS_LOGIN_BODY_PARSE_ERR","id":205},{"name":"EC_ACCESS_CONN_ERR","id":206},{"name":"EC_ACCESS_GET_RS_IP_ERR","id":207},{"name":"EC_ACCESS_ADD_COMM_CONN_ERR","id":208},{"name":"EC_ACCESS_ADD_HEART_CONN_ERR","id":209},{"name":"EC_ACCESS_ADD_RELAY_CONN_ERR","id":210},{"name":"EC_ACCESS_HEART_BODY_PARSE_ERR","id":211},{"name":"EC_ACCESS_GET_COMM_CONNECT_ERR","id":212},{"name":"EC_ACCESS_GET_RELAY_CONNECT_ERR","id":213},{"name":"EC_ACCESS_ACCESS_INFO_EMPTY","id":214},{"name":"EC_ACCESS_PLAYER_DUPLICATE_LOGIN","id":215},{"name":"EC_ACCESS_NOE_RELAY_OR_STATE_SVR","id":216},{"name":"EC_PLAYER_GAME_NOT_EXIST","id":10000},{"name":"EC_PLAYER_SECRET_KEY_FAIL","id":10001},{"name":"EC_PLAYER_SIGN_ERR","id":10002},{"name":"EC_PLAYER_DUPLICATE_REQ","id":10003},{"name":"EC_PLAYER_TIMESTAMP_INVALID","id":10004},{"name":"EC_PLAYER_QUERY_PLAYER_FAIL","id":10005},{"name":"EC_PLAYER_ADD_PLAYER_FAIL","id":10006},{"name":"EC_PLAYER_QUERY_GAME_FAIL","id":10007},{"name":"EC_PLAYER_RECORD_NUM_ERR","id":10008},{"name":"EC_PLAYER_GET_TOKEN_FAIL","id":10009},{"name":"EC_PLAYER_TOKEN_NOT_EXIST","id":10010},{"name":"EC_PLAYER_TOKEN_INVALID","id":10011},{"name":"EC_PLAYER_CLEAR_TOKEN_FAIL","id":10012},{"name":"EC_PLAYER_LOCK_FAIL","id":10013},{"name":"EC_PLAYER_UNLOCK_FAIL","id":10014},{"name":"EC_PLAYER_SAVE_TOKEN_FAIL","id":10015},{"name":"EC_PLAYER_GAME_OUT_OF_SERVICE","id":10016},{"name":"EC_ROOM_CREATE_NO_PERMISSION","id":20000},{"name":"EC_ROOM_DESTORY_NO_PERMISSION","id":20001},{"name":"EC_ROOM_JOIN_NO_PERMISSION","id":20002},{"name":"EC_ROOM_REMOVE_PLAYER_NO_PERMISSION","id":20003},{"name":"EC_ROOM_MODIFY_PROPERTIES_NO_PEMISSION","id":20004},{"name":"EC_ROOM_DISSMISS_NO_PERMISSION","id":20005},{"name":"EC_ROOM_REMOVE_SELF_NO_PERMISSION","id":20006},{"name":"EC_ROOM_CHECK_LOGIN_SESSION_ERR","id":20007},{"name":"EC_ROOM_REMOVE_PLAYER_NOT_IN_ROOM","id":20008},{"name":"EC_ROOM_PLAYER_ALREADY_IN_ROOM","id":20010},{"name":"EC_ROOM_PLAYER_NOT_IN_ROOM","id":20011},{"name":"EC_ROOM_PLAYERS_EXCEED_LIMIT","id":20012},{"name":"EC_ROOM_JOIN_NOT_ALLOW","id":20013},{"name":"EC_ROOM_MAX_PLAYERS_INVALID","id":20014},{"name":"EC_ROOM_CREATE_FAIL","id":20015},{"name":"EC_ROOM_PLAYER_OFFLINE","id":20016},{"name":"EC_ROOM_PARAM_PAGE_INVALID","id":20017},{"name":"EC_ROOM_GET_PLAYER_INFO_ERR","id":20050},{"name":"EC_ROOM_GET_ROOM_INFO_ERR","id":20051},{"name":"EC_ROOM_MODIFY_OWNER_ERR","id":20052},{"name":"EC_ROOM_MAX_ROOM_NUMBER_EXCEED_LIMIT","id":20053},{"name":"EC_ROOM_REMOVE_REDIS_PLAYER_ROOM_MATCH_ERR","id":-20052},{"name":"EC_ROOM_REMOVE_REDIS_ROOM_INFO_ERR","id":-20053},{"name":"EC_ROOM_REDIS_UPDATE_ERR","id":-20054},{"name":"EC_ROOM_REDIS_GET_LOCK_ERR","id":-20055},{"name":"EC_ROOM_REDIS_CHECK_LOCK_ERR","id":-20056},{"name":"EC_ROOM_REDIS_DEL_LOCK_ERR","id":-20057},{"name":"EC_ROOM_QUERY_PLAYER_ERR","id":20060},{"name":"EC_ROOM_QUERY_GAME_ERR","id":20061},{"name":"EC_ROOM_PLAYER_INFO_NOT_EXIST","id":20062},{"name":"EC_ROOM_GAME_INFO_NOT_EXIST","id":20063},{"name":"EC_ROOM_HISTORY_INFO_INSERT_ERR","id":-20064},{"name":"EC_ROOM_REGION_INFO_NOT_EXIST","id":20065},{"name":"EC_ROOM_QUERY_REGION_ERR","id":20066},{"name":"EC_ROOM_MODIFY_PLAYER_BUSY","id":20070},{"name":"EC_ROOM_INFO_UNEXIST","id":20080},{"name":"EC_ROOM_ALLOCATE_RELAYSVR_IP_PORT_ERR","id":20090},{"name":"EC_ROOM_INVALID_PARAMS_TEAM_ID","id":20100},{"name":"EC_ROOM_TEAM_MEMBER_LIMIT_EXCEED","id":20101},{"name":"EC_ROOM_ALLOCATE_SERVICE_FAIL","id":-20200},{"name":"EC_MATCH_NO_ROOM","id":30000},{"name":"EC_MATCH_TIMEOUT","id":30001},{"name":"EC_MATCH_LOGIC_ERR","id":30002},{"name":"EC_MATCH_ERR","id":30010},{"name":"EC_MATCH_PLAYER_IS_IN_MATCH","id":30011},{"name":"EC_MATCH_PLAYER_NOT_IN_MATCH","id":30012},{"name":"EC_MATCH_GET_MATCH_INFO_ERR","id":30013},{"name":"EC_MATCH_UPDATE_MATCH_INFO_ERR","id":30014},{"name":"EC_MATCH_CANCEL_FAILED","id":30015},{"name":"EC_MATCH_GET_PLAYER_LIST_INFO_ERR","id":30016},{"name":"EC_MATCH_CREATE_ROOM_ERR","id":30041},{"name":"EC_MATCH_JOIN_ROOM_ERR","id":30042},{"name":"EC_MATCH_INVALID_PARAMS","id":30043},{"name":"EC_MATCH_GROUP_NUM_EXCEED_LIMIT","id":30044},{"name":"EC_MATCH_PLAYER_ID_IS_REPEATED","id":30045},{"name":"EC_MATCH_CREATE_ROOM_PLAYER_ALREADY_IN_ROOM","id":30050},{"name":"EC_MATCH_QUERY_PLAYER_ERR","id":30100},{"name":"EC_MATCH_PLAYER_INFO_NOT_EXIST","id":30101},{"name":"EC_MATCH_QUERY_GAME_ERR","id":30102},{"name":"EC_MATCH_GAME_INFO_NOT_EXIST","id":30103},{"name":"EC_MATCH_QUERY_REGION_ERR","id":30104},{"name":"EC_MATCH_REGION_INFO_NOT_EXIST","id":30105},{"name":"EC_MATCH_TEAM_FAIL","id":30106},{"name":"EC_MATCH_PLAY_RULE_NOT_RUNNING","id":30107},{"name":"EC_MATCH_PLAY_ATTR_NOT_FOUND","id":30108},{"name":"EC_MATCH_PLAY_RULE_NOT_FOUND","id":30109},{"name":"EC_MATCH_PLAY_RULE_ATTR_SEGMENT_NOT_FOUND","id":30110},{"name":"EC_MATCH_PLAY_RULE_FUNC_ERR","id":30111},{"name":"EC_MATCH_GET_PLAYER_ATTR_FAIL","id":30112},{"name":"EC_MATCH_GET_TEAM_ATTR_FAIL","id":30113},{"name":"EC_MATCH_NONE_TEAM_TYPE_FIT","id":30114},{"name":"EC_MATCH_TEAM_TYPE_INVALID","id":30115},{"name":"EC_MATCH_PLAYER_ATTR_NOT_FOUND","id":30116},{"name":"EC_MATCH_REQUEST_ID_NOT_EXIST","id":30117},{"name":"EC_MATCH_REQUEST_ID_IS_EXIST","id":30118},{"name":"EC_MATCH_TEAM_MATCH_FAIL","id":30119},{"name":"EC_MATCH_ROBOT_GROUP_NOT_RIGHT","id":30120},{"name":"EC_MATCH_ROBOT_TEAM_NOT_RIGHT","id":30121},{"name":"EC_MATCH_INNER_LOGIC_ERR","id":-30150},{"name":"EC_MATCH_INNER_PARAMS_ERR","id":-30160},{"name":"EC_MATCH_ROOM_INNER_ADD_NODE_ERR","id":-30170},{"name":"EC_MATCH_ROOM_INNER_DEL_NODE_ERR","id":-30171},{"name":"EC_MATCH_RESULT_TYPE_NOT_GSE","id":-30172},{"name":"EC_MATCH_REQUEST_CANCELED","id":30173},{"name":"EC_RELAY_ALREADY_EXISTS","id":40000},{"name":"EC_RELAY_NOT_EXISTS","id":40001},{"name":"EC_RELAY_DATA_EXCEED_LIMITED","id":40002},{"name":"EC_RELAY_MEMBER_ALREADY_EXISTS","id":40003},{"name":"EC_RELAY_MEMBER_NOT_EXISTS","id":40004},{"name":"EC_RELAY_STATE_INVALID","id":40005},{"name":"EC_RELAY_INVALID_FRAME_RATE","id":40006},{"name":"EC_RELAY_SET_FRAME_RATE_FORBIDDEN","id":40007},{"name":"EC_RELAY_NO_MEMBERS","id":40008},{"name":"EC_RELAY_GAMESVR_SERVICE_NOT_OPEN","id":40009},{"name":"EC_RELAY_REQ_POD_FAIL","id":40010},{"name":"EC_RELAY_NO_AVAILABLE_POD","id":40011},{"name":"EC_RELAY_GET_FRAME_CACHE_FAIL","id":40012},{"name":"EC_RELAY_HKV_CACHE_ERROR","id":40015},{"name":"EC_RELAY_REDIS_CACHE_ERROR","id":40016},{"name":"EC_RELAY_NOTIFY_RELAYWORKER_FAIL","id":40018},{"name":"EC_RELAY_RESET_RELAY_ROOM_FAIL","id":40019},{"name":"EC_RELAY_CLEAN_RELAY_ROOM_FAIL","id":40020},{"name":"EC_RELAY_REQ_FRAME_GAME_NOT_STARTED","id":40021},{"name":"EC_RELAY_NO_PERMISSION","id":40100},{"name":"EC_RELAY_NOTIFY_GAMESVR_FAIL","id":40200},{"name":"EC_RELAY_FORWARD_TO_GAMESVR_FAIL","id":40201},{"name":"EC_RELAY_FORWARD_TO_CLIENT_FAIL","id":40202},{"name":"EC_RELAY_GAMESVR_NOT_FOUND_ROOM_FAIL","id":40203},{"name":"EC_GROUP_OPERATION_FAILED","id":70000},{"name":"EC_INVALID_PARAMS_GROUP_NAME","id":70001},{"name":"EC_INVALID_PARAMS_GROUP_TYPE","id":70002},{"name":"EC_INVALID_PARAMS_GROUP_CUSTOM_PROPERTIES","id":70003},{"name":"EC_INVALID_PARAMS_GROUP_PLAYER_NAME","id":70004},{"name":"EC_INVALID_PARAMS_GROUP_PLAYER_CUSTOM_STATUS","id":70005},{"name":"EC_INVALID_PARAMS_GROUP_PLAYER_CUSTOM_PROPERTIES","id":70006},{"name":"EC_GROUP_MODIFY_OWNER_NO_PERMISSION","id":70007},{"name":"EC_INVALID_PARAMS_GROUP_ID","id":70008},{"name":"EC_INVALID_CHANGE_OPTION","id":70009},{"name":"EC_INVALID_PARAMS_GROUP_OWNER","id":70010},{"name":"EC_PLAYER_IS_EXIST_GROUP","id":70011},{"name":"EC_PLAYER_IS_NOT_EXIST_GROUP","id":70012},{"name":"EC_REMOVE_PLAYER_ID_IS_EMPTY","id":70013},{"name":"EC_GROUP_REMOVE_PLAYER_NO_PERMISSION","id":70014},{"name":"EC_INVALID_PARAMS_GROUP_RECV_TYPE","id":70015},{"name":"EC_INVALID_PARAMS_RECV_PLAYER_ID","id":70016},{"name":"EC_INVALID_PARAMS_MESSAGE_LENGTH","id":70017},{"name":"EC_INVALID_PARAMS_MAX_PLAYER","id":70018},{"name":"PERSISTENCE_GROUP_NUM_EXCEED_THE_LIMIT","id":70019},{"name":"EC_INVALID_PARAMS_PLAYER_NOT_IN_GROUP","id":70020},{"name":"NO_GROUP_OPERATION_PERMISSION","id":70021},{"name":"EC_OPERATION_FAILED_GROUP_FORBID_JOIN","id":70022},{"name":"EC_GROUP_CHAT_FREQUENCY_LIMIT","id":70023},{"name":"EC_GROUP_PLAYER_NUM_LIMIT_EXCEED","id":70024},{"name":"EC_PLAYER_GROUP_NUM_LIMIT_EXCEED","id":70025},{"name":"EC_GROUP_NOT_EXIST","id":70026},{"name":"EC_INVALID_PARAMS","id":60000},{"name":"EC_INVALID_PARAMS_PLAY_MODE_VERSION","id":60001},{"name":"EC_INVALID_PARAMS_PLAY_MODE_RULETYPE","id":60002},{"name":"EC_INVALID_PARAMS_PLAY_MODE_EXPRESSION","id":60003},{"name":"EC_INVALID_PARAMS_PLAY_MODE_TEAM","id":60004},{"name":"EC_INVALID_PARAMS_MSGQ_ENCODE","id":60020},{"name":"EC_INVALID_PARAMS_MSGQ_DECODE","id":60021},{"name":"EC_INVALID_PARAMS_GAME_ID","id":61000},{"name":"EC_INVALID_PARAMS_PLAYER_INFO","id":61001},{"name":"EC_INVALID_PARAMS_MAX_PLAYERS","id":61002},{"name":"EC_INVALID_PARAMS_ROOM_TYPE","id":61003},{"name":"EC_INVALID_PARAMS_PLAYER_ID","id":61004},{"name":"EC_INVALID_PARAMS_MATCH_TYPE","id":61005},{"name":"EC_INVALID_PARAMS_MATCH_CODE","id":61006},{"name":"EC_INVALID_PARAMS_OPEN_ID","id":61007},{"name":"EC_INVALID_PARAMS_PLATFORM","id":61008},{"name":"EC_INVALID_PARAMS_TIMESTAMP","id":61009},{"name":"EC_INVALID_PARAMS_SIGN","id":61010},{"name":"EC_INVALID_PARAMS_NONCE","id":61011},{"name":"EC_INVALID_PARAMS_TOKEN","id":61012},{"name":"EC_INVALID_PARAMS_NETWORK_STATE","id":61013},{"name":"EC_INVALID_PARAMS_ROOM_NAME","id":61014},{"name":"EC_INVALID_PARAMS_CREATE_ROOM_TYPE","id":61015},{"name":"EC_INVALID_PARAMS_DEVICE_ID","id":61016},{"name":"EC_INVALID_PARAMS_PAGE_NO","id":61017},{"name":"EC_INVALID_PARAMS_PAGE_SIZE","id":61018},{"name":"EC_INVALID_PARAMS_PLAYER_LIST","id":61019},{"name":"EC_INVALID_PARAMS_MESSAGE","id":61020},{"name":"EC_INVALID_CHANGE_ROOM_OPTION","id":61021},{"name":"EC_INVALID_PARAMS_REGION","id":61022},{"name":"EC_INVALID_PARAMS_OWNER","id":61023},{"name":"EC_INVALID_PARAMS_OWNER_OPEN_ID","id":61024},{"name":"EC_INVALID_PARAMS_OPEN_ID_DUPLICATE","id":61026},{"name":"EC_INVALID_PARAMS_ROOM_CREATE_TYPE","id":61027},{"name":"EC_MYSPP_SYSTEM_ERR","id":-1000},{"name":"EC_REDIS_KEY_NOT_EXIST","id":-66000},{"name":"EC_REDIS_SET_OP_ERR","id":-66001},{"name":"EC_REDIS_GET_OP_ERR","id":-66002},{"name":"EC_REDIS_DEL_OP_ERR","id":-66003},{"name":"EC_REDIS_EXPIRE_OP_ERR","id":-66004},{"name":"EC_REDIS_LOCK_OP_ERR","id":-66005},{"name":"EC_REDIS_LOCK_ALREADY_EXIST","id":-66006},{"name":"EC_REDIS_LIST_OP_ERR","id":-66020},{"name":"EC_REDIS_LIST_POP_EMPTY","id":-66021},{"name":"EC_REDIS_POOL_GET_INSTANCE_FAIL","id":-66022},{"name":"EC_REDIS_SET_IS_EMPTY","id":-66023},{"name":"EC_REDIS_OP_INVALID_PARAMS","id":-66024},{"name":"EC_MYSQL_NO_ROW_FOUND","id":-66100},{"name":"EC_MYSQL_MULTI_ROW_FOUND","id":-66101},{"name":"EC_MYSQL_INSERT_FAIL","id":-66102},{"name":"EC_MYSQL_DELETE_FAIL","id":-66103},{"name":"EC_MYSQL_UPDATE_FAIL","id":-66104},{"name":"EC_MYSQL_QUERYS_FAIL","id":-66105},{"name":"EC_PB_SERIALIZE_TO_STR_ERR","id":-66200},{"name":"EC_PB_PARSE_FROM_STR_ERR","id":-66201},{"name":"EC_DATA_FORMAT_ERR","id":-66210},{"name":"EC_JSON_FORMAT_ERR","id":-66211},{"name":"EC_JSON_PLAY_MODE_FORMAT_ERR","id":-66212},{"name":"EC_JSON_PLAY_MODE_PARISE_ERR","id":-66213},{"name":"EC_INVALID_PARAMS_RECORE_ID","id":-66601},{"name":"EC_HASHID_ERR","id":-66700},{"name":"EC_HASHID_ENCODE_ERR","id":-66701},{"name":"EC_HASHID_DECODE_ERR","id":-66702},{"name":"EC_CONF_ROOM_ID_BUCKET_ERR","id":-66801},{"name":"EC_SDK_SEND_FAIL","id":90001},{"name":"EC_SDK_UNINIT","id":90002},{"name":"EC_SDK_RES_TIMEOUT","id":90003},{"name":"EC_SDK_NO_LOGIN","id":90004},{"name":"EC_SDK_NO_CHECK_LOGIN","id":90005},{"name":"EC_SDK_SOCKET_ERROR","id":90006},{"name":"EC_SDK_SOCKET_CLOSE","id":90007},{"name":"EC_SDK_NO_ROOM","id":90008},{"name":"EC_SDK_ENCODE_PARAM_FAIL","id":90009},{"name":"EC_SDK_INVALID_PARAMS","id":90010}]},{"name":"NetworkState","syntax":"proto3","values":[{"name":"COMMON_OFFLINE","id":0},{"name":"COMMON_ONLINE","id":1},{"name":"RELAY_OFFLINE","id":2},{"name":"RELAY_ONLINE","id":3}]},{"name":"CreateRoomType","syntax":"proto3","values":[{"name":"COMMON_CREATE","id":0},{"name":"MATCH_CREATE","id":1},{"name":"THIRD_PARTY_CREATE","id":2}]},{"name":"FrameSyncState","syntax":"proto3","values":[{"name":"STOP","id":0},{"name":"START","id":1}]},{"name":"JoinRoomType","syntax":"proto3","values":[{"name":"COMMON_JOIN","id":0},{"name":"MATCH_JOIN","id":1}]},{"name":"ChangeRoomOption","syntax":"proto3","values":[{"name":"ROOM_NAME","id":0},{"name":"OWNER","id":1},{"name":"IS_VIEWED","id":2},{"name":"IS_INVITED","id":3},{"name":"IS_PRIVATE","id":4},{"name":"CUSTOM_PROPERTIES","id":5},{"name":"IS_FORBID_JOIN","id":6}]},{"name":"MatchStatus","syntax":"proto3","values":[{"name":"PENDING","id":0},{"name":"MATCHING","id":1},{"name":"SUCCESS","id":3},{"name":"TIMEOUT","id":4}]},{"name":"MatchPlacementType","syntax":"proto3","values":[{"name":"MP_MGOBE","id":0},{"name":"MP_GSE","id":1},{"name":"MP_THIRDPARTY","id":-1}]},{"name":"PlacementStatus","syntax":"proto3","values":[{"name":"PS_UNKNOW","id":0},{"name":"PS_PENDING","id":2},{"name":"PS_FULFILLED","id":3},{"name":"PS_CANCELLED","id":4},{"name":"PS_TIMED_OUT","id":5},{"name":"PS_FAILED","id":6},{"name":"PS_TIMED_OUT_MQ","id":100},{"name":"PS_PLACE_MATCH_FAIL","id":101}]},{"name":"MatchType","syntax":"proto3","values":[{"name":"ROOM_SIMPLE","id":1},{"name":"PLAYER_COMPLEX","id":2}]},{"name":"GameSvrForwardType","syntax":"proto3","values":[{"name":"E_GS_FORWARDTYPE_DEFAULT","id":0},{"name":"E_GS_FORWARDTYPE_NOTIFY_CONNECTION","id":1},{"name":"E_GS_FORWARDTYPE_NOTIFY_ROOM_EVENT","id":2},{"name":"E_GS_FORWARDTYPE_NOTIFY_COM_EVENT","id":3},{"name":"E_GS_FORWARDTYPE_CLIENT_SENDTO_GAMESVR","id":4}]},{"name":"GroupType","syntax":"proto3","values":[{"name":"GROUP_LIMITED","id":0},{"name":"GROUP_MANY","id":1}]},{"name":"ChangeGroupOption","syntax":"proto3","values":[{"name":"GROUP_NAME","id":0},{"name":"GROUP_OWNER","id":1},{"name":"GROUP_CUSTOM_PROPERTIES","id":2},{"name":"GROUP_IS_FORBID_JOIN","id":3}]},{"name":"GroupRecvType","syntax":"proto3","values":[{"name":"GROUP_ALL","id":1},{"name":"GROUP_OTHERS","id":2},{"name":"GROUP_SOME","id":3}]}],"services":[],"isNamespace":true}')},function(e,t,n){n.r(t);var r,i,o={};n.r(o),n.d(o,"packageName",(function(){return re})),n.d(o,"ConnectionType",(function(){return ie})),n.d(o,"EventType",(function(){return oe})),n.d(o,"ServerSendClientBstWrap2Type",(function(){return se})),n.d(o,"ClientSendServerReqWrap2Cmd",(function(){return ae})),n.d(o,"QAppProtoErrCode",(function(){return _e})),n.d(o,"NetworkState",(function(){return Ee})),n.d(o,"CreateRoomType",(function(){return le})),n.d(o,"FrameSyncState",(function(){return de})),n.d(o,"JoinRoomType",(function(){return ue})),n.d(o,"ChangeRoomOption",(function(){return he})),n.d(o,"MatchStatus",(function(){return ce})),n.d(o,"MatchPlacementType",(function(){return fe})),n.d(o,"PlacementStatus",(function(){return pe})),n.d(o,"MatchType",(function(){return Re})),n.d(o,"GameSvrForwardType",(function(){return me})),n.d(o,"GroupType",(function(){return ge})),n.d(o,"ChangeGroupOption",(function(){return ye})),n.d(o,"GroupRecvType",(function(){return Se})),n.d(o,"messages",(function(){return Ie})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WX=1]="WX",e[e.QQ=2]="QQ",e[e.BD=3]="BD",e[e.OP=4]="OP",e[e.VV=5]="VV",e[e.WXMP=6]="WXMP",e[e.QQMP=7]="QQMP",e[e.COCOS_NATIVE=8]="COCOS_NATIVE",e[e.UNITY=9]="UNITY",e[e.TT=10]="TT"}(r||(r={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.ANDROID=1]="ANDROID",e[e.IOS=2]="IOS"}(i||(i={}));const s={},a=e=>t=>{const n=e(t.url);return n.binaryType="arraybuffer",{onClose:e=>n.onclose=e,onOpen:e=>n.onopen=e,onError:e=>n.onerror=e,onMessage:e=>n.onmessage=e,close:()=>n.close(),send:({data:e,fail:t,success:r})=>{try{n.send(e),setTimeout((()=>r&&r()),0)}catch(e){setTimeout((()=>t&&t()),0)}},get readyState(){return n.readyState},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3}},_=a((e=>new WebSocket(e))),E=e=>{const t=(e.method+"").toLowerCase()||"get",n=new XMLHttpRequest;let r="",i="";if("get"===t){i="?";const t=Object.keys(e.data||{});for(const n of t)i+=n+"="+e.data[n]+"&"}"post"===t&&(r=JSON.stringify(e.data||{})),n.open(t,e.url+i),n.onreadystatechange=()=>{if(4===n.readyState)return 200===n.status?e.success&&e.success({data:JSON.parse(n.responseText)}):e.fail&&e.fail()},n.send("post"===t&&r)},l=e=>null,d=e=>null,u=e=>null,h=e=>null,c={},f=e=>c[e],p=(e,t)=>c[e]=t,R=e=>delete c[e],m=({fail:e})=>e&&e("ERROR"),g=()=>({}),y=({fail:e})=>e&&e("ERROR"),S=({fail:e})=>e&&e("ERROR");function I(e,t){const n=s;return t[e]||n[e]}s.connectSocket=_,s.request=E,s.onHide=l,s.offHide=d,s.onShow=u,s.offShow=h,s.getStorageSync=f,s.setStorageSync=p,s.removeStorageSync=R,s.getUserInfo=m,s.getSystemInfoSync=g,s.getLocation=y,s.getNetworkType=S,s.createUDPSocket=null,s.channel=r.UNKNOWN,"undefined"!=typeof window?s.root=window:s.root={};let C={};function O(){if("undefined"==typeof wx)return!1;if("undefined"==typeof GameGlobal)return!1;if(!wx.onHide)return!1;if(!wx.offHide)return!1;if(!wx.onShow)return!1;if(!wx.offShow)return!1;if(!wx.getSystemInfoSync)return!1;if(!wx.getStorageSync)return!1;if(!wx.setStorageSync)return!1;if(!wx.connectSocket)return!1;if(!wx.request)return!1;try{if(!wx.getSystemInfoSync())return!1}catch(e){return!1}return!0}O()&&(C=wx);const T={};T.connectSocket=I("connectSocket",C),T.request=I("request",C),T.onHide=I("onHide",C),T.offHide=I("offHide",C),T.onShow=I("onShow",C),T.offShow=I("offShow",C),T.getStorageSync=I("getStorageSync",C),T.setStorageSync=I("setStorageSync",C),T.removeStorageSync=I("removeStorageSync",C),T.getUserInfo=I("getUserInfo",C),T.getSystemInfoSync=I("getSystemInfoSync",C),T.getLocation=I("getLocation",C),T.getNetworkType=I("getNetworkType",C),T.createUDPSocket=I("createUDPSocket",C),T.channel=r.WX,"undefined"!=typeof GameGlobal&&(T.root=GameGlobal);let A={};function P(){if("undefined"==typeof qq)return!1;if(!qq.onHide)return!1;if(!qq.offHide)return!1;if(!qq.onShow)return!1;if(!qq.offShow)return!1;if(!qq.getSystemInfoSync)return!1;if(!qq.getStorageSync)return!1;if(!qq.setStorageSync)return!1;if(!qq.connectSocket)return!1;if(!qq.request)return!1;try{const e=qq.getSystemInfoSync();if(!e)return!1;if("qq"!==(e.AppPlatform+"").toLowerCase())return!1}catch(e){return!1}return!0}P()&&(A=qq);const M={},v=I("connectSocket",A);M.connectSocket=e=>{const t=v(e);let n=0;return{onClose:e=>{t.onClose((t=>{n=3,e&&e(t)}))},onOpen:e=>{t.onOpen((t=>{n=1,e&&e(t)}))},onError:e=>{t.onError((r=>{n=3,t.close(),e&&e(r)}))},onMessage:e=>t.onMessage(e),close:()=>{n=3,t.close()},send:({data:e,fail:n,success:r})=>t.send({data:e,fail:n,success:r}),get readyState(){return n},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3}},M.request=I("request",A),M.onHide=I("onHide",A),M.offHide=I("offHide",A),M.onShow=I("onShow",A),M.offShow=I("offShow",A),M.getStorageSync=I("getStorageSync",A),M.setStorageSync=I("setStorageSync",A),M.removeStorageSync=I("removeStorageSync",A),M.getUserInfo=I("getUserInfo",A),M.getSystemInfoSync=I("getSystemInfoSync",A),M.getLocation=I("getLocation",A),M.getNetworkType=I("getNetworkType",A),M.createUDPSocket=I("createUDPSocket",A),M.channel=r.QQ,"undefined"!=typeof GameGlobal&&(M.root=GameGlobal);let N={};function L(){if("undefined"==typeof swan)return!1;if(!swan.onHide)return!1;if(!swan.offHide)return!1;if(!swan.onShow)return!1;if(!swan.offShow)return!1;if(!swan.getSystemInfoSync)return!1;if(!swan.getStorageSync)return!1;if(!swan.setStorageSync)return!1;if(!swan.connectSocket)return!1;if(!swan.request)return!1;try{const e=swan.getSystemInfoSync();if(!e)return!1;if(!e.swanNativeVersion)return!1;if(!(e.host+"").toLowerCase().includes("baidu"))return!1}catch(e){return!1}return!0}L()&&(N=swan);const b={},D=I("connectSocket",N);b.connectSocket=e=>{const t=D(e);let n=0;return{onClose:e=>{t.onClose((t=>{n=3,e&&e(t)}))},onOpen:e=>{t.onOpen((t=>{n=1,e&&e(t)}))},onError:e=>{t.onError((r=>{n=3,t.close(),e&&e(r)}))},onMessage:e=>t.onMessage(e),close:()=>{n=3,t.close()},send:({data:e,fail:n,success:r})=>t.send({data:e,fail:n,success:r}),get readyState(){return n},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3}},b.request=I("request",N),b.onHide=I("onHide",N),b.offHide=I("offHide",N),b.onShow=I("onShow",N),b.offShow=I("offShow",N),b.getStorageSync=I("getStorageSync",N),b.setStorageSync=I("setStorageSync",N),b.removeStorageSync=I("removeStorageSync",N),b.getUserInfo=I("getUserInfo",N),b.getSystemInfoSync=I("getSystemInfoSync",N),b.getLocation=I("getLocation",N),b.getNetworkType=I("getNetworkType",N),b.createUDPSocket=null,b.channel=r.BD,"undefined"!=typeof GameGlobal&&(b.root=GameGlobal);let w={};function G(){if("undefined"==typeof qg)return!1;if(!qg.onHide)return!1;if(!qg.offHide)return!1;if(!qg.onShow)return!1;if(!qg.offShow)return!1;if(!qg.getSystemInfoSync)return!1;if(!qg.getProvider)return!1;if(!localStorage.getItem)return!1;if(!localStorage.setItem)return!1;if(!WebSocket)return!1;if(!XMLHttpRequest)return!1;if(!localStorage)return!1;try{if("OPPO"!==qg.getProvider().toLocaleUpperCase())return!1}catch(e){return!1}try{if(!qg.getSystemInfoSync())return!1}catch(e){return!1}return!0}G()&&(w=qg);const U={};U.connectSocket=_,U.request=E,U.onHide=I("onHide",w),U.offHide=I("offHide",w),U.onShow=I("onShow",w),U.offShow=I("offShow",w),U.getStorageSync=e=>{localStorage.getItem(e)},U.setStorageSync=(e,t)=>{localStorage.setItem(e,t)},U.removeStorageSync=e=>{localStorage.removeItem(e)},U.getUserInfo=m,U.getSystemInfoSync=I("getSystemInfoSync",w),U.getLocation=I("getLocation",w),U.getNetworkType=I("getNetworkType",w),U.createUDPSocket=null,U.channel=r.OP,"undefined"!=typeof window&&(U.root=window);let Y={};function F(){if("undefined"==typeof qg)return!1;if(!qg.onHide)return!1;if(!qg.offHide)return!1;if(!qg.onShow)return!1;if(!qg.offShow)return!1;if(!qg.getSystemInfoSync)return!1;if(!qg.getProvider)return!1;if(!qg.getStorageSync)return!1;if(!qg.setStorageSync)return!1;if(!qg.createWebSocket)return!1;if(!qg.request)return!1;try{if("VIVO"!==qg.getProvider().toLocaleUpperCase())return!1}catch(e){return!1}try{if(!qg.getSystemInfoSync())return!1}catch(e){return!1}return!0}F()&&(Y=qg);const k={connectSocket:e=>{const t=qg.createWebSocket({url:e.url});return{onClose:e=>t.onclose=e,onOpen:e=>t.onopen=e,onError:e=>t.onerror=e,onMessage:e=>t.onmessage=e,close:()=>t.close(),send:({data:e,fail:n,success:r})=>{try{t.send(e),setTimeout((()=>r&&r()),0)}catch(e){setTimeout((()=>n&&n()),0)}},get readyState(){return t.readyState},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3}},request:e=>(e.data="object"==typeof e.data?JSON.stringify(e.data):e.data,qg.request(e))};k.onHide=I("onHide",Y),k.offHide=I("offHide",Y),k.onShow=I("onShow",Y),k.offShow=I("offShow",Y),k.getStorageSync=e=>qg.getStorageSync({key:e}),k.setStorageSync=(e,t)=>qg.setStorageSync({key:e,value:t}),k.removeStorageSync=e=>qg.deleteStorageSync({key:e}),k.getUserInfo=m,k.getSystemInfoSync=I("getSystemInfoSync",Y),k.getLocation=I("getLocation",Y),k.getNetworkType=e=>{qg.getNetworkType({success:t=>{e.success&&e.success({networkType:t.type})},fail:()=>{e.fail&&e.fail()},complete:()=>{e.complete&&e.complete()}})},k.createUDPSocket=null,k.channel=r.VV,"undefined"!=typeof window&&(k.root=window);let q={};function H(){if("undefined"==typeof wx)return!1;if("undefined"==typeof App)return!1;if("undefined"==typeof Page)return!1;if("function"!=typeof getApp)return!1;if(!wx.onAppHide)return!1;if(!wx.offAppHide)return!1;if(!wx.onAppShow)return!1;if(!wx.offAppShow)return!1;if(!wx.getSystemInfoSync)return!1;if(!wx.getStorageSync)return!1;if(!wx.setStorageSync)return!1;if(!wx.connectSocket)return!1;if(!wx.request)return!1;try{if(!wx.getSystemInfoSync())return!1;if("qq"===wx.getSystemInfoSync().AppPlatform)return!1}catch(e){return!1}return!0}let x=l,B=d,V=u,Q=h;H()&&(q=wx,x=wx.onAppHide,B=wx.offAppHide,V=wx.onAppShow,Q=wx.offAppShow);const K={};K.connectSocket=I("connectSocket",q),K.request=I("request",q),K.onHide=x,K.offHide=B,K.onShow=V,K.offShow=Q,K.getStorageSync=I("getStorageSync",q),K.setStorageSync=I("setStorageSync",q),K.removeStorageSync=I("removeStorageSync",q),K.getUserInfo=I("getUserInfo",q),K.getSystemInfoSync=I("getSystemInfoSync",q),K.getLocation=I("getLocation",q),K.getNetworkType=I("getNetworkType",q),K.createUDPSocket=I("createUDPSocket",q),K.channel=r.WXMP,K.root={};let W={};const j="___MGOBE_PREVENT_MULTI_QQ_MP_JS_PROCESS___",J=Date.now()+"_"+Math.random();function X(){if("undefined"==typeof qq)return!1;if("undefined"==typeof App)return!1;if("undefined"==typeof Page)return!1;if("function"!=typeof getApp)return!1;if(!qq.onAppHide)return!1;if(!qq.offAppHide)return!1;if(!qq.onAppShow)return!1;if(!qq.offAppShow)return!1;if(!qq.getSystemInfoSync)return!1;if(!qq.getStorageSync)return!1;if(!qq.setStorageSync)return!1;if(!qq.connectSocket)return!1;if(!qq.request)return!1;try{const e=qq.getSystemInfoSync();if(!e)return!1;if("qq"!==(e.AppPlatform+"").toLowerCase())return!1}catch(e){return!1}try{qq.setStorageSync(j,J)}catch(e){console.log("set storage fail",e)}return!0}let z=l,$=d,Z=u,ee=h;X()&&(W=qq,z=qq.onAppHide,$=qq.offAppHide,Z=qq.onAppShow,ee=qq.offAppShow);const te={},ne=I("connectSocket",W);te.connectSocket=e=>{const t=ne(e);let n=0;return{onClose:e=>{t.onClose((t=>{n=3,e&&e(t)}))},onOpen:e=>{t.onOpen((t=>{n=1,e&&e(t)}))},onError:e=>{t.onError((r=>{n=3,t.close(),e&&e(r)}))},onMessage:e=>t.onMessage(e),close:()=>{n=3,t.close()},send:({data:e,fail:n,success:r})=>{let i="";try{i=qq.getStorageSync(j)}catch(e){console.log("get storage fail",e)}if(!i||i===J)return t.send({data:e,fail:n,success:r});n&&n()},get readyState(){return n},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3}},te.request=I("request",W),te.onHide=z,te.offHide=$,te.onShow=Z,te.offShow=ee,te.getStorageSync=I("getStorageSync",W),te.setStorageSync=I("setStorageSync",W),te.removeStorageSync=I("removeStorageSync",W),te.getUserInfo=I("getUserInfo",W),te.getSystemInfoSync=I("getSystemInfoSync",W),te.getLocation=I("getLocation",W),te.getNetworkType=I("getNetworkType",W),te.createUDPSocket=I("createUDPSocket",W),te.channel=r.QQMP,te.root={};const re="mgobexs";var ie,oe,se,ae,_e,Ee,le,de,ue,he,ce,fe,pe,Re,me,ge,ye,Se;!function(e){e[e.COMMON=0]="COMMON",e[e.RELAY=1]="RELAY"}(ie||(ie={})),function(e){e[e.ET_Unknown=0]="ET_Unknown",e[e.ET_NetworkState=1]="ET_NetworkState"}(oe||(oe={})),function(e){e[e.E_PUSH_TYPE_TEST=0]="E_PUSH_TYPE_TEST",e[e.E_PUSH_TYPE_RELAY=1]="E_PUSH_TYPE_RELAY",e[e.E_PUSH_TYPE_GAMESVR=2]="E_PUSH_TYPE_GAMESVR",e[e.E_PUSH_TYPE_JOIN_ROOM=100]="E_PUSH_TYPE_JOIN_ROOM",e[e.E_PUSH_TYPE_LEAVE_ROOM=101]="E_PUSH_TYPE_LEAVE_ROOM",e[e.E_PUSH_TYPE_DISMISS_ROOM=102]="E_PUSH_TYPE_DISMISS_ROOM",e[e.E_PUSH_TYPE_REMOVE_PLAYER=103]="E_PUSH_TYPE_REMOVE_PLAYER",e[e.E_PUSH_TYPE_MODIFY_ROOM_PROPERTY=104]="E_PUSH_TYPE_MODIFY_ROOM_PROPERTY",e[e.E_PUSH_TYPE_NETWORK_STATE=105]="E_PUSH_TYPE_NETWORK_STATE",e[e.E_PUSH_TYPE_ROOM_CHAT=106]="E_PUSH_TYPE_ROOM_CHAT",e[e.E_PUSH_TYPE_PLAYER_STATE=107]="E_PUSH_TYPE_PLAYER_STATE",e[e.E_PUSH_TYPE_START_GAME=108]="E_PUSH_TYPE_START_GAME",e[e.E_PUSH_TYPE_STOP_GAME=109]="E_PUSH_TYPE_STOP_GAME",e[e.E_PUSH_TYPE_CREATE_ROOM=110]="E_PUSH_TYPE_CREATE_ROOM",e[e.E_PUSH_TYPE_DESTROY_ROOM=111]="E_PUSH_TYPE_DESTROY_ROOM",e[e.E_PUSH_TYPE_MODIFY_ROOM_PLAYER_PROFILE=112]="E_PUSH_TYPE_MODIFY_ROOM_PLAYER_PROFILE",e[e.E_PUSH_TYPE_MATCH_SUCCESS=200]="E_PUSH_TYPE_MATCH_SUCCESS",e[e.E_PUSH_TYPE_MATCH_TIMEOUT=201]="E_PUSH_TYPE_MATCH_TIMEOUT",e[e.E_PUSH_TYPE_MATCH_CANCEL=202]="E_PUSH_TYPE_MATCH_CANCEL",e[e.E_PUSH_TYPE_JOIN_GROUP=500]="E_PUSH_TYPE_JOIN_GROUP",e[e.E_PUSH_TYPE_LEAVE_GROUP=501]="E_PUSH_TYPE_LEAVE_GROUP",e[e.E_PUSH_TYPE_DISMISS_GROUP=502]="E_PUSH_TYPE_DISMISS_GROUP",e[e.E_PUSH_TYPE_MODIFY_GROUP_PROPERTY=503]="E_PUSH_TYPE_MODIFY_GROUP_PROPERTY",e[e.E_PUSH_TYPE_REMOVE_GROUP_PLAYER=504]="E_PUSH_TYPE_REMOVE_GROUP_PLAYER",e[e.E_PUSH_TYPE_GROUP_PLAYER_STATE=505]="E_PUSH_TYPE_GROUP_PLAYER_STATE",e[e.E_PUSH_TYPE_GROUP_CHAT=506]="E_PUSH_TYPE_GROUP_CHAT",e[e.E_PUSH_TYPE_MODIFY_GROUP_PLAYER_PROFILE=507]="E_PUSH_TYPE_MODIFY_GROUP_PLAYER_PROFILE"}(se||(se={})),function(e){e[e.E_CMD_INVALID=0]="E_CMD_INVALID",e[e.E_CMD_HEART_BEAT_REQ=100]="E_CMD_HEART_BEAT_REQ",e[e.E_CMD_CHECK_LOGIN_REQ=101]="E_CMD_CHECK_LOGIN_REQ",e[e.E_CMD_LOGIN_TO_ROOM_REQ=102]="E_CMD_LOGIN_TO_ROOM_REQ",e[e.E_CMD_FORWARD_TO_RELAY_REQ=103]="E_CMD_FORWARD_TO_RELAY_REQ",e[e.E_CMD_LOGIN_REQ=1e3]="E_CMD_LOGIN_REQ",e[e.E_CMD_LOGOUT_REQ=1001]="E_CMD_LOGOUT_REQ",e[e.E_CMD_AUTH_REQ=1002]="E_CMD_AUTH_REQ",e[e.E_CMD_QUERY_BY_PLAYER_ID_REQ=1003]="E_CMD_QUERY_BY_PLAYER_ID_REQ",e[e.E_CMD_QUERY_BY_GAME_ID_REQ=1004]="E_CMD_QUERY_BY_GAME_ID_REQ",e[e.E_CMD_GET_ROOM_DETAIL_REQ=2001]="E_CMD_GET_ROOM_DETAIL_REQ",e[e.E_CMD_JOIN_ROOM_REQ=2002]="E_CMD_JOIN_ROOM_REQ",e[e.E_CMD_QUIT_ROOM_REQ=2003]="E_CMD_QUIT_ROOM_REQ",e[e.E_CMD_CREATE_ROOM_REQ=2004]="E_CMD_CREATE_ROOM_REQ",e[e.E_CMD_DESTORY_ROOM_REQ=2005]="E_CMD_DESTORY_ROOM_REQ",e[e.E_CMD_REMOVE_MEMBER_REQ=2006]="E_CMD_REMOVE_MEMBER_REQ",e[e.E_CMD_CHANGE_ROOM_PROPERTIS_REQ=2007]="E_CMD_CHANGE_ROOM_PROPERTIS_REQ",e[e.E_CMD_DISSMISS_ROOM_REQ=2008]="E_CMD_DISSMISS_ROOM_REQ",e[e.E_CMD_CHANGE_PLAYER_STATE_REQ=2009]="E_CMD_CHANGE_PLAYER_STATE_REQ",e[e.E_CMD_CHANGE_PLAYER_NETWORK_STATE_REQ=2010]="E_CMD_CHANGE_PLAYER_NETWORK_STATE_REQ",e[e.E_CMD_ROOM_CHAT_REQ=2011]="E_CMD_ROOM_CHAT_REQ",e[e.E_CMD_START_FRAME_SYNC_REQ=2012]="E_CMD_START_FRAME_SYNC_REQ",e[e.E_CMD_STOP_FRAME_SYNC_REQ=2013]="E_CMD_STOP_FRAME_SYNC_REQ",e[e.E_CMD_GET_ROOM_LIST_REQ=2014]="E_CMD_GET_ROOM_LIST_REQ",e[e.E_CMD_SVR_REMOVE_MEMBER_REQ=2015]="E_CMD_SVR_REMOVE_MEMBER_REQ",e[e.E_CMD_SVR_CHANGE_ROOM_PROPERTIS_REQ=2016]="E_CMD_SVR_CHANGE_ROOM_PROPERTIS_REQ",e[e.E_CMD_SVR_CHANGE_PLAYER_STATE_REQ=2017]="E_CMD_SVR_CHANGE_PLAYER_STATE_REQ",e[e.E_CMD_GET_ROOM_LIST_V2_REQ=2018]="E_CMD_GET_ROOM_LIST_V2_REQ",e[e.E_CMD_CREATE_ROOM_FOR_THIRD_PARTY_REQ=2019]="E_CMD_CREATE_ROOM_FOR_THIRD_PARTY_REQ",e[e.E_CMD_CHANGE_ROOM_PLAYER_PROFILE=2020]="E_CMD_CHANGE_ROOM_PLAYER_PROFILE",e[e.E_CMD_MATCH_ROOM_SIMPLE_REQ=3001]="E_CMD_MATCH_ROOM_SIMPLE_REQ",e[e.E_CMD_MATCH_USER_SIMPLE_REQ=3002]="E_CMD_MATCH_USER_SIMPLE_REQ",e[e.E_CMD_MATCH_CANCEL_MATCH_REQ=3003]="E_CMD_MATCH_CANCEL_MATCH_REQ",e[e.E_CMD_MATCH_ROOM_COMPLEX_REQ=3004]="E_CMD_MATCH_ROOM_COMPLEX_REQ",e[e.E_CMD_MATCH_PLAYER_COMPLEX_REQ=3005]="E_CMD_MATCH_PLAYER_COMPLEX_REQ",e[e.E_CMD_MATCH_GROUP_REQ=3006]="E_CMD_MATCH_GROUP_REQ",e[e.E_CMD_RELAY_SEND_FRAME_REQ=4e3]="E_CMD_RELAY_SEND_FRAME_REQ",e[e.E_CMD_RELAY_REQUEST_FRAME_REQ=4001]="E_CMD_RELAY_REQUEST_FRAME_REQ",e[e.E_CMD_RELAY_CLIENT_SENDTO_GAMESVR_REQ=4002]="E_CMD_RELAY_CLIENT_SENDTO_GAMESVR_REQ",e[e.E_CMD_RELAY_CLIENT_RECV_FROM_GAMESVR_REQ=4003]="E_CMD_RELAY_CLIENT_RECV_FROM_GAMESVR_REQ",e[e.E_CMD_NOTIFY_JOIN_ROOM=5e3]="E_CMD_NOTIFY_JOIN_ROOM",e[e.E_CMD_NOTIFY_QUIT_ROOM=5001]="E_CMD_NOTIFY_QUIT_ROOM",e[e.E_CMD_NOTIFY_DESTORY_ROOM=5002]="E_CMD_NOTIFY_DESTORY_ROOM",e[e.E_CMD_NOTIFY_NET_STATE=5003]="E_CMD_NOTIFY_NET_STATE",e[e.E_CMD_NOTIFY_KICK_MEMBER=5004]="E_CMD_NOTIFY_KICK_MEMBER",e[e.E_CMD_GET_ADDR_BY_ROUTER_ID_REQ=6e3]="E_CMD_GET_ADDR_BY_ROUTER_ID_REQ",e[e.E_CMD_GET_GROUP_DETAIL_REQ=7001]="E_CMD_GET_GROUP_DETAIL_REQ",e[e.E_CMD_JOIN_GROUP_REQ=7002]="E_CMD_JOIN_GROUP_REQ",e[e.E_CMD_QUIT_GROUP_REQ=7003]="E_CMD_QUIT_GROUP_REQ",e[e.E_CMD_CREATE_GROUP_REQ=7004]="E_CMD_CREATE_GROUP_REQ",e[e.E_CMD_REMOVE_GROUP_MEMBER_REQ=7005]="E_CMD_REMOVE_GROUP_MEMBER_REQ",e[e.E_CMD_CHANGE_GROUP_PROPERTIES_REQ=7006]="E_CMD_CHANGE_GROUP_PROPERTIES_REQ",e[e.E_CMD_DISMISS_GROUP_REQ=7007]="E_CMD_DISMISS_GROUP_REQ",e[e.E_CMD_CHANGE_GROUP_PLAYER_STATE_REQ=7008]="E_CMD_CHANGE_GROUP_PLAYER_STATE_REQ",e[e.E_CMD_CHANGE_GROUP_PLAYER_NETWORK_STATE_REQ=7009]="E_CMD_CHANGE_GROUP_PLAYER_NETWORK_STATE_REQ",e[e.E_CMD_GROUP_CHAT_REQ=7010]="E_CMD_GROUP_CHAT_REQ",e[e.E_CMD_GET_GROUP_LIST_REQ=7011]="E_CMD_GET_GROUP_LIST_REQ",e[e.E_CMD_CHANGE_GROUP_PLAYER_PROFILE=7012]="E_CMD_CHANGE_GROUP_PLAYER_PROFILE"}(ae||(ae={})),function(e){e[e.EC_OK=0]="EC_OK",e[e.EC_REQ_BAD_PKG=1]="EC_REQ_BAD_PKG",e[e.EC_CMD_INVALID=2]="EC_CMD_INVALID",e[e.EC_PARAMS_INVALID=3]="EC_PARAMS_INVALID",e[e.EC_INNER_ERROR=4]="EC_INNER_ERROR",e[e.EC_TIME_OUT=5]="EC_TIME_OUT",e[e.EC_SERVER_BUSY=6]="EC_SERVER_BUSY",e[e.EC_NO_RIGHT=7]="EC_NO_RIGHT",e[e.EC_ACCESS_CMD_INVALID_ERR=200]="EC_ACCESS_CMD_INVALID_ERR",e[e.EC_ACCESS_CMD_GET_TOKEN_ERR=201]="EC_ACCESS_CMD_GET_TOKEN_ERR",e[e.EC_ACCESS_CMD_TOKEN_PRE_EXPIRE=202]="EC_ACCESS_CMD_TOKEN_PRE_EXPIRE",e[e.EC_ACCESS_CMD_INVALID_TOKEN=203]="EC_ACCESS_CMD_INVALID_TOKEN",e[e.EC_ACCESS_PUSH_SERIALIZE_ERR=204]="EC_ACCESS_PUSH_SERIALIZE_ERR",e[e.EC_ACCESS_LOGIN_BODY_PARSE_ERR=205]="EC_ACCESS_LOGIN_BODY_PARSE_ERR",e[e.EC_ACCESS_CONN_ERR=206]="EC_ACCESS_CONN_ERR",e[e.EC_ACCESS_GET_RS_IP_ERR=207]="EC_ACCESS_GET_RS_IP_ERR",e[e.EC_ACCESS_ADD_COMM_CONN_ERR=208]="EC_ACCESS_ADD_COMM_CONN_ERR",e[e.EC_ACCESS_ADD_HEART_CONN_ERR=209]="EC_ACCESS_ADD_HEART_CONN_ERR",e[e.EC_ACCESS_ADD_RELAY_CONN_ERR=210]="EC_ACCESS_ADD_RELAY_CONN_ERR",e[e.EC_ACCESS_HEART_BODY_PARSE_ERR=211]="EC_ACCESS_HEART_BODY_PARSE_ERR",e[e.EC_ACCESS_GET_COMM_CONNECT_ERR=212]="EC_ACCESS_GET_COMM_CONNECT_ERR",e[e.EC_ACCESS_GET_RELAY_CONNECT_ERR=213]="EC_ACCESS_GET_RELAY_CONNECT_ERR",e[e.EC_ACCESS_ACCESS_INFO_EMPTY=214]="EC_ACCESS_ACCESS_INFO_EMPTY",e[e.EC_ACCESS_PLAYER_DUPLICATE_LOGIN=215]="EC_ACCESS_PLAYER_DUPLICATE_LOGIN",e[e.EC_ACCESS_NOE_RELAY_OR_STATE_SVR=216]="EC_ACCESS_NOE_RELAY_OR_STATE_SVR",e[e.EC_PLAYER_GAME_NOT_EXIST=1e4]="EC_PLAYER_GAME_NOT_EXIST",e[e.EC_PLAYER_SECRET_KEY_FAIL=10001]="EC_PLAYER_SECRET_KEY_FAIL",e[e.EC_PLAYER_SIGN_ERR=10002]="EC_PLAYER_SIGN_ERR",e[e.EC_PLAYER_DUPLICATE_REQ=10003]="EC_PLAYER_DUPLICATE_REQ",e[e.EC_PLAYER_TIMESTAMP_INVALID=10004]="EC_PLAYER_TIMESTAMP_INVALID",e[e.EC_PLAYER_QUERY_PLAYER_FAIL=10005]="EC_PLAYER_QUERY_PLAYER_FAIL",e[e.EC_PLAYER_ADD_PLAYER_FAIL=10006]="EC_PLAYER_ADD_PLAYER_FAIL",e[e.EC_PLAYER_QUERY_GAME_FAIL=10007]="EC_PLAYER_QUERY_GAME_FAIL",e[e.EC_PLAYER_RECORD_NUM_ERR=10008]="EC_PLAYER_RECORD_NUM_ERR",e[e.EC_PLAYER_GET_TOKEN_FAIL=10009]="EC_PLAYER_GET_TOKEN_FAIL",e[e.EC_PLAYER_TOKEN_NOT_EXIST=10010]="EC_PLAYER_TOKEN_NOT_EXIST",e[e.EC_PLAYER_TOKEN_INVALID=10011]="EC_PLAYER_TOKEN_INVALID",e[e.EC_PLAYER_CLEAR_TOKEN_FAIL=10012]="EC_PLAYER_CLEAR_TOKEN_FAIL",e[e.EC_PLAYER_LOCK_FAIL=10013]="EC_PLAYER_LOCK_FAIL",e[e.EC_PLAYER_UNLOCK_FAIL=10014]="EC_PLAYER_UNLOCK_FAIL",e[e.EC_PLAYER_SAVE_TOKEN_FAIL=10015]="EC_PLAYER_SAVE_TOKEN_FAIL",e[e.EC_PLAYER_GAME_OUT_OF_SERVICE=10016]="EC_PLAYER_GAME_OUT_OF_SERVICE",e[e.EC_ROOM_CREATE_NO_PERMISSION=2e4]="EC_ROOM_CREATE_NO_PERMISSION",e[e.EC_ROOM_DESTORY_NO_PERMISSION=20001]="EC_ROOM_DESTORY_NO_PERMISSION",e[e.EC_ROOM_JOIN_NO_PERMISSION=20002]="EC_ROOM_JOIN_NO_PERMISSION",e[e.EC_ROOM_REMOVE_PLAYER_NO_PERMISSION=20003]="EC_ROOM_REMOVE_PLAYER_NO_PERMISSION",e[e.EC_ROOM_MODIFY_PROPERTIES_NO_PEMISSION=20004]="EC_ROOM_MODIFY_PROPERTIES_NO_PEMISSION",e[e.EC_ROOM_DISSMISS_NO_PERMISSION=20005]="EC_ROOM_DISSMISS_NO_PERMISSION",e[e.EC_ROOM_REMOVE_SELF_NO_PERMISSION=20006]="EC_ROOM_REMOVE_SELF_NO_PERMISSION",e[e.EC_ROOM_CHECK_LOGIN_SESSION_ERR=20007]="EC_ROOM_CHECK_LOGIN_SESSION_ERR",e[e.EC_ROOM_REMOVE_PLAYER_NOT_IN_ROOM=20008]="EC_ROOM_REMOVE_PLAYER_NOT_IN_ROOM",e[e.EC_ROOM_PLAYER_ALREADY_IN_ROOM=20010]="EC_ROOM_PLAYER_ALREADY_IN_ROOM",e[e.EC_ROOM_PLAYER_NOT_IN_ROOM=20011]="EC_ROOM_PLAYER_NOT_IN_ROOM",e[e.EC_ROOM_PLAYERS_EXCEED_LIMIT=20012]="EC_ROOM_PLAYERS_EXCEED_LIMIT",e[e.EC_ROOM_JOIN_NOT_ALLOW=20013]="EC_ROOM_JOIN_NOT_ALLOW",e[e.EC_ROOM_MAX_PLAYERS_INVALID=20014]="EC_ROOM_MAX_PLAYERS_INVALID",e[e.EC_ROOM_CREATE_FAIL=20015]="EC_ROOM_CREATE_FAIL",e[e.EC_ROOM_PLAYER_OFFLINE=20016]="EC_ROOM_PLAYER_OFFLINE",e[e.EC_ROOM_PARAM_PAGE_INVALID=20017]="EC_ROOM_PARAM_PAGE_INVALID",e[e.EC_ROOM_GET_PLAYER_INFO_ERR=20050]="EC_ROOM_GET_PLAYER_INFO_ERR",e[e.EC_ROOM_GET_ROOM_INFO_ERR=20051]="EC_ROOM_GET_ROOM_INFO_ERR",e[e.EC_ROOM_MODIFY_OWNER_ERR=20052]="EC_ROOM_MODIFY_OWNER_ERR",e[e.EC_ROOM_MAX_ROOM_NUMBER_EXCEED_LIMIT=20053]="EC_ROOM_MAX_ROOM_NUMBER_EXCEED_LIMIT",e[e.EC_ROOM_REMOVE_REDIS_PLAYER_ROOM_MATCH_ERR=-20052]="EC_ROOM_REMOVE_REDIS_PLAYER_ROOM_MATCH_ERR",e[e.EC_ROOM_REMOVE_REDIS_ROOM_INFO_ERR=-20053]="EC_ROOM_REMOVE_REDIS_ROOM_INFO_ERR",e[e.EC_ROOM_REDIS_UPDATE_ERR=-20054]="EC_ROOM_REDIS_UPDATE_ERR",e[e.EC_ROOM_REDIS_GET_LOCK_ERR=-20055]="EC_ROOM_REDIS_GET_LOCK_ERR",e[e.EC_ROOM_REDIS_CHECK_LOCK_ERR=-20056]="EC_ROOM_REDIS_CHECK_LOCK_ERR",e[e.EC_ROOM_REDIS_DEL_LOCK_ERR=-20057]="EC_ROOM_REDIS_DEL_LOCK_ERR",e[e.EC_ROOM_QUERY_PLAYER_ERR=20060]="EC_ROOM_QUERY_PLAYER_ERR",e[e.EC_ROOM_QUERY_GAME_ERR=20061]="EC_ROOM_QUERY_GAME_ERR",e[e.EC_ROOM_PLAYER_INFO_NOT_EXIST=20062]="EC_ROOM_PLAYER_INFO_NOT_EXIST",e[e.EC_ROOM_GAME_INFO_NOT_EXIST=20063]="EC_ROOM_GAME_INFO_NOT_EXIST",e[e.EC_ROOM_HISTORY_INFO_INSERT_ERR=-20064]="EC_ROOM_HISTORY_INFO_INSERT_ERR",e[e.EC_ROOM_REGION_INFO_NOT_EXIST=20065]="EC_ROOM_REGION_INFO_NOT_EXIST",e[e.EC_ROOM_QUERY_REGION_ERR=20066]="EC_ROOM_QUERY_REGION_ERR",e[e.EC_ROOM_MODIFY_PLAYER_BUSY=20070]="EC_ROOM_MODIFY_PLAYER_BUSY",e[e.EC_ROOM_INFO_UNEXIST=20080]="EC_ROOM_INFO_UNEXIST",e[e.EC_ROOM_ALLOCATE_RELAYSVR_IP_PORT_ERR=20090]="EC_ROOM_ALLOCATE_RELAYSVR_IP_PORT_ERR",e[e.EC_ROOM_INVALID_PARAMS_TEAM_ID=20100]="EC_ROOM_INVALID_PARAMS_TEAM_ID",e[e.EC_ROOM_TEAM_MEMBER_LIMIT_EXCEED=20101]="EC_ROOM_TEAM_MEMBER_LIMIT_EXCEED",e[e.EC_ROOM_ALLOCATE_SERVICE_FAIL=-20200]="EC_ROOM_ALLOCATE_SERVICE_FAIL",e[e.EC_MATCH_NO_ROOM=3e4]="EC_MATCH_NO_ROOM",e[e.EC_MATCH_TIMEOUT=30001]="EC_MATCH_TIMEOUT",e[e.EC_MATCH_LOGIC_ERR=30002]="EC_MATCH_LOGIC_ERR",e[e.EC_MATCH_ERR=30010]="EC_MATCH_ERR",e[e.EC_MATCH_PLAYER_IS_IN_MATCH=30011]="EC_MATCH_PLAYER_IS_IN_MATCH",e[e.EC_MATCH_PLAYER_NOT_IN_MATCH=30012]="EC_MATCH_PLAYER_NOT_IN_MATCH",e[e.EC_MATCH_GET_MATCH_INFO_ERR=30013]="EC_MATCH_GET_MATCH_INFO_ERR",e[e.EC_MATCH_UPDATE_MATCH_INFO_ERR=30014]="EC_MATCH_UPDATE_MATCH_INFO_ERR",e[e.EC_MATCH_CANCEL_FAILED=30015]="EC_MATCH_CANCEL_FAILED",e[e.EC_MATCH_GET_PLAYER_LIST_INFO_ERR=30016]="EC_MATCH_GET_PLAYER_LIST_INFO_ERR",e[e.EC_MATCH_CREATE_ROOM_ERR=30041]="EC_MATCH_CREATE_ROOM_ERR",e[e.EC_MATCH_JOIN_ROOM_ERR=30042]="EC_MATCH_JOIN_ROOM_ERR",e[e.EC_MATCH_INVALID_PARAMS=30043]="EC_MATCH_INVALID_PARAMS",e[e.EC_MATCH_GROUP_NUM_EXCEED_LIMIT=30044]="EC_MATCH_GROUP_NUM_EXCEED_LIMIT",e[e.EC_MATCH_PLAYER_ID_IS_REPEATED=30045]="EC_MATCH_PLAYER_ID_IS_REPEATED",e[e.EC_MATCH_CREATE_ROOM_PLAYER_ALREADY_IN_ROOM=30050]="EC_MATCH_CREATE_ROOM_PLAYER_ALREADY_IN_ROOM",e[e.EC_MATCH_QUERY_PLAYER_ERR=30100]="EC_MATCH_QUERY_PLAYER_ERR",e[e.EC_MATCH_PLAYER_INFO_NOT_EXIST=30101]="EC_MATCH_PLAYER_INFO_NOT_EXIST",e[e.EC_MATCH_QUERY_GAME_ERR=30102]="EC_MATCH_QUERY_GAME_ERR",e[e.EC_MATCH_GAME_INFO_NOT_EXIST=30103]="EC_MATCH_GAME_INFO_NOT_EXIST",e[e.EC_MATCH_QUERY_REGION_ERR=30104]="EC_MATCH_QUERY_REGION_ERR",e[e.EC_MATCH_REGION_INFO_NOT_EXIST=30105]="EC_MATCH_REGION_INFO_NOT_EXIST",e[e.EC_MATCH_TEAM_FAIL=30106]="EC_MATCH_TEAM_FAIL",e[e.EC_MATCH_PLAY_RULE_NOT_RUNNING=30107]="EC_MATCH_PLAY_RULE_NOT_RUNNING",e[e.EC_MATCH_PLAY_ATTR_NOT_FOUND=30108]="EC_MATCH_PLAY_ATTR_NOT_FOUND",e[e.EC_MATCH_PLAY_RULE_NOT_FOUND=30109]="EC_MATCH_PLAY_RULE_NOT_FOUND",e[e.EC_MATCH_PLAY_RULE_ATTR_SEGMENT_NOT_FOUND=30110]="EC_MATCH_PLAY_RULE_ATTR_SEGMENT_NOT_FOUND",e[e.EC_MATCH_PLAY_RULE_FUNC_ERR=30111]="EC_MATCH_PLAY_RULE_FUNC_ERR",e[e.EC_MATCH_GET_PLAYER_ATTR_FAIL=30112]="EC_MATCH_GET_PLAYER_ATTR_FAIL",e[e.EC_MATCH_GET_TEAM_ATTR_FAIL=30113]="EC_MATCH_GET_TEAM_ATTR_FAIL",e[e.EC_MATCH_NONE_TEAM_TYPE_FIT=30114]="EC_MATCH_NONE_TEAM_TYPE_FIT",e[e.EC_MATCH_TEAM_TYPE_INVALID=30115]="EC_MATCH_TEAM_TYPE_INVALID",e[e.EC_MATCH_PLAYER_ATTR_NOT_FOUND=30116]="EC_MATCH_PLAYER_ATTR_NOT_FOUND",e[e.EC_MATCH_REQUEST_ID_NOT_EXIST=30117]="EC_MATCH_REQUEST_ID_NOT_EXIST",e[e.EC_MATCH_REQUEST_ID_IS_EXIST=30118]="EC_MATCH_REQUEST_ID_IS_EXIST",e[e.EC_MATCH_TEAM_MATCH_FAIL=30119]="EC_MATCH_TEAM_MATCH_FAIL",e[e.EC_MATCH_ROBOT_GROUP_NOT_RIGHT=30120]="EC_MATCH_ROBOT_GROUP_NOT_RIGHT",e[e.EC_MATCH_ROBOT_TEAM_NOT_RIGHT=30121]="EC_MATCH_ROBOT_TEAM_NOT_RIGHT",e[e.EC_MATCH_INNER_LOGIC_ERR=-30150]="EC_MATCH_INNER_LOGIC_ERR",e[e.EC_MATCH_INNER_PARAMS_ERR=-30160]="EC_MATCH_INNER_PARAMS_ERR",e[e.EC_MATCH_ROOM_INNER_ADD_NODE_ERR=-30170]="EC_MATCH_ROOM_INNER_ADD_NODE_ERR",e[e.EC_MATCH_ROOM_INNER_DEL_NODE_ERR=-30171]="EC_MATCH_ROOM_INNER_DEL_NODE_ERR",e[e.EC_MATCH_RESULT_TYPE_NOT_GSE=-30172]="EC_MATCH_RESULT_TYPE_NOT_GSE",e[e.EC_MATCH_REQUEST_CANCELED=30173]="EC_MATCH_REQUEST_CANCELED",e[e.EC_RELAY_ALREADY_EXISTS=4e4]="EC_RELAY_ALREADY_EXISTS",e[e.EC_RELAY_NOT_EXISTS=40001]="EC_RELAY_NOT_EXISTS",e[e.EC_RELAY_DATA_EXCEED_LIMITED=40002]="EC_RELAY_DATA_EXCEED_LIMITED",e[e.EC_RELAY_MEMBER_ALREADY_EXISTS=40003]="EC_RELAY_MEMBER_ALREADY_EXISTS",e[e.EC_RELAY_MEMBER_NOT_EXISTS=40004]="EC_RELAY_MEMBER_NOT_EXISTS",e[e.EC_RELAY_STATE_INVALID=40005]="EC_RELAY_STATE_INVALID",e[e.EC_RELAY_INVALID_FRAME_RATE=40006]="EC_RELAY_INVALID_FRAME_RATE",e[e.EC_RELAY_SET_FRAME_RATE_FORBIDDEN=40007]="EC_RELAY_SET_FRAME_RATE_FORBIDDEN",e[e.EC_RELAY_NO_MEMBERS=40008]="EC_RELAY_NO_MEMBERS",e[e.EC_RELAY_GAMESVR_SERVICE_NOT_OPEN=40009]="EC_RELAY_GAMESVR_SERVICE_NOT_OPEN",e[e.EC_RELAY_REQ_POD_FAIL=40010]="EC_RELAY_REQ_POD_FAIL",e[e.EC_RELAY_NO_AVAILABLE_POD=40011]="EC_RELAY_NO_AVAILABLE_POD",e[e.EC_RELAY_GET_FRAME_CACHE_FAIL=40012]="EC_RELAY_GET_FRAME_CACHE_FAIL",e[e.EC_RELAY_HKV_CACHE_ERROR=40015]="EC_RELAY_HKV_CACHE_ERROR",e[e.EC_RELAY_REDIS_CACHE_ERROR=40016]="EC_RELAY_REDIS_CACHE_ERROR",e[e.EC_RELAY_NOTIFY_RELAYWORKER_FAIL=40018]="EC_RELAY_NOTIFY_RELAYWORKER_FAIL",e[e.EC_RELAY_RESET_RELAY_ROOM_FAIL=40019]="EC_RELAY_RESET_RELAY_ROOM_FAIL",e[e.EC_RELAY_CLEAN_RELAY_ROOM_FAIL=40020]="EC_RELAY_CLEAN_RELAY_ROOM_FAIL",e[e.EC_RELAY_REQ_FRAME_GAME_NOT_STARTED=40021]="EC_RELAY_REQ_FRAME_GAME_NOT_STARTED",e[e.EC_RELAY_NO_PERMISSION=40100]="EC_RELAY_NO_PERMISSION",e[e.EC_RELAY_NOTIFY_GAMESVR_FAIL=40200]="EC_RELAY_NOTIFY_GAMESVR_FAIL",e[e.EC_RELAY_FORWARD_TO_GAMESVR_FAIL=40201]="EC_RELAY_FORWARD_TO_GAMESVR_FAIL",e[e.EC_RELAY_FORWARD_TO_CLIENT_FAIL=40202]="EC_RELAY_FORWARD_TO_CLIENT_FAIL",e[e.EC_RELAY_GAMESVR_NOT_FOUND_ROOM_FAIL=40203]="EC_RELAY_GAMESVR_NOT_FOUND_ROOM_FAIL",e[e.EC_GROUP_OPERATION_FAILED=7e4]="EC_GROUP_OPERATION_FAILED",e[e.EC_INVALID_PARAMS_GROUP_NAME=70001]="EC_INVALID_PARAMS_GROUP_NAME",e[e.EC_INVALID_PARAMS_GROUP_TYPE=70002]="EC_INVALID_PARAMS_GROUP_TYPE",e[e.EC_INVALID_PARAMS_GROUP_CUSTOM_PROPERTIES=70003]="EC_INVALID_PARAMS_GROUP_CUSTOM_PROPERTIES",e[e.EC_INVALID_PARAMS_GROUP_PLAYER_NAME=70004]="EC_INVALID_PARAMS_GROUP_PLAYER_NAME",e[e.EC_INVALID_PARAMS_GROUP_PLAYER_CUSTOM_STATUS=70005]="EC_INVALID_PARAMS_GROUP_PLAYER_CUSTOM_STATUS",e[e.EC_INVALID_PARAMS_GROUP_PLAYER_CUSTOM_PROPERTIES=70006]="EC_INVALID_PARAMS_GROUP_PLAYER_CUSTOM_PROPERTIES",e[e.EC_GROUP_MODIFY_OWNER_NO_PERMISSION=70007]="EC_GROUP_MODIFY_OWNER_NO_PERMISSION",e[e.EC_INVALID_PARAMS_GROUP_ID=70008]="EC_INVALID_PARAMS_GROUP_ID",e[e.EC_INVALID_CHANGE_OPTION=70009]="EC_INVALID_CHANGE_OPTION",e[e.EC_INVALID_PARAMS_GROUP_OWNER=70010]="EC_INVALID_PARAMS_GROUP_OWNER",e[e.EC_PLAYER_IS_EXIST_GROUP=70011]="EC_PLAYER_IS_EXIST_GROUP",e[e.EC_PLAYER_IS_NOT_EXIST_GROUP=70012]="EC_PLAYER_IS_NOT_EXIST_GROUP",e[e.EC_REMOVE_PLAYER_ID_IS_EMPTY=70013]="EC_REMOVE_PLAYER_ID_IS_EMPTY",e[e.EC_GROUP_REMOVE_PLAYER_NO_PERMISSION=70014]="EC_GROUP_REMOVE_PLAYER_NO_PERMISSION",e[e.EC_INVALID_PARAMS_GROUP_RECV_TYPE=70015]="EC_INVALID_PARAMS_GROUP_RECV_TYPE",e[e.EC_INVALID_PARAMS_RECV_PLAYER_ID=70016]="EC_INVALID_PARAMS_RECV_PLAYER_ID",e[e.EC_INVALID_PARAMS_MESSAGE_LENGTH=70017]="EC_INVALID_PARAMS_MESSAGE_LENGTH",e[e.EC_INVALID_PARAMS_MAX_PLAYER=70018]="EC_INVALID_PARAMS_MAX_PLAYER",e[e.PERSISTENCE_GROUP_NUM_EXCEED_THE_LIMIT=70019]="PERSISTENCE_GROUP_NUM_EXCEED_THE_LIMIT",e[e.EC_INVALID_PARAMS_PLAYER_NOT_IN_GROUP=70020]="EC_INVALID_PARAMS_PLAYER_NOT_IN_GROUP",e[e.NO_GROUP_OPERATION_PERMISSION=70021]="NO_GROUP_OPERATION_PERMISSION",e[e.EC_OPERATION_FAILED_GROUP_FORBID_JOIN=70022]="EC_OPERATION_FAILED_GROUP_FORBID_JOIN",e[e.EC_GROUP_CHAT_FREQUENCY_LIMIT=70023]="EC_GROUP_CHAT_FREQUENCY_LIMIT",e[e.EC_GROUP_PLAYER_NUM_LIMIT_EXCEED=70024]="EC_GROUP_PLAYER_NUM_LIMIT_EXCEED",e[e.EC_PLAYER_GROUP_NUM_LIMIT_EXCEED=70025]="EC_PLAYER_GROUP_NUM_LIMIT_EXCEED",e[e.EC_GROUP_NOT_EXIST=70026]="EC_GROUP_NOT_EXIST",e[e.EC_INVALID_PARAMS=6e4]="EC_INVALID_PARAMS",e[e.EC_INVALID_PARAMS_PLAY_MODE_VERSION=60001]="EC_INVALID_PARAMS_PLAY_MODE_VERSION",e[e.EC_INVALID_PARAMS_PLAY_MODE_RULETYPE=60002]="EC_INVALID_PARAMS_PLAY_MODE_RULETYPE",e[e.EC_INVALID_PARAMS_PLAY_MODE_EXPRESSION=60003]="EC_INVALID_PARAMS_PLAY_MODE_EXPRESSION",e[e.EC_INVALID_PARAMS_PLAY_MODE_TEAM=60004]="EC_INVALID_PARAMS_PLAY_MODE_TEAM",e[e.EC_INVALID_PARAMS_MSGQ_ENCODE=60020]="EC_INVALID_PARAMS_MSGQ_ENCODE",e[e.EC_INVALID_PARAMS_MSGQ_DECODE=60021]="EC_INVALID_PARAMS_MSGQ_DECODE",e[e.EC_INVALID_PARAMS_GAME_ID=61e3]="EC_INVALID_PARAMS_GAME_ID",e[e.EC_INVALID_PARAMS_PLAYER_INFO=61001]="EC_INVALID_PARAMS_PLAYER_INFO",e[e.EC_INVALID_PARAMS_MAX_PLAYERS=61002]="EC_INVALID_PARAMS_MAX_PLAYERS",e[e.EC_INVALID_PARAMS_ROOM_TYPE=61003]="EC_INVALID_PARAMS_ROOM_TYPE",e[e.EC_INVALID_PARAMS_PLAYER_ID=61004]="EC_INVALID_PARAMS_PLAYER_ID",e[e.EC_INVALID_PARAMS_MATCH_TYPE=61005]="EC_INVALID_PARAMS_MATCH_TYPE",e[e.EC_INVALID_PARAMS_MATCH_CODE=61006]="EC_INVALID_PARAMS_MATCH_CODE",e[e.EC_INVALID_PARAMS_OPEN_ID=61007]="EC_INVALID_PARAMS_OPEN_ID",e[e.EC_INVALID_PARAMS_PLATFORM=61008]="EC_INVALID_PARAMS_PLATFORM",e[e.EC_INVALID_PARAMS_TIMESTAMP=61009]="EC_INVALID_PARAMS_TIMESTAMP",e[e.EC_INVALID_PARAMS_SIGN=61010]="EC_INVALID_PARAMS_SIGN",e[e.EC_INVALID_PARAMS_NONCE=61011]="EC_INVALID_PARAMS_NONCE",e[e.EC_INVALID_PARAMS_TOKEN=61012]="EC_INVALID_PARAMS_TOKEN",e[e.EC_INVALID_PARAMS_NETWORK_STATE=61013]="EC_INVALID_PARAMS_NETWORK_STATE",e[e.EC_INVALID_PARAMS_ROOM_NAME=61014]="EC_INVALID_PARAMS_ROOM_NAME",e[e.EC_INVALID_PARAMS_CREATE_ROOM_TYPE=61015]="EC_INVALID_PARAMS_CREATE_ROOM_TYPE",e[e.EC_INVALID_PARAMS_DEVICE_ID=61016]="EC_INVALID_PARAMS_DEVICE_ID",e[e.EC_INVALID_PARAMS_PAGE_NO=61017]="EC_INVALID_PARAMS_PAGE_NO",e[e.EC_INVALID_PARAMS_PAGE_SIZE=61018]="EC_INVALID_PARAMS_PAGE_SIZE",e[e.EC_INVALID_PARAMS_PLAYER_LIST=61019]="EC_INVALID_PARAMS_PLAYER_LIST",e[e.EC_INVALID_PARAMS_MESSAGE=61020]="EC_INVALID_PARAMS_MESSAGE",e[e.EC_INVALID_CHANGE_ROOM_OPTION=61021]="EC_INVALID_CHANGE_ROOM_OPTION",e[e.EC_INVALID_PARAMS_REGION=61022]="EC_INVALID_PARAMS_REGION",e[e.EC_INVALID_PARAMS_OWNER=61023]="EC_INVALID_PARAMS_OWNER",e[e.EC_INVALID_PARAMS_OWNER_OPEN_ID=61024]="EC_INVALID_PARAMS_OWNER_OPEN_ID",e[e.EC_INVALID_PARAMS_OPEN_ID_DUPLICATE=61026]="EC_INVALID_PARAMS_OPEN_ID_DUPLICATE",e[e.EC_INVALID_PARAMS_ROOM_CREATE_TYPE=61027]="EC_INVALID_PARAMS_ROOM_CREATE_TYPE",e[e.EC_MYSPP_SYSTEM_ERR=-1e3]="EC_MYSPP_SYSTEM_ERR",e[e.EC_REDIS_KEY_NOT_EXIST=-66e3]="EC_REDIS_KEY_NOT_EXIST",e[e.EC_REDIS_SET_OP_ERR=-66001]="EC_REDIS_SET_OP_ERR",e[e.EC_REDIS_GET_OP_ERR=-66002]="EC_REDIS_GET_OP_ERR",e[e.EC_REDIS_DEL_OP_ERR=-66003]="EC_REDIS_DEL_OP_ERR",e[e.EC_REDIS_EXPIRE_OP_ERR=-66004]="EC_REDIS_EXPIRE_OP_ERR",e[e.EC_REDIS_LOCK_OP_ERR=-66005]="EC_REDIS_LOCK_OP_ERR",e[e.EC_REDIS_LOCK_ALREADY_EXIST=-66006]="EC_REDIS_LOCK_ALREADY_EXIST",e[e.EC_REDIS_LIST_OP_ERR=-66020]="EC_REDIS_LIST_OP_ERR",e[e.EC_REDIS_LIST_POP_EMPTY=-66021]="EC_REDIS_LIST_POP_EMPTY",e[e.EC_REDIS_POOL_GET_INSTANCE_FAIL=-66022]="EC_REDIS_POOL_GET_INSTANCE_FAIL",e[e.EC_REDIS_SET_IS_EMPTY=-66023]="EC_REDIS_SET_IS_EMPTY",e[e.EC_REDIS_OP_INVALID_PARAMS=-66024]="EC_REDIS_OP_INVALID_PARAMS",e[e.EC_MYSQL_NO_ROW_FOUND=-66100]="EC_MYSQL_NO_ROW_FOUND",e[e.EC_MYSQL_MULTI_ROW_FOUND=-66101]="EC_MYSQL_MULTI_ROW_FOUND",e[e.EC_MYSQL_INSERT_FAIL=-66102]="EC_MYSQL_INSERT_FAIL",e[e.EC_MYSQL_DELETE_FAIL=-66103]="EC_MYSQL_DELETE_FAIL",e[e.EC_MYSQL_UPDATE_FAIL=-66104]="EC_MYSQL_UPDATE_FAIL",e[e.EC_MYSQL_QUERYS_FAIL=-66105]="EC_MYSQL_QUERYS_FAIL",e[e.EC_PB_SERIALIZE_TO_STR_ERR=-66200]="EC_PB_SERIALIZE_TO_STR_ERR",e[e.EC_PB_PARSE_FROM_STR_ERR=-66201]="EC_PB_PARSE_FROM_STR_ERR",e[e.EC_DATA_FORMAT_ERR=-66210]="EC_DATA_FORMAT_ERR",e[e.EC_JSON_FORMAT_ERR=-66211]="EC_JSON_FORMAT_ERR",e[e.EC_JSON_PLAY_MODE_FORMAT_ERR=-66212]="EC_JSON_PLAY_MODE_FORMAT_ERR",e[e.EC_JSON_PLAY_MODE_PARISE_ERR=-66213]="EC_JSON_PLAY_MODE_PARISE_ERR",e[e.EC_INVALID_PARAMS_RECORE_ID=-66601]="EC_INVALID_PARAMS_RECORE_ID",e[e.EC_HASHID_ERR=-66700]="EC_HASHID_ERR",e[e.EC_HASHID_ENCODE_ERR=-66701]="EC_HASHID_ENCODE_ERR",e[e.EC_HASHID_DECODE_ERR=-66702]="EC_HASHID_DECODE_ERR",e[e.EC_CONF_ROOM_ID_BUCKET_ERR=-66801]="EC_CONF_ROOM_ID_BUCKET_ERR",e[e.EC_SDK_SEND_FAIL=90001]="EC_SDK_SEND_FAIL",e[e.EC_SDK_UNINIT=90002]="EC_SDK_UNINIT",e[e.EC_SDK_RES_TIMEOUT=90003]="EC_SDK_RES_TIMEOUT",e[e.EC_SDK_NO_LOGIN=90004]="EC_SDK_NO_LOGIN",e[e.EC_SDK_NO_CHECK_LOGIN=90005]="EC_SDK_NO_CHECK_LOGIN",e[e.EC_SDK_SOCKET_ERROR=90006]="EC_SDK_SOCKET_ERROR",e[e.EC_SDK_SOCKET_CLOSE=90007]="EC_SDK_SOCKET_CLOSE",e[e.EC_SDK_NO_ROOM=90008]="EC_SDK_NO_ROOM",e[e.EC_SDK_ENCODE_PARAM_FAIL=90009]="EC_SDK_ENCODE_PARAM_FAIL",e[e.EC_SDK_INVALID_PARAMS=90010]="EC_SDK_INVALID_PARAMS"}(_e||(_e={})),function(e){e[e.COMMON_OFFLINE=0]="COMMON_OFFLINE",e[e.COMMON_ONLINE=1]="COMMON_ONLINE",e[e.RELAY_OFFLINE=2]="RELAY_OFFLINE",e[e.RELAY_ONLINE=3]="RELAY_ONLINE"}(Ee||(Ee={})),function(e){e[e.COMMON_CREATE=0]="COMMON_CREATE",e[e.MATCH_CREATE=1]="MATCH_CREATE",e[e.THIRD_PARTY_CREATE=2]="THIRD_PARTY_CREATE"}(le||(le={})),function(e){e[e.STOP=0]="STOP",e[e.START=1]="START"}(de||(de={})),function(e){e[e.COMMON_JOIN=0]="COMMON_JOIN",e[e.MATCH_JOIN=1]="MATCH_JOIN"}(ue||(ue={})),function(e){e[e.ROOM_NAME=0]="ROOM_NAME",e[e.OWNER=1]="OWNER",e[e.IS_VIEWED=2]="IS_VIEWED",e[e.IS_INVITED=3]="IS_INVITED",e[e.IS_PRIVATE=4]="IS_PRIVATE",e[e.CUSTOM_PROPERTIES=5]="CUSTOM_PROPERTIES",e[e.IS_FORBID_JOIN=6]="IS_FORBID_JOIN"}(he||(he={})),function(e){e[e.PENDING=0]="PENDING",e[e.MATCHING=1]="MATCHING",e[e.SUCCESS=3]="SUCCESS",e[e.TIMEOUT=4]="TIMEOUT"}(ce||(ce={})),function(e){e[e.MP_MGOBE=0]="MP_MGOBE",e[e.MP_GSE=1]="MP_GSE",e[e.MP_THIRDPARTY=-1]="MP_THIRDPARTY"}(fe||(fe={})),function(e){e[e.PS_UNKNOW=0]="PS_UNKNOW",e[e.PS_PENDING=2]="PS_PENDING",e[e.PS_FULFILLED=3]="PS_FULFILLED",e[e.PS_CANCELLED=4]="PS_CANCELLED",e[e.PS_TIMED_OUT=5]="PS_TIMED_OUT",e[e.PS_FAILED=6]="PS_FAILED",e[e.PS_TIMED_OUT_MQ=100]="PS_TIMED_OUT_MQ",e[e.PS_PLACE_MATCH_FAIL=101]="PS_PLACE_MATCH_FAIL"}(pe||(pe={})),function(e){e[e.ROOM_SIMPLE=1]="ROOM_SIMPLE",e[e.PLAYER_COMPLEX=2]="PLAYER_COMPLEX"}(Re||(Re={})),function(e){e[e.E_GS_FORWARDTYPE_DEFAULT=0]="E_GS_FORWARDTYPE_DEFAULT",e[e.E_GS_FORWARDTYPE_NOTIFY_CONNECTION=1]="E_GS_FORWARDTYPE_NOTIFY_CONNECTION",e[e.E_GS_FORWARDTYPE_NOTIFY_ROOM_EVENT=2]="E_GS_FORWARDTYPE_NOTIFY_ROOM_EVENT",e[e.E_GS_FORWARDTYPE_NOTIFY_COM_EVENT=3]="E_GS_FORWARDTYPE_NOTIFY_COM_EVENT",e[e.E_GS_FORWARDTYPE_CLIENT_SENDTO_GAMESVR=4]="E_GS_FORWARDTYPE_CLIENT_SENDTO_GAMESVR"}(me||(me={})),function(e){e[e.GROUP_LIMITED=0]="GROUP_LIMITED",e[e.GROUP_MANY=1]="GROUP_MANY"}(ge||(ge={})),function(e){e[e.GROUP_NAME=0]="GROUP_NAME",e[e.GROUP_OWNER=1]="GROUP_OWNER",e[e.GROUP_CUSTOM_PROPERTIES=2]="GROUP_CUSTOM_PROPERTIES",e[e.GROUP_IS_FORBID_JOIN=3]="GROUP_IS_FORBID_JOIN"}(ye||(ye={})),function(e){e[e.GROUP_ALL=1]="GROUP_ALL",e[e.GROUP_OTHERS=2]="GROUP_OTHERS",e[e.GROUP_SOME=3]="GROUP_SOME"}(Se||(Se={}));const Ie={ClientSendServerReqWrap1:void 0,ServerSendClientBstWrap1:void 0,ClientSendServerRspWrap1:void 0,ClientSendServerReqWrap2:void 0,ClientSendServerRspWrap2:void 0,EventInfo:void 0,EventNetworkState:void 0,HeartBeatReq:void 0,HeartBeatRsp:void 0,ServerSendClientBstWrap2:void 0,NOUSEServerSendClientBstRspWrap2:void 0,CheckLoginReq:void 0,CheckLoginRsp:void 0,PushBodyType:void 0,LoginReq:void 0,LoginRsp:void 0,SdkConfig:void 0,LogoutReq:void 0,LogoutRsp:void 0,StartFrameSyncReq:void 0,StartFrameSyncRsp:void 0,StopFrameSyncReq:void 0,StopFrameSyncRsp:void 0,FrameItem:void 0,SendFrameReq:void 0,SendFrameRsp:void 0,FrameExtInfo:void 0,Frame:void 0,RequestFrameReq:void 0,RequestFrameRsp:void 0,PlayerInfo:void 0,TeamInfo:void 0,RoomInfo:void 0,CreateRoomReq:void 0,CreateRoomRsp:void 0,JoinRoomReq:void 0,JoinRoomRsp:void 0,LeaveRoomReq:void 0,LeaveRoomRsp:void 0,DismissRoomReq:void 0,DismissRoomRsp:void 0,ChangeRoomReq:void 0,ChangeRoomRsp:void 0,SvrChangeRoomReq:void 0,SvrChangeRoomRsp:void 0,RemovePlayerReq:void 0,RemovePlayerRsp:void 0,SvrRemovePlayerReq:void 0,SvrRemovePlayerRsp:void 0,GetRoomByRoomIdReq:void 0,GetRoomByRoomIdRsp:void 0,SendToClientReq:void 0,SendToClientRsp:void 0,ChangeCustomPlayerStatusReq:void 0,ChangeCustomPlayerStatusRsp:void 0,SvrChangeCustomPlayerStatusReq:void 0,SvrChangeCustomPlayerStatusRsp:void 0,ChangePlayerNetworkStateReq:void 0,ChangePlayerNetworkStateRsp:void 0,GetRoomListReq:void 0,GetRoomListRsp:void 0,ChangeRoomPlayerProfileReq:void 0,ChangeRoomPlayerProfileRsp:void 0,ChangeGroupPlayerProfileReq:void 0,ChangeGroupPlayerProfileRsp:void 0,MatchRoomSimpleReq:void 0,MatchRoomSimpleRsp:void 0,MatchRoomComplexReq:void 0,MatchRoomComplexRsp:void 0,MatchPlayersSimpleReq:void 0,MatchPlayersSimpleRsp:void 0,MatchAttribute:void 0,MatchPlayerInfo:void 0,MatchGroupPlayerInfo:void 0,MatchGroupInfo:void 0,MatchTeamInfo:void 0,ProgressPlayerInfo:void 0,MatchmakerTeam:void 0,MatchmakerData:void 0,MatchPlacementInfo:void 0,MgobePlacementJob:void 0,MgobePlacementResult:void 0,GsePlacementJob:void 0,GsePlacementResult:void 0,ThirdpartyPlacementJob:void 0,ThirdpartyPlacementResult:void 0,GsePlayerLatency:void 0,GseGameProperty:void 0,GsePlacedPlayerSession:void 0,GseGameSession:void 0,PlaceMatchReq:void 0,PlaceMatchRsp:void 0,MatchPlacementResult:void 0,UpdateMatchPlacementResultReq:void 0,UpdateMatchPlacementResultRsp:void 0,CmqPlacementResult:void 0,MatchPlayersReq:void 0,MatchPlayersRsp:void 0,MatchGroupReq:void 0,MatchGroupRsp:void 0,DescribeMatchReq:void 0,MatchProgress:void 0,DescribeMatchRsp:void 0,CancelPlayerMatchReq:void 0,CancelPlayerMatchRsp:void 0,ApiMatchGroupReq:void 0,ApiMatchGroupRsp:void 0,ApiDescribeMatchReq:void 0,ApiDescribeMatchRsp:void 0,GameSessionConnectionInfo:void 0,MatchedPlayerSession:void 0,StartMatchPlacement:void 0,DesiredPlayerSession:void 0,GameProperty:void 0,ApiCancelPlayerMatchReq:void 0,ApiCancelPlayerMatchRsp:void 0,CreateRoomBst:void 0,DestroyRoomBst:void 0,JoinRoomBst:void 0,LeaveRoomBst:void 0,RemovePlayerBst:void 0,DismissRoomBst:void 0,ChangeRoomBst:void 0,RecvFromClientBst:void 0,ChangeCustomPlayerStatusBst:void 0,ChangeRoomPlayerProfileBst:void 0,ChangeGroupPlayerProfileBst:void 0,ChangePlayerNetworkStateBst:void 0,MatchTimeoutBst:void 0,CancelMatchBst:void 0,MatchPlayersBst:void 0,StartFrameSyncBst:void 0,StopFrameSyncBst:void 0,RecvFrameBst:void 0,GameSvrCommunication:void 0,NotifyRelayConnectionReq:void 0,NotifyRoomEventReq:void 0,SendToGameSvrReq:void 0,SendToGameSvrRsp:void 0,RecvFromGameSvrBst:void 0,ClientRecvFromGameSvrRsp:void 0,GroupInfo:void 0,GroupPlayerInfo:void 0,CreateGroupReq:void 0,CreateGroupRsp:void 0,JoinGroupReq:void 0,JoinGroupRsp:void 0,LeaveGroupReq:void 0,LeaveGroupRsp:void 0,DismissGroupReq:void 0,DismissGroupRsp:void 0,ChangeGroupReq:void 0,ChangeGroupRsp:void 0,RemoveGroupPlayerReq:void 0,RemoveGroupPlayerRsp:void 0,GetGroupByGroupIdReq:void 0,GetGroupByGroupIdRsp:void 0,GetMyGroupsReq:void 0,GetMyGroupsRsp:void 0,ChangeCustomGroupPlayerStatusReq:void 0,ChangeCustomGroupPlayerStatusRsp:void 0,SendToGroupClientReq:void 0,SendToGroupClientRsp:void 0,GroupPlayers:void 0,ChangeGroupPlayerNetworkReq:void 0,ChangeGroupPlayerNetworkRsp:void 0,JoinGroupBst:void 0,LeaveGroupBst:void 0,DismissGroupBst:void 0,ChangeGroupBst:void 0,RemoveGroupPlayerBst:void 0,ChangeGroupPlayerNetworkStateBst:void 0,ChangeCustomGroupPlayerStatusBst:void 0,RecvFromGroupClientBst:void 0},Ce=o.QAppProtoErrCode;var Oe;!function(e){e.EC_SDK_SEND_FAIL="发送失败",e.EC_SDK_UNINIT="未初始化",e.EC_SDK_RES_TIMEOUT="发送超时",e.EC_SDK_NO_LOGIN="未登录",e.EC_SDK_NO_CHECK_LOGIN="CheckLogin失败",e.EC_SDK_SOCKET_ERROR="Socket错误",e.EC_SDK_SOCKET_CLOSE="Socket断开",e.EC_SDK_NO_ROOM="无房间信息"}(Oe||(Oe={}));const Te={};Te[Ce.EC_SDK_SEND_FAIL]=Oe.EC_SDK_SEND_FAIL,Te[Ce.EC_SDK_UNINIT]=Oe.EC_SDK_UNINIT,Te[Ce.EC_SDK_RES_TIMEOUT]=Oe.EC_SDK_RES_TIMEOUT,Te[Ce.EC_SDK_NO_LOGIN]=Oe.EC_SDK_NO_LOGIN,Te[Ce.EC_SDK_NO_CHECK_LOGIN]=Oe.EC_SDK_NO_CHECK_LOGIN,Te[Ce.EC_SDK_SOCKET_ERROR]=Oe.EC_SDK_SOCKET_ERROR,Te[Ce.EC_SDK_SOCKET_CLOSE]=Oe.EC_SDK_SOCKET_CLOSE,Te[Ce.EC_SDK_NO_ROOM]=Oe.EC_SDK_NO_ROOM;var Ae,Pe=Ce;!function(e){let t,n,r,i,o,s,a;!function(e){e[e.ROOM_ALL=1]="ROOM_ALL",e[e.ROOM_OTHERS=2]="ROOM_OTHERS",e[e.ROOM_SOME=3]="ROOM_SOME"}(t=e.RecvType||(e.RecvType={})),function(e){e[e.ROOM_SIMPLE=1]="ROOM_SIMPLE",e[e.PLAYER_COMPLEX=2]="PLAYER_COMPLEX"}(n=e.MatchType||(e.MatchType={})),function(e){e[e.COMMON_CREATE=0]="COMMON_CREATE",e[e.MATCH_CREATE=1]="MATCH_CREATE",e[e.THIRD_PARTY_CREATE=2]="THIRD_PARTY_CREATE"}(r=e.CreateRoomType||(e.CreateRoomType={})),function(e){e[e.COMMON_OFFLINE=0]="COMMON_OFFLINE",e[e.COMMON_ONLINE=1]="COMMON_ONLINE",e[e.RELAY_OFFLINE=2]="RELAY_OFFLINE",e[e.RELAY_ONLINE=3]="RELAY_ONLINE"}(i=e.NetworkState||(e.NetworkState={})),function(e){e[e.STOP=0]="STOP",e[e.START=1]="START"}(o=e.FrameSyncState||(e.FrameSyncState={})),function(e){e[e.GROUP_LIMITED=0]="GROUP_LIMITED",e[e.GROUP_MANY=1]="GROUP_MANY"}(s=e.GroupType||(e.GroupType={})),function(e){e[e.GROUP_ALL=1]="GROUP_ALL",e[e.GROUP_OTHERS=2]="GROUP_OTHERS",e[e.GROUP_SOME=3]="GROUP_SOME"}(a=e.GroupRecvType||(e.GroupRecvType={}))}(Ae||(Ae={}));var Me={get CreateRoomType(){return o.CreateRoomType},get MatchType(){return o.MatchType},get NetworkState(){return o.NetworkState},get FrameSyncState(){return o.FrameSyncState},get RecvType(){return Ae.RecvType},get GroupRecvType(){return Ae.GroupRecvType},get GroupType(){return Ae.GroupType}};const ve=n(2),Ne=(e,t)=>void 0===t?null:t,Le={pingTimeout:5e3,reconnectInterval:500,reconnectMaxTimes:15,resendInterval:1e3,resendTimeout:2e4,url:void 0,enableUDP:!1,isAutoRequestFrame:!1,cacertNativeUrl:""},be=JSON.stringify(Le,Ne),De={version:ve.version,appName:void 0,cmd:"",seq:void 0,clientIp:void 0,serviceIp:void 0,business:void 0,authKey:void 0,authType:void 0,authIp:void 0,gameId:void 0,uid:void 0,playerId:void 0,body:void 0},we=JSON.stringify(De,Ne),Ge={gameId:void 0,openId:void 0,secretKey:void 0,createSignature:void 0},Ue=JSON.stringify(Ge,Ne);var Ye,Fe,ke,qe;!function(e){let t={};e.getInfo=()=>t,e.setInfo=e=>t=e}(Ye||(Ye={})),function(e){let t;!function(e){e[e.INITED=1]="INITED",e[e.INITING=2]="INITING",e[e.UNINIT=3]="UNINIT"}(t=e.StatusType||(e.StatusType={}));let n=t.UNINIT;e.isInited=()=>n===t.INITED,e.isIniting=()=>n===t.INITING,e.isUnInit=()=>n===t.UNINIT,e.setStatus=e=>n=e}(Fe||(Fe={})),function(e){let t;!function(e){e[e.LOGIN=1]="LOGIN",e[e.LOGINING=2]="LOGINING",e[e.LOGOUT=3]="LOGOUT",e[e.LOGOUTING=4]="LOGOUTING"}(t=e.StatusType||(e.StatusType={}));let n=t.LOGOUT,r=0,i="";e.isStatus=e=>n===e,e.setStatus=e=>{n=e,e===t.LOGIN&&(r=0)},e.setErrCode=(e,t)=>{r=e,i=t},e.getErrCode=()=>r,e.getErrMsg=()=>i}(ke||(ke={})),function(e){let t;!function(e){e[e.CHECKING=1]="CHECKING",e[e.CHECKED=2]="CHECKED",e[e.OFFLINE=3]="OFFLINE"}(t=e.StatusType||(e.StatusType={}));let n=t.CHECKING;e.isChecked=()=>n===t.CHECKED,e.isOffline=()=>n===t.OFFLINE,e.setStatus=e=>n=e;let r="";e.setRouteId=e=>r=e,e.getRouteId=()=>r}(qe||(qe={}));const He=o.ClientSendServerReqWrap2Cmd,xe=o.ServerSendClientBstWrap2Type,Be={initServerTime:0,offset:0,setServerTime(e){Be.initServerTime=e,Be.offset=e-Date.now()},getServerTime_UTC_8:()=>Date.now()+Be.offset},Ve=e=>cc&&cc.game&&cc.game[e]?cc.game[e]:cc&&cc.Game&&cc.Game[e]?cc.Game[e]:void 0;function Qe(){return!!("undefined"!=typeof cc&&"undefined"!=typeof WebSocket&&"undefined"!=typeof XMLHttpRequest&&cc.game&&"function"==typeof cc.game.on&&Ve("EVENT_HIDE")&&Ve("EVENT_SHOW")&&cc.sys&&cc.sys.isNative)}const Ke={};Ke.connectSocket=a((e=>new WebSocket(e,[],Le.cacertNativeUrl))),Ke.request=E,Ke.onHide=e=>cc.game.on(Ve("EVENT_HIDE"),e),Ke.offHide=e=>cc.game.off(Ve("EVENT_HIDE"),e),Ke.onShow=e=>cc.game.on(Ve("EVENT_SHOW"),e),Ke.offShow=e=>cc.game.off(Ve("EVENT_SHOW"),e),Ke.getStorageSync=f,Ke.setStorageSync=p,Ke.removeStorageSync=R,Ke.getUserInfo=m,Ke.getSystemInfoSync=g,Ke.getLocation=y,Ke.getNetworkType=S,Ke.createUDPSocket=null,Ke.channel=r.COCOS_NATIVE,"undefined"!=typeof window?Ke.root=window:Ke.root={};let We={};function je(){if("undefined"==typeof tt)return!1;if("undefined"==typeof GameGlobal)return!1;if(!tt.onHide)return!1;if(!tt.offHide)return!1;if(!tt.onShow)return!1;if(!tt.offShow)return!1;if(!tt.getStorageSync)return!1;if(!tt.setStorageSync)return!1;if(!tt.connectSocket)return!1;if(!tt.request)return!1;try{const e=tt.getSystemInfoSync();if(!e)return!1;if(!e.appName)return!1;if(!(tt.env.USER_DATA_PATH+"").toLowerCase().startsWith("ttfile"))return!1}catch(e){return!1}return!0}je()&&(We=tt);const Je={},Xe=I("connectSocket",We);Je.connectSocket=e=>{const t=Xe(e);let n=0,r=null;const i={onClose:e=>{r=t=>{e&&e(t),r=null},t.onClose((e=>{n=3,r&&r(e)}))},onOpen:e=>{t.onOpen((t=>{n=1,e&&e(t)}))},onError:e=>{t.onError((r=>{n=3,t.close(),e&&e(r)}))},onMessage:e=>t.onMessage(e),close:()=>{n=3,t.close()},send:({data:e,fail:n,success:r})=>t.send({data:e,fail:n,success:r}),get readyState(){return n},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3};return setTimeout((()=>{i&&i.readyState===i.CONNECTING&&(console.log("CONNECTING TIMEOUT: NO CALLBACK"),i.close(),r&&r({}))}),5e3),i},Je.request=I("request",We),Je.onHide=I("onHide",We),Je.offHide=I("offHide",We),Je.onShow=I("onShow",We),Je.offShow=I("offShow",We),Je.getStorageSync=I("getStorageSync",We),Je.setStorageSync=I("setStorageSync",We),Je.removeStorageSync=I("removeStorageSync",We),Je.getUserInfo=I("getUserInfo",We),Je.getSystemInfoSync=I("getSystemInfoSync",We),Je.getLocation=I("getLocation",We),Je.getNetworkType=I("getNetworkType",We),Je.createUDPSocket=I("createUDPSocket",We),Je.channel=r.TT,"undefined"!=typeof GameGlobal&&(Je.root=GameGlobal);let ze=s,$e=r.UNKNOWN,Ze=i.UNKNOWN;L()?(ze=b,Ze=function(){if(!L())return i.UNKNOWN;const e=swan.getSystemInfoSync(),t=e?e.system+"":"";return t.includes("Android")?i.ANDROID:t.includes("iOS")?i.IOS:i.UNKNOWN}()):P()?(ze=M,Ze=function(){if(!P())return i.UNKNOWN;const e=qq.getSystemInfoSync(),t=e?e.system+"":"";return t.includes("Android")?i.ANDROID:t.includes("iOS")?i.IOS:i.UNKNOWN}()):X()?(ze=te,Ze=function(){if(!X())return i.UNKNOWN;const e=qq.getSystemInfoSync(),t=e?e.system+"":"";return t.includes("Android")?i.ANDROID:t.includes("iOS")?i.IOS:i.UNKNOWN}()):G()?(ze=U,Ze=G()?i.ANDROID:i.UNKNOWN):F()?(ze=k,Ze=F()?i.ANDROID:i.UNKNOWN):Qe()?(ze=Ke,Ze=Qe()?cc.sys.os===cc.sys.OS_ANDROID?i.ANDROID:cc.sys.os===cc.sys.OS_IOS?i.IOS:i.UNKNOWN:i.UNKNOWN):je()?(ze=Je,Ze=function(){if(!je())return i.UNKNOWN;const e=tt.getSystemInfoSync(),t=e?e.system+"":"";return t.includes("Android")?i.ANDROID:t.includes("iOS")?i.IOS:i.UNKNOWN}()):O()?(ze=T,Ze=function(){if(!O())return i.UNKNOWN;const e=wx.getSystemInfoSync(),t=e?e.system+"":"";return t.includes("Android")?i.ANDROID:t.includes("iOS")?i.IOS:i.UNKNOWN}()):H()&&(ze=K,Ze=function(){if(!H())return i.UNKNOWN;const e=wx.getSystemInfoSync(),t=e?e.system+"":"";return t.includes("Android")?i.ANDROID:t.includes("iOS")?i.IOS:i.UNKNOWN}()),ze.globalData={},$e=ze.channel;class et{constructor(e=-1){this.id=e}}const nt=(e,t,n)=>{clearTimeout(e.id),e.id=setTimeout(t,n)},rt=(...e)=>{e.forEach((e=>e&&clearTimeout(e.id)))},it=n(2);class ot{}ot.enable=!1,ot.exclude=[],ot.callback=e=>console.log(...e),ot.log=(...e)=>{if(!ot.enable)return;if(Array.isArray(ot.exclude)&&ot.exclude.findIndex((t=>t===e[0]))>=0)return;const t=[`DEBUGGER_v${it.version}_${it.sdkType}_${$e} `+Date.now()].concat(e);"function"==typeof ot.callback&&ot.callback(t)},Object.defineProperty(ot,"log",{enumerable:!1,configurable:!1,writable:!1,value:ot.log});var st=ot;const at=n(3),_t=n(4),Et=n(7).default,lt=new Et(ht(),16),dt=new Et(ht(),32);let ut=1;function ht(){let e=Date.now().toString(36);for(let t=0;t<6;t++)e+=Math.ceil(1e6*(Math.random()+1)).toString(36);return e}const ct=dt.encode(Date.now()),ft=(e,t)=>(e<0&&(t=`服务器内部错误[${e}]`,e=Pe.EC_INNER_ERROR),{errCode:e,errMsg:t});function pt(e){return(...t)=>setTimeout((()=>e&&e(...t)),0)}function Rt(e){return e.next=e,e.prev=e,e}function mt(e,t){e.prev=t.prev,e.next=t,t.prev.next=e,t.prev=e}function gt(e){e.next.prev=e.prev,e.prev.next=e.next,e.next=null,e.prev=null}function yt(e){return e===e.next}function St(e=new Uint8Array(0)){return{data:e}}function It(e,t){let n=new Uint8Array(e.length+t.length);return n.set(e,0),n.set(t,e.length),n}function Ct(e,t,n){return e[t++]=n,t}function Ot(e,t){return[e[t++],t]}function Tt(e,t,n){return e[t++]=255&n,e[t++]=n>>8&255,e[t++]=n>>16&255,e[t++]=n>>24&255,t}function At(e,t){return[e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,t]}const Pt=Math.min,Mt=Math.max;function vt(e,t){return e-t}function Nt(e,t){return 0==t.length?0:e.output(t,e)}function Lt(e){let t=0,n=new Uint8Array(0);if(yt(e.rcv_queue))return n;if(function(e){let t=0;if(yt(e.rcv_queue))return-1;let n=e.rcv_queue.next;if(0==n.frg)return n.data.length;if(e.nrcv_que<n.frg+1)return-1;for(let n=e.rcv_queue.next;n!=e.rcv_queue;n=n.next){let e=n;if(t+=e.data.length,0==e.frg)break}return t}(e)<0)return n;e.nrcv_que>=e.rcv_wnd&&(t=1);for(let t=e.rcv_queue.next;t!==e.rcv_queue;){let r=t;t=t.next,n=It(n,r.data);let i=r.frg;if(gt(r),e.nrcv_que--,0==i)break}for(;!yt(e.rcv_buf);){let t=e.rcv_buf.next;if(!(t.sn==e.rcv_nxt&&e.nrcv_que<e.rcv_wnd))break;gt(t),e.nrcv_buf--,mt(t,e.rcv_queue),e.nrcv_que++,e.rcv_nxt++}return e.nrcv_que<e.rcv_wnd&&t&&(e.probe|=2),n}function bt(e,t){let n=0;if(0==e.rx_srtt)e.rx_srtt=t,e.rx_rttval=t/2;else{let n=t-e.rx_srtt;n<0&&(n=-n),e.rx_rttval=(3*e.rx_rttval+n)/4,e.rx_srtt=(7*e.rx_srtt+t)/8,e.rx_srtt<1&&(e.rx_srtt=1)}var r;n=e.rx_srtt+Mt(e.interval,4*e.rx_rttval),e.rx_rto=(r=e.rx_minrto,Pt(Mt(r,n),6e4))}function Dt(e){let t=e.snd_buf.next;t!=e.snd_buf?e.snd_una=t.sn:e.snd_una=e.snd_nxt}function wt(e,t){if(!(vt(t,e.snd_una)<0||vt(t,e.snd_nxt)>=0))for(let n,r=e.snd_buf.next;r!=e.snd_buf;r=n){if(n=r.next,t==r.sn){gt(r),e.nsnd_buf--;break}if(vt(t,r.sn)<0)break}}function Gt(e,t){for(let n,r=e.snd_buf.next;r!=e.snd_buf&&(n=r.next,vt(t,r.sn)>0);r=n)gt(r),e.nsnd_buf--}function Ut(e,t,n){let r=e.ackcount+1;if(r>e.ackblock){let t,n;for(n=8;n<r;n<<=1);if(t=new Uint32Array(2*n),null!=e.acklist)for(let n=0;n<e.ackcount;n++)t[2*n+0]=e.acklist[2*n+0],t[2*n+1]=e.acklist[2*n+1];e.acklist=t,e.ackblock=n}let i=2*e.ackcount;e.acklist[i]=t,e.acklist[i+1]=n,e.ackcount++}function Yt(e,t){return[e.acklist[2*t+0],e.acklist[2*t+1]]}function Ft(e,t){let n,r,i=t.sn,o=0;if(!(vt(i,e.rcv_nxt+e.rcv_wnd)>=0||vt(i,e.rcv_nxt)<0)){for(n=e.rcv_buf.prev;n!=e.rcv_buf;n=r){if(r=n.prev,n.sn==i){o=1;break}if(vt(i,n.sn)>0)break}var s,a;for(0==o&&(Rt(t),a=n,(s=t).prev=a,s.next=a.next,a.next.prev=s,a.next=s,e.nrcv_buf++);!yt(e.rcv_buf);){let t=e.rcv_buf.next;if(!(t.sn==e.rcv_nxt&&e.nrcv_que<e.rcv_wnd))break;gt(t),e.nrcv_buf--,mt(t,e.rcv_queue),e.nrcv_que++,e.rcv_nxt++}}}function kt(e,t,n){var r,i,o;return t=Ct(e,t=Tt(e,t,n.conv),n.cmd),r=e,i=t=Ct(e,t,n.frg),o=n.wnd,r[i++]=255&o,r[i++]=o>>8&255,t=Tt(e,t=i,n.ts),t=Tt(e,t,n.sn),t=Tt(e,t,n.una),Tt(e,t,n.data.length)}function qt(e){let t=e.current;const n=e.buffer;let r=0,i=0,o=0,s=St();if(0==e.updated)return;s.conv=e.conv,s.cmd=82,s.frg=0,s.wnd=function(e){return e.nrcv_que<e.rcv_wnd?e.rcv_wnd-e.nrcv_que:0}(e),s.una=e.rcv_nxt,s.sn=0,s.ts=0;let a=e.ackcount;for(let t=0;t<a;t++)r+24>e.mtu&&(Nt(e,n.slice(0,r)),r=0),[s.sn,s.ts]=Yt(e,t),r=kt(n,r,s);e.ackcount=0,0==e.rmt_wnd?0==e.probe_wait?(e.probe_wait=7e3,e.ts_probe=e.current+e.probe_wait):vt(e.current,e.ts_probe)>=0&&(e.probe_wait<7e3&&(e.probe_wait=7e3),e.probe_wait+=e.probe_wait/2,e.probe_wait>12e4&&(e.probe_wait=12e4),e.ts_probe=e.current+e.probe_wait,e.probe|=1):(e.ts_probe=0,e.probe_wait=0),1&e.probe&&(s.cmd=83,r+24>e.mtu&&(Nt(e,n.slice(0,r)),r=0),r=kt(n,r,s)),2&e.probe&&(s.cmd=84,r+24>e.mtu&&(Nt(e,n.slice(0,r)),r=0),r=kt(n,r,s)),e.probe=0;let _=Pt(e.snd_wnd,e.rmt_wnd);for(0==e.nocwnd&&(_=Pt(e.cwnd,_));vt(e.snd_nxt,e.snd_una+_)<0&&!yt(e.snd_queue);){let n=e.snd_queue.next;gt(n),mt(n,e.snd_buf),e.nsnd_que--,e.nsnd_buf++,n.conv=e.conv,n.cmd=81,n.wnd=s.wnd,n.ts=t,n.sn=e.snd_nxt++,n.una=e.rcv_nxt,n.resendts=t,n.rto=e.rx_rto,n.fastack=0,n.xmit=0}let E=e.fastresend>0?e.fastresend:4294967295,l=0==e.nodelay?e.rx_rto>>3:0;for(let a=e.snd_buf.next;a!=e.snd_buf;a=a.next){let _=0;0==a.xmit?(_=1,a.xmit++,a.rto=e.rx_rto,a.resendts=t+a.rto+l):vt(t,a.resendts)>=0?(_=1,a.xmit++,e.xmit++,0==e.nodelay?a.rto+=e.rx_rto:a.rto+=e.rx_rto/2,a.resendts=t+a.rto,o=1):a.fastack>=E&&(a.xmit<=e.fastlimit||e.fastlimit<=0)&&(_=1,a.xmit++,a.fastack=0,a.resendts=t+a.rto,i++),_&&(a.ts=t,a.wnd=s.wnd,a.una=e.rcv_nxt,r+(24+a.data.length)>e.mtu&&(Nt(e,n.slice(0,r)),r=0),r=kt(n,r,a),a.data.length>0&&(n.set(a.data.slice(0,a.data.length),r),r+=a.data.length),a.xmit>=e.dead_link&&(e.state=-1))}if(r>0&&(Nt(e,n.slice(0,r)),r=0),i){let t=e.snd_nxt-e.snd_una;e.ssthresh=t/2,e.ssthresh<2&&(e.ssthresh=2),e.cwnd=e.ssthresh+E,e.incr=e.cwnd*e.mss}o&&(e.ssthresh=_/2,e.ssthresh<2&&(e.ssthresh=2),e.cwnd=1,e.incr=e.mss),e.cwnd<1&&(e.cwnd=1,e.incr=e.mss)}class Ht{constructor(e,t){this._ts=Date.now(),this.updateAsync=(()=>{let e=!1;return()=>{e||(e=!0,Ht.asyncer((()=>{this.update(),e=!1})))}})(),this.context=t,this._kcp=function(e){return{conv:e,snd_una:0,snd_nxt:0,rcv_nxt:0,ts_recent:0,ts_lastack:0,ts_probe:0,probe_wait:0,snd_wnd:32,rcv_wnd:128,rmt_wnd:128,cwnd:0,incr:0,probe:0,mtu:1400,mss:1376,stream:0,buffer:new Uint8Array(4272),snd_queue:Rt(St()),rcv_queue:Rt(St()),snd_buf:Rt(St()),rcv_buf:Rt(St()),nrcv_buf:0,nsnd_buf:0,nrcv_que:0,nsnd_que:0,state:0,acklist:null,ackblock:0,ackcount:0,rx_srtt:0,rx_rttval:0,rx_rto:200,rx_minrto:100,current:0,interval:100,ts_flush:100,nodelay:0,updated:0,logmask:0,ssthresh:2,fastresend:0,fastlimit:5,nocwnd:0,xmit:0,dead_link:20,output:null}}(e)}input(e){let t=function(e,t){let n=e.snd_una,r=0,i=0,o=0,s=0,a=t.length;for(;;){let n,l,d,u,h,c,f,p;if(a<24)break;if([h,s]=At(t,s),h!=e.conv)return-1;if([f,s]=Ot(t,s),[p,s]=Ot(t,s),[c,s]=(E=s,[(_=t)[E++]|_[E++]<<8,E]),[n,s]=At(t,s),[l,s]=At(t,s),[u,s]=At(t,s),[d,s]=At(t,s),(a-=24)<d||d<0)return-2;if(81!=f&&82!=f&&83!=f&&84!=f)return-3;if(e.rmt_wnd=c,Gt(e,u),Dt(e),82==f)vt(e.current,n)>=0&&bt(e,vt(e.current,n)),wt(e,l),Dt(e),0==o?(o=1,r=l,i=n):vt(l,r)>0&&vt(n,i)>0&&(r=l,i=n);else if(81==f){if(vt(l,e.rcv_nxt+e.rcv_wnd)<0&&(Ut(e,l,n),vt(l,e.rcv_nxt)>=0)){let r=St();r.conv=h,r.cmd=f,r.frg=p,r.wnd=c,r.ts=n,r.sn=l,r.una=u,d>0&&(r.data=t.slice(s,s+d)),Ft(e,r)}}else if(83==f)e.probe|=2;else if(84!=f)return-3;s+=d,a-=d}var _,E;if(0!=o&&function(e,t,n){if(!(vt(t,e.snd_una)<0||vt(t,e.snd_nxt)>=0))for(let r,i=e.snd_buf.next;i!=e.snd_buf&&(r=i.next,!(vt(t,i.sn)<0));i=r)t!=i.sn&&vt(n,i.ts)>=0&&i.fastack++}(e,r,i),vt(e.snd_una,n)>0&&e.cwnd<e.rmt_wnd){let t=e.mss;e.cwnd<e.ssthresh?(e.cwnd++,e.incr+=t):(e.incr<t&&(e.incr=t),e.incr+=t*t/e.incr+t/16,(e.cwnd+1)*t<=e.incr&&e.cwnd++),e.cwnd>e.rmt_wnd&&(e.cwnd=e.rmt_wnd,e.incr=e.rmt_wnd*t)}return 0}(this._kcp,e);for(;;){let e=Lt(this._kcp);if(0===e.length)break;this._onRecv&&this._onRecv(e,this.context)}return t}onOutput(e){this._kcp.output=(t,n)=>(e(t,this.context),t.length)}send(e){return function(e,t){let n=0,r=t.length;if(0!=e.stream){if(!yt(e.snd_queue)){let o=e.snd_queue.prev;if(o.data.length<e.mss){let s=e.mss-o.data.length,a=r<s?r:s,_=It(o.data,t.slice(n,n+a));n+=a;let E=St(_);mt(E,e.snd_queue),E.frg=0,r-=a,gt(i=o),Rt(i)}}if(r<=0)return 0}var i;let o;if((o=r<=e.mss?1:(r+e.mss-1)/e.mss)>=128)return-2;0==o&&(o=1);for(let i=0;i<o;i++){let s=r>e.mss?e.mss:r,a=St();r>0&&(a.data=t.slice(n,n+s),n+=s),a.frg=0==e.stream?o-i-1:0,Rt(a),mt(a,e.snd_queue),e.nsnd_que++,r-=s}return 0}(this._kcp,e)}onRecv(e){this._onRecv=e}update(e=!1){let t=Date.now(),n=t-this._ts;return n>=4294967296&&(this._ts=t,n=0),e?(i=n,(r=this._kcp).current=i,0==r.updated&&(r.updated=1,r.ts_flush=r.current),r.ts_flush=r.current,r.ts_flush+=r.interval,vt(r.current,r.ts_flush)>=0&&(r.ts_flush=r.current+r.interval),void qt(r)):function(e,t){e.current=t,0==e.updated&&(e.updated=1,e.ts_flush=e.current);let n=vt(e.current,e.ts_flush);(n>=1e4||n<-1e4)&&(e.ts_flush=e.current,n=0),n>=0&&(e.ts_flush+=e.interval,vt(e.current,e.ts_flush)>=0&&(e.ts_flush=e.current+e.interval),qt(e))}(this._kcp,n);var r,i}nodelay(e,t,n,r){return function(e,t,n,r,i){return t>=0&&(e.nodelay=t,e.rx_minrto=t?30:100),n>=0&&(n>5e3?n=5e3:n<1&&(n=1),e.interval=n),r>=0&&(e.fastresend=r),i>=0&&(e.nocwnd=i),0}(this._kcp,e,t,n,r)}setWinSize(e,t){return r=e,i=t,(n=this._kcp)&&(r>0&&(n.snd_wnd=r),i>0&&(n.rcv_wnd=Mt(i,128))),0;var n,r,i}}Ht.asyncer=e=>new Promise((e=>e())).then(e);const xt={get connectSocket(){let e=ze.connectSocket;return Le.enableUDP&&ze.createUDPSocket&&(e=e=>{let t,n=null,r=null,i=null,o=null,s=0;const a=e.url.toLowerCase().replace("wss://","").replace("ws://",""),_=a.split(":")[0],E=parseInt(a.split(":")[1]||"443",10),l=new Ht(123,{address:_,port:E});l.nodelay(1,10,2,1),l.setWinSize(1024,1024);const d=ze.createUDPSocket(),u={get readyState(){return s},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3,onClose:e=>r=e,onOpen:e=>i=e,onError:e=>o=e,onMessage:e=>n=e,close:e=>{d.close(),c(),e&&e.success&&e.success()},send:({data:e,fail:t,success:n})=>{l&&(0!==l.send(new Uint8Array(e))?pt((()=>t&&t()))():pt((()=>n&&n()))(),l.updateAsync())}};d.onClose((e=>{s=3,c(),pt((()=>r&&r(e)))()})),d.onError((e=>{s=3,d.close(),pt((()=>o&&o(e)))()})),d.onListening((e=>{st.log("UDP_onListening"),s=1,h(),pt((()=>i&&i(e)))()})),d.onMessage((e=>{const t=e.message||("number"==typeof e.byteLength?e:void 0);l.input(new Uint8Array(t)),l.updateAsync()})),l.onOutput(((e,t)=>{d.send({address:_,port:E,message:e.buffer||e})})),l.onRecv(((e,t)=>{e.length>0&&n&&n({data:e.buffer})}));const h=()=>{t=!0,requestAnimationFrame((()=>{t&&(l.update(),h())}))},c=()=>{t=!1},f=d.bind();return st.log("UDP_bind",f),u}),e}},Bt={connectSocket:ze.connectSocket},Vt={connect:"connect",connectClose:"connectClose",connectClosing:"connectClosing",connectError:"connectError",connecting:"connecting",message:"message",autoAuth:"autoAuth"},Qt=Object.keys(Vt);var Kt=class{constructor(e,t,n){this.isMsgBind=!1,this.forceClose=!1,this.init(n),this.id=e,this.enableUdp=t}init(e){this.url=e,this.eventCallbacks=[],this.eventOnceCallbacks=new Map,this.socketTask=null;const t=new et;let n=0;const r=()=>{st.log("SOCKET_OPEN",this.id,this.isConnect()),n=0,l(),rt(t)},i=e=>{st.log("SOCKET_CLOSE",e,this.id),E(),nt(t,(()=>s("close")),Le.reconnectInterval),this.forceClose&&(n=0,this.forceClose=!1,rt(t))},o=e=>{st.log("SOCKET_ERROR",e,this.id,this.socketTask&&this.socketTask.readyState),_(Vt.connectError,{msg:"socket connectError",data:e}),nt(t,(()=>s("error")),Le.reconnectInterval)},s=e=>{if(!this.url)throw new Error("socket.url = "+this.url);if(!this.isConnect()&&!this.isClose())return nt(t,(()=>s("open")),Le.reconnectInterval);if(!this.isClose())return;if(st.log("SOCKET_TRY_OPEN",this.id,e,this.socketTask&&this.socketTask.readyState,n,Le.reconnectMaxTimes),++n>Le.reconnectMaxTimes)return n=0,void st.log("SOCKET_RECONNECT_TIMEOUT");const a="wss://"+this.url.replace("wss://","").replace("ws://","");rt(t),this.forceClose=!1,this.enableUdp?this.socketTask=xt.connectSocket({url:a,fail:()=>console.error("connectSocket fail")}):this.socketTask=Bt.connectSocket({url:a,fail:()=>console.error("connectSocket fail")}),this.socketTask.onOpen(r.bind(this)),this.socketTask.onClose(i.bind(this)),this.socketTask.onError(o.bind(this)),this.socketTask.onMessage((e=>{_(Vt.message,{msg:"socket message",data:e.data})}).bind(this))},a=e=>{st.log("SOCKET_CONNECT",this.id,e),!this.isConnect()&&n>0&&n<Le.reconnectMaxTimes||(n=0,s(e+" connect"))},_=(e,t={})=>{t.tag=e,this.eventCallbacks.forEach((([n,r])=>{n!==e&&"*"!==n||r(t)}));const n=this.eventOnceCallbacks.get(e);n&&(n(t),this.eventOnceCallbacks.delete(e))},E=()=>_(Vt.connectClose,{msg:"socket is closed"}),l=()=>_(Vt.connect,{msg:"socket is connected"});this.connect=a,this.connectNewSocket=e=>{st.log("SOCKET_CONNECT_NEW",this.id,this.isClose()),this.url=e,n=0;const t=()=>{a("connectNewSocket")};this.close(t,t)},this.send=(e,{fail:t,success:n})=>{if(!this.isConnect())return t({data:e}),void a("send");this.socketTask.send({data:e.buffer,fail:n=>{st.log("SOCKET_SEND_FAIL",this.id,n),t({data:e})},success:()=>{n({data:e})}})},this.close=(e,t)=>{if(this.forceClose=!0,!this.socketTask)return e&&e(),E();this.socketTask.close({success:t=>{st.log("SOCKET_CLOSE_SUCCESS",this.id,t),this.socketTask=null,e&&e()},fail:e=>{st.log("SOCKET_CLOSE_ERROR",this.id,e),this.socketTask=null,t&&t()}})},this.destory=()=>{rt(t),!this.isClose()&&this.close(),this.offAll()},this.isConnect=()=>this.socketTask&&this.socketTask.readyState===this.socketTask.OPEN,this.isConnecting=()=>this.socketTask&&this.socketTask.readyState===this.socketTask.CONNECTING,this.isClose=()=>!this.socketTask||this.socketTask&&this.socketTask.readyState===this.socketTask.CLOSED,this.isClosing=()=>this.socketTask&&this.socketTask.readyState===this.socketTask.CLOSING,this.on=(e,t)=>{(Qt.includes(e)||"*"===e)&&"function"==typeof t&&(this.eventCallbacks.push([e,t]),e===Vt.message&&(this.isMsgBind=!0))},this.once=(e,t)=>{Qt.includes(e)&&"function"==typeof t&&this.eventOnceCallbacks.set(e,t)},this.emit=_,this.offAll=()=>{this.eventCallbacks=[],this.eventOnceCallbacks.clear(),this.isMsgBind=!1}}};const Wt=[He.E_CMD_LOGIN_REQ,He.E_CMD_LOGOUT_REQ],jt=[He.E_CMD_RELAY_SEND_FRAME_REQ,He.E_CMD_RELAY_REQUEST_FRAME_REQ,He.E_CMD_HEART_BEAT_REQ,He.E_CMD_RELAY_CLIENT_SENDTO_GAMESVR_REQ];var Jt;!function(e){e[e.CLIENT_PRE=parseInt("0x2",16)]="CLIENT_PRE",e[e.CLIENT_END=parseInt("0x3",16)]="CLIENT_END",e[e.SERVER_PRE=parseInt("0x28",16)]="SERVER_PRE",e[e.SERVER_END=parseInt("0x29",16)]="SERVER_END"}(Jt||(Jt={}));class Xt{constructor(){this.queue=new Set,this.bdHandlers=new Set,this.socket=null}static startQueueLoop(){nt(Xt.timer,(()=>{const e=Date.now();return Array.from(Xt.sendQueue).forEach((([t,n])=>{if(e-n.time>Le.resendTimeout){let e,t="";ke.isStatus(ke.StatusType.LOGIN)?e=Pe.EC_SDK_RES_TIMEOUT:ke.getErrCode()===Pe.EC_OK?(e=Pe.EC_SDK_NO_LOGIN,t="登录失败"):(e=ke.getErrCode(),t="登录失败，"+ke.getErrMsg()),n.sendFail(e,t)}else!n.isSocketSend&&e-n.time>=Le.resendInterval&&n.resend()})),Xt.startQueueLoop()}),Le.resendInterval)}static stopQueueLoop(){rt(Xt.timer),Array.from(Xt.sendQueue).forEach((([e,t])=>{t.remove()})),Xt.sendQueue.clear()}bindSocket(e,t,n){return!(this.socket||!e||(this.socket=e,!this.socket.isMsgBind&&this.socket.on(Vt.message,(e=>{if(!e.data)return;const{body:r,pre:i,end:o}=this.unpackBody(new Uint8Array(e.data));i===Jt.CLIENT_PRE&&o===Jt.CLIENT_END&&t(r),i===Jt.SERVER_PRE&&o===Jt.SERVER_END&&n(r)}).bind(this)),0))}unbindSocket(){this.socket&&this.socket.offAll(),this.socket=null,this.clearQueue(),this.clearBdHandlers()}clearQueue(){Array.from(this.queue).forEach((e=>{this.deleteSeqQueue(e)}))}clearBdHandlers(){Array.from(this.bdHandlers).forEach((e=>{Xt.broadcastHandlers.delete(e),this.bdHandlers.delete(e)}))}deleteSeqQueue(e){Xt.sendQueue.delete(e),this.queue.delete(e)}addSeqQueue(e,t){Xt.sendQueue.set(e,t),this.queue.add(e)}setBroadcastHandler(e,t){Xt.broadcastHandlers.set(e,t),this.bdHandlers.add(e)}handleErrCode(e){return!1}send(e,t,n){const r=this.getReadyCode(n);return Xt.sendQueue.size>10&&st.log("SENDQUEUE_size",Xt.sendQueue.size),0!==r?this.handleSendFail(t,r):this.socket.send(e,{fail:e=>this.handleSendFail(t,e),success:()=>this.handleSendSuccess(t)}),t}buildData(e,t,n){const r=5+t.length+1,i=new Uint8Array(function(e,t){let n=[];for(;e>255;)n.push(255&e),e>>=8;for(0!==e&&n.push(e),n=n.slice(0,4);n.length<4;)n.push(0);return n.reverse()}(r)),o=new Uint8Array(r);return o.set(e),o.set(i,e.length),o.set(t,e.length+i.length),o.set(n,e.length+i.length+t.length),o}unpackBody(e){const t=e.slice(1,5),n=function(e){let t=0;const n=e.length;for(let r=n-1;r>=0;r--)t+=e[r]*Math.pow(2,8*(n-1-r));return t}(Array.from(t))-6;return{body:e.slice(5,5+n),pre:e[0],end:e[e.length-1]}}handleSendFail(e,t){const n=Xt.sendQueue.get(e);if(n)return Date.now()-n.time>Le.resendTimeout?n.sendFail(ke.getErrCode()||t):t===Pe.EC_SDK_UNINIT?n.sendFail(t):t===Pe.EC_SDK_NO_LOGIN||t===Pe.EC_SDK_NO_CHECK_LOGIN?this.socket.emit(Vt.autoAuth,{}):void 0}handleSendSuccess(e){Xt.sendQueue.has(e)&&Xt.sendQueue.get(e).sendSuccess()}getReadyCode(e){return Fe.isInited()||e===He.E_CMD_LOGIN_REQ?this.socket&&this.socket.url?ke.isStatus(ke.StatusType.LOGIN)||Wt.includes(e)?this.socket.id===o.ConnectionType.RELAY&&!qe.isChecked()&&jt.includes(e)?Pe.EC_SDK_NO_CHECK_LOGIN:0:Pe.EC_SDK_NO_LOGIN:Pe.EC_SDK_SEND_FAIL:(console.error("MGOBE.Listener 未初始化"),Ye.setInfo({id:""}),ke.setStatus(ke.StatusType.LOGOUT),Pe.EC_SDK_UNINIT)}}Xt.sendQueue=new Map,Xt.broadcastHandlers=new Map,Xt.timer=new et;var zt=Xt;let $t=n(8);class Zt{constructor(e){this.root=$t.newBuilder({}).import(e).build()}lookupType(e){let t=this.root;return e.split(".").forEach((e=>t=t[e])),t}static numberify(e){if(null==e)return e;if(e.constructor===$t.Long)return Number(e);let t=Object.prototype.toString.apply(e);return e.constructor===$t.ByteBuffer?e.buffer.slice(e.offset,e.offset+e.limit):("[object Object]"!==t&&"[object Array]"!==t||Object.keys(e).forEach((function(t){e[t]=Zt.numberify(e[t])})),e)}bufferify(e,t){let n=this.lookupType(e);return function(e){let r={};t.forEach((t=>e.hasOwnProperty(t)&&(r[t]=e[t])));let i=n.encode(r);return new Uint8Array(i.buffer.slice(i.offset,i.offset+i.limit))}}objectify(e){let t=this.lookupType(e);return function(e){let n=t.decode(e);return Zt.numberify(n)}}}const en={ClientSendServerReqWrap1:["version","appName","cmd","seq","clientIp","serviceIp","business","authKey","authType","authIp","gameId","uid","playerId","body"],ServerSendClientBstWrap1:["version","appName","cmd","seq","clientIp","serviceIp","business","authKey","authType","authIp","gameId","uid","playerId","body"],ClientSendServerRspWrap1:["seq","errCode","errMsg","body"],ClientSendServerReqWrap2:["cmd","body"],ClientSendServerRspWrap2:["body"],EventInfo:["eventType","seq","body"],EventNetworkState:["gameId","playerId","networkState"],HeartBeatReq:["conType","routeId"],HeartBeatRsp:[],ServerSendClientBstWrap2:["type","msg"],NOUSEServerSendClientBstRspWrap2:[],CheckLoginReq:["token","routeId"],CheckLoginRsp:[],PushBodyType:["pushMsg"],LoginReq:["gameId","openId","platform","channel","nonce","timestamp","sign","deviceId","mac","imei"],LoginRsp:["token","playerId","expireTime","sdkConfig"],SdkConfig:["pingInterval","reportInterval","serverTime","enableUdp","disableReport","disableReqReport","disableFrameReport","minReportSize"],LogoutReq:[],LogoutRsp:[],StartFrameSyncReq:[],StartFrameSyncRsp:[],StopFrameSyncReq:[],StopFrameSyncRsp:[],FrameItem:["playerId","data","timestamp"],SendFrameReq:["roomId","item"],SendFrameRsp:[],FrameExtInfo:["seed"],Frame:["id","items","ext"],RequestFrameReq:["roomId","beginFrameId","endFrameId","supportPartial"],RequestFrameRsp:["frames","isPartial"],PlayerInfo:["id","name","teamId","customPlayerStatus","customProfile","commonNetworkState","relayNetworkState","isRobot","matchAttributes"],TeamInfo:["id","name","minPlayers","maxPlayers"],RoomInfo:["id","name","type","createType","maxPlayers","owner","isPrivate","customProperties","playerList","teamList","frameSyncState","frameRate","routeId","createTime","startGameTime","isForbidJoin"],CreateRoomReq:["roomName","roomType","createType","maxPlayers","isPrivate","customProperties","playerInfo","region","owner","playerList","teamList"],CreateRoomRsp:["roomInfo"],JoinRoomReq:["roomId","teamId","joinType","playerInfo"],JoinRoomRsp:["roomInfo"],LeaveRoomReq:[],LeaveRoomRsp:["roomInfo"],DismissRoomReq:["roomId"],DismissRoomRsp:[],ChangeRoomReq:["roomName","owner","isPrivate","customProperties","isForbidJoin","changeRoomOptionList"],ChangeRoomRsp:["roomInfo"],SvrChangeRoomReq:["roomName","owner","isPrivate","customProperties","isForbidJoin","roomId","changeRoomOptionList"],SvrChangeRoomRsp:["roomInfo"],RemovePlayerReq:["removePlayerId"],RemovePlayerRsp:["roomInfo"],SvrRemovePlayerReq:["roomId","removePlayerId"],SvrRemovePlayerRsp:["roomInfo"],GetRoomByRoomIdReq:["roomId"],GetRoomByRoomIdRsp:["roomInfo"],SendToClientReq:["roomId","recvPlayerList","msg"],SendToClientRsp:[],ChangeCustomPlayerStatusReq:["customPlayerStatus"],ChangeCustomPlayerStatusRsp:["roomInfo"],SvrChangeCustomPlayerStatusReq:["customPlayerStatus"],SvrChangeCustomPlayerStatusRsp:["roomInfo"],ChangePlayerNetworkStateReq:["networkState"],ChangePlayerNetworkStateRsp:["roomInfo"],GetRoomListReq:["gameId","pageNo","pageSize","roomType","isDesc"],GetRoomListRsp:["gameId","roomList","total"],ChangeRoomPlayerProfileReq:["customProfile"],ChangeRoomPlayerProfileRsp:["roomInfo"],ChangeGroupPlayerProfileReq:["groupId","customProfile"],ChangeGroupPlayerProfileRsp:["groupInfo"],MatchRoomSimpleReq:["roomType","maxPlayers","playerInfo"],MatchRoomSimpleRsp:["roomInfo"],MatchRoomComplexReq:[],MatchRoomComplexRsp:[],MatchPlayersSimpleReq:[],MatchPlayersSimpleRsp:[],MatchAttribute:["name","value"],MatchPlayerInfo:["id","name","customPlayerStatus","customProfile","matchAttributes","matchStatus","teamId","region","teamLeader","sdkVersion","groupId","teamType","requestId"],MatchGroupPlayerInfo:["id","name","customPlayerStatus","customProfile","matchAttributes","matchStatus","teamId","region","teamLeader","sdkVersion","groupId","teamType","requestId"],MatchGroupInfo:["id","leader","playerIdList","playerInfoList","matchAttributes","region","sdkVersion","teamId","teamType","requestId","startMatchTime","isRobot"],MatchTeamInfo:["teamId","teamName","teamLeader","members","matchAttributes","memberSdkVersions","groupIds","groupSdkVersions","teamType"],ProgressPlayerInfo:["playerId","teamName","matchAttributes","startMatchTime"],MatchmakerTeam:["name","players"],MatchmakerData:["matchId","teams"],MatchPlacementInfo:["gameId","matchCode","matchId","type","createRoomReq","matchmakerDataJson","status","resultBody"],MgobePlacementJob:["createRoomReq"],MgobePlacementResult:["roomInfo"],GsePlacementJob:["createRoomReq","matchmakerData"],GsePlacementResult:["gseGameSession"],ThirdpartyPlacementJob:[],ThirdpartyPlacementResult:[],GsePlayerLatency:["latencyInMilliseconds","playerId","regionIdentifier"],GseGameProperty:["key","value"],GsePlacedPlayerSession:["playerId","playerSessionId"],GseGameSession:["placementId","gameServerSessionQueueName","playerLatencies","status","dnsName","gameServerSessionId","gameServerSessionName","gameServerSessionRegion","gameProperties","maximumPlayerSessionCount","gameServerSessionData","ipAddress","port","matchmakerData","placedPlayerSessions","startTime","endTime"],PlaceMatchReq:["seq","gameId","matchId","type","jobBody","matchCode"],PlaceMatchRsp:["matchPlacementResult"],MatchPlacementResult:["seq","gameId","matchId","type","status","resultBody","errCode","matchCode"],UpdateMatchPlacementResultReq:["matchPlacementResult"],UpdateMatchPlacementResultRsp:[],CmqPlacementResult:["placementId","placementType","resultBody"],MatchPlayersReq:["matchCode","playerInfo"],MatchPlayersRsp:["matchCode"],MatchGroupReq:["matchCode","playerInfoList"],MatchGroupRsp:["matchCode"],DescribeMatchReq:["requestIdList"],MatchProgress:["requestId","playerIdList","playerInfoList","status","eventType","playerInfoSuccessList","teamInfoList","completedTime","startMatchTime","gameSessionConnectionInfo"],DescribeMatchRsp:["matchProgressList"],CancelPlayerMatchReq:["matchType"],CancelPlayerMatchRsp:[],ApiMatchGroupReq:["matchCode","playerInfoList","requestId"],ApiMatchGroupRsp:["requestId"],ApiDescribeMatchReq:["requestIdList"],ApiDescribeMatchRsp:["matchProgressList","gameId","matchCode","startMatchTime"],GameSessionConnectionInfo:["dnsName","ipAddress","matchedPlayerSessions","port"],MatchedPlayerSession:["playerId","playerSessionId"],StartMatchPlacement:["region","placementId","queueName","maximumPlayerSessionCount","desiredPlayerSessions","gameProperties","matchMakerData"],DesiredPlayerSession:["playerId","playerData"],GameProperty:["key","value"],ApiCancelPlayerMatchReq:["matchType","requestIdList"],ApiCancelPlayerMatchRsp:["requestIdList"],CreateRoomBst:["roomInfo"],DestroyRoomBst:["roomInfo"],JoinRoomBst:["roomInfo","joinPlayerId"],LeaveRoomBst:["roomInfo","leavePlayerId"],RemovePlayerBst:["roomInfo","removePlayerId"],DismissRoomBst:["roomInfo"],ChangeRoomBst:["roomInfo"],RecvFromClientBst:["roomId","sendPlayerId","msg"],ChangeCustomPlayerStatusBst:["changePlayerId","customPlayerStatus","roomInfo"],ChangeRoomPlayerProfileBst:["changePlayerId","customProfile","roomInfo"],ChangeGroupPlayerProfileBst:["changePlayerId","customProfile","groupInfo"],ChangePlayerNetworkStateBst:["changePlayerId","networkState","roomInfo","groupIdList"],MatchTimeoutBst:["matchType","errCode"],CancelMatchBst:["matchCode","playerId"],MatchPlayersBst:["matchType","roomInfo"],StartFrameSyncBst:["roomInfo"],StopFrameSyncBst:["roomInfo"],RecvFrameBst:["frame"],GameSvrCommunication:["type","body","needRsp"],NotifyRelayConnectionReq:["roomId","ip","port"],NotifyRoomEventReq:["cmd","msg"],SendToGameSvrReq:["roomId","playerId","data"],SendToGameSvrRsp:[],RecvFromGameSvrBst:["roomId","recvPlayerIdList","data"],ClientRecvFromGameSvrRsp:[],GroupInfo:["id","name","type","maxPlayers","owner","customProperties","createTime","isForbidJoin","isPersistent","groupPlayerList"],GroupPlayerInfo:["id","name","customGroupPlayerStatus","customGroupPlayerProfile","commonGroupNetworkState"],CreateGroupReq:["groupName","groupType","maxPlayers","customProperties","playerInfo","isForbidJoin","isPersistent"],CreateGroupRsp:["groupInfo"],JoinGroupReq:["groupId","playerInfo"],JoinGroupRsp:["groupInfo"],LeaveGroupReq:["groupId"],LeaveGroupRsp:["groupInfo"],DismissGroupReq:["groupId"],DismissGroupRsp:[],ChangeGroupReq:["groupId","groupName","owner","customProperties","isForbidJoin","changeGroupOptionList"],ChangeGroupRsp:["groupInfo"],RemoveGroupPlayerReq:["groupId","removePlayerId"],RemoveGroupPlayerRsp:["groupInfo"],GetGroupByGroupIdReq:["groupId"],GetGroupByGroupIdRsp:["groupInfo"],GetMyGroupsReq:[],GetMyGroupsRsp:["groupInfoList"],ChangeCustomGroupPlayerStatusReq:["groupId","customGroupPlayerStatus"],ChangeCustomGroupPlayerStatusRsp:["groupInfo"],SendToGroupClientReq:["groupId","recvPlayerList","msg","recvType"],SendToGroupClientRsp:[],GroupPlayers:["groupId","playerIdList"],ChangeGroupPlayerNetworkReq:["networkState","playerId","gameId","seq"],ChangeGroupPlayerNetworkRsp:["groupPlayers"],JoinGroupBst:["groupInfo","joinPlayerId"],LeaveGroupBst:["groupInfo","leavePlayerId"],DismissGroupBst:["groupInfo"],ChangeGroupBst:["groupInfo"],RemoveGroupPlayerBst:["groupInfo","removePlayerId"],ChangeGroupPlayerNetworkStateBst:["groupInfo","changePlayerId","networkState"],ChangeCustomGroupPlayerStatusBst:["groupInfo","changePlayerId","customGroupPlayerStatus"],RecvFromGroupClientBst:["groupId","sendPlayerId","msg"]},tn=n(13),nn=(()=>{let e;return()=>e||(e=new Zt(tn))})();Object.keys(Ie).map((e=>{return Ie[e]=(t=nn,n=[re,e].join("."),r=en[e],{bufferify:t().bufferify(n,r),objectify:t().objectify(n)});var t,n,r}));const rn=ft,on=He,sn=xe,an=Ie,_n=new Map,En=new Map,ln=new Map,dn=an.ClientSendServerReqWrap1,un=an.ClientSendServerReqWrap2,hn=an.ClientSendServerRspWrap1,cn=an.ClientSendServerRspWrap2,fn=an.ServerSendClientBstWrap1,pn=an.ServerSendClientBstWrap2;var Rn;_n.set(on.E_CMD_LOGIN_REQ,an.LoginReq),En.set(on.E_CMD_LOGIN_REQ,an.LoginRsp),_n.set(on.E_CMD_LOGOUT_REQ,an.LogoutReq),En.set(on.E_CMD_LOGOUT_REQ,an.LogoutRsp),_n.set(on.E_CMD_CHANGE_PLAYER_STATE_REQ,an.ChangeCustomPlayerStatusReq),En.set(on.E_CMD_CHANGE_PLAYER_STATE_REQ,an.ChangeCustomPlayerStatusRsp),_n.set(on.E_CMD_CHANGE_ROOM_PLAYER_PROFILE,an.ChangeRoomPlayerProfileReq),En.set(on.E_CMD_CHANGE_ROOM_PLAYER_PROFILE,an.ChangeRoomPlayerProfileRsp),_n.set(on.E_CMD_RELAY_CLIENT_SENDTO_GAMESVR_REQ,an.SendToGameSvrReq),En.set(on.E_CMD_RELAY_CLIENT_SENDTO_GAMESVR_REQ,an.SendToGameSvrRsp),_n.set(on.E_CMD_RELAY_SEND_FRAME_REQ,an.SendFrameReq),En.set(on.E_CMD_RELAY_SEND_FRAME_REQ,an.SendFrameRsp),_n.set(on.E_CMD_ROOM_CHAT_REQ,an.SendToClientReq),En.set(on.E_CMD_ROOM_CHAT_REQ,an.SendToClientRsp),_n.set(on.E_CMD_CHECK_LOGIN_REQ,an.CheckLoginReq),En.set(on.E_CMD_CHECK_LOGIN_REQ,an.CheckLoginRsp),_n.set(on.E_CMD_RELAY_REQUEST_FRAME_REQ,an.RequestFrameReq),En.set(on.E_CMD_RELAY_REQUEST_FRAME_REQ,an.RequestFrameRsp),_n.set(on.E_CMD_START_FRAME_SYNC_REQ,an.StartFrameSyncReq),En.set(on.E_CMD_START_FRAME_SYNC_REQ,an.StartFrameSyncRsp),_n.set(on.E_CMD_STOP_FRAME_SYNC_REQ,an.StopFrameSyncReq),En.set(on.E_CMD_STOP_FRAME_SYNC_REQ,an.StopFrameSyncRsp),_n.set(on.E_CMD_CREATE_ROOM_REQ,an.CreateRoomReq),En.set(on.E_CMD_CREATE_ROOM_REQ,an.CreateRoomRsp),_n.set(on.E_CMD_JOIN_ROOM_REQ,an.JoinRoomReq),En.set(on.E_CMD_JOIN_ROOM_REQ,an.JoinRoomRsp),_n.set(on.E_CMD_QUIT_ROOM_REQ,an.LeaveRoomReq),En.set(on.E_CMD_QUIT_ROOM_REQ,an.LeaveRoomRsp),_n.set(on.E_CMD_DISSMISS_ROOM_REQ,an.DismissRoomReq),En.set(on.E_CMD_DISSMISS_ROOM_REQ,an.DismissRoomRsp),_n.set(on.E_CMD_CHANGE_ROOM_PROPERTIS_REQ,an.ChangeRoomReq),En.set(on.E_CMD_CHANGE_ROOM_PROPERTIS_REQ,an.ChangeRoomRsp),_n.set(on.E_CMD_REMOVE_MEMBER_REQ,an.RemovePlayerReq),En.set(on.E_CMD_REMOVE_MEMBER_REQ,an.RemovePlayerRsp),_n.set(on.E_CMD_GET_ROOM_DETAIL_REQ,an.GetRoomByRoomIdReq),En.set(on.E_CMD_GET_ROOM_DETAIL_REQ,an.GetRoomByRoomIdRsp),_n.set(on.E_CMD_GET_ROOM_LIST_REQ,an.GetRoomListReq),En.set(on.E_CMD_GET_ROOM_LIST_REQ,an.GetRoomListRsp),_n.set(on.E_CMD_GET_ROOM_LIST_V2_REQ,an.GetRoomListReq),En.set(on.E_CMD_GET_ROOM_LIST_V2_REQ,an.GetRoomListRsp),_n.set(on.E_CMD_HEART_BEAT_REQ,an.HeartBeatReq),En.set(on.E_CMD_HEART_BEAT_REQ,an.HeartBeatRsp),_n.set(on.E_CMD_MATCH_PLAYER_COMPLEX_REQ,an.MatchPlayersReq),En.set(on.E_CMD_MATCH_PLAYER_COMPLEX_REQ,an.MatchPlayersRsp),_n.set(on.E_CMD_MATCH_GROUP_REQ,an.MatchGroupReq),En.set(on.E_CMD_MATCH_GROUP_REQ,an.MatchGroupRsp),_n.set(on.E_CMD_MATCH_ROOM_SIMPLE_REQ,an.MatchRoomSimpleReq),En.set(on.E_CMD_MATCH_ROOM_SIMPLE_REQ,an.MatchRoomSimpleRsp),_n.set(on.E_CMD_MATCH_CANCEL_MATCH_REQ,an.CancelPlayerMatchReq),En.set(on.E_CMD_MATCH_CANCEL_MATCH_REQ,an.CancelPlayerMatchRsp),_n.set(on.E_CMD_CREATE_GROUP_REQ,an.CreateGroupReq),En.set(on.E_CMD_CREATE_GROUP_REQ,an.CreateGroupRsp),_n.set(on.E_CMD_JOIN_GROUP_REQ,an.JoinGroupReq),En.set(on.E_CMD_JOIN_GROUP_REQ,an.JoinGroupRsp),_n.set(on.E_CMD_QUIT_GROUP_REQ,an.LeaveGroupReq),En.set(on.E_CMD_QUIT_GROUP_REQ,an.LeaveGroupRsp),_n.set(on.E_CMD_DISMISS_GROUP_REQ,an.DismissGroupReq),En.set(on.E_CMD_DISMISS_GROUP_REQ,an.DismissGroupRsp),_n.set(on.E_CMD_CHANGE_GROUP_PROPERTIES_REQ,an.ChangeGroupReq),En.set(on.E_CMD_CHANGE_GROUP_PROPERTIES_REQ,an.ChangeGroupRsp),_n.set(on.E_CMD_REMOVE_GROUP_MEMBER_REQ,an.RemoveGroupPlayerReq),En.set(on.E_CMD_REMOVE_GROUP_MEMBER_REQ,an.RemoveGroupPlayerRsp),_n.set(on.E_CMD_GET_GROUP_DETAIL_REQ,an.GetGroupByGroupIdReq),En.set(on.E_CMD_GET_GROUP_DETAIL_REQ,an.GetGroupByGroupIdRsp),_n.set(on.E_CMD_GET_GROUP_LIST_REQ,an.GetMyGroupsReq),En.set(on.E_CMD_GET_GROUP_LIST_REQ,an.GetMyGroupsRsp),_n.set(on.E_CMD_CHANGE_GROUP_PLAYER_STATE_REQ,an.ChangeCustomGroupPlayerStatusReq),En.set(on.E_CMD_CHANGE_GROUP_PLAYER_STATE_REQ,an.ChangeCustomGroupPlayerStatusRsp),_n.set(on.E_CMD_CHANGE_GROUP_PLAYER_PROFILE,an.ChangeGroupPlayerProfileReq),En.set(on.E_CMD_CHANGE_GROUP_PLAYER_PROFILE,an.ChangeGroupPlayerProfileRsp),_n.set(on.E_CMD_GROUP_CHAT_REQ,an.SendToGroupClientReq),En.set(on.E_CMD_GROUP_CHAT_REQ,an.SendToGroupClientRsp),ln.set(sn.E_PUSH_TYPE_GAMESVR,an.RecvFromGameSvrBst),ln.set(sn.E_PUSH_TYPE_ROOM_CHAT,an.RecvFromClientBst),ln.set(sn.E_PUSH_TYPE_START_GAME,an.StartFrameSyncBst),ln.set(sn.E_PUSH_TYPE_STOP_GAME,an.StopFrameSyncBst),ln.set(sn.E_PUSH_TYPE_RELAY,an.RecvFrameBst),ln.set(sn.E_PUSH_TYPE_JOIN_ROOM,an.JoinRoomBst),ln.set(sn.E_PUSH_TYPE_LEAVE_ROOM,an.LeaveRoomBst),ln.set(sn.E_PUSH_TYPE_DISMISS_ROOM,an.DismissRoomBst),ln.set(sn.E_PUSH_TYPE_MODIFY_ROOM_PROPERTY,an.ChangeRoomBst),ln.set(sn.E_PUSH_TYPE_REMOVE_PLAYER,an.RemovePlayerBst),ln.set(sn.E_PUSH_TYPE_PLAYER_STATE,an.ChangeCustomPlayerStatusBst),ln.set(sn.E_PUSH_TYPE_MODIFY_ROOM_PLAYER_PROFILE,an.ChangeRoomPlayerProfileBst),ln.set(sn.E_PUSH_TYPE_NETWORK_STATE,an.ChangePlayerNetworkStateBst),ln.set(sn.E_PUSH_TYPE_MATCH_TIMEOUT,an.MatchTimeoutBst),ln.set(sn.E_PUSH_TYPE_MATCH_SUCCESS,an.MatchPlayersBst),ln.set(sn.E_PUSH_TYPE_MATCH_CANCEL,an.CancelMatchBst),ln.set(sn.E_PUSH_TYPE_JOIN_GROUP,an.JoinGroupBst),ln.set(sn.E_PUSH_TYPE_LEAVE_GROUP,an.LeaveGroupBst),ln.set(sn.E_PUSH_TYPE_DISMISS_GROUP,an.DismissGroupBst),ln.set(sn.E_PUSH_TYPE_MODIFY_GROUP_PROPERTY,an.ChangeGroupBst),ln.set(sn.E_PUSH_TYPE_REMOVE_GROUP_PLAYER,an.RemoveGroupPlayerBst),ln.set(sn.E_PUSH_TYPE_GROUP_PLAYER_STATE,an.ChangeCustomGroupPlayerStatusBst),ln.set(sn.E_PUSH_TYPE_MODIFY_GROUP_PLAYER_PROFILE,an.ChangeGroupPlayerProfileBst),ln.set(sn.E_PUSH_TYPE_GROUP_CHAT,an.RecvFromGroupClientBst),function(e){e.batch="e6",e.batchTest="e6_test"}(Rn||(Rn={}));const mn={onPingTime:e=>null,onFitFrameTime:e=>null,onBstFrameRate:e=>null,onRenderFrameRate:e=>null};var gn={get id(){return Ye.getInfo().id},get openId(){return Ge.openId},get name(){return Ye.getInfo().name},get teamId(){return Ye.getInfo().teamId},get customPlayerStatus(){return Ye.getInfo().customPlayerStatus},get customProfile(){return Ye.getInfo().customProfile},get commonNetworkState(){return Ye.getInfo().commonNetworkState},get relayNetworkState(){return Ye.getInfo().relayNetworkState}};function yn(){return Be.getServerTime_UTC_8()}function Sn(e){return(1e6*yn()+Math.floor(1e6*Math.random())).toString(e)||""}function In(){Tn.conf.getLocation&&ze.getLocation({type:Tn.conf.locationType||"wgs84",success(e){ze.setStorageSync(Tn.prefix+Tn.lt,JSON.stringify(e))}})}function Cn(){Tn.conf.getUserInfo&&ze.getUserInfo({withCredentials:!1,success(e){const t=e.userInfo;t.nickName=encodeURIComponent(t.nickName),ze.setStorageSync(Tn.prefix+Tn.ui,JSON.stringify(t))},fail(e){}})}function On(e,t,n,r,i){(!t||void 0===t||0>=t)&&(t=yn());const o=[{type:2,data:{id:Sn(32),start:t,status:e,duration:n||0,events:r||[]}}],s=ze.getSystemInfoSync(),a={deviceId:function(){let e=ze.getStorageSync(Tn.prefix+Tn.u);return e||(e=Sn(36),ze.setStorageSync(Tn.prefix+Tn.u,e)),e}(),appkey:Tn.conf.appKey,versionCode:Tn.conf.version,initTime:t,channelID:Tn.conf.channelId,sdkVersion:Tn.sdkVersion,pixel:void 0===s.screenWidth?"":s.screenWidth+"*"+s.screenHeight+"*"+s.pixelRatio,language:s.language,model:encodeURIComponent(s.model),wxVersion:s.version,networkType:ze.getStorageSync(Tn.prefix+Tn.nt)||"4g",system:encodeURIComponent(s.system),platform:encodeURIComponent(s.platform),windowArea:void 0===s.windowWidth?"":s.windowWidth+"*"+s.windowHeight+"*"+s.pixelRatio,opid:Tn.opid,unid:Tn.unid,userInfo:Tn.conf.getUserInfo&&ze.getStorageSync(Tn.prefix+Tn.ui)||"",location:Tn.conf.getLocation&&ze.getStorageSync(Tn.prefix+Tn.lt)||"",msgs:o};ze.request({url:Tn.serverUrl,data:a,method:"POST",success:()=>i&&i(!0),fail:()=>i&&i(!1)})}const Tn={serverUrl:null,opid:null,unid:null,conf:{appKey:"MA0NCELB39H5S6",version:"1.0.0",channelId:"",getLocation:!1,getUserInfo:!1,isDebug:!1,locationType:void 0},prefix:"beacon_",sdkVersion:"weapp_v1.0.7",u:"u",ui:"ui",lt:"lt",nt:"nt",oik:"oik",uik:"uik",atl:0,ats:0,ptl:0,pts:0,init(){var e;Tn.conf.appKey&&void 0!==Tn.conf.appKey&&Tn.conf.appKey.length>0&&Tn.conf.version&&void 0!==Tn.conf.version&&Tn.conf.version.length>0&&(Tn.serverUrl="https://"+(Tn.conf.isDebug?"jrlts":"report")+".wxlagame.com/analytics/upload?tp=weapp",In(),Cn(),ze.getNetworkType({success(e){ze.setStorageSync(Tn.prefix+Tn.nt,e.networkType)}}),Tn.opid=ze.getStorageSync(Tn.prefix+Tn.oik),Tn.unid=ze.getStorageSync(Tn.prefix+Tn.uik),this.atl=yn(),(!(e=this.atl)||void 0===e||0>=e)&&(e=yn()),On(1,e,0,[]))},onEvent(e,t,n){const r=yn();On(4,r,0,[{count:1,start:r,name:e,params:t||{}}],n)},onEvents(e,t){const n=yn(),r=[];e.forEach((e=>{r.push({count:1,start:n,name:e.eventName,params:e.param||{}})})),r.length>0&&On(4,n,0,r,t)},setAppKey(e){Tn.conf.appKey=e},setChannelId(e){Tn.conf.channelId=e},setOpenid(e){e&&e.length>0&&(Tn.opid=e,ze.setStorageSync(Tn.prefix+Tn.oik,e))},setUnionid(e){e&&e.length>0&&(Tn.unid=e,ze.setStorageSync(Tn.prefix+Tn.uik,e))},setGetLocation(e){Tn.conf.getLocation=!0===e,!0===e&&In()},setGetUserInfo(e){Tn.conf.getUserInfo=!0===e,!0===e&&Cn()}},An={lastFrameTime:0,deltaTime:0,roomId:"",frameId:0,trigger:(e,t)=>{const n=Date.now(),r=An.roomId,i=An.frameId;An.roomId=e,An.frameId=t,0!==An.lastFrameTime&&r===e&&i+1===t?(An.deltaTime=n-An.lastFrameTime,mn.onBstFrameRate&&mn.onBstFrameRate(An.deltaTime),function(e,t){if(!Mn||Ln.disableReport||Ln.disableFrameReport||t<0)return;const n=`{"reFt":${t},"frRt":${wn.frameRate},"start":"${bn()}"${e?`,"rid":"${e+""}"`:""}}`;vn.e5.push(n)}(e,An.deltaTime),An.lastFrameTime=n):An.lastFrameTime=n},clear:()=>{An.lastFrameTime=0,An.deltaTime=0,An.roomId="",An.frameId=0}},Pn=n(2);let Mn=!1,vn={e2:[],e5:[]},Nn=Date.now(),Ln={reportInterval:1e4,disableReport:!1,disableFrameReport:!1,disableReqReport:!1,minReportSize:10};function bn(){const e=60*((new Date).getTimezoneOffset()+480)*1e3,t=new Date(Be.getServerTime_UTC_8()+e),n=e=>e<10?"0"+e:e+"";return`${t.getFullYear()}-${n(t.getMonth()+1)}-${n(t.getDate())} ${n(t.getHours())}:${n(t.getMinutes())}:${n(t.getSeconds())}`}function Dn(){An.clear(),Nn=Date.now()}setInterval((()=>{Mn&&vn.e2.length+vn.e5.length>Ln.minReportSize&&function(){if(!Fe.isInited())return;const e={};e.sv=Pn.version||"",e.pi=gn.id||"",e.gi=Ge.gameId||"",e.sc=$e||0,e.es=`{"e2":[${vn.e2.join(",")}],"e5":[${vn.e5.join(",")}]}`,Tn.onEvents([{eventName:Rn.batch,param:e}],(()=>null)),vn={e2:[],e5:[]}}()}),Ln.reportInterval);const wn={lastTime:0,frameRate:0,callback:e=>null,run:e=>{wn.callback&&wn.callback(e),"function"==typeof requestAnimationFrame&&requestAnimationFrame(wn.run)}};wn.callback=e=>{if(0===wn.lastTime)return void(wn.lastTime=e);const t=e,n=t-wn.lastTime,r=Math.round(1e3/(n+1e-6));wn.frameRate=r,wn.lastTime=t,mn.onRenderFrameRate&&mn.onRenderFrameRate(n)},wn.run(0);const Gn=Math.pow(2,12);function Un(e){let t=!1;return[Pe.EC_ACCESS_CMD_GET_TOKEN_ERR,Pe.EC_ACCESS_CMD_TOKEN_PRE_EXPIRE,Pe.EC_ACCESS_CMD_INVALID_TOKEN,Pe.EC_ACCESS_GET_COMM_CONNECT_ERR].includes(e)&&(t=!0),t}function Yn(e){let t=!1;return[Pe.EC_ACCESS_GET_RELAY_CONNECT_ERR].includes(e)&&(t=!0),t}var Fn,kn=class extends zt{sendRequest(e,t,n,r,i,o=""){if(!o){o=function(){const e=lt.encode(ut++);return ut>=Number.MAX_SAFE_INTEGER&&(ut=1),e}();const s={time:Date.now(),isSocketSend:!1,cmd:t,response:e=>{n(!0,e,r),this.deleteSeqQueue(o)},resend:()=>this.sendRequest(e,t,n,r,i,o),sendSuccess(){this.isSocketSend=!0},sendFail:(e,t="")=>{n(!1,{RspWrap1:{seq:o,body:null,errCode:e,errMsg:`消息发送失败 [${e}]`},RspWrap2:null,body:null},r),this.deleteSeqQueue(o)},remove:()=>this.deleteSeqQueue(o)};this.addSeqQueue(o,s)}const s=Object.assign({},De,{cmd:i,seq:o,body:null}),a={cmd:t,body:null};let _=new Uint8Array([]);try{_=function(e,t,n){const r=t.cmd,i=_n.get(r);if(!i||!i.bufferify)throw new Error("找不到该 cmd 编码方法: "+r);const o=i.bufferify(n),s=un.bufferify(Object.assign({},t,{body:o}));return dn.bufferify(Object.assign({},e,{body:s}))}(s,a,e)}catch(e){const t=Pe.EC_SDK_ENCODE_PARAM_FAIL,n=e+"",r=zt.sendQueue.get(o);return setTimeout((()=>r&&r.sendFail(t,n)),0),o}if(_.length>Gn){const e=zt.sendQueue.get(o);return setTimeout((()=>e&&e.sendFail(Pe.EC_SDK_SEND_FAIL,"数据长度超限")),0),o}const E=this.buildData(_);return this.send(E,o,t)}buildData(e){const t=new Uint8Array(1),n=new Uint8Array(1);return t[0]=Jt.CLIENT_PRE,n[0]=Jt.CLIENT_END,super.buildData(t,e,n)}handleMessage(e){const t=function(e,t){const n=hn.objectify(e),r=cn.objectify(n.body),i=(e=>{const t=zt.sendQueue.get(e);if(t)return t.cmd})(n.seq);if(!i)return null;let o=null;const s=En.get(i);if(!s||!s.objectify)return console.error("找不到该 cmd 解码方法: "+i),{RspWrap1:n,RspWrap2:r,body:o};r.body&&(o=s.objectify(r.body));const{errCode:a,errMsg:_}=rn(n.errCode,n.errMsg);return n.errMsg=_,n.errCode=a,n.body=null,r.body=null,{RspWrap1:n,RspWrap2:r,body:o}}(e);if(!t||!t.RspWrap1||!t.RspWrap1.seq)return;const n=zt.sendQueue.get(t.RspWrap1.seq);return n&&(function(e,t){if(!Mn||Ln.disableReport||Ln.disableReqReport||e.time<0)return;if(t<Nn)return;e&&e.rqCmd===He.E_CMD_HEART_BEAT_REQ&&mn.onPingTime&&mn.onPingTime(e.time);const n=bn(),r=`{"rqCd":${e.rqCd},"rqSq":"${e.rqSq}","rqCmd":${e.rqCmd},"time":${e.time},"start":"${n}"}`;vn.e2.push(r)}({rqCmd:n.cmd,rqSq:t.RspWrap1.seq,rqCd:t.RspWrap1.errCode,time:Date.now()-n.time},n.time),n.cmd===He.E_CMD_HEART_BEAT_REQ||!this.handleErrCode(t.RspWrap1))?n.response(t):void 0}handleResponse(e){return this.handleMessage(e)}handleErrCode(e){return Un(e.errCode)?(this.handleTokenErr(),st.log("TOKEN_ERROR",e),!0):!(!Yn(e.errCode)||this.socket.id!==o.ConnectionType.RELAY||(this.handleRelayConnectErr(),st.log("RELAY_CONNECT_ERROR",e),0))}handleSuccess(e,t){e===Pe.EC_OK&&t()}handleTokenErr(){ke.setStatus(ke.StatusType.LOGOUT),this.socket.emit(Vt.autoAuth,{})}handleRelayConnectErr(){qe.setStatus(qe.StatusType.OFFLINE),this.socket.emit(Vt.autoAuth,{})}},qn=class extends zt{constructor(){super()}buildData(e){const t=new Uint8Array(1),n=new Uint8Array(1);return t[0]=Jt.SERVER_PRE,n[0]=Jt.SERVER_END,super.buildData(t,e,n)}handleMessage(e){const t=function(e){const t=fn.objectify(e),n=pn.objectify(t.body);let r=null;const i=ln.get(n.type);return i&&i.objectify?(n.msg&&(r=i.objectify(n.msg)),t.body=null,n.msg=null,{BstWrap1:t,BstWrap2:n,body:r}):(console.error("找不到该 push 解码方法: "+n.type),{BstWrap1:t,BstWrap2:n,body:r})}(e),n=zt.broadcastHandlers.get(t.BstWrap2.type);n&&n(t.body,t.BstWrap1.seq)}handleBroadcast(e){return this.handleMessage(e)}};!function(e){e.comm="comm_cmd",e.relay="relay_cmd"}(Fn||(Fn={}));const Hn=[o.ClientSendServerReqWrap2Cmd.E_CMD_CREATE_ROOM_REQ,o.ClientSendServerReqWrap2Cmd.E_CMD_JOIN_ROOM_REQ,o.ClientSendServerReqWrap2Cmd.E_CMD_QUIT_ROOM_REQ,o.ClientSendServerReqWrap2Cmd.E_CMD_DISSMISS_ROOM_REQ,o.ClientSendServerReqWrap2Cmd.E_CMD_CHANGE_ROOM_PROPERTIS_REQ,o.ClientSendServerReqWrap2Cmd.E_CMD_REMOVE_MEMBER_REQ,o.ClientSendServerReqWrap2Cmd.E_CMD_CHANGE_PLAYER_STATE_REQ,o.ClientSendServerReqWrap2Cmd.E_CMD_START_FRAME_SYNC_REQ,o.ClientSendServerReqWrap2Cmd.E_CMD_STOP_FRAME_SYNC_REQ];class xn{constructor(e){this.client=new kn,this.server=new qn,this.bstCallbacks=e}static startQueueLoop(){xn.checkLoginQueue=[],xn.roomQueue=[],zt.startQueueLoop()}static stopQueueLoop(){xn.checkLoginQueue=[],xn.roomQueue=[],zt.stopQueueLoop()}bindSocket(e){const t=this.client.handleResponse.bind(this.client),n=this.server.handleBroadcast.bind(this.server);this.client.bindSocket(e,t,n),this.server.bindSocket(e,t,n)}unbindSocket(){this.client.unbindSocket(),this.server.unbindSocket()}setBroadcastHandler(e,t){this.server.setBroadcastHandler(e,t)}send(e,t,n,r){let i=Fn.comm;this.client.socket.id===o.ConnectionType.RELAY&&(i=Fn.relay);const s={body:e,subcmd:t,response:n,callback:r,requestCmd:i,running:!1};let a=null;return t===o.ClientSendServerReqWrap2Cmd.E_CMD_CHECK_LOGIN_REQ&&(a=xn.checkLoginQueue,s.beforeRequest=()=>{qe.setStatus(qe.StatusType.CHECKING)},s.afterRequest=e=>{st.log("CHECKLOGIN",e)}),Hn.includes(t)&&(a=xn.roomQueue),a?this.pushQueue(s,a):this.sendRequest(s)}pushQueue(e,t){const n=e.callback;return e.callback=(r,i,o,s)=>{n&&n(r,i,o,s),e.running=!1,t.shift(),this.sendQueue(t)},t.push(e),this.sendQueue(t)}sendQueue(e){if(!Array.isArray(e)||0===e.length||e[0].running)return"NO_SEQ";const t=e[0];return this.sendRequest(t)}sendRequest(e){e.running=!0,e.beforeRequest&&e.beforeRequest();const t=this.client.sendRequest(e.body,e.subcmd,e.response,e.callback,e.requestCmd);return e.afterRequest&&e.afterRequest(t),t}}xn.checkLoginQueue=[],xn.roomQueue=[];var Bn=xn,Vn=class extends Bn{constructor(e){super(e),this.matchTimeoutBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_MATCH_TIMEOUT,this.matchUsersBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_MATCH_SUCCESS,this.cancelMatchBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_MATCH_CANCEL,this.setBroadcastHandler(this.matchTimeoutBroadcastType,this.matchUsersTimeoutBroadcast.bind(this)),this.setBroadcastHandler(this.matchUsersBroadcastType,this.matchUsersBroadcast.bind(this)),this.setBroadcastHandler(this.cancelMatchBroadcastType,this.cancelMatchBroadcast.bind(this))}matchUsersComplex(e,t){const n=He.E_CMD_MATCH_PLAYER_COMPLEX_REQ,r=this.send(e,n,this.matchUsersComplexResponse.bind(this),t);return st.log("MATCH_USERS_COMPLEX_Para",e,r),r}matchGroup(e,t){const n=He.E_CMD_MATCH_GROUP_REQ,r=this.send(e,n,this.matchGroupResponse.bind(this),t);return st.log("MATCH_GROUP_Para",e,r),r}matchRoom(e,t){const n=He.E_CMD_MATCH_ROOM_SIMPLE_REQ,r=this.send(e,n,this.matchRoomResponse.bind(this),t);return st.log("MATCH_ROOM_Para",e,r),r}cancelMatch(e,t){const n=He.E_CMD_MATCH_CANCEL_MATCH_REQ,r=this.send(e,n,this.cancelMatchResponse.bind(this),t);return st.log("CANCEL_MATCH_Para",e,r),r}matchUsersComplexResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("matchPlayersRsp",i),n&&n(i)}matchGroupResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("matchGroupRsp",i),n&&n(i)}matchRoomResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("matchRoomSimpleRsp",i),n&&n(i)}cancelMatchResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("cancelPlayerMatchRsp",i),n&&n(i)}matchUsersTimeoutBroadcast(e,t){const n={data:e,seq:t};return this.bstCallbacks.room.onMatchTimeout(n)}matchUsersBroadcast(e,t){const n={data:e,seq:t};return this.bstCallbacks.room.onMatchPlayers(n)}cancelMatchBroadcast(e,t){const n={data:e,seq:t};return this.bstCallbacks.room.onCancelMatch(n)}},Qn=class extends Bn{constructor(e){super(e),this.joinRoomBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_JOIN_ROOM,this.leaveRoomBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_LEAVE_ROOM,this.dismissRoomBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_DISMISS_ROOM,this.changeRoomBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_MODIFY_ROOM_PROPERTY,this.removeUserBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_REMOVE_PLAYER,this.changeCustomPlayerStatusBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_PLAYER_STATE,this.changeRoomPlayerProfileBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_MODIFY_ROOM_PLAYER_PROFILE,this.roomUserNetworkBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_NETWORK_STATE,this.setBroadcastHandler(this.joinRoomBroadcastType,this.onJoinRoom.bind(this)),this.setBroadcastHandler(this.leaveRoomBroadcastType,this.onLeaveRoom.bind(this)),this.setBroadcastHandler(this.dismissRoomBroadcastType,this.onDismissRoom.bind(this)),this.setBroadcastHandler(this.changeRoomBroadcastType,this.onChangeRoom.bind(this)),this.setBroadcastHandler(this.removeUserBroadcastType,this.onRemoveUser.bind(this)),this.setBroadcastHandler(this.changeCustomPlayerStatusBroadcastType,this.onChangeCustomPlayerStatus.bind(this)),this.setBroadcastHandler(this.changeRoomPlayerProfileBroadcastType,this.onChangeRoomPlayerProfile.bind(this)),this.setBroadcastHandler(this.roomUserNetworkBroadcastType,this.onChangePlayerNetworkState.bind(this))}createRoom(e,t){const n=He.E_CMD_CREATE_ROOM_REQ,r=this.send(e,n,this.createRoomResponse.bind(this),t);return st.log("CREATE_ROOM_Para",e,r),r}joinRoom(e,t){const n=He.E_CMD_JOIN_ROOM_REQ,r=this.send(e,n,this.joinRoomResponse.bind(this),t);return st.log("JOIN_ROOM_Para",e,r),r}leaveRoom(e,t){const n=He.E_CMD_QUIT_ROOM_REQ,r=this.send(e,n,this.leaveRoomResponse.bind(this),t);return st.log("LEAVE_ROOM_Para",e,r),r}dismissRoom(e,t){const n=He.E_CMD_DISSMISS_ROOM_REQ,r=this.send(e,n,this.dismissRoomResponse.bind(this),t);return st.log("DISMISS_ROOM_Para",e,r),r}changeRoom(e,t){const n=He.E_CMD_CHANGE_ROOM_PROPERTIS_REQ,r=this.send(e,n,this.changeRoomResponse.bind(this),t);return st.log("CHANGE_ROOM_Para",e,r),r}removeUser(e,t){const n=He.E_CMD_REMOVE_MEMBER_REQ,r=this.send(e,n,this.removeUserResponse.bind(this),t);return st.log("REMOVE_USER_Para",e,r),r}getRoomByRoomId(e,t){const n=He.E_CMD_GET_ROOM_DETAIL_REQ,r=this.send(e,n,this.getRoomByRoomIdRsp().bind(this),t);return st.log("GET_ROOM_BY_ROOM_ID_Para",e,r),r}getRoomList(e,t){const n=He.E_CMD_GET_ROOM_LIST_V2_REQ,r=this.send(e,n,this.getRoomListResponse.bind(this),t);return st.log("GET_ROOM_LIST_Para",e,r),r}createRoomResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("createRoomRsp",i),n&&n(i)}joinRoomResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("joinRoomRsp",i),n&&n(i)}leaveRoomResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("leaveRoomRsp",i),n&&n(i)}dismissRoomResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("dismissRoomRsp",i),n&&n(i)}changeRoomResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("changeRoomRsp",i),n&&n(i)}removeUserResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("removePlayerRsp",i),n&&n(i)}getRoomByRoomIdRsp(){return(e,t,n)=>{const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("getRoomByRoomIdRsp",i),n&&n(i)}}getRoomListResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("getRoomListRsp",i),n&&n(i)}onJoinRoom(e,t){const n={data:e,seq:t};return this.bstCallbacks.room.onJoinRoom(n)}onLeaveRoom(e,t){const n={data:e,seq:t};return this.bstCallbacks.room.onLeaveRoom(n)}onDismissRoom(e,t){const n={data:e,seq:t};return this.bstCallbacks.room.onDismissRoom(n)}onChangeRoom(e,t){const n={data:e,seq:t};return this.bstCallbacks.room.onChangeRoom(n)}onRemoveUser(e,t){const n={data:e,seq:t};return this.bstCallbacks.room.onRemovePlayer(n)}onChangeCustomPlayerStatus(e,t){const n={data:e,seq:t};return this.bstCallbacks.room.onChangeCustomPlayerStatus(n)}onChangeRoomPlayerProfile(e,t){const n={data:e,seq:t};return this.bstCallbacks.room.onChangeRoomPlayerProfile(n)}onChangePlayerNetworkState(e,t){const n={data:e,seq:t};if(st.log("onChangeNetworkState",n),n.data.roomInfo){const e=JSON.parse(JSON.stringify(n));delete e.data.groupIdList,this.bstCallbacks.room.onChangePlayerNetworkState(e)}if(Array.isArray(n.data.groupIdList)&&n.data.groupIdList.length>0){const e=JSON.parse(JSON.stringify(n));delete e.data.roomInfo,delete e.data.roomId,this.bstCallbacks.group.onChangeGroupPlayerNetworkState(e)}}},Kn=class extends Bn{constructor(e){super(e),this.messageBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_ROOM_CHAT,this.setBroadcastHandler(this.messageBroadcastType,this.onRecvFromClient.bind(this))}sendMessage(e,t){const n=He.E_CMD_ROOM_CHAT_REQ,r=this.send(e,n,this.sendMessageResponse.bind(this),t);return st.log("SEND_MESSAGE_Para",e,r),r}sendMessageResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("sendToClientRsp",i),n&&n(i)}onRecvFromClient(e,t){const n={data:e,seq:t};return this.bstCallbacks.room.onRecvFromClient(n)}},Wn=class extends Bn{constructor(e){super(e)}login(e,t,n,r){const i=He.E_CMD_LOGIN_REQ;let o,s,a;Array.from(this.client.queue).forEach((e=>{const t=zt.sendQueue.get(e);t&&t.cmd===i&&this.client.deleteSeqQueue(e)})),n?(o=n.timestamp,s=n.nonce,a=n.sign):(o=Math.floor(Date.now()/1e3),s=Math.floor(Math.random()*(Math.pow(2,32)-1)),a=function(e,t,n,r,i){const o=[["game_id",t],["open_id",n],["nonce",i],["timestamp",r]].sort().map((e=>e.join("="))).join("&"),s=_t(o,e||"");return{sign:at.stringify(s)}}(t,e.gameId,e.openId,o,s).sign);const _=Ze,E=$e,l=ct,d={gameId:e.gameId,openId:e.openId,sign:a,timestamp:o,nonce:s,platform:_,channel:E,deviceId:l,mac:void 0,imei:void 0};ke.setStatus(ke.StatusType.LOGINING);const u=this.send(d,i,this.loginResponse.bind(this),r);return st.log("LOGIN_Para",d,u),ke.setErrCode(0,""),u}logout(e,t){const n=He.E_CMD_LOGOUT_REQ,r=this.send(e,n,this.logoutResponse.bind(this),t);return st.log("LOGOUT_Para",e,r),ke.setStatus(ke.StatusType.LOGOUTING),r}changeCustomPlayerStatus(e,t){const n=He.E_CMD_CHANGE_PLAYER_STATE_REQ,r=this.send(e,n,this.changeCustomPlayerStatusResponse.bind(this),t);return st.log("CHANGE_USER_STATE_Para",e,r),r}changeRoomPlayerProfile(e,t){const n=He.E_CMD_CHANGE_ROOM_PLAYER_PROFILE,r=this.send(e,n,this.changeRoomPlayerProfileResponse.bind(this),t);return st.log("changeRoomPlayerProfile_Para",e,r),r}loginResponse(e,t,n){e||ke.setStatus(ke.StatusType.LOGOUT);const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};this.client.handleSuccess(i.code,(()=>{De.authKey=t.body.token,De.playerId=t.body.playerId,ke.setStatus(ke.StatusType.LOGIN),!Ye.getInfo().id&&Ye.setInfo({id:i.data.playerId}),Be.setServerTime(t.body.sdkConfig.serverTime)})),ke.setErrCode(i.code,i.msg),n&&n(i),st.log("RESPONSE_LoginResponse",i)}logoutResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq};return st.log("RESPONSE_LogoutResponse",i),this.client.handleSuccess(i.code,(()=>{De.authKey=void 0,De.playerId=void 0,ke.setStatus(ke.StatusType.LOGOUT),Ye.setInfo({id:void 0})})),n&&n(i)}changeCustomPlayerStatusResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("changeCustomPlayerStatusRsp",i),n&&n(i)}changeRoomPlayerProfileResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("changeRoomPlayerProfileRsp",i),n&&n(i)}},jn=class extends Bn{constructor(e){super(e),this.joinGroupBstType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_JOIN_GROUP,this.leaveGroupBstType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_LEAVE_GROUP,this.dismissGroupBstType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_DISMISS_GROUP,this.changeGroupBstType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_MODIFY_GROUP_PROPERTY,this.removeGroupBstType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_REMOVE_GROUP_PLAYER,this.changeCustomGroupPlayerStatusBstType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_GROUP_PLAYER_STATE,this.changeGroupPlayerProfileBstType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_MODIFY_GROUP_PLAYER_PROFILE,this.recvFromGroupClientType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_GROUP_CHAT,this.setBroadcastHandler(this.joinGroupBstType,this.onJoinGroup.bind(this)),this.setBroadcastHandler(this.leaveGroupBstType,this.onLeaveGroup.bind(this)),this.setBroadcastHandler(this.dismissGroupBstType,this.onDismissGroup.bind(this)),this.setBroadcastHandler(this.changeGroupBstType,this.onChangeGroup.bind(this)),this.setBroadcastHandler(this.removeGroupBstType,this.onRemoveGroupPlayer.bind(this)),this.setBroadcastHandler(this.changeCustomGroupPlayerStatusBstType,this.onChangeCustomGroupPlayerStatus.bind(this)),this.setBroadcastHandler(this.changeGroupPlayerProfileBstType,this.onChangeGroupPlayerProfile.bind(this)),this.setBroadcastHandler(this.recvFromGroupClientType,this.onRecvFromGroupClient.bind(this))}createGroup(e,t){const n=He.E_CMD_CREATE_GROUP_REQ,r=this.send(e,n,this.createGroupResponse.bind(this),t);return st.log("CREATE_GROUP_Para",e,r),r}joinGroup(e,t){const n=He.E_CMD_JOIN_GROUP_REQ,r=this.send(e,n,this.joinGroupResponse.bind(this),t);return st.log("JOIN_GROUP_Para",e,r),r}leaveGroup(e,t){const n=He.E_CMD_QUIT_GROUP_REQ,r=this.send(e,n,this.leaveGroupResponse.bind(this),t);return st.log("LEAVE_GROUP_Para",e,r),r}dismissGroup(e,t){const n=He.E_CMD_DISMISS_GROUP_REQ,r=this.send(e,n,this.dismissGroupResponse.bind(this),t);return st.log("DISMISS_GROUP_Para",e,r),r}changeGroup(e,t){const n=He.E_CMD_CHANGE_GROUP_PROPERTIES_REQ,r=this.send(e,n,this.changeGroupResponse.bind(this),t);return st.log("CHANGE_GROUP_Para",e,r),r}removeGroupPlayer(e,t){const n=He.E_CMD_REMOVE_GROUP_MEMBER_REQ,r=this.send(e,n,this.removeGroupPlayerResponse.bind(this),t);return st.log("REMOVE_GROUP_PLAYER_Para",e,r),r}getGroupByGroupId(e,t){const n=He.E_CMD_GET_GROUP_DETAIL_REQ,r=this.send(e,n,this.getGroupByGroupIdResponse.bind(this),t);return st.log("GET_GROUP_BY_GROUP_ID_Para",e,r),r}getMyGroups(e,t){const n=He.E_CMD_GET_GROUP_LIST_REQ,r=this.send(e,n,this.getMyGroupsResponse.bind(this),t);return st.log("GET_MY_GROUPS_Para",e,r),r}changeCustomGroupPlayerStatus(e,t){const n=He.E_CMD_CHANGE_GROUP_PLAYER_STATE_REQ,r=this.send(e,n,this.changeCustomGroupPlayerStatusResponse.bind(this),t);return st.log("CHANGE_CUSTOM_GROUP_PLAYER_STATUS_Para",e,r),r}changeGroupPlayerProfile(e,t){const n=He.E_CMD_CHANGE_GROUP_PLAYER_PROFILE,r=this.send(e,n,this.changeGroupPlayerProfileResponse.bind(this),t);return st.log("changeGroupPlayerProfile_Para",e,r),r}sendToGroupClient(e,t){const n=He.E_CMD_GROUP_CHAT_REQ,r=this.send(e,n,this.sendToGroupClientResponse.bind(this),t);return st.log("SEND_TO_GROUP_CLIENT_Para",e,r),r}createGroupResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("createGroupRsp",i),n&&n(i)}joinGroupResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("joinGroupRsp",i),n&&n(i)}leaveGroupResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("leaveGroupRsp",i),n&&n(i)}dismissGroupResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("dismissGroupRsp",i),n&&n(i)}changeGroupResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("changeGroupRsp",i),n&&n(i)}removeGroupPlayerResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("removeGroupPlayerRsp",i),n&&n(i)}getGroupByGroupIdResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("getGroupByGroupIdRsp",i),n&&n(i)}getMyGroupsResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("getMyGroupsRsp",i),n&&n(i)}changeCustomGroupPlayerStatusResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("changeCustomGroupPlayerStatusRsp",i),n&&n(i)}changeGroupPlayerProfileResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("changeGroupPlayerProfileRsp",i),n&&n(i)}sendToGroupClientResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("sendToGroupClientRsp",i),n&&n(i)}onJoinGroup(e,t){const n={data:e,seq:t};return this.bstCallbacks.group.onJoinGroup(n)}onLeaveGroup(e,t){const n={data:e,seq:t};return this.bstCallbacks.group.onLeaveGroup(n)}onDismissGroup(e,t){const n={data:e,seq:t};return this.bstCallbacks.group.onDismissGroup(n)}onChangeGroup(e,t){const n={data:e,seq:t};return this.bstCallbacks.group.onChangeGroup(n)}onRemoveGroupPlayer(e,t){const n={data:e,seq:t};return this.bstCallbacks.group.onRemoveGroupPlayer(n)}onChangeCustomGroupPlayerStatus(e,t){const n={data:e,seq:t};return this.bstCallbacks.group.onChangeCustomGroupPlayerStatus(n)}onChangeGroupPlayerProfile(e,t){const n={data:e,seq:t};return this.bstCallbacks.group.onChangeGroupPlayerProfile(n)}onRecvFromGroupClient(e,t){const n={data:e,seq:t};return this.bstCallbacks.group.onRecvFromGroupClient(n)}},Jn=class extends Bn{constructor(e,t,n){super(e),this.pingTimer=new et,this.pongTimer=new et,this.currentSeq="",this.retry=2,this.id=t,this.frameSender=n}get timeout(){return this.id===o.ConnectionType.RELAY&&Le.enableUDP?Le.pingTimeout/2:Le.pingTimeout}unbindSocket(){this.stop(),super.unbindSocket()}ping(e){if(rt(this.pingTimer),!De.authKey)return;const t=Date.now(),n=this.frameSender&&this.frameSender.roomInfo&&this.frameSender.roomInfo.routeId?this.frameSender.roomInfo.routeId:"",r={conType:this.id,routeId:n},i=this.send(r,He.E_CMD_HEART_BEAT_REQ,((e,n)=>this.handlePong(e,n,t)),e);this.currentSeq=i,st.log("PING",this.id,i),nt(this.pongTimer,(()=>this.handlePongTimeout(i)),this.timeout)}stop(){rt(this.pingTimer,this.pongTimer)}handlePong(e,t,n){if(st.log("Pong",this.id,t.RspWrap1,"send",e),rt(this.pongTimer),!e)return this.handlePongTimeout(t.RspWrap1.seq);this.retry=2,this.client.clearQueue();const r=t.RspWrap1.errCode;return Un(r)?(ke.setStatus(ke.StatusType.LOGOUT),this.client.socket.emit(Vt.autoAuth,{})):Yn(r)&&this.client.socket.id===o.ConnectionType.RELAY?(qe.setStatus(qe.StatusType.OFFLINE),this.client.socket.emit(Vt.autoAuth,{})):void nt(this.pingTimer,this.ping.bind(this),this.timeout)}handlePongTimeout(e){if(this.client.deleteSeqQueue(e),this.retry--,e===this.currentSeq&&this.client.socket){if(this.id===o.ConnectionType.RELAY&&Le.enableUDP){if(this.retry>=0)return nt(this.pingTimer,this.ping.bind(this),this.timeout);this.retry=2}this.client.socket.connectNewSocket(this.client.socket.url),this.client.clearQueue(),st.log("Pong_Timeout",this.id)}}};class Xn{constructor(){this.contexts=[]}bindCallbacks(e){-1===this.contexts.findIndex((t=>t===e))&&this.contexts.push(e),st.log("BindCallbacks",this.contexts.length)}unbindCallbacks(e){const t=this.contexts.findIndex((t=>t===e));-1!==t&&this.contexts.splice(t,1),st.log("UnBindCallbacks",this.contexts.length)}clearCallbacks(){this.contexts=[],st.log("ClearCallbacks",this.contexts.length)}handleBst(e,t){"error"!==t&&st.log(t,e);for(const n of this.contexts)n&&n[t+""]&&n[t+""](e)}}class zn extends Xn{onJoinRoom(e){this.handleBst(e,"onJoinRoom")}onLeaveRoom(e){this.handleBst(e,"onLeaveRoom")}onDismissRoom(e){this.handleBst(e,"onDismissRoom")}onChangeRoom(e){this.handleBst(e,"onChangeRoom")}onRemovePlayer(e){this.handleBst(e,"onRemovePlayer")}onMatchTimeout(e){this.handleBst(e,"onMatchTimeout")}onMatchPlayers(e){this.handleBst(e,"onMatchPlayers")}onCancelMatch(e){this.handleBst(e,"onCancelMatch")}onRecvFromClient(e){this.handleBst(e,"onRecvFromClient")}onRecvFromGameSvr(e){this.handleBst(e,"onRecvFromGameSvr")}onChangePlayerNetworkState(e){this.handleBst(e,"onChangePlayerNetworkState")}onRecvFrame(e){this.handleBst(e,"onRecvFrame")}onChangeCustomPlayerStatus(e){this.handleBst(e,"onChangeCustomPlayerStatus")}onChangeRoomPlayerProfile(e){this.handleBst(e,"onChangeRoomPlayerProfile")}onStartFrameSync(e){this.handleBst(e,"onStartFrameSync")}onStopFrameSync(e){this.handleBst(e,"onStopFrameSync")}onNetwork(e){this.handleBst(e,"onNetwork")}}class $n extends Xn{onJoinGroup(e){this.handleBst(e,"onJoinGroup")}onLeaveGroup(e){this.handleBst(e,"onLeaveGroup")}onDismissGroup(e){this.handleBst(e,"onDismissGroup")}onChangeGroup(e){this.handleBst(e,"onChangeGroup")}onRemoveGroupPlayer(e){this.handleBst(e,"onRemoveGroupPlayer")}onChangeGroupPlayerNetworkState(e){this.handleBst(e,"onChangeGroupPlayerNetworkState")}onChangeCustomGroupPlayerStatus(e){this.handleBst(e,"onChangeCustomGroupPlayerStatus")}onChangeGroupPlayerProfile(e){this.handleBst(e,"onChangeGroupPlayerProfile")}onRecvFromGroupClient(e){this.handleBst(e,"onRecvFromGroupClient")}onNetwork(e){this.handleBst(e,"onNetwork")}}let Zn,er,tr=null,nr=null,rr=null,ir=null,or=null,sr=null,ar=null,_r=null;function Er(){ur.instance.clearResponses(),Zn&&Zn.destory(),er&&er.destory(),((...e)=>{e.forEach((e=>e&&e.unbindSocket()))})(rr,ir,or,sr,ar.netUtil1,ar.netUtil2,tr,nr,_r),ze.offHide(ur.instance.onHide),ze.offShow(ur.instance.onShow),Fe.setStatus(Fe.StatusType.UNINIT),ke.setStatus(ke.StatusType.LOGOUT),ur.instance.group=null}const lr={login(e){const t=Object.assign({},Ge),n=t=>{e&&e(t),lr.loginRsp(t)};return Ge.createSignature?rr&&Ge.createSignature((e=>rr.login(t,void 0,e,n))):rr&&rr.login(t,Ge.secretKey,null,n)},loginRsp(e){if(Fe.isIniting()){if(e.code!==Pe.EC_OK)return dr(!1,{code:e.code});let n=5e3,r=!1,i=0;return e.data.sdkConfig&&(e.data.sdkConfig.pingInterval&&(n=e.data.sdkConfig.pingInterval),e.data.sdkConfig.reportInterval&&(Ln.reportInterval=e.data.sdkConfig.reportInterval),e.data.sdkConfig.serverTime&&(i=e.data.sdkConfig.serverTime),e.data.sdkConfig.enableUdp&&(r=e.data.sdkConfig.enableUdp),e.data.sdkConfig.disableReport&&(Ln.disableReport=e.data.sdkConfig.disableReport),e.data.sdkConfig.disableFrameReport&&(Ln.disableFrameReport=e.data.sdkConfig.disableFrameReport),e.data.sdkConfig.disableReqReport&&(Ln.disableReqReport=e.data.sdkConfig.disableReqReport),e.data.sdkConfig.minReportSize&&(Ln.minReportSize=e.data.sdkConfig.minReportSize)),t=Ge.openId,st.log("EventUploader"),Tn.init(),Tn.setOpenid(t||""),Mn=!0,Le.pingTimeout=n,Le.enableUDP=!!r,dr(!0,{code:Pe.EC_OK,data:{serverTime:i}}),tr.ping()}var t;e.code===Pe.EC_OK&&tr.ping()},logout:()=>rr&&rr.logout({},lr.logoutRsp),logoutRsp(e){e.code===Pe.EC_OK&&tr.stop()}};function dr(e,t){if(Fe.isIniting()){e&&Fe.setStatus(Fe.StatusType.INITED),!e&&Fe.setStatus(Fe.StatusType.UNINIT);let n=Fe.isInited()?Pe.EC_OK:Pe.EC_SDK_UNINIT;!e&&t&&t.code!==Pe.EC_OK&&(n=t.code);const r={default:"初始化失败。请确认域名是否正确配置，以及网络是否顺畅。",[Pe.EC_ACCESS_PLAYER_DUPLICATE_LOGIN]:"初始化失败。用户已在其他客户端登录。",[Pe.EC_INVALID_PARAMS_TIMESTAMP]:"初始化失败。请检查本地时间是否正常。",[Pe.EC_INVALID_PARAMS_SIGN]:"初始化失败。签名校验失败，请检查初始化参数是否正确。",[Pe.EC_INVALID_PARAMS_GAME_ID]:"初始化失败。请检查 gameId 是否正确。",[Pe.EC_SDK_SEND_FAIL]:"初始化失败。消息发送失败，请检查网络是否正常。",[Pe.EC_SDK_RES_TIMEOUT]:"初始化失败。消息响应超时，请检查网络后重试。",[Pe.EC_SDK_SOCKET_ERROR]:"初始化失败。网络异常。"+(t.errMsg||""),[Pe.EC_SDK_SOCKET_CLOSE]:"初始化失败。网络已断开。"},i=Fe.isInited()?"初始化成功":r[n]||r.default,o=t.data&&t.data.serverTime||void 0;ur.instance.initRsp&&ur.instance.initRsp({code:n,msg:i,seq:null,data:{serverTime:o}})}}class ur{constructor(e,t){if(this.ErrCode=ur.ErrCode,this.ENUM=ur.ENUM,this.group=null,!e.openId&&(e.openId=""),e.openId=e.openId+"",Object.assign(Ge,e),Object.assign(Le,t,{pingTimeout:Le.pingTimeout}),De.gameId=Ge.gameId,st.log("CONSTRUCTOR",e,t),ur.instance instanceof ur)return ur.instance;ur.instance=this}clearResponses(){ur.bstCallbacks.clearCallbacks()}onHide(){ke.setStatus(ke.StatusType.LOGOUT),qe.setStatus(qe.StatusType.OFFLINE),tr&&tr.stop(),nr&&nr.stop(),nr.client.socket.id===o.ConnectionType.RELAY&&Le.enableUDP&&nr.client.socket.close(),Dn(),st.log("SDK_onHide")}onShow(){tr&&tr.stop(),nr&&nr.stop(),tr&&tr.client.socket.url&&tr.ping(),nr&&nr.client.socket.url&&nr.ping(),Dn(),st.log("SDK_onShow",tr.client.socket.url,nr.client.socket.url)}getSocket(e){return e===o.ConnectionType.COMMON?Zn:e===o.ConnectionType.RELAY?er:void 0}init(e){this.initRsp=t=>{e(t)},function(){var e,t;Fe.isUnInit()&&(rr&&Er(),Fe.setStatus(Fe.StatusType.INITING),rr=new Wn(ur.bstCallbacks),or=new Vn(ur.bstCallbacks),sr=new Kn(ur.bstCallbacks),ir=new Qn(ur.bstCallbacks),ar=new class{constructor(e){this.netUtil1=null,this.netUtil2=null,this.frameBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_RELAY,this.startGameBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_START_GAME,this.stopGameBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_STOP_GAME,this.sendMessageExtBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_GAMESVR,this.bstCallbacks=e,this.netUtil1=new Bn(e),this.netUtil2=new Bn(e),this.netUtil1.setBroadcastHandler(this.startGameBroadcastType,this.onStartFrameSync.bind(this)),this.netUtil1.setBroadcastHandler(this.stopGameBroadcastType,this.onStopFrameSync.bind(this)),this.netUtil2.setBroadcastHandler(this.frameBroadcastType,this.onRecvFrame.bind(this)),this.netUtil2.setBroadcastHandler(this.sendMessageExtBroadcastType,this.onRecvFromGameSvr.bind(this))}setFrameRoom(e){st.log("SETFRAMEROOM",e);const t=this.getFrameRoom();this.roomInfo=e||{roomId:0,routeId:""};const n=t.routeId,r=this.roomInfo.routeId;return r?n!==r?(qe.setStatus(qe.StatusType.OFFLINE),this.autoCheckLogin()):n===r?this.autoCheckLogin():void 0:this.netUtil2.client.socket&&this.netUtil2.client.socket.close()}getFrameRoom(){return this.roomInfo||{id:0,routeId:""}}isRoomExist(){return!!this.roomInfo&&!!this.roomInfo.id}startFrameSync(e,t){if(!this.isRoomExist()){const e={RspWrap1:{seq:null,body:null,errCode:Pe.EC_SDK_NO_ROOM,errMsg:"无房间信息"},RspWrap2:null,body:null};return void this.startFrameSyncResponse(!1,e,t)}const n=He.E_CMD_START_FRAME_SYNC_REQ,r=this.netUtil1.send(e,n,this.startFrameSyncResponse.bind(this),t);return st.log("START_FRAMESYNC_Para",e,r),r}stopFrameSync(e,t){if(!this.isRoomExist()){const e={RspWrap1:{seq:null,body:null,errCode:Pe.EC_SDK_NO_ROOM,errMsg:"无房间信息"},RspWrap2:null,body:null};return void this.stopFrameSyncResponse(!1,e,t)}const n=He.E_CMD_STOP_FRAME_SYNC_REQ,r=this.netUtil1.send(e,n,this.stopFrameSyncResponse.bind(this),t);return st.log("STOP_FRAMESYNC_Para",e,r),r}sendFrame(e,t){if(!this.isRoomExist()){const e={RspWrap1:{seq:null,body:null,errCode:Pe.EC_SDK_NO_ROOM,errMsg:"无房间信息"},RspWrap2:null,body:null};return void this.sendFrameResponse(!1,e,t)}this.autoCheckLogin();const n=He.E_CMD_RELAY_SEND_FRAME_REQ,r=this.netUtil2.send(e,n,this.sendFrameResponse.bind(this),t);return st.log("SEND_FRAME_Para",e,r),r}requestFrame(e,t){if(!this.isRoomExist()){const e={RspWrap1:{seq:null,body:null,errCode:Pe.EC_SDK_NO_ROOM,errMsg:"无房间信息"},RspWrap2:null,body:null};return void this.requestFrameResponse(!1,e,t)}this.autoCheckLogin();const n=He.E_CMD_RELAY_REQUEST_FRAME_REQ,r=this.netUtil2.send(e,n,this.requestFrameResponse.bind(this),t);return st.log("REQUEST_FRAME_Para",e,r),r}checkLogin(e,t){if(!this.isRoomExist()){const t={RspWrap1:{seq:null,body:null,errCode:Pe.EC_SDK_NO_ROOM,errMsg:"无房间信息"},RspWrap2:null,body:null};return void this.checkLoginResponse(!1,t,e)}qe.setStatus(qe.StatusType.CHECKING);const n=He.E_CMD_CHECK_LOGIN_REQ,r={token:De.authKey,routeId:this.roomInfo.routeId},i=this.netUtil2.send(r,n,this.checkLoginResponse.bind(this),e);return st.log("CHECKLOGIN",i,t,r.routeId),qe.setRouteId(r.routeId),i}sendMessageExt(e,t){if(!this.isRoomExist()){const e={RspWrap1:{seq:null,body:null,errCode:Pe.EC_SDK_NO_ROOM,errMsg:"无房间信息"},RspWrap2:null,body:null};return void this.sendMessageExtResponse(!1,e,t)}this.autoCheckLogin();const n=He.E_CMD_RELAY_CLIENT_SENDTO_GAMESVR_REQ,r=this.netUtil2.send(e,n,this.sendMessageExtResponse.bind(this),t);return st.log("SEND_TO_GAMESVR_Para",e,r),r}startFrameSyncResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("startFrameSyncRsp",i),n&&n(i)}stopFrameSyncResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("stopFrameSyncRsp",i),n&&n(i)}autoCheckLogin(){this.connect(),this.netUtil2.client.socket.isConnect()&&qe.isOffline()&&this.netUtil2.client.socket.emit(Vt.autoAuth,{})}connect(){!this.netUtil2.client.socket.isConnect()&&this.roomInfo&&(this.netUtil2.client.socket.url=Le.url+":"+(Le.enableUDP?8585:5443),this.netUtil2.client.socket.connect("framesender connect"))}sendFrameResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("sendFrameRsp",i),n&&n(i)}checkLoginResponse(e,t,n){qe.setStatus(qe.StatusType.OFFLINE);const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};return i.code===Pe.EC_OK&&qe.setStatus(qe.StatusType.CHECKED),st.log("RESPONSE_CheckLoginResponse",i),n&&n(i)}requestFrameResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("requestFrameRsp",i),n&&n(i)}sendMessageExtResponse(e,t,n){const r=t.RspWrap1,i={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};st.log("sendToGameSvrRsp",i),n&&n(i)}onRecvFrame(e,t){const n={data:{frame:Object.assign({},e.frame,{roomId:this.getFrameRoom().id})},seq:t};return An.trigger(this.roomInfo.id||void 0,n.data.frame.id),this.bstCallbacks.room.onRecvFrame(n)}onStartFrameSync(e,t){const n={data:Object.assign({},e),seq:t};return An.clear(),this.bstCallbacks.room.onStartFrameSync(n)}onStopFrameSync(e,t){const n={data:Object.assign({},e),seq:t};return An.clear(),this.bstCallbacks.room.onStopFrameSync(n)}onRecvFromGameSvr(e,t){let n={};try{n=JSON.parse(e.data)}catch(t){n=e.data}const r={data:Object.assign({},e,{data:n},{roomId:e.roomId}),seq:t};return this.bstCallbacks.room.onRecvFromGameSvr(r)}}(ur.bstCallbacks),_r=new jn(ur.bstCallbacks),Zn=new Kt(o.ConnectionType.COMMON,!1),er=new Kt(o.ConnectionType.RELAY,!0),tr=new Jn(ur.bstCallbacks,o.ConnectionType.COMMON,null),nr=new Jn(ur.bstCallbacks,o.ConnectionType.RELAY,ar),e=[tr,rr,ir,or,sr,ar.netUtil1,_r],t=[nr,ar.netUtil2],e.forEach((e=>e.bindSocket(Zn))),t.forEach((e=>e.bindSocket(er))),Bn.stopQueueLoop(),Bn.startQueueLoop(),Zn.url=Le.url,Zn.on(Vt.connect,(()=>{ke.isStatus(ke.StatusType.LOGINING)||lr.login(),Zn.url&&ur.bstCallbacks.onNetwork({code:Pe.EC_OK,data:{type:Zn.id}})})),er.on(Vt.connect,(()=>{ar.checkLogin(null,"connect "+!!er.isConnect()),er.url&&ur.bstCallbacks.onNetwork({code:Pe.EC_OK,data:{type:er.id}}),nr.ping()})),Zn.on(Vt.connectClose,(()=>{dr(!1,{code:Pe.EC_SDK_SOCKET_CLOSE}),Fe.isInited()&&(ke.setStatus(ke.StatusType.LOGOUT),Zn.url&&ur.bstCallbacks.onNetwork({code:Pe.EC_SDK_SOCKET_CLOSE,msg:"Socket断开",seq:null}))})),er.on(Vt.connectClose,(()=>{Fe.isInited()&&(qe.setStatus(qe.StatusType.OFFLINE),er.url&&ur.bstCallbacks.onNetwork({code:Pe.EC_SDK_SOCKET_CLOSE,msg:"Socket断开",seq:null}),nr.stop())})),Zn.on(Vt.connectError,(e=>{dr(!1,{code:Pe.EC_SDK_SOCKET_ERROR,errMsg:JSON.stringify(e)}),Fe.isInited()&&Zn.url&&ur.bstCallbacks.onNetwork({code:Pe.EC_SDK_SOCKET_ERROR,msg:"Socket错误",seq:null})})),er.on(Vt.connectError,(e=>{Fe.isInited()&&er.url&&ur.bstCallbacks.onNetwork({code:Pe.EC_SDK_SOCKET_ERROR,msg:"Socket错误",seq:null})})),Zn.on(Vt.autoAuth,(()=>{if(!Fe.isInited())return;const e=ke.isStatus(ke.StatusType.LOGOUT);Zn.url&&e&&lr.login()})),er.on(Vt.autoAuth,(()=>{if(!Fe.isInited())return;if(!er.url)return;ke.isStatus(ke.StatusType.LOGOUT)&&lr.login();const e=ar.roomInfo||{routeId:""};(qe.isOffline()||qe.getRouteId()!==e.routeId)&&ar.checkLogin((e=>{e.code===Pe.EC_OK&&nr.ping()}),"autoAuth")})),Zn.connect("init sdk"),ze.onHide(ur.instance.onHide),ze.onShow(ur.instance.onShow),ur.instance.group=_r)}()}initRsp(e){return null}unInit(){Fe.isUnInit()||(Bn.stopQueueLoop(),tr&&tr.stop(),nr&&nr.stop(),ke.setStatus(ke.StatusType.LOGOUT),qe.setStatus(qe.StatusType.OFFLINE),Ye.setInfo({id:void 0}),Er(),Object.assign(Ge,JSON.parse(Ue)),Object.assign(Le,JSON.parse(be)),Object.assign(De,JSON.parse(we)),ur.instance=null)}isInited(){return Fe.isInited()}changeCustomPlayerStatus(e,t,n){const r=Object.assign({},e);return rr.changeCustomPlayerStatus(r,n)}changeRoomPlayerProfile(e,t,n){const r=Object.assign({},e);return rr.changeRoomPlayerProfile(r,n)}createRoom(e,t){return this.createTeamRoom(Object.assign({},e,{teamNumber:1}),t)}createTeamRoom(e,t){"object"!=typeof e&&(e={});const n=[];let r=(e=JSON.parse(JSON.stringify(e))).maxPlayers||0,i=e.teamNumber||0;if(r%i!=0){const e="";return t&&t({seq:e,code:Pe.EC_PARAMS_INVALID,msg:"参数错误，最大玩家数无法被队伍数量整除",data:null}),e}const o=Object.assign({},e.playerInfo,{id:De.playerId,commonNetworkState:void 0,relayNetworkState:void 0,teamId:void 0,isRobot:void 0,matchAttributes:void 0});if(delete e.teamNumber,!("number"==typeof r&&"number"==typeof i&&r>=i&&i>=1)){const e="";return t&&t({seq:"",code:Pe.EC_PARAMS_INVALID,msg:"参数错误，请检查最大玩家数量和队伍数量",data:null}),e}{r=Math.floor(r),i=Math.floor(i);const e=Math.floor(r/i);for(let t=0;t<i;t++){const s={id:t+"",maxPlayers:e,minPlayers:1,name:""};!o.teamId&&(o.teamId=s.id),t===i-1&&(s.maxPlayers=r-(i-1)*e),n.push(s)}}const s=Object.assign({},e,{playerList:void 0,owner:void 0,region:void 0,teamList:n,createType:Me.CreateRoomType.COMMON_CREATE,playerInfo:o});return ir.createRoom(s,t)}joinRoom(e,t,n){const r=Object.assign({},e,{teamId:"0",joinType:o.JoinRoomType.COMMON_JOIN,roomId:t,playerInfo:Object.assign({},e.playerInfo,{id:De.playerId,commonNetworkState:void 0,relayNetworkState:void 0,teamId:void 0,isRobot:void 0,matchAttributes:void 0})});return ir.joinRoom(r,n)}joinTeamRoom(e,t,n){const r=Object.assign({},e,{joinType:o.JoinRoomType.COMMON_JOIN,roomId:t,playerInfo:Object.assign({},e.playerInfo,{commonNetworkState:void 0,relayNetworkState:void 0,teamId:void 0,isRobot:void 0,matchAttributes:void 0,id:De.playerId})});return ir.joinRoom(r,n)}leaveRoom(e){return ir.leaveRoom({},e)}dismissRoom(e,t,n){const r={roomId:t};return ir.dismissRoom(r,n)}changeRoom(e,t,n){const r={changeRoomOptionList:[]};if(e.hasOwnProperty("roomName")&&r.changeRoomOptionList.push(o.ChangeRoomOption.ROOM_NAME),e.hasOwnProperty("owner")&&r.changeRoomOptionList.push(o.ChangeRoomOption.OWNER),e.hasOwnProperty("isPrivate")&&r.changeRoomOptionList.push(o.ChangeRoomOption.IS_PRIVATE),e.hasOwnProperty("customProperties")&&r.changeRoomOptionList.push(o.ChangeRoomOption.CUSTOM_PROPERTIES),e.hasOwnProperty("isForbidJoin")&&r.changeRoomOptionList.push(o.ChangeRoomOption.IS_FORBID_JOIN),0!==r.changeRoomOptionList.length)return ir.changeRoom(Object.assign({},e,r),n);{const e={code:o.QAppProtoErrCode.EC_OK,msg:"未修改房间信息",seq:"",data:t};n&&n(e)}}removePlayer(e,t){const n=Object.assign({},e);return ir.removeUser(n,t)}getRoomByRoomId(e,t){const n=Object.assign({},e);return ir.getRoomByRoomId(n,t)}getRoomList(e,t){const n=Object.assign({roomType:"",isDesc:!1},e,{gameId:Ge.gameId});return ir.getRoomList(n,t)}matchPlayers(e,t){const n=Object.assign({},e,{playerInfo:Object.assign({},e.playerInfo,{matchStatus:void 0,id:De.playerId,teamId:"",region:"",teamLeader:"",sdkVersion:void 0,groupId:void 0,teamType:void 0,requestId:void 0})});return or.matchUsersComplex(n,t)}matchGroup(e,t){const n=e.playerInfoList.map((e=>Object.assign({},e,{matchStatus:void 0,teamId:"",region:"",teamLeader:"",sdkVersion:void 0,groupId:void 0,teamType:void 0,requestId:void 0}))),r={matchCode:e.matchCode,playerInfoList:n};return or.matchGroup(r,t)}matchRoom(e,t){const n=Object.assign({},e,{playerInfo:Object.assign({},e.playerInfo,{commonNetworkState:void 0,relayNetworkState:void 0,teamId:void 0,isRobot:void 0,matchAttributes:void 0,id:De.playerId})});return or.matchRoom(n,t)}cancelMatch(e,t){const n=Object.assign({},e);return or.cancelMatch(n,t)}setFrameRoom(e){return!(!e||!Array.isArray(e.playerList)||e.playerList.findIndex((e=>e.id===De.playerId))<0||(ar.setFrameRoom(e),0))}startFrameSync(e){const t=ar.roomInfo;function n(t){e&&e(t)}if(!t)return st.log("STARTFRAMESYNC","fail at roomInfo === null"),n({code:ur.ErrCode.EC_SDK_NO_ROOM,msg:"无房间信息",seq:null});st.log("STARTFRAMESYNC",ar.roomInfo),st.log("STARTFRAMESYNC","socket2 isConnect",er.isConnect(),er.socketTask),ar.checkLogin((r=>{if(r.code===Pe.EC_OK){st.log("STARTFRAMESYNC","start");const n={roomId:t.id,gameId:Ge.gameId};return ar.startFrameSync(n,e)}return st.log("STARTFRAMESYNC","fail at CheckLogin, seq=",r.seq,", code=",r.code,t),n({code:ur.ErrCode.EC_SDK_NO_CHECK_LOGIN,msg:"CheckLogin失败。"+JSON.stringify(r),seq:null})}),"sdk startFrame")}stopFrameSync(e){const t={roomId:(ar.roomInfo||{id:void 0}).id,gameId:Ge.gameId};ar.stopFrameSync(t,(t=>e&&e(t)))}sendFrame(e,t){const n={roomId:(ar.roomInfo||{id:void 0}).id,item:{playerId:De.playerId,data:JSON.stringify(e.data),timestamp:Date.now()}};return ar.sendFrame(n,t)}requestFrame(e,t){const n=(ar.roomInfo||{id:void 0}).id;e.beginFrameId=Number(e.beginFrameId)||1,e.endFrameId=Number(e.endFrameId)||1;let r=e.beginFrameId,i=Math.min(r+1999,e.endFrameId),o=[];const s=a=>{if(0!==a.code)return t&&t(a);if(o=o.concat(a.data.frames),a.data.isPartial&&o.length>0){const e=o.length-1;i=o[e].id}return i<e.endFrameId?(r=i+1,i=Math.min(r+1999,e.endFrameId),ar.requestFrame({roomId:n,beginFrameId:r,endFrameId:i,supportPartial:!0},s)):(a.data.frames=o,delete a.data.isPartial,t&&t(a))};return ar.requestFrame({roomId:n,beginFrameId:r,endFrameId:i,supportPartial:!0},s)}sendToClient(e,t,n){if(0===e.recvPlayerList.length)return void(n&&n({code:this.ErrCode.EC_OK,data:null,seq:"",msg:""}));const r=Object.assign({},e,{roomId:t});return sr.sendMessage(r,n)}sendToGameSvr(e,t,n){const r=Object.assign({},e,{playerId:De.playerId,roomId:t,data:JSON.stringify(e.data)});return ar.sendMessageExt(r,n)}}ur.instance=null,ur.bstCallbacks=new class{constructor(){this.room=new zn,this.group=new $n}clearCallbacks(){this.room.clearCallbacks(),this.group.clearCallbacks()}onNetwork(e){this.room.onNetwork(e),this.group.onNetwork(e)}error(e){}},ur.ErrCode=Pe,ur.ENUM=Me;class hr{constructor(e){this.batch=[],this.isUpdating=!1,this.updateTime=0,this.clear(),this.bstUpdaterFunc=e}push(e){const t=Object.assign({},e,{isUpdating:!1});this.batch.push(t),Date.now()-this.updateTime>3e4&&(this.isUpdating=!1),!this.isUpdating&&this.update()}clear(){this.batch=[],this.isUpdating=!1,this.updateTime=Date.now()}update(){if(this.updateTime=Date.now(),this.isUpdating=!0,this.batch=this.batch.filter((e=>!e.isUpdating)),this.batch.forEach((e=>e.isUpdating=!0)),0===this.batch.length)return this.isUpdating=!1;this.bstUpdaterFunc(((e,t)=>this.trigger(e,t)))}trigger(e,t){this.isUpdating=!1,this.batch.forEach((n=>{n.isUpdating&&e&&t&&setTimeout((()=>{let r=!1;try{r=n.shouldItemUpdate(t)}catch(e){console.log(e)}r&&n.itemUpdater(e,t)}),0)})),this.batch=this.batch.filter((e=>!e.isUpdating)),this.batch.length>0&&setTimeout((()=>!this.isUpdating&&this.update()),500)}}class cr{constructor(e){this.group=e,this.bstUpdater=new hr((e=>{if(!this.group||!this.group.groupInfo||!this.group.groupInfo.id)return e(null,null);pr.getGroupByGroupId({groupId:this.group.groupInfo.id},(t=>t&&t.data&&t.data.groupInfo&&t.data.groupInfo.id?e(t.seq,t.data.groupInfo):e(null,null)))}))}onNetwork(e){this.group.onUpdate&&this.group.onUpdate(this.group)}onJoinGroup(e){this.matchGroupInfo(e)&&this.bstUpdater.push({bstSeq:e.seq,shouldItemUpdate:t=>t.id===e.data.groupInfo.id,itemUpdater:(t,n)=>{const r=e.data.joinPlayerId;n&&n.groupPlayerList&&n.groupPlayerList.find((e=>e.id===r))&&(e.seq+="_"+t,e.data=Object.assign({},e.data,{groupInfo:n}),this.saveAndInvoke("onJoinGroup",e))}})}onLeaveGroup(e){this.bstUpdater.clear(),this.saveAndInvoke("onLeaveGroup",e)}onDismissGroup(e){this.bstUpdater.clear(),this.matchGroupInfoAndInvoke("onDismissGroup",e,(()=>this.group.groupInfo={}))}onChangeGroup(e){this.matchGroupInfo(e)&&this.bstUpdater.push({bstSeq:e.seq,shouldItemUpdate:t=>t.id===e.data.groupInfo.id,itemUpdater:(t,n)=>{e.seq+="_"+t,e.data=Object.assign({},e.data,{groupInfo:n}),this.saveAndInvoke("onChangeGroup",e)}})}onRemoveGroupPlayer(e){this.matchGroupInfo(e)&&this.bstUpdater.push({bstSeq:e.seq,shouldItemUpdate:t=>t.id===e.data.groupInfo.id,itemUpdater:(t,n)=>{const r=e.data.removePlayerId;n&&n.groupPlayerList&&!n.groupPlayerList.find((e=>e.id===r))&&(e.seq+="_"+t,e.data=Object.assign({},e.data,{groupInfo:n}),this.saveAndInvoke("onRemoveGroupPlayer",e))}})}onChangeGroupPlayerNetworkState(e){const t=e.data.groupIdList,n=this.group.groupInfo.id;n&&(!Array.isArray(t)||t.length<=0||t.find((e=>e===n))&&this.bstUpdater.push({bstSeq:e.seq,shouldItemUpdate:e=>e.id===n,itemUpdater:(t,n)=>{const r=e.data.changePlayerId,i=n&&n.groupPlayerList&&n.groupPlayerList.find((e=>e.id===r));if(i){const o=i.commonGroupNetworkState,s={seq:e.seq+"_"+t,data:{networkState:o,changePlayerId:r,groupInfo:n}};this.saveAndInvoke("onChangeGroupPlayerNetworkState",s)}}}))}onChangeCustomGroupPlayerStatus(e){this.matchGroupInfo(e)&&this.bstUpdater.push({bstSeq:e.seq,shouldItemUpdate:t=>t.id===e.data.groupInfo.id,itemUpdater:(t,n)=>{const r=e.data.changePlayerId,i=n&&n.groupPlayerList&&n.groupPlayerList.find((e=>e.id===r));i&&(e.seq+="_"+t,e.data=Object.assign({},e.data,{customGroupPlayerStatus:i.customGroupPlayerStatus,groupInfo:n}),this.saveAndInvoke("onChangeCustomGroupPlayerStatus",e))}})}onChangeGroupPlayerProfile(e){this.matchGroupInfo(e)&&this.bstUpdater.push({bstSeq:e.seq,shouldItemUpdate:t=>t.id===e.data.groupInfo.id,itemUpdater:(t,n)=>{const r=e.data.changePlayerId,i=n&&n.groupPlayerList&&n.groupPlayerList.find((e=>e.id===r));i&&(e.seq+="_"+t,e.data=Object.assign({},e.data,{customProfile:i.customGroupPlayerProfile,groupInfo:n}),this.saveAndInvoke("onChangeGroupPlayerProfile",e))}})}onRecvFromGroupClient(e){this.matchIDAndInvoke("onRecvFromGroupClient",e)}matchGroupInfo(e){return this.group.groupInfo.id===e.data.groupInfo.id}matchID(e){return this.group.groupInfo.id===e.data.groupId}invoke(e,t){this.group[e]&&this.group[e].call(this.group,t)}saveAndInvoke(e,t){this.matchGroupInfo(t)&&(this.group.groupUtil.setGroupInfo(t.data.groupInfo),this.invoke(e,t))}matchIDAndInvoke(e,t,n){this.matchID(t)&&(n&&n(t),this.invoke(e,t))}matchGroupInfoAndInvoke(e,t,n){this.matchGroupInfo(t)&&(n&&n(t),this.invoke(e,t))}}class fr{constructor(e){this.group=e}setGroupInfo(e){!e&&(e={}),this.group.groupInfo=JSON.parse(JSON.stringify(e||{})),this.group.groupInfo.groupPlayerList=this.group.groupInfo.groupPlayerList||[],this.group.onUpdate&&this.group.onUpdate(this.group)}saveGroupInfo(e){e.code===o.QAppProtoErrCode.EC_OK&&this.setGroupInfo(e.data?e.data.groupInfo:null)}addGroupParam(){return{groupId:this.group.groupInfo.id||""}}initBroadcast(){this.group.groupBroadcast||(this.group.groupBroadcast=new cr(this.group))}}class pr extends class{}{constructor(e){super(),this.groupUtil=new fr(this),this.groupUtil.setGroupInfo(e||null)}initGroup(e){this.groupUtil.setGroupInfo(e)}onUpdate(e){}static getGroupByGroupId(e,t){t=pt(t),ur.instance.group.getGroupByGroupId(e,t)}static getMyGroups(e){e=pt(e),ur.instance.group.getMyGroups({},e)}createGroup(e,t){const n=Object.assign({},e,{playerInfo:Object.assign({},e.playerInfo,{id:De.playerId,commonGroupNetworkState:void 0})});ur.instance.group.createGroup(n,pt((e=>{this.groupUtil.saveGroupInfo(e),t&&t(e)})))}getGroupDetail(e){const t={groupId:this.groupInfo.id};ur.instance.group.getGroupByGroupId(t,pt((t=>{this.groupUtil.saveGroupInfo(t),e&&e(t)})))}joinGroup(e,t){const n=Object.assign({},e,{playerInfo:Object.assign({},e.playerInfo,{id:De.playerId,commonGroupNetworkState:void 0}),groupId:this.groupInfo.id});ur.instance.group.joinGroup(n,pt((e=>{this.groupUtil.saveGroupInfo(e),t&&t(e)})))}leaveGroup(e,t){const n={groupId:this.groupInfo.id};ur.instance.group.leaveGroup(n,pt((e=>{this.groupUtil.saveGroupInfo(e),t&&t(e)})))}dismissGroup(e,t){const n={groupId:this.groupInfo.id};ur.instance.group.dismissGroup(n,pt((e=>{e.code===o.QAppProtoErrCode.EC_OK&&this.groupUtil.setGroupInfo(null),t&&t(e)})))}changeGroup(e,t){const n=[];e.hasOwnProperty("groupName")&&n.push(o.ChangeGroupOption.GROUP_NAME),e.hasOwnProperty("owner")&&n.push(o.ChangeGroupOption.GROUP_OWNER),e.hasOwnProperty("customProperties")&&n.push(o.ChangeGroupOption.GROUP_CUSTOM_PROPERTIES),e.hasOwnProperty("isForbidJoin")&&n.push(o.ChangeGroupOption.GROUP_IS_FORBID_JOIN);const r=Object.assign({},e,{groupId:this.groupInfo.id,changeGroupOptionList:n});ur.instance.group.changeGroup(r,pt((e=>{this.groupUtil.saveGroupInfo(e),t&&t(e)})))}removeGroupPlayer(e,t){const n=Object.assign({},e,{groupId:this.groupInfo.id});ur.instance.group.removeGroupPlayer(n,pt((e=>{this.groupUtil.saveGroupInfo(e),t&&t(e)})))}changeCustomGroupPlayerStatus(e,t){const n=Object.assign({},e,{groupId:this.groupInfo.id});ur.instance.group.changeCustomGroupPlayerStatus(n,pt((e=>{this.groupUtil.saveGroupInfo(e),t&&t(e)})))}changeGroupPlayerProfile(e,t){const n=Object.assign({},e,{groupId:this.groupInfo.id});ur.instance.group.changeGroupPlayerProfile(n,pt((e=>{this.groupUtil.saveGroupInfo(e),t&&t(e)})))}sendToGroupClient(e,t){const n=Object.assign({},e,{groupId:this.groupInfo.id});ur.instance.group.sendToGroupClient(n,pt(t))}}class Rr{constructor(e,t){this.frameIdFill=0,this.frameIdSent=0,this.autoReqFrameErrTimes=0,this.lastFrameTime=0,this.beginFrameId=-1,this.endFrameId=-1,this.fillCache={},this.timer=new mr(e),this.callback=t}reset(e=0){this.timer.init(),this.frameIdSent=e,this.frameIdFill=e,this.lastFrameTime=0}push(e,t){const n=e.data.frame.id;1===n&&this.reset(),this.timer.push(n,Date.now());const r=this.frameIdSent,i=this.frameIdFill;return this.frameIdFill=n,Le.isAutoRequestFrame?n<=r+1?this.send(e):(this.fillCache[n]={endFrameId:n,data:[e.data.frame]},void(n>i+1&&this.fill(i+1,n-1,t))):this.send(e)}retryFill(e){this.beginFrameId===this.endFrameId&&this.beginFrameId<0||(this.autoReqFrameErrTimes=0,this.fill(this.beginFrameId,this.endFrameId,e))}send(e){const t=e.data.frame.id;if(t<=this.frameIdSent)return;e.data.frame.time=this.timer.time(t),this.frameIdSent=t,this.callback(e),!this.lastFrameTime&&(this.lastFrameTime=e.data.frame.time);const n=e.data.frame.time-this.lastFrameTime;0!==n&&mn.onFitFrameTime(n),Math.abs(n)>300&&!e.data.frame.isReplay&&(this.reset(t),this.timer.push(t,Date.now())),this.lastFrameTime=e.data.frame.time}fillSend(e){if(e<=this.frameIdSent+1&&this.fillCache[e]){const t=this.fillCache[e];delete this.fillCache[e],t.data.forEach((e=>this.send({data:{frame:e},seq:""}))),this.fillSend(t.endFrameId+1)}}fill(e,t,n){n.isInRoom()&&n.requestFrame({beginFrameId:e,endFrameId:t},(r=>{if(this.beginFrameId=e,this.endFrameId=t,r.code!==o.QAppProtoErrCode.EC_OK){if(this.autoReqFrameErrTimes++,this.autoReqFrameErrTimes<=5)return this.fill(e,t,n);n.onAutoRequestFrameError&&n.onAutoRequestFrameError({data:r,seq:""})}else this.beginFrameId=-1,this.endFrameId=-1,this.autoReqFrameErrTimes=0,this.fillCache[e]={endFrameId:t,data:r.data.frames.map((e=>Object.assign({},e,{roomId:n.roomInfo.id,isReplay:!0})))},this.fillSend(e)}))}}class mr{constructor(e){this._a1=e,this.init()}init(){this.n=0,this.S_xi=0,this.S_yi=0,this.S_xiyi=0,this.S_xixi=0}push(e,t){this.n++,this.S_xi+=e,this.S_yi+=t,this.S_xiyi+=e*t,this.S_xixi+=e*e}a0(e){return void 0===e&&(e=this.a1()),this.S_yi/this.n-this.a1()*this.S_xi/this.n}a1(){return(this.n*this.S_xiyi-this.S_xi*this.S_yi)/(this.n*this.S_xixi-this.S_xi*this.S_xi)}ap(){const e=this.a1();return{a0:this.a0(e),a1:e}}time(e){if(0===this.n)return 0;const t=this.n>=2?this.ap():{a0:this.S_yi-this.S_xi*this._a1,a1:this._a1};return Math.round(t.a0+e*t.a1)}}class gr{constructor(e){this.frameBroadcastFrameId=0,this.room=e,this.frameBroadcast=new Rr(this.room.roomInfo.frameRate?Math.floor(1e3/this.room.roomInfo.frameRate):66,(e=>{e&&e.data&&e.data.frame&&e.data.frame.items&&e.data.frame.items.forEach((e=>e.data="object"==typeof e.data?e.data:JSON.parse(e.data))),this.matchFrameBstAndInvoke("onRecvFrame",e)})),this.bstUpdater=new hr((e=>{if(!this.room||!this.room.roomInfo||!this.room.roomInfo.id)return e(null,null);Cr.getRoomByRoomId({roomId:this.room.roomInfo.id},(t=>t&&t.data&&t.data.roomInfo&&t.data.roomInfo.id?e(t.seq,t.data.roomInfo):e(null,null)))}))}onNetwork(e){this.room.onUpdate&&this.room.onUpdate(this.room)}onJoinRoom(e){this.matchRoomInfo(e)&&this.bstUpdater.push({bstSeq:e.seq,shouldItemUpdate:t=>t.id===e.data.roomInfo.id,itemUpdater:(t,n)=>{const r=e.data.joinPlayerId;n&&n.playerList&&n.playerList.find((e=>e.id===r))&&(e.seq+="_"+t,e.data=Object.assign({},e.data,{roomInfo:n}),this.saveAndInvoke("onJoinRoom",e))}})}onLeaveRoom(e){this.bstUpdater.clear(),this.saveAndInvoke("onLeaveRoom",e)}onDismissRoom(e){this.bstUpdater.clear(),this.matchRoomInfoAndInvoke("onDismissRoom",e,(()=>this.room.roomInfo={}))}onChangeRoom(e){this.matchRoomInfo(e)&&this.bstUpdater.push({bstSeq:e.seq,shouldItemUpdate:t=>t.id===e.data.roomInfo.id,itemUpdater:(t,n)=>{e.seq+="_"+t,e.data=Object.assign({},e.data,{roomInfo:n}),this.saveAndInvoke("onChangeRoom",e)}})}onRemovePlayer(e){this.matchRoomInfo(e)&&this.bstUpdater.push({bstSeq:e.seq,shouldItemUpdate:t=>t.id===e.data.roomInfo.id,itemUpdater:(t,n)=>{const r=e.data.removePlayerId;n&&n.playerList&&!n.playerList.find((e=>e.id===r))&&(e.seq+="_"+t,e.data=Object.assign({},e.data,{roomInfo:n}),this.saveAndInvoke("onRemovePlayer",e))}})}onRecvFromClient(e){this.matchIDAndInvoke("onRecvFromClient",e)}onRecvFromGameSvr(e){this.matchIDAndInvoke("onRecvFromGameSvr",e,null)}onMatchPlayers(e){this.room.roomUtil.setRoomInfo(e.data.roomInfo),e.data.roomInfo&&e.data.roomInfo.playerList&&e.data.roomInfo.playerList.find((e=>Or.isMe(e.id)))&&this.room.roomUtil.activeFrame();const t=e.data.matchType;yr.once(t,{code:o.QAppProtoErrCode.EC_OK,msg:"",seq:"",data:e.data})}onMatchTimeout(e){const t=e.data.matchType,n=e.data.errCode||o.QAppProtoErrCode.EC_MATCH_TIMEOUT,{errCode:r,errMsg:i}=ft(n,"");yr.once(t,{code:r,msg:i,seq:"",data:{}})}onChangePlayerNetworkState(e){this.matchRoomInfo(e)&&this.bstUpdater.push({bstSeq:e.seq,shouldItemUpdate:t=>t.id===e.data.roomInfo.id,itemUpdater:(t,n)=>{const r=e.data.changePlayerId,i=n&&n.playerList&&n.playerList.find((e=>e.id===r));if(i){e.seq+="_"+t;const r=[Me.NetworkState.COMMON_OFFLINE,Me.NetworkState.COMMON_ONLINE].includes(e.data.networkState)?i.commonNetworkState:i.relayNetworkState;e.data=Object.assign({},e.data,{networkState:r,roomInfo:n}),this.saveAndInvoke("onChangePlayerNetworkState",e)}}})}onChangeCustomPlayerStatus(e){this.matchRoomInfo(e)&&this.bstUpdater.push({bstSeq:e.seq,shouldItemUpdate:t=>t.id===e.data.roomInfo.id,itemUpdater:(t,n)=>{const r=e.data.changePlayerId,i=n&&n.playerList&&n.playerList.find((e=>e.id===r));i&&(e.seq+="_"+t,e.data=Object.assign({},e.data,{customPlayerStatus:i.customPlayerStatus,roomInfo:n}),this.saveAndInvoke("onChangeCustomPlayerStatus",e))}})}onChangeRoomPlayerProfile(e){this.matchRoomInfo(e)&&this.bstUpdater.push({bstSeq:e.seq,shouldItemUpdate:t=>t.id===e.data.roomInfo.id,itemUpdater:(t,n)=>{const r=e.data.changePlayerId,i=n&&n.playerList&&n.playerList.find((e=>e.id===r));i&&(e.seq+="_"+t,e.data=Object.assign({},e.data,{customProfile:i.customProfile,roomInfo:n}),this.saveAndInvoke("onChangeRoomPlayerProfile",e))}})}onStartFrameSync(e){this.frameBroadcast.reset(),this.matchRoomInfo(e)&&this.bstUpdater.push({bstSeq:e.seq,shouldItemUpdate:t=>t.id===e.data.roomInfo.id,itemUpdater:(t,n)=>{e.seq+="_"+t,e.data=Object.assign({},e.data,{roomInfo:n}),this.saveAndInvoke("onStartFrameSync",e)}})}onStopFrameSync(e){this.matchRoomInfo(e)&&this.bstUpdater.push({bstSeq:e.seq,shouldItemUpdate:t=>t.id===e.data.roomInfo.id,itemUpdater:(t,n)=>{e.seq+="_"+t,e.data=Object.assign({},e.data,{roomInfo:n}),this.frameBroadcast.reset(),this.saveAndInvoke("onStopFrameSync",e)}})}onRecvFrame(e){this.room.roomInfo.frameSyncState!==o.FrameSyncState.STOP&&this.frameBroadcast.push(e,this.room)}frameBroadcastFrameIdReset(e=0){return this.frameBroadcast.reset(e)}matchRoomInfo(e){return this.room.roomInfo.id===e.data.roomInfo.id}matchID(e){return this.room.roomInfo.id===e.data.roomId}invoke(e,t){this.room[e]&&this.room[e].call(this.room,t)}saveAndInvoke(e,t){this.matchRoomInfo(t)&&(this.room.roomUtil.setRoomInfo(t.data.roomInfo),this.invoke(e,t))}matchFrameBstAndInvoke(e,t,n){this.matchID({data:t.data.frame,seq:""})&&(n&&n(t),this.invoke(e,t))}matchIDAndInvoke(e,t,n){this.matchID(t)&&(n&&n(t),this.invoke(e,t))}matchRoomInfoAndInvoke(e,t,n){this.matchRoomInfo(t)&&(n&&n(t),this.invoke(e,t))}}const yr=new class{constructor(){this.callbacks={}}push(e,t){!this.callbacks[e]&&(this.callbacks[e]=[]),this.callbacks[e].push(t)}once(e,t){(this.callbacks[e]||[]).forEach((e=>e&&e(t))),this.removeCallbacksByTag(e)}removeCallbacksByTag(e){e&&this.callbacks[e]&&delete this.callbacks[e]}},Sr=new class{onMatchPlayers(e){const t={data:{roomInfo:e.data.roomInfo,errCode:Pe.EC_OK},seq:e.seq};Cr.onMatch&&Cr.onMatch(t)}onMatchTimeout(e){const t={data:{roomInfo:null,errCode:e.data.errCode},seq:e.seq};Cr.onMatch&&Cr.onMatch(t)}onCancelMatch(e){const t={data:{matchCode:e.data.matchCode,playerId:e.data.playerId},seq:e.seq};Cr.onCancelMatch&&Cr.onCancelMatch(t)}};class Ir{constructor(e){this.room=e}setRoomInfo(e){!e&&(e={});const t=JSON.parse(JSON.stringify(this.room.roomInfo||{}));this.room.roomInfo=JSON.parse(JSON.stringify(e||{})),this.room.roomInfo.playerList=this.room.roomInfo.playerList||[],this.room.isInRoom()&&Ye.setInfo(this.room.roomInfo.playerList.find((e=>e.id===De.playerId))),t.id===this.room.roomInfo.id&&this.room.roomInfo.id&&this.room.isInRoom()&&t.startGameTime===this.room.roomInfo.startGameTime||this.room.roomBroadcast&&this.room.roomBroadcast.frameBroadcastFrameIdReset(),this.room.roomInfo&&Array.isArray(this.room.roomInfo.playerList)&&this.room.roomInfo.playerList.find((e=>Or.isMe(e.id)))&&this.activeFrame(),this.room.onUpdate&&this.room.onUpdate(this.room)}saveRoomInfo(e){e.code===o.QAppProtoErrCode.EC_OK&&this.setRoomInfo(e.data?e.data.roomInfo:null)}setParam(e){this.room.roomInfo.id&&(e.roomId=this.room.roomInfo.id)}addRoomParam(){return{roomId:this.room.roomInfo.id||""}}initBroadcast(){this.room.roomBroadcast||(this.room.roomBroadcast=new gr(this.room))}activeFrame(){return ur.instance.setFrameRoom(this.room.roomInfo)}}class Cr extends class{}{constructor(e){super(),this.roomUtil=new Ir(this),this.roomUtil.setRoomInfo(e||null)}static getRoomList(e,t){ur.instance.getRoomList(e,pt(t))}static getRoomByRoomId(e,t){ur.instance.getRoomByRoomId(e,pt(t))}static getMyRoom(e){ur.instance.getRoomByRoomId({roomId:""},pt(e))}isInRoom(){return!!this.roomInfo.playerList.find((e=>e.id===De.playerId))}initRoom(e){this.roomUtil.setRoomInfo(e);let t=e;t&&t.id&&t.routeId&&Array.isArray(t.playerList)&&t.playerList.find((e=>e.id&&Or.isMe(e.id)))&&this.roomUtil.activeFrame()}onUpdate(e){}get networkState(){let e=!1,t=!1;const n=ur.instance.getSocket(o.ConnectionType.COMMON),r=ur.instance.getSocket(o.ConnectionType.RELAY);return{COMMON:e=!(!n||!n.isConnect()),RELAY:t=!(!r||!r.isConnect())}}createRoom(e,t){ur.instance.createRoom(e,pt((e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)})))}createTeamRoom(e,t){ur.instance.createTeamRoom(e,pt((e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)})))}joinRoom(e,t){ur.instance.joinRoom(Object.assign({},e),this.roomInfo.id,pt((e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)})))}joinTeamRoom(e,t){ur.instance.joinTeamRoom(Object.assign({},e),this.roomInfo.id,pt((e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)})))}leaveRoom(e,t){this.roomUtil.setParam(e),ur.instance.leaveRoom(pt((e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)})))}dismissRoom(e,t){ur.instance.dismissRoom(e,this.roomInfo.id,pt((e=>{e.code===o.QAppProtoErrCode.EC_OK&&this.roomUtil.setRoomInfo(null),t&&t(e)})))}changeRoom(e,t){ur.instance.changeRoom(e,this.roomInfo,pt((e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)})))}changeCustomPlayerStatus(e,t){ur.instance.changeCustomPlayerStatus(Object.assign({},e),this.roomInfo.id,pt((e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)})))}changeRoomPlayerProfile(e,t){ur.instance.changeRoomPlayerProfile(Object.assign({},e),this.roomInfo.id,pt((e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)})))}removePlayer(e,t){ur.instance.removePlayer(e,pt((e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)})))}getRoomDetail(e){ur.instance.getRoomByRoomId(Object.assign({},this.roomUtil.addRoomParam()),pt((t=>{this.roomUtil.saveRoomInfo(t),e&&e(t)})))}matchPlayers(e,t){let n=t;st.log("typeof_Room.onMatch",typeof Cr.onMatch),"function"!=typeof Cr.onMatch&&(yr.push(o.MatchType.PLAYER_COMPLEX,t),n=e=>{if(e.code!==o.QAppProtoErrCode.EC_OK)return e.data=null,yr.once(o.MatchType.PLAYER_COMPLEX,e)}),ur.instance.matchPlayers(e,pt(n))}matchGroup(e,t){ur.instance.matchGroup(e,pt(t))}matchRoom(e,t){ur.instance.matchRoom(e,pt((e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)})))}cancelPlayerMatch(e,t){let n=t;e.matchType===Me.MatchType.PLAYER_COMPLEX&&(n=n=>{n.code===Pe.EC_OK&&yr.removeCallbacksByTag(e.matchType),t&&t(n)}),ur.instance.cancelMatch(e,pt(n))}startFrameSync(e,t){this.roomUtil.activeFrame(),ur.instance.startFrameSync(pt(t))}stopFrameSync(e,t){this.roomUtil.activeFrame(),ur.instance.stopFrameSync(pt(t))}sendFrame(e,t){this.roomUtil.activeFrame(),ur.instance.sendFrame(e,pt(t))}requestFrame(e,t){this.roomUtil.activeFrame(),ur.instance.requestFrame(e,pt((e=>{e&&e.data&&e.data.frames&&e.data.frames.forEach((e=>{e.items.forEach((e=>{e.data="object"==typeof e.data?e.data:JSON.parse(e.data)}))})),t&&t(e)})))}retryAutoRequestFrame(){this.roomBroadcast.frameBroadcast.retryFill(this)}sendToClient(e,t){let n=e.recvPlayerList||[];e.recvType===Me.RecvType.ROOM_ALL?n=this.roomInfo.playerList.map((e=>e.id)):e.recvType===Me.RecvType.ROOM_OTHERS&&(n=this.roomInfo.playerList.filter((e=>e.id!==De.playerId)).map((e=>e.id)));const r={recvType:void 0,recvPlayerList:n,msg:e.msg};ur.instance.sendToClient(r,this.roomInfo.id,pt(t))}sendToGameSvr(e,t){this.roomUtil.activeFrame(),ur.instance.sendToGameSvr(e,this.roomInfo.id,pt(t))}}class Or{static isMe(e){return De.playerId===e}static get isInited(){return!!ur.instance&&ur.instance.isInited()}static init(e,t,n){ur.instance=new ur(e,t),ur.instance.init(pt(n)),ur.bstCallbacks.room.bindCallbacks(Sr)}static add(e){if(e instanceof Cr){const t=e;return t.roomUtil.initBroadcast(),void ur.bstCallbacks.room.bindCallbacks(t.roomBroadcast)}if(e instanceof pr){const t=e;return t.groupUtil.initBroadcast(),void ur.bstCallbacks.group.bindCallbacks(t.groupBroadcast)}}static remove(e){if(e instanceof Cr){const t=e;ur.bstCallbacks.room.unbindCallbacks(t.roomBroadcast)}else if(e instanceof pr){const t=e;ur.bstCallbacks.group.unbindCallbacks(t.groupBroadcast)}}static clear(){ur.bstCallbacks.room.clearCallbacks(),ur.bstCallbacks.room.bindCallbacks(Sr),ur.bstCallbacks.group.clearCallbacks()}}let Tr=0;const Ar=Math.pow(2,32)-1;var Pr={init(e){Tr=e},random(){const e=(1103515245*Tr+123456789)%Ar;return Tr=e,e/Ar}};class Mr{}Mr.Listener=null,Mr.Room=null,Mr.Group=null,Mr.ENUM=null,Mr.ErrCode=null,Mr.RandomUtil=null,Mr.DebuggerLog=null,Mr.Player=null,Mr.StatCallbacks=null,Mr.Listener=Or,Mr.Room=Cr,Mr.Group=pr,Mr.ENUM=Me,Mr.ErrCode=Pe,Mr.RandomUtil=Pr,Mr.DebuggerLog=st,Mr.Player=gn,Mr.StatCallbacks=mn,(ze.root||{}).MGOBE=Mr,Mr.types=Me,Mr.Adapter={channel:$e,platform:Ze},t.default=Mr}]).default},"object"==typeof t&&"object"==typeof o?o.exports=_():"function"==typeof define&&define.amd?define([],_):"object"==typeof t?t.MGOBE=_():_(),r=e("default",o.exports)}));e("__cjsMetaURL",t.meta.url)}}}));

System.register("chunks:///_virtual/BuildTimeConstants.ts",["cc","./env"],(function(t){"use strict";var e,n;return{setters:[function(t){e=t.cclegacy},function(t){n=t}],execute:function(){e._RF.push({},"8be0eYvws9BSaUIEg+VLZfj","BuildTimeConstants",void 0);const s=Object.keys(n).sort();t("BuildTimeConstants",class{constructor(){const t=s.reduce(((t,e)=>Math.max(t,e.length)),0);var e=`${s.map((e=>{const s=n[e],c="boolean"==typeof s?s?"true":"false":s;return`\n${e.padStart(t," ")} : ${c}`}))}`;console.log(e)}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/MathUtil.ts",["cc"],(function(t){"use strict";var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"8c615ZS4PRMPKPA9ZqKjiJC","MathUtil",void 0);class a{static sign(t){return t>0?1:t<0?-1:0}static progress(t,r,a){return t+(r-t)*a}static lerp(t,r,a){return a>1?a=1:a<0&&(a=0),t*(1-a)+r*a}static lerpAngle(t,r,e){var s=(r%=360)-(t%=360);return s>180?r=t-(360-s):s<-180&&(r=t+(360+s)),(a.lerp(t,r,e)%360+360)%360}static angleTowards(t,r,a){var e=(r%=360)-(t%=360);e>180?r=t-(360-e):e<-180&&(r=t+(360+e));var s=r-t;return a>Math.abs(s)?r:((t+a*Math.sign(s))%360+360)%360}static clamp(t,r,a){return t<r?r:t>a?a:t}static probability(t){return Math.random()<t}}t("MathUtil",a),a.deg2Rad=Math.PI/180,a.rad2Deg=180/Math.PI,r._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonSimple.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(t){"use strict";var o,e,i,n,s,r,u;return{setters:[function(t){o=t.cclegacy,e=t._decorator,i=t.Component,n=t.Node,s=t.game},function(t){r=t.applyDecoratedDescriptor,u=t.initializerDefineProperty}],execute:function(){var h,c,p,a,l,T,d,f;o._RF.push({},"8d645yObX1FvJfk2sbi0rxp","ButtonSimple",void 0);const{ccclass:E,property:m,menu:v}=e;t("default",(h=E("ButtonSimple"),c=v("ui/button/ButtonSimple"),p=m({tooltip:"是否只能触发一次"}),a=m({tooltip:"每次触发间隔"}),h(l=c((d=r((T=class extends i{constructor(...t){super(...t),u(this,"once",d,this),u(this,"interval",f,this),this.touchCount=0,this.touchtEndTime=0}onLoad(){this.node.on(n.EventType.TOUCH_START,this.onTouchtStart,this),this.node.on(n.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(n.EventType.TOUCH_CANCEL,this.onTouchEnd,this)}onTouchtStart(t){}onTouchEnd(t){if(this.once){if(this.touchCount>0)return void(t.propagationStopped=!0);this.touchCount++}this.touchtEndTime&&s.totalTime-this.touchtEndTime<this.interval?t.propagationStopped=!0:this.touchtEndTime=s.totalTime}onDestroy(){this.node.off(n.EventType.TOUCH_START,this.onTouchtStart,this),this.node.off(n.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(n.EventType.TOUCH_CANCEL,this.onTouchEnd,this)}}).prototype,"once",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=r(T.prototype,"interval",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 500}}),l=T))||l)||l));o._RF.pop()}}}));

System.register("chunks:///_virtual/Selector.ts",["cc","./BranchNode.ts"],(function(s){"use strict";var t,c;return{setters:[function(s){t=s.cclegacy},function(s){c=s.BranchNode}],execute:function(){t._RF.push({},"90470XqT/FGHo/PRQktLcYy","Selector",void 0);s("Selector",class extends c{_run(s){this._nodeRunning?this._nodeRunning.run(this._blackboard):super._run()}success(){super.success(),this._control.success()}fail(){super.fail(),this._actualTask+=1,this._actualTask<this.children.length?this._run(this._blackboard):this._control.fail()}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/Root.ts",["cc","./MessageManager.ts","./_rollupPluginModLoBabelHelpers.js","./Oops.ts","./TimerManager.ts","./GUI.ts","./LayerManager.ts","./Config.ts","./RootSystem.ts","./AudioManager.ts","./EngineMessage.ts","./GameManager.ts","./Language.ts","./HttpRequest.ts"],(function(e){"use strict";var t,n,i,a,o,s,r,u,c,g,l,p,m,d,E,f,h,M,v,y,R,_,b;return{setters:[function(e){t=e.cclegacy,n=e.Node,i=e._decorator,a=e.Component,o=e.game,s=e.Game,r=e.log,u=e.director,c=e.view},function(e){g=e.Message},function(e){l=e.applyDecoratedDescriptor,p=e.initializerDefineProperty},function(e){m=e.oops},function(e){d=e.TimerManager},function(e){E=e.GUI},function(e){f=e.LayerManager},function(e){h=e.config},function(e){M=e.RootSystem},function(e){v=e.AudioManager},function(e){y=e.EngineMessage},function(e){R=e.GameManager},function(e){_=e.LanguageManager},function(e){b=e.HttpRequest}],execute:function(){var G,w,T,A,H,C,I;t._RF.push({},"90b9cOmlmBCnpCpEpgvdrQr","Root",void 0);const{ccclass:L,property:N}=i;e("Root",(G=L("Root"),w=N({type:n,tooltip:"游戏层"}),T=N({type:n,tooltip:"界面层"}),G((C=l((H=class extends a{constructor(...e){super(...e),p(this,"game",C,this),p(this,"gui",I,this)}onLoad(){this.init(),h.init(this.run.bind(this))}init(){var e;m.language=new _,m.timer=new d(this),m.audio=v.instance,m.http=new b,m.gui=new f(this.gui),m.game=new R(this.game),this.ecs=new M,this.ecs.init(),o.on(s.EVENT_SHOW,(()=>{r("Game.EVENT_SHOW"),m.timer.load(),m.audio.resumeAll(),u.resume(),o.resume(),g.dispatchEvent(y.GAME_ENTER)})),o.on(s.EVENT_HIDE,(()=>{r("Game.EVENT_HIDE"),m.timer.save(),m.audio.pauseAll(),u.pause(),o.pause(),g.dispatchEvent(y.GAME_EXIT)}));var t=null===(e=this.gui)||void 0===e?void 0:e.addComponent(E);c.setResizeCallback((()=>{t.resize(),g.dispatchEvent(y.GAME_RESIZE)}))}update(e){this.ecs.execute(e)}run(){}}).prototype,"game",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=l(H.prototype,"gui",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=H))||A));t._RF.pop()}}}));

System.register("chunks:///_virtual/RoleTableLevelUp.ts",["cc","./JsonUtil.ts"],(function(e){"use strict";var t,s;return{setters:[function(e){t=e.cclegacy},function(e){s=e.JsonUtil}],execute:function(){t._RF.push({},"90df81v5SdDW7InkkLK6XqG","RoleTableLevelUp",void 0);class n{constructor(){this.key=0}init(e){var t=s.get(n.TableName);0==e?e=1:e>100&&(e=100),this.data=t[e],this.key=e}get needexp(){return this.data.needexp}get hp(){return this.data.hp}}e("RoleTableLevelUp",n),n.TableName="herolvup",t._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingViewComp.ts",["cc","./ECS.ts","./ResLoader.ts","./Oops.ts","./GameUIConfig.ts","./GameEvent.ts","./JsonUtil.ts","./RoleModelJobComp.ts","./RoleTableLevelUp.ts","./Account.ts","./SingletonModuleComp.ts","./CCVMParentComp.ts"],(function(t){"use strict";var e,o,s,a,n,i,r,c,l,d,g,u,p,m;return{setters:[function(t){e=t.cclegacy,o=t._decorator,s=t.sys},function(t){a=t.ecs},function(t){n=t.resLoader},function(t){i=t.oops},function(t){r=t.UIID},function(t){c=t.GameEvent},function(t){l=t.JsonUtil},function(t){d=t.RoleModelJobComp},function(t){g=t.RoleTableLevelUp},function(t){u=t.Account},function(t){p=t.smc},function(t){m=t.CCVMParentComp}],execute:function(){var h;e._RF.push({},"92429ykTnxFCrcGyW58JWjj","LoadingViewComp",void 0);const{ccclass:C,property:f}=o;t("LoadingViewComp",C("LoadingViewComp")(h=a.register("LoadingView",!1)(h=class t extends m{constructor(...t){super(...t),this.data={finished:0,total:0,progress:"",prompt:""},this.progress=0}reset(){this.data.prompt=i.language.getLangByID("loading_load_player"),i.gui.remove(r.Loading),n.releaseDir("loading"),i.gui.open(r.Demo)}start(){s.isNative||this.enter()}enter(){this.addEvent(),this.loadRes()}addEvent(){this.on(c.LoginSuccess,this.onHandler,this)}onHandler(e,o){switch(e){case c.LoginSuccess:this.ent.remove(t)}}async loadRes(){this.data.progress=0,await this.loadCustom(),this.loadGameRes()}loadCustom(){return this.data.prompt=i.language.getLangByID("loading_load_json"),new Promise((async(t,e)=>{await l.loadAsync(d.TableName),await l.loadAsync(g.TableName),t(null)}))}loadGameRes(){this.data.prompt=i.language.getLangByID("loading_load_game"),n.loadDir("game",this.onProgressCallback.bind(this),this.onCompleteCallback.bind(this))}onProgressCallback(t,e,o){this.data.finished=t,this.data.total=e;var s=t/e;s>this.progress&&(this.progress=s,this.data.progress=(100*s).toFixed(2))}onCompleteCallback(){p.account=a.getEntity(u),p.account.connect()}})||h)||h);e._RF.pop()}}}));

System.register("chunks:///_virtual/GUI.ts",["cc","./Logger.ts"],(function(t){"use strict";var e,i,s,n,r,o,h,c,a;return{setters:[function(t){e=t.cclegacy,i=t.Component,s=t.UITransform,n=t.Camera,r=t.view,o=t.screen,h=t.ResolutionPolicy,c=t._decorator},function(t){a=t.Logger}],execute:function(){var g;e._RF.push({},"9461cd/dGNEGK5I5J24xY6L","GUI",void 0);const{ccclass:u,menu:d}=c;t("GUI",u("GUI")(g=class extends i{onLoad(){this.init()}init(){this.transform=this.getComponent(s),this.camera=this.getComponentInChildren(n),this.resize()}resize(){let t=r.getDesignResolutionSize();var e=o.windowSize,i=e.width,s=e.height,n=i,c=s;i/s>t.width/t.height?(n=(c=t.height)*i/s,this.portrait=!1):(c=(n=t.width)*s/i,this.portrait=!0),r.setDesignResolutionSize(n,c,h.UNKNOWN),this.transform.width=n,this.transform.height=c,a.trace(t,"设计尺寸"),a.trace(e,"屏幕尺寸")}})||g);e._RF.pop()}}}));

System.register("chunks:///_virtual/Task.ts",["cc","./BTreeNode.ts"],(function(e){"use strict";var s,t;return{setters:[function(e){s=e.cclegacy},function(e){t=e.BTreeNode}],execute:function(){s._RF.push({},"95087QhEU1G1LWnM2D7haTQ","Task",void 0);e("Task",class extends t{run(e){}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingIndicator.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(t){"use strict";var o,i,e,n,r,a;return{setters:[function(t){o=t.cclegacy,i=t.Node,e=t._decorator,n=t.Component},function(t){r=t.applyDecoratedDescriptor,a=t.initializerDefineProperty}],execute:function(){var s,c,l,d,u,p;o._RF.push({},"95143M/82NCOLKGzw14JlmS","LoadingIndicator",void 0);const{ccclass:g,property:h,menu:_}=e;t("default",(s=g("LoadingIndicator"),c=_("ui/prompt/LoadingIndicator"),l=h(i),s(d=c((p=r((u=class extends n{constructor(...t){super(...t),a(this,"loading",p,this),this.loading_rotate=0}update(t){this.loading_rotate+=220*t,this.loading.setRotationFromEuler(0,0,-this.loading_rotate%360),this.loading_rotate>360&&(this.loading_rotate-=360)}}).prototype,"loading",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=u))||d)||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/CameraUtil.ts",["cc"],(function(t){"use strict";var e,r,i;return{setters:[function(t){e=t.cclegacy,r=t.Vec3,i=t.view}],execute:function(){e._RF.push({},"95c77QQpp1EjKj8UBFCCdKu","CameraUtil",void 0);t("CameraUtil",class{static isInView(t,e){var c=t.node.getWorldPosition(),n=t.worldToScreen(e),o=r.normalize(new r,e.subtract(c)),s=t.node.forward,a=r.dot(s,o);const u=i.getViewportRect();return a>0&&n.x<=u.width&&n.x>=0&&n.y<=u.height&&n.y>=0}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/index.ts",["cc","./BTreeNode.ts","./BehaviorTree.ts","./Decorator.ts","./BranchNode.ts","./Sequence.ts","./Selector.ts","./Task.ts","./Priority.ts"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy},function(t){e("BTreeNode",t.BTreeNode)},function(t){e("BehaviorTree",t.BehaviorTree)},function(t){e("Decorator",t.Decorator)},function(t){e("BranchNode",t.BranchNode)},function(t){e("Sequence",t.Sequence)},function(t){e("Selector",t.Selector)},function(t){e("Task",t.Task)},function(t){e("Priority",t.Priority)}],execute:function(){t._RF.push({},"96257XYurdITbWhyEf7Qlbn","index",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/GameQueryConfig.ts",["cc","./Logger.ts","./TimerManager.ts","./UrlParse.ts"],(function(t){"use strict";var e,r,a,n,s;return{setters:[function(t){e=t.cclegacy,r=t.warn},function(t){a=t.Logger},function(t){n=t.guid},function(t){s=t.UrlParse}],execute:function(){e._RF.push({},"966caeQ0xJF6KTO9PY5s05M","GameQueryConfig",void 0);t("GameQueryConfig",class{get username(){return this._data.username}get lang(){return this._data.lang||"zh"}get ip(){return this._data.ip||""}get port(){return this._data.port}get debug(){return this._data.debug}getConfigServerInfo(){let t={ips:[],ssl:!1,port:0};return this.port&&(t.port=parseInt(this.port)),t.ips.length<1&&r("请在地址栏输入游戏服务器ip"),t.port<1&&r("请在地址栏输入端口号"),t}get data(){return this._data}constructor(){this._data=null;let t=(new s).query;t&&(t.username||(t.username=n()),this._data=Object.freeze(t),a.logConfig(this._data,"查询参数"))}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorSpine.ts",["cc","./AnimatorBase.ts"],(function(e){"use strict";var t,i,s,n;return{setters:[function(e){t=e.cclegacy,i=e.sp,s=e._decorator},function(e){n=e.default}],execute:function(){var a;t._RF.push({},"9c3fcPlHadKM5UhJurQy+S9","AnimatorSpine",void 0);const{ccclass:o,property:r,requireComponent:l,disallowMultiple:h}=s;e("default",o(a=h(a=l(i.Skeleton)(a=class extends n{constructor(...e){super(...e),this._spine=null,this._completeListenerMap=new Map,this._secondaryListenerMap=new Map}start(){this.PlayOnStart&&!this._hasInit&&(this._hasInit=!0,this._spine=this.getComponent(i.Skeleton),this._spine.setEventListener(this.onSpineEvent.bind(this)),this._spine.setCompleteListener(this.onSpineComplete.bind(this)),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))}onInit(...e){this.PlayOnStart||this._hasInit||(this._hasInit=!0,this.initArgs(...e),this._spine=this.getComponent(i.Skeleton),this._spine.setEventListener(this.onSpineEvent.bind(this)),this._spine.setCompleteListener(this.onSpineComplete.bind(this)),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))}getBone(e){return this._spine.findBone(e)}onSpineEvent(e,t){var i,s=e.animation?t.data.name:"";null===(i=this._animationPlayer)||void 0===i||i.onFrameEventCallback(s,this)}onSpineComplete(e){0===e.trackIndex&&this.onAnimFinished(),this._completeListenerMap.forEach(((t,i)=>{t?i.call(t,e):i(e)})),this._secondaryListenerMap.forEach(((t,i)=>{e.trackIndex===t.TrackIndex&&i.call(t,e)}))}playAnimation(e,t){e?this._spine.setAnimation(0,e,t):this._spine.clearTrack(0)}scaleTime(e){e>0&&(this._spine.timeScale=e)}addSecondaryListener(e,t){this._secondaryListenerMap.set(e,t)}addCompleteListener(e,t=null){this._completeListenerMap.has(e)||this._completeListenerMap.set(e,t)}removeCompleteListener(e){this._completeListenerMap.delete(e)}clearCompleteListener(){this._completeListenerMap.clear}})||a)||a)||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorCustomization.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./AnimatorBase.ts"],(function(t){"use strict";var i,n,a,e,s;return{setters:[function(t){i=t.cclegacy,n=t._decorator},function(t){a=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){s=t.default}],execute:function(){var r,o,l,c,u;i._RF.push({},"9d3fcXSjFhO4pEiUiG4AA2L","AnimatorCustomization",void 0);const{ccclass:m,property:p,menu:h,disallowMultiple:y}=n;t("default",(r=h("animator/AnimatorCustomization"),o=p({override:!0,visible:!1}),m(l=y(l=r((u=a((c=class extends s{constructor(...t){super(...t),e(this,"PlayOnStart",u,this)}onInit(...t){this._hasInit||(this._hasInit=!0,this.initArgs(...t),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))}playAnimation(t,i){this._animationPlayer&&t&&this._animationPlayer.playAnimation(t,i)}scaleTime(t){this._animationPlayer&&this._animationPlayer.scaleTime(t)}}).prototype,"PlayOnStart",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=c))||l)||l)||l));i._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorDragonBones.ts",["cc"],(function(){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"9e2b3/8sc1LHrvyVdgolbVC","AnimatorDragonBones",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/GameComponent.ts",["cc","./EventDispatcher.ts"],(function(e){"use strict";var t,s,i,n;return{setters:[function(e){t=e.cclegacy,s=e._decorator,i=e.Component},function(e){n=e.EventDispatcher}],execute:function(){var c;t._RF.push({},"9e3f8Q8IgZD9ZsZJ7OrkxWd","GameComponent",void 0);const{ccclass:h}=s;e("GameComponent",h("GameComponent")(c=class extends i{constructor(...e){super(...e),this._eventDispatcher=null,this._isBindMessageActive=!1}get eventDispatcher(){return this._eventDispatcher||(this._eventDispatcher=new n),this._eventDispatcher}bindMessageActive(){this._isBindMessageActive=!0}unbindMessageActive(){this._isBindMessageActive=!1}on(e,t,s){this.eventDispatcher.on(e,((e,i)=>{this.isValid?this._isBindMessageActive?this.node.active&&t.call(s,e,i):t.call(s,e,i):this._eventDispatcher&&(this._eventDispatcher.destroy(),this._eventDispatcher=null)}),s)}off(e){this._eventDispatcher&&this._eventDispatcher.off(e)}dispatchEvent(e,t=null){this.eventDispatcher.dispatchEvent(e,t)}onDestroy(){this._eventDispatcher&&(this._eventDispatcher.destroy(),this._eventDispatcher=null)}})||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/RoleModelLevelComp.ts",["cc","./ECS.ts","./ViewModel.ts","./RoleTableLevelUp.ts"],(function(e){"use strict";var t,s,o,l;return{setters:[function(e){t=e.cclegacy},function(e){s=e.ecs},function(e){o=e.VM},function(e){l=e.RoleTableLevelUp}],execute:function(){var r;t._RF.push({},"9e999Ryb6xKXrcsDo+FAe13","RoleModelLevelComp",void 0);e("RoleModelLevelComp",s.register("RoleModelLevel")(r=class extends s.Comp{constructor(...e){super(...e),this.rtluNext=new l,this.rtluCurrent=new l,this.vm=new i}vmAdd(){o.add(this.vm,"RoleLevel")}vmRemove(){this.vm.reset(),o.remove("RoleLevel")}reset(){this.vmRemove()}})||r);class i{constructor(){this.lv=0,this.exp=0,this.expNext=0}reset(){this.lv=0,this.exp=0,this.expNext=0}}t._RF.pop()}}}));

System.register("chunks:///_virtual/RoleStateDead.ts",["cc","./AnimatorStateLogic.ts"],(function(t){"use strict";var e,o;return{setters:[function(t){e=t.cclegacy},function(t){o=t.AnimatorStateLogic}],execute:function(){e._RF.push({},"9ee6921FUJOyJsXWxCQ1Hz7","RoleStateDead",void 0);t("RoleStateDead",class extends o{constructor(t,e){super(),this.role=t,this.anim=e,this.anim.addFrameEvent("dead",this.onDead,this)}onDead(){var t=this.role.RoleView.animator.onHitActionComplete;t&&t()}onEntry(){}onUpdate(){}onExit(){}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/RoleViewAnimator.ts",["cc","./RoleEnum.ts","./AnimatorSpine.ts","./AnimationEventHandler.ts","./RoleStateAttack.ts","./RoleStateDead.ts","./RoleStateHit.ts"],(function(t){"use strict";var e,n,i,a,o,s,r,l,c,u;return{setters:[function(t){e=t.cclegacy,n=t.sp,i=t._decorator},function(t){a=t.RoleAnimatorType,o=t.WeaponName},function(t){s=t.default},function(t){r=t.AnimationEventHandler},function(t){l=t.RoleStateAttack},function(t){c=t.RoleStateDead},function(t){u=t.RoleStateHit}],execute:function(){var p;e._RF.push({},"a1be2AiDydHLZfm1EWsPQ34","RoleViewAnimator",void 0);const{ccclass:m,property:h,requireComponent:A,disallowMultiple:R}=i;t("RoleViewAnimator",m("RoleViewAnimator")(p=R(p=A(n.Skeleton)(p=class extends s{constructor(...t){super(...t),this.onAttackComplete=null,this.onHitActionComplete=null,this.role=null,this.weaponAnimName=null}start(){super.start();let t=new r,e=new Map;e.set(a.Attack,new l(this.role,t)),e.set(a.Hurt,new u(this.role,t)),e.set(a.Dead,new c(this.role,t)),this.initArgs(e,t)}left(){this.node.parent.setScale(1,1,1)}right(){this.node.parent.setScale(-1,1,1)}refresh(){this.onStateChange(this._ac.curState,this._ac.curState)}playAnimation(t,e){if(t){this.weaponAnimName=this.getWeaponAnimName();var n=`${t}_${this.weaponAnimName}`;this._spine.setAnimation(0,n,e)}else this._spine.clearTrack(0)}getWeaponAnimName(){var t=this.role.RoleModelJob;return o[t.weaponType[0]]}})||p)||p)||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/RtToSprite.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(t){"use strict";var e,i,o,r,n,s,h,a,u,c,l,p,d;return{setters:[function(t){e=t.cclegacy,i=t.Camera,o=t.Sprite,r=t.Node,n=t._decorator,s=t.Component,h=t.RenderTexture,a=t.UITransform,u=t.SystemEventType,c=t.gfx,l=t.SpriteFrame},function(t){p=t.applyDecoratedDescriptor,d=t.initializerDefineProperty}],execute:function(){var f,T,m,g,b,y,C,S,R,_,E;e._RF.push({},"a266clCqmFFrJ3NetOYQnmJ","RtToSprite",void 0);const{ccclass:w,property:O}=n;t("RtToSprite",(f=w("RtToSprite"),T=O({type:i,tooltip:"渲染模型的三维摄像机"}),m=O({type:o,tooltip:"显示模型的二维精灵组件"}),g=O({tooltip:"是否触摸控制旋转"}),b=O({type:r,tooltip:"三维模型",visible:function(){return!0===this.rotation}}),f((S=p((C=class extends s{constructor(...t){super(...t),d(this,"camera",S,this),d(this,"sprite",R,this),d(this,"rotation",_,this),d(this,"model",E,this),this.rt=new h,this.touched=!1}start(){let t=this.sprite.getComponent(a);this.refreshRenderTexture(t.width,t.height),this.rotation&&(this.sprite.node.on(u.TOUCH_START,this.onTouchStart,this),this.sprite.node.on(u.TOUCH_MOVE,this.onTouchMove,this),this.sprite.node.on(u.TOUCH_END,this.onTouchEnd,this),this.sprite.node.on(u.TOUCH_CANCEL,this.onTouchEnd,this))}onTouchStart(t){this.touched=!0}onTouchMove(t){if(this.touched){let e=this.model.eulerAngles,i=t.touch.getDelta().x;e.y+=-i,this.model.eulerAngles=e}}onTouchEnd(t){this.touched=!1}refreshRenderTexture(t,e){const i=new c.ColorAttachment,o=new c.DepthStencilAttachment,r=new c.RenderPassInfo([i],o,[]);this.rt.reset({width:t,height:e,passInfo:r});let n=this.sprite.spriteFrame,s=new l;s.reset({originalSize:n.originalSize,rect:n.rect,offset:n.offset,isRotate:n.rotated,borderTop:n.insetTop,borderLeft:n.insetLeft,borderBottom:n.insetBottom,borderRight:n.insetRight}),this.camera.targetTexture=this.rt,s.texture=this.rt,this.sprite.spriteFrame=s}onDestroy(){this.rotation&&(this.sprite.node.off(u.TOUCH_START,this.onTouchStart,this),this.sprite.node.off(u.TOUCH_MOVE,this.onTouchMove,this),this.sprite.node.off(u.TOUCH_END,this.onTouchEnd,this),this.sprite.node.off(u.TOUCH_CANCEL,this.onTouchEnd,this)),this.rt.destroy()}}).prototype,"camera",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=p(C.prototype,"sprite",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=p(C.prototype,"rotation",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=p(C.prototype,"model",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=C))||y));e._RF.pop()}}}));

System.register("chunks:///_virtual/RoleEvent.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){let n;e("RoleEvent",void 0),t._RF.push({},"a2e7avXIapN/KtcbdDfuip8","RoleEvent",void 0),function(e){e.ChangeJob="ChangeJob"}(n||(n=e("RoleEvent",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/EncryptUtil.ts",["cc"],(function(t){"use strict";var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){let n;t("EncryptUtil",void 0),r._RF.push({},"a74a1TprtpLx54W8v7hpLkn","EncryptUtil",void 0),function(t){function r(t){return CryptoJS.enc.Utf8.parse(t)}t.aesEncrypt=function(t,n,e){return CryptoJS.AES.encrypt(t,r(n),{iv:r(e),mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}).toString()},t.aesDecrypt=function(t,n,e){let c=CryptoJS.AES.decrypt(t,r(n),{iv:r(e),mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7});return CryptoJS.enc.Utf8.stringify(c)}}(n||(n=t("EncryptUtil",{}))),r._RF.pop()}}}));

System.register("chunks:///_virtual/RoleEnum.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){let a,n;e({RoleAnimatorType:void 0,RoleAttributeType:void 0}),t._RF.push({},"a8fd6FJ+ktLLIPAwIs4E7n3","RoleEnum",void 0),function(e){e.power="power",e.physical="physical",e.agile="agile",e.hp="hp"}(a||(a=e("RoleAttributeType",{}))),function(e){e.Idle="Idle",e.Attack="Attack",e.Hurt="Hurt",e.Dead="Dead"}(n||(n=e("RoleAnimatorType",{})));e("WeaponName",{0:"Fist",1:"Katana",2:"CrossGun",3:"LongGun",4:"Razor",5:"Arch",6:"Crossbow",7:"IronCannon",8:"FireGun",9:"Wakizashi",10:"Kunai",11:"Dagger",12:"Kusarigama",13:"DanceFan",14:"Flag",15:"MilitaryFan",16:"Shield"});t._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorCondition.ts",["cc"],(function(t){"use strict";var a,e;return{setters:[function(t){a=t.error,e=t.cclegacy}],execute:function(){let r,i;t({LogicType:void 0,ParamType:void 0}),e._RF.push({},"a92fdadrLJC5INImooQlcvV","AnimatorCondition",void 0),function(t){t[t.COMPLETE=0]="COMPLETE",t[t.BOOLEAN=1]="BOOLEAN",t[t.NUMBER=2]="NUMBER",t[t.TRIGGER=3]="TRIGGER",t[t.AUTO_TRIGGER=4]="AUTO_TRIGGER"}(r||(r=t("ParamType",{}))),function(t){t[t.EQUAL=0]="EQUAL",t[t.NOTEQUAL=1]="NOTEQUAL",t[t.GREATER=2]="GREATER",t[t.LESS=3]="LESS",t[t.GREATER_EQUAL=4]="GREATER_EQUAL",t[t.LESS_EQUAL=5]="LESS_EQUAL"}(i||(i=t("LogicType",{})));t("default",class{constructor(t,a){this._param="",this._value=0,this._logic=i.EQUAL,this._ac=a,this._param=t.param,this._value=t.value,this._logic=t.logic}getParamName(){return this._param}getParamType(){return this._ac.params.getParamType(this._param)}check(){let t=this.getParamType();if(t===r.BOOLEAN)return this._ac.params.getBool(this._param)===this._value;if(t!==r.NUMBER)return t===r.AUTO_TRIGGER?0!==this._ac.params.getAutoTrigger(this._param):t===r.TRIGGER?0!==this._ac.params.getTrigger(this._param):(a(`[AnimatorCondition.check] 错误的type: ${t}`),!1);{let t=this._ac.params.getNumber(this._param);switch(this._logic){case i.EQUAL:return t===this._value;case i.NOTEQUAL:return t!==this._value;case i.GREATER:return t>this._value;case i.LESS:return t<this._value;case i.GREATER_EQUAL:return t>=this._value;case i.LESS_EQUAL:return t<=this._value;default:return!1}}}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/Ambilight.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(t){"use strict";var e,i,r,s,a,o,n;return{setters:[function(t){e=t.cclegacy,i=t.CCInteger,r=t._decorator,s=t.Component,a=t.Sprite},function(t){o=t.applyDecoratedDescriptor,n=t.initializerDefineProperty}],execute:function(){var p,c,l,h,m;e._RF.push({},"a9730chlCBNL7hp8LBT5XuR","Ambilight",void 0);const{ccclass:u,property:_}=r;t("Ambilight",(p=u("Ambilight"),c=_(i),p((m=o((h=class extends s{constructor(...t){super(...t),n(this,"_max",m,this),this._start=0}get max(){return this._max}set max(t){this._max=t}update(t){this._material=this.node.getComponent(a).getMaterial(0),this.node.active&&this._material&&this._setShaderTime(t)}_setShaderTime(t){let e=this._start;e>this.max&&(e=0),e+=.015,this._material.setProperty("speed",e),this._start=e}}).prototype,"_max",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),o(h.prototype,"max",[c],Object.getOwnPropertyDescriptor(h.prototype,"max"),h.prototype),l=h))||l));e._RF.pop()}}}));

System.register("chunks:///_virtual/VMEvent.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./VMBase.ts"],(function(e){"use strict";var t,r,i,n,o,a,c,l;return{setters:[function(e){t=e.cclegacy,r=e.CCString,i=e.Enum,n=e.EventHandler,o=e._decorator},function(e){a=e.applyDecoratedDescriptor,c=e.initializerDefineProperty},function(e){l=e.default}],execute:function(){var s,u,h,p,f,b,d,g,m,v,y,M,w,E,V,k,z,_;t._RF.push({},"a9ce7kf8XZJeLPlT2iWn2zD","VMEvent",void 0);const{ccclass:P,property:C,executeInEditMode:A,menu:D,help:x}=o;var O;!function(e){e[e.none=0]="none",e[e["=="]=1]="==",e[e["!="]=2]="!=",e[e[">"]=3]=">",e[e[">="]=4]=">=",e[e["<"]=5]="<",e[e["<="]=6]="<="}(O||(O={}));e("default",(s=D("ModelViewer/VM-EventCall(调用函数)"),u=x("https://github.com/wsssheep/cocos_creator_mvvm_tools/blob/master/docs/VMEvent.md"),h=C({tooltip:"使用模板模式，可以使用多路径监听"}),p=C({tooltip:"监听获取值的路径",visible:function(){return!1===this.templateMode}}),f=C({tooltip:"触发一次后会自动关闭该事件"}),b=C({tooltip:"监听获取值的多条路径,这些值的改变都会通过这个函数回调,请使用 pathArr 区分获取的值 ",type:[r],visible:function(){return!0===this.templateMode}}),d=C({tooltip:"过滤模式，会根据条件过滤掉时间的触发",type:i(O)}),g=C({visible:function(){return this.filterMode!==O.none}}),m=C([n]),P(v=A(v=s(v=u((M=a((y=class extends l{constructor(...e){super(...e),c(this,"templateMode",M,this),c(this,"watchPath",w,this),c(this,"triggerOnce",E,this),c(this,"watchPathArr",V,this),c(this,"filterMode",k,this),c(this,"compareValue",z,this),c(this,"changeEvents",_,this)}onValueInit(){}onValueChanged(e,t,r){this.conditionCheck(e,this.compareValue)&&(Array.isArray(this.changeEvents)&&this.changeEvents.forEach((i=>{i.emit([e,t,r])})),!0===this.triggerOnce&&(this.enabled=!1))}conditionCheck(e,t){let r=O;switch(this.filterMode){case r.none:return!0;case r["=="]:if(e==t)return!0;break;case r["!="]:if(e!=t)return!0;break;case r["<"]:if(e<t)return!0;break;case r[">"]:if(e>t)return!0;break;case r[">="]:if(e>=t)return!0;break;case r["<"]:if(e<t)return!0;break;case r["<="]:if(e<=t)return!0}return!1}}).prototype,"templateMode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=a(y.prototype,"watchPath",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),E=a(y.prototype,"triggerOnce",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V=a(y.prototype,"watchPathArr",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=a(y.prototype,"filterMode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.none}}),z=a(y.prototype,"compareValue",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_=a(y.prototype,"changeEvents",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=y))||v)||v)||v)||v));t._RF.pop()}}}));

System.register("chunks:///_virtual/StringUtil.ts",["cc"],(function(t){"use strict";var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"aa8435LSBtAR5HPsje6IJ2w","StringUtil",void 0);t("StringUtil",class{static numberTotPermil(t){return t.toLocaleString()}static numberToThousand(t,r=2){var e=1e3;if(t<e)return t.toString();var n=Math.floor(Math.log(t)/Math.log(e));return(t/Math.pow(e,n)).toFixed(r)+["","K","M","G"][n]}static numberToTenThousand(t,r=2){var e=1e4;if(t<e)return t.toString();var n=Math.floor(Math.log(t)/Math.log(e));return(t/Math.pow(e,n)).toFixed(r)+["","万","亿","万亿"][n]}static format(t,r){var e={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var n in/(y+)/.test(r)&&(r=r.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+n+")").test(r)&&(r=r.replace(RegExp.$1,1==RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return r}static stringToArray1(t){return""==t?[]:t.split(",")}static stringToArray2(t){return""==t?[]:t.split("|")}static stringToArray3(t){return""==t?[]:t.split(":")}static stringToArray4(t){return""==t?[]:t.split(";")}static sub(t,r,e=!1){var n=/[^\x00-\xff]/g;if(t.replace(n,"mm").length<=r)return t;for(var s=Math.floor(r/2);s<t.length;s++)if(t.substr(0,s).replace(n,"mm").length>=r)return e?t.substr(0,s)+"...":t.substr(0,s);return t}static stringLen(t){for(var r=0,e=t.length,n=-1,s=0;s<e;s++)r+=(n=t.charCodeAt(s))>=0&&n<=128?1:2;return r}}),r._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorAnimation.ts",["cc","./AnimatorBase.ts"],(function(t){"use strict";var i,n,s,a;return{setters:[function(t){i=t.cclegacy,n=t.Animation,s=t._decorator},function(t){a=t.default}],execute:function(){var e;i._RF.push({},"ab8fdrqccJLl5FydZqycRLg","AnimatorAnimation",void 0);const{ccclass:h,property:o,requireComponent:m,disallowMultiple:r,menu:_}=s;t("default",h(e=r(e=m(n)(e=_("animator/AnimatorAnimation")(e=class extends a{constructor(...t){super(...t),this._animation=null,this._animState=null,this._wrapModeMap=new Map}start(){this.PlayOnStart&&!this._hasInit&&(this._hasInit=!0,this._animation=this.getComponent(n),this._animation.on(n.EventType.FINISHED,this.onAnimFinished,this),this._animation.on(n.EventType.LASTFRAME,this.onAnimFinished,this),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))}onInit(...t){this.PlayOnStart||this._hasInit||(this._hasInit=!0,this.initArgs(...t),this._animation=this.getComponent(n),this._animation.on(n.EventType.FINISHED,this.onAnimFinished,this),this._animation.on(n.EventType.LASTFRAME,this.onAnimFinished,this),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))}playAnimation(t,i){t&&(this._animation.play(t),this._animState=this._animation.getState(t),this._animState&&(this._wrapModeMap.has(this._animState)||this._wrapModeMap.set(this._animState,this._animState.wrapMode),this._animState.wrapMode=i?2:this._wrapModeMap.get(this._animState)))}scaleTime(t){this._animState&&(this._animState.speed=t)}})||e)||e)||e)||e);i._RF.pop()}}}));

System.register("chunks:///_virtual/NetChannelManager.ts",["cc","./NetConfig.ts","./NetGameTips.ts","./WebSock.ts","./NetInterface.ts","./NetManager.ts","./NetNodeGame.ts"],(function(e){"use strict";var n,t,a,c,o,s,i;return{setters:[function(e){n=e.cclegacy},function(e){t=e.netConfig},function(e){a=e.NetGameTips},function(e){c=e.WebSock},function(e){o=e.DefStringProtocol},function(e){s=e.NetManager},function(e){i=e.NetNodeGame}],execute:function(){let r;e("NetChannelType",void 0),n._RF.push({},"ac861qhh0NGap/G024bE62U","NetChannelManager",void 0),function(e){e[e.Game=0]="Game"}(r||(r=e("NetChannelType",{})));class g extends o{getHearbeat(){return`{"action":"LoginAction","method":"heart","data":"null","isCompress":false,"channelid":${t.channelid},"callback":"LoginAction_heart"}`}}class l{gameCreate(){this.game=new i,this.game.init(new c,new g,new a),s.getInstance().setNetNode(this.game,r.Game)}gameConnect(){s.getInstance().connect({url:`ws://${t.gameIp}:${t.gamePort}`,autoReconnect:0},r.Game)}gameClose(){s.getInstance().close(void 0,void 0,r.Game)}}e("NetChannelManager",l);e("netChannel",new l);n._RF.pop()}}}));

System.register("chunks:///_virtual/BhvSwitchPage.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(e){"use strict";var t,i,n,r,s,o;return{setters:[function(e){t=e.cclegacy,i=e.CCInteger,n=e._decorator,r=e.Component},function(e){s=e.applyDecoratedDescriptor,o=e.initializerDefineProperty}],execute:function(){var h,a,d,p,u,c;t._RF.push({},"b3d083kncpDPqVztMtiq6DO","BhvSwitchPage",void 0);const{ccclass:g,property:l,executeInEditMode:x,menu:_}=n;e("default",(h=_("添加特殊行为/UI/Switch Page (切换页面)"),a=l({type:i}),g(d=x(d=h((u=s((p=class extends r{constructor(...e){super(...e),o(this,"isLoopPage",u,this),o(this,"_index",c,this),this.preIndex=0,this._isChanging=!1}get index(){return this._index}set index(e){if(this.isChanging)return;e=Math.round(e);let t=this.node.children.length-1;this.isLoopPage?(e>t&&(e=0),e<0&&(e=t)):(e>t&&(e=t),e<0&&(e=0)),this.preIndex=this._index,this._index=e,this._updatePage(e)}get isChanging(){return this._isChanging}onLoad(){this.preIndex=this.index}_updateEditorPage(e){}_updatePage(e){let t=this.node.children,i=this.preIndex,n=this.index;if(i===n)return;let r=t[i],s=t[n];r.active=!1,s.active=!0}next(){return!this.isChanging&&(this.index++,!0)}previous(){return!this.isChanging&&(this.index--,!0)}setEventIndex(e,t){return this.index>=0&&null!=this.index&&!1===this.isChanging&&(this.index=t,!0)}}).prototype,"isLoopPage",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=s(p.prototype,"_index",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s(p.prototype,"index",[a],Object.getOwnPropertyDescriptor(p.prototype,"index"),p.prototype),d=p))||d)||d)||d));t._RF.pop()}}}));

System.register("chunks:///_virtual/EcsPositionSystem.ts",["cc","./ECS.ts","./MoveTo.ts"],(function(s){"use strict";var t,e,c;return{setters:[function(s){t=s.cclegacy},function(s){e=s.ecs},function(s){c=s.MoveToSystem}],execute:function(){t._RF.push({},"b44c4Rrzl9AeaxCJpg32/WA","EcsPositionSystem",void 0);class o extends e.System{constructor(){super(),this.add(new c)}}s("EcsPositionSystem",o),t._RF.pop()}}}));

System.register("chunks:///_virtual/EffectSingleCase.ts",["cc","./ViewUtil.ts"],(function(e){"use strict";var t,s,n,c;return{setters:[function(e){t=e.cclegacy,s=e.NodePool,n=e.Component},function(e){c=e.ViewUtil}],execute:function(){t._RF.push({},"b6288w10zdFZov3PwtgmAwf","EffectSingleCase",void 0);class i extends n{constructor(...e){super(...e),this.type=null}}class f{constructor(){this.effects=new Map}static get instance(){return null==this._instance&&(this._instance=new f),this._instance}show(e,t,n){var f,r=this.effects.get(e);return null==r&&(r=new s,this.effects.set(e,r)),0==r.size()?(f=c.createPrefabNode(e)).addComponent(i).type=e:f=r.get(),f.parent=t,n&&(f.position=n),f}put(e){var t=e.getComponent(i).type,s=this.effects.get(t);s&&s.put(e)}clear(e){e?this.effects.get(e).clear():(this.effects.forEach((e=>{e.clear()})),this.effects.clear())}}e("EffectSingleCase",f),t._RF.pop()}}}));

System.register("chunks:///_virtual/LayerUtil.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"b7a864Zpb5N4Zm7onWE1i9D","LayerUtil",void 0);class n{get value(){return this._value}get name(){return this._name}get mask(){return 1<<this._value}constructor(e,t){this._value=e,this._name=t}}e("LayerItem",n);class a{static setNodeLayer(e,t){t.layer=e.mask,t.children.forEach((t=>{t.layer=e.mask,a.setNodeLayer(e,t)}))}}e("LayerUtil",a),a.MAP=new n(0,"MAP"),a.AVATAR=new n(1,"AVATAR"),a.IGNORE_RAYCAST=new n(20,"IGNORE_RAYCAST"),a.GIZMOS=new n(21,"GIZMOS"),a.EDITOR=new n(22,"EDITOR"),a.UI_3D=new n(23,"UI_3D"),a.SCENE_GIZMO=new n(24,"SCENE_GIZMO"),a.UI_2D=new n(25,"UI_2D"),a.PROFILTER=new n(28,"PROFILTER"),a.DEFAULT=new n(30,"DEFAULT"),t._RF.pop()}}}));

System.register("chunks:///_virtual/RandomManager.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"b843ep28dBO1bnnmLBQm2vo","RandomManager",void 0);class n{static get instance(){return null==this._instance&&(this._instance=new n),this._instance}getRandom(){return this.seedrandom?this.seedrandom.quick():Math.random()}setSeed(t){this.seedrandom=new Math.seedrandom(t)}getRandomInt(t,e,n=2){switch(t=Math.ceil(t),e=Math.floor(e),n){case 1:return Math.floor(this.getRandom()*(e-t))+t;case 2:return Math.floor(this.getRandom()*(e-t+1))+t;case 3:return Math.floor(this.getRandom()*(e-t-1))+t+1}return 0}getRandomByMinMaxList(t,e,n,a=2){var s=[];for(let a=0;a<n;a++)s.push(this.getRandomInt(t,e));return s}getRandomByObjectList(t,e){var n=t.slice(),a=[];for(let t=0;t<e;t++){let t=this.getRandomInt(0,e,1);a.push(n.splice(t,1)[0])}return a}getRandomBySumList(t,e){var n=e,a=0,s=[];for(let e=0;e<t;e++)a=this.getRandomInt(0,n,3),e==t-1?a=n:n-=a,s.push(a);return s}}t("RandomManager",n),e._RF.pop()}}}));

System.register("chunks:///_virtual/Badge.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./RoundRectMask.ts"],(function(t){"use strict";var e,i,o,n,s,r,a,l,d,h,c,u,g,p,b,N,m,f;return{setters:[function(t){e=t.cclegacy,i=t.Enum,o=t.SpriteFrame,n=t.CCInteger,s=t._decorator,r=t.Component,a=t.color,l=t.UITransform,d=t.Vec3,h=t.Label,c=t.Node,u=t.Layers,g=t.Mask,p=t.Sprite,b=t.Overflow},function(t){N=t.applyDecoratedDescriptor,m=t.initializerDefineProperty},function(t){f=t.RoundRectMask}],execute:function(){var C,w,y,T,v,P,z,_,E,x,B,I,R,S,L;t("Position",void 0),e._RF.push({},"bac76ow94VI+IpAB1DQUKfq","Badge",void 0);const{ccclass:O,property:F}=s;let k;!function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT"}(k||(k=t("Position",{}))),i(k);t("Badge",(C=O("Badge"),w=F({type:o,tooltip:"背景"}),y=F({tooltip:"内容"}),T=F({type:n,tooltip:"宽"}),v=F({type:n,tooltip:"高"}),P=F({type:n,tooltip:"圆角"}),z=F({type:k,tooltip:"位置\n 0: 左上角 \n 1: 右上角"}),C((x=N((E=class extends r{constructor(...t){super(...t),m(this,"bg",x,this),m(this,"string",B,this),m(this,"width",I,this),m(this,"height",R,this),m(this,"radius",S,this),m(this,"position",L,this),this.badgeNode=null,this.color=a(214,30,30,240),this.textColor=a(255,255,255,255),this.labelNode=null}get text(){return this.string}set text(t){this.string=t,this.setText(t)}onLoad(){this.initBadge()}initBadge(){const t=this.createBadge();this.node.addChild(t)}setPosition(t){var e,i;const o=null===(e=this.node.getComponent(l))||void 0===e?void 0:e.contentSize;null===(i=this.badgeNode.getComponent(l))||void 0===i||i.contentSize;switch(t){case k.TOP_LEFT:{const t=-o.width/2,e=o.height/2;this.badgeNode.setPosition(new d(t,e,0));break}case k.TOP_RIGHT:{const t=o.width/2,e=o.height/2;this.badgeNode.setPosition(new d(t,e,0));break}}}setText(t){this.text=t;const e=this.labelNode.getComponent(h);return e&&(e.string=this.text,e.color=this.textColor),this}createBadge(){var t,e,i;this.badgeNode=new c("BadgeNode");const o=new c("backgroundNode");this.labelNode=new c("labelNode"),this.badgeNode.layer=u.Enum.UI_2D,o.layer=u.Enum.UI_2D,this.labelNode.layer=u.Enum.UI_2D,this.badgeNode.addComponent(g),this.badgeNode.addComponent(f).radius=this.radius,null===(t=this.badgeNode.getComponent(l))||void 0===t||t.setContentSize(this.width,this.height),this.badgeNode.active=!0;const n=o.addComponent(p);n.type=p.Type.SIMPLE,n.color=this.color,n.spriteFrame=this.bg,null===(e=o.getComponent(l))||void 0===e||e.setContentSize(this.width,this.height);const s=this.labelNode.addComponent(h);return null===(i=s.getComponent(l))||void 0===i||i.setContentSize(this.width,this.height),s.string=this.text,s.color=this.textColor,s.fontSize=18,s.isBold=!0,s.horizontalAlign=h.HorizontalAlign.CENTER,s.verticalAlign=h.VerticalAlign.CENTER,s.lineHeight=0,s.overflow=b.NONE,s.enableWrapText=!1,this.badgeNode.addChild(o),this.badgeNode.addChild(this.labelNode),this.setPosition(this.position),this.badgeNode}start(){}}).prototype,"bg",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=N(E.prototype,"string",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"6"}}),I=N(E.prototype,"width",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),R=N(E.prototype,"height",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 26}}),S=N(E.prototype,"radius",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6}}),L=N(E.prototype,"position",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.TOP_LEFT}}),_=E))||_));e._RF.pop()}}}));

System.register("chunks:///_virtual/LayerUI.ts",["cc","./ResLoader.ts","./DelegateComponent.ts","./Defines.ts"],(function(e){"use strict";var t,i,r,n,s,a,o,d,u,l;return{setters:[function(e){t=e.cclegacy,i=e.Node,r=e.Widget,n=e.warn,s=e.error,a=e.instantiate,o=e.isValid},function(e){d=e.resLoader},function(e){u=e.DelegateComponent},function(e){l=e.ViewParams}],execute:function(){t._RF.push({},"bc8b86Br9dGeKxeLijkyJKE","LayerUI",void 0);e("LayerUI",class extends i{constructor(e){super(e),this.ui_nodes=new Map;var t=this.addComponent(r);t.isAlignLeft=t.isAlignRight=t.isAlignTop=t.isAlignBottom=!0,t.left=t.right=t.top=t.bottom=0,t.alignMode=2,t.enabled=!0}getUuid(e){return`${this.name}_${e}`.replace(/\//g,"_")}add(e,t,i){let r=e.prefab;var s=this.getUuid(r),a=this.ui_nodes.get(s);return a&&a.valid?(n(`路径为【${r}】的预制重复加载`),""):(null==a&&((a=new l).uuid=s,a.prefabPath=r,a.params=t||{},a.callbacks=i||{},a.valid=!0,this.ui_nodes.set(a.uuid,a)),this.load(a),s)}load(e){var t=this.ui_nodes.get(e.uuid);t&&t.node?this.createNode(null,t):d.load(e.prefabPath,((t,i)=>{t&&s(t);let r=a(i);e.node=r,r.addComponent(u).viewParams=e,this.createNode(i,e)}))}createNode(e,t){t.valid=!0;let i=t.node,r=i.getComponent(u);return i.parent=this,r.add(),i}removeByUuid(e,t){var i=this.ui_nodes.get(e);if(i){t&&this.ui_nodes.delete(i.uuid);var r=i.node;(null==r?void 0:r.getComponent(u)).remove(t)}}remove(e,t){let i=this.__nodes();for(let r=0;r<i.length;r++){let n=i[r].viewParams;n.prefabPath===e&&(t&&this.ui_nodes.delete(n.uuid),this.ui_nodes.delete(n.uuid),i[r].remove(t),n.valid=!1)}}getByUuid(e){let t=this.__nodes();for(let i of t)if(i.viewParams&&i.viewParams.uuid===e)return i.node;return null}get(e){let t=[],i=this.__nodes();for(let r of i)r.viewParams.prefabPath===e&&t.push(r.node);return t}has(e){let t=this.__nodes();for(let i of t)if(i.viewParams.uuid===e||i.viewParams.prefabPath===e)return!0;return!1}find(e){let t=[],i=this.__nodes();for(let r of i)e.test(r.viewParams.prefabPath)&&t.push(r.node);return t}__nodes(){let e=[],t=this.children;for(let i=0;i<t.length;i++){let r=t[i].getComponent(u);r&&r.viewParams&&r.viewParams.valid&&o(r)&&e.push(r)}return e}size(){return this.children.length}clear(e){this.ui_nodes.forEach(((t,i)=>{this.removeByUuid(t.uuid,e),t.valid=!1})),this.ui_nodes.clear()}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/NetNodeGame.ts",["cc","./NetConfig.ts","./NetNode.ts"],(function(e){"use strict";var t,s,i;return{setters:[function(e){t=e.cclegacy},function(e){s=e.netConfig},function(e){i=e.NetNode}],execute:function(){t._RF.push({},"bcdefoeZ55NF5b09cJUF6Xi","NetNodeGame",void 0);e("NetNodeGame",class extends i{constructor(...e){super(...e),this.isCompress=!1}req(e,t,i,n,r=!0,o=!1){let c={action:e,method:t,data:JSON.stringify(i),isCompress:this.isCompress,channelid:s.channelid};return this.request(c,n,r,o)}reqUnique(e,t,i,n,r=!0,o=!1){let c={action:e,method:t,data:JSON.stringify(i),isCompress:this.isCompress,channelid:s.channelid};return super.requestUnique(c,n,r,o)}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/BranchNode.ts",["cc","./BTreeNode.ts","./BehaviorTree.ts"],(function(n){"use strict";var t,s,e;return{setters:[function(n){t=n.cclegacy},function(n){s=n.BTreeNode},function(n){e=n.BehaviorTree}],execute:function(){t._RF.push({},"beafaDMsw9FCbGDpLVmMfa1","BranchNode",void 0);n("BranchNode",class extends s{constructor(n){super(),this.children=n||[]}start(){this._actualTask=0,super.start()}run(n){0==this.children.length?this._control.fail():(this._blackboard=n,this.start(),this._actualTask<this.children.length&&this._run()),this.end()}_run(n){var t=e.getNode(this.children[this._actualTask]);this._runningNode=t,t.setControl(this),t.start(this._blackboard),t.run(this._blackboard)}running(n){this._nodeRunning=n,this._control.running(n)}success(){this._nodeRunning=null,this._runningNode.end(this._blackboard)}fail(){this._nodeRunning=null,this._runningNode.end(this._blackboard)}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/PlatformUtil.ts",["cc"],(function(t){"use strict";var i,e;return{setters:[function(t){i=t.cclegacy,e=t.sys}],execute:function(){i._RF.push({},"c08229jnmdPP5vR721N6GG9","PlatformUtil",void 0);class s{static isNativeAndroid(){return"undefined"!=typeof jsb&&!(!e.isNative||e.platform!==e.Platform.ANDROID)}static isNativeIOS(){return"undefined"!=typeof jsb&&!(!e.isNative||e.os!==e.OS.IOS)}static getPlateform(){return this.isNativeAndroid()?"android":this.isNativeIOS()?"ios":"h5"}}t("PlatformUtil",s),s.isIOSwebview=function(){return!!(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.sdkLoginOut)},i._RF.pop()}}}));

System.register("chunks:///_virtual/SingletonModuleComp.ts",["cc","./ECS.ts"],(function(e){"use strict";var t,n;return{setters:[function(e){t=e.cclegacy},function(e){n=e.ecs}],execute:function(){var o;t._RF.push({},"c11472aPc1P0K2H9Nlk7mKo","SingletonModuleComp",void 0);let c=e("SingletonModuleComp",n.register("SingletonModule")(o=class extends n.Comp{constructor(...e){super(...e),this.initialize=null,this.account=null}reset(){}})||o);e("smc",n.getSingleton(c));t._RF.pop()}}}));

System.register("chunks:///_virtual/BhvFrameIndex.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(e){"use strict";var t,r,i,n,s,o,p,a,l;return{setters:[function(e){t=e.cclegacy,r=e.Sprite,i=e.SpriteFrame,n=e.CCInteger,s=e._decorator,o=e.Component,p=e.error},function(e){a=e.applyDecoratedDescriptor,l=e.initializerDefineProperty}],execute:function(){var u,c,d,h,m,x,f,F;t._RF.push({},"c238ewfJ2VJnZ8Gb8YQs5Ts","BhvFrameIndex",void 0);const{ccclass:y,property:g,executeInEditMode:_,requireComponent:b,menu:I}=s;e("default",(u=b(r),c=I("添加特殊行为/UI/Frame Index(帧图改变)"),d=g({type:[i],tooltip:"sprite将会用到帧图片"}),h=g({type:n,tooltip:"当前显示的帧图"}),y(m=_(m=u(m=c((f=a((x=class extends o{constructor(...e){super(...e),l(this,"spriteFrames",f,this),l(this,"_index",F,this)}get index(){return this._index}set index(e){if(e<0)return;this._index=e%this.spriteFrames.length,this.node.getComponent(r).spriteFrame=this.spriteFrames[this._index]}setName(e){let t=this.spriteFrames.findIndex((t=>t.name==e));t<0&&p("frameIndex 设置了不存在的name:",e),this.index=t||0}random(e,t){if(!this.spriteFrames)return;let r=this.spriteFrames.length;(null==e||e<0)&&(e=0),(null==t||t>r)&&(t=r),this.index=Math.floor(Math.random()*(t-e)+e)}next(){this.index++}previous(){this.index--}}).prototype,"spriteFrames",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[null]}}),a(x.prototype,"index",[h],Object.getOwnPropertyDescriptor(x.prototype,"index"),x.prototype),F=a(x.prototype,"_index",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=x))||m)||m)||m)||m));t._RF.pop()}}}));

System.register("chunks:///_virtual/CCComp.ts",["cc","./EventDispatcher.ts","./ViewUtil.ts"],(function(e){"use strict";var t,s,i,n,c;return{setters:[function(e){t=e.cclegacy,s=e._decorator,i=e.Component},function(e){n=e.EventDispatcher},function(e){c=e.ViewUtil}],execute:function(){var h,r,a;t._RF.push({},"c979cCh92NKBosgpnsjE/8/","CCComp",void 0);const{ccclass:o,property:p}=s;e("CCComp",o("CCComp")((a=r=class extends i{constructor(...e){super(...e),this.nodes=new Map,this._eventDispatcher=null,this._isBindMessageActive=!1}get(e){return this.nodes.get(e)}onLoad(){c.nodeTreeInfoLite(this.node,this.nodes)}get eventDispatcher(){return this._eventDispatcher||(this._eventDispatcher=new n),this._eventDispatcher}bindMessageActive(){this._isBindMessageActive=!0}unbindMessageActive(){this._isBindMessageActive=!1}on(e,t,s){this.eventDispatcher.on(e,((e,i)=>{this.isValid?this._isBindMessageActive?this.node.active&&t.call(s,e,i):t.call(s,e,i):this._eventDispatcher&&(this._eventDispatcher.destroy(),this._eventDispatcher=null)}),s)}off(e){this._eventDispatcher&&this._eventDispatcher.off(e)}dispatchEvent(e,t=null){this.eventDispatcher.dispatchEvent(e,t)}onDestroy(){this._eventDispatcher&&(this._eventDispatcher.destroy(),this._eventDispatcher=null),this.nodes.clear()}},r.tid=-1,h=a))||h);t._RF.pop()}}}));

System.register("chunks:///_virtual/Oops.ts",["cc","./StorageManager.ts"],(function(t){"use strict";var e,s;return{setters:[function(t){e=t.cclegacy},function(t){s=t.storage}],execute:function(){e._RF.push({},"cbae5wzfSZGzZMuyeAetSfg","Oops",void 0);class c{}t("oops",c),c.storage=s,e._RF.pop()}}}));

System.register("chunks:///_virtual/ECS.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){let i;t("ecs",void 0),e._RF.push({},"cdf35VCKqZDGbE42nImUE8H","ECS",void 0),function(t){class e{constructor(){this.canRecycle=!0}}e.tid=-1,t.Comp=e;let i=new Map,s=0,n=[],h=new Map,r=new Map;t.register=function(t,e=!0){return function(r){if(-1!==r.tid)throw new Error(`重复注册组件： ${t}.`);r.tid=s++,r.compName=t,e?(n.push(r),i.set(r.tid,[])):n.push(null),h.set(r.tid,[])}},t.registerTag=function(){return function(t){let e=s;for(let o in t)e=s++,t[o]=e,n.push(e),i.set(e,[]),h.set(e,[]),r.set(e,o)}};let o=new Map,c=new Map,a=new Map,u=1;function l(t){return function(){let t=new y;return t.eid=u++,c.set(t.eid,t),t}().add(t)}function d(t){let e=a.get(t.mid);if(!e){e=new E(t),a.set(t.mid,e);let i=t.indices;for(let t=0;t<i.length;t++)h.get(i[t]).push(e.onComponentAddOrRemove.bind(e))}return e}function m(t,e){let i=h.get(e);for(let e=i.length-1;e>=0;e--)i[e](t);f.has(e)&&f.delete(e)}t.getEntity=function(t){let e=(o.get(t.name)||[]).pop();return e||(e=new t,e.eid=u++),e.init?e.init():console.error(`${t.name} 实体缺少 init 方法初始化默认组件`),c.set(e.eid,e),e},t.createGroup=d,t.query=function(t){let e=a.get(t.mid);return e||(e=d(t),c.forEach(e.onComponentAddOrRemove,e)),e.matchEntities},t.clear=function(){c.forEach((t=>{t.destroy()})),a.forEach((t=>{t.clear()})),h.forEach((t=>{t.length=0})),c.clear(),a.clear()},t.getEntityByEid=function(t){return c.get(t)},t.activeEntityCount=function(){return c.size},t.allOf=function(...t){return(new k).allOf(...t)},t.anyOf=function(...t){return(new k).anyOf(...t)},t.onlyOf=function(...t){return(new k).onlyOf(...t)},t.excludeOf=function(...t){return(new k).excludeOf(...t)};let f=new Map;t.getSingleton=function(t){if(!f.has(t.tid)){let e=l(t);f.set(t.tid,e)}return f.get(t.tid)},t.addSingleton=function(t){let e=t.constructor.tid;f.has(e)||f.set(e,t)};class p{constructor(){this.size=0;let t=Math.ceil(s/31);this.mask=new Uint32Array(t),this.size=t}set(t){this.mask[t/31>>>0]|=1<<t%31}delete(t){this.mask[t/31>>>0]&=~(1<<t%31)}has(t){return!!(this.mask[t/31>>>0]&1<<t%31)}or(t){for(let e=0;e<this.size;e++)if(this.mask[e]&t.mask[e])return!0;return!1}and(t){for(let e=0;e<this.size;e++)if((this.mask[e]&t.mask[e])!=this.mask[e])return!1;return!0}clear(){for(let t=0;t<this.size;t++)this.mask[t]=0}}class y{constructor(){this.eid=-1,this.mask=new p,this.compTid2Ctor=new Map,this.compTid2Obj=new Map}add(t,e=!1){if("function"==typeof t){let s,h=t.tid;if(-1===t.tid)throw Error("组件未注册！");if(this.compTid2Ctor.has(h)){if(!e)return console.log(`已经存在组件：${t.compName}`),this[t.compName];this.remove(t)}return this.mask.set(h),this.compTid2Obj.has(h)?(s=this.compTid2Obj.get(h),this.compTid2Obj.delete(h)):s=function(t){var e=n[t.tid];if(!e)throw Error(`没有找到该组件的构造函数，检查${t.compName}是否为不可构造的组件`);return i.get(t.tid).pop()||new e}(t),this[t.compName]=s,this.compTid2Ctor.set(h,t),s.ent=this,m(this,h),s}if("number"==typeof t){if(!r.has(t))throw Error("不存在的tag！");this.mask.set(t),this.compTid2Ctor.set(t,t),this[r.get(t)]=t,m(this,t);return this}{let e=t.constructor,i=e.tid;if(-1===i||null==i)throw Error("组件未注册！");if(this.compTid2Ctor.has(i))throw Error("已经存在该组件！");return this.mask.set(i),this[e.compName]=t,this.compTid2Ctor.set(i,e),t.ent=this,t.canRecycle=!1,m(this,i),this}}addComponents(...t){for(let e of t)this.add(e);return this}get(t){let e;return e="number"==typeof t?r.get(t):t.compName,this[e]}has(t){return"number"==typeof t?this.mask.has(t):this.compTid2Ctor.has(t.tid)}remove(t,e=!0){let s=-1,n="",h=!1;if("number"==typeof t)s=t,this.mask.has(t)&&(h=!0,n=r.get(t));else if(s=t.tid,n=t.compName,this.mask.has(s)){h=!0;let n=this[t.compName];n.ent=null,e?(n.reset(),n.canRecycle&&i.get(s).push(n)):this.compTid2Obj.set(s,n)}h&&(this[n]=null,this.mask.delete(s),this.compTid2Ctor.delete(s),m(this,s))}_remove(t){this.remove(t,!1)}destroy(){this.compTid2Ctor.forEach(this._remove,this),function(t){if(c.has(t.eid)){var e=o.get(t.constructor.name);null==e&&(e=[],o.set(t.constructor.name,e)),e.push(t),c.delete(t.eid)}else console.warn("试图销毁不存在的实体！")}(this),this.compTid2Obj.clear()}}t.Entity=y;class E{get matchEntities(){return null===this._entitiesCache&&(this._entitiesCache=Array.from(this._matchEntities.values())),this._entitiesCache}get entity(){return this.matchEntities[0]}constructor(t){this._matchEntities=new Map,this._entitiesCache=null,this.count=0,this._enteredEntities=null,this._removedEntities=null,this.matcher=t}onComponentAddOrRemove(t){this.matcher.isMatch(t)?(this._matchEntities.set(t.eid,t),this._entitiesCache=null,this.count++,this._enteredEntities&&(this._enteredEntities.set(t.eid,t),this._removedEntities.delete(t.eid))):this._matchEntities.has(t.eid)&&(this._matchEntities.delete(t.eid),this._entitiesCache=null,this.count--,this._enteredEntities&&(this._enteredEntities.delete(t.eid),this._removedEntities.set(t.eid,t)))}watchEntityEnterAndRemove(t,e){this._enteredEntities=t,this._removedEntities=e}clear(){var t,e;this._matchEntities.clear(),this._entitiesCache=null,this.count=0,null===(t=this._enteredEntities)||void 0===t||t.clear(),null===(e=this._removedEntities)||void 0===e||e.clear()}}t.Group=E;class g{constructor(...t){this.mask=new p,this.indices=[];let e=-1,i=t.length;for(let s=0;s<i;s++){if(e="number"==typeof t[s]?t[s]:t[s].tid,-1==e)throw Error("存在没有注册的组件！");this.mask.set(e),this.indices.indexOf(e)<0&&this.indices.push(e)}i>1&&this.indices.sort(((t,e)=>t-e))}toString(){return this.indices.join("-")}}class w extends g{isMatch(t){return this.mask.or(t.mask)}getKey(){return"anyOf:"+this.toString()}}class _ extends g{isMatch(t){return this.mask.and(t.mask)}getKey(){return"allOf:"+this.toString()}}class v extends g{getKey(){return"excludeOf:"+this.toString()}isMatch(t){return!this.mask.or(t.mask)}}let M=1;class k{get key(){if(!this._key){let t="";for(let e=0;e<this.rules.length;e++)t+=this.rules[e].getKey(),e<this.rules.length-1&&(t+=" && ");this._key=t}return this._key}constructor(){this.rules=[],this._indices=null,this.mid=-1,this._key=null,this.mid=M++}get indices(){return null===this._indices&&(this._indices=[],this.rules.forEach((t=>{Array.prototype.push.apply(this._indices,t.indices)}))),this._indices}anyOf(...t){return this.rules.push(new w(...t)),this.bindMatchMethod(),this}allOf(...t){return this.rules.push(new _(...t)),this.bindMatchMethod(),this}onlyOf(...t){this.rules.push(new _(...t));let e=[];for(let i of n)t.indexOf(i)<0&&e.push(i);return this.rules.push(new v(...e)),this.bindMatchMethod(),this}excludeOf(...t){return this.rules.push(new v(...t)),this.bindMatchMethod(),this}bindMatchMethod(){1===this.rules.length?this.isMatch=this.isMatch1:2===this.rules.length?this.isMatch=this.isMatch2:this.isMatch=this.isMatchMore}isMatch1(t){return this.rules[0].isMatch(t)}isMatch2(t){return this.rules[0].isMatch(t)&&this.rules[1].isMatch(t)}isMatchMore(t){for(let e of this.rules)if(!e.isMatch(t))return!1;return!0}clone(){let t=new k;return t.mid=M++,this.rules.forEach((e=>t.rules.push(e))),t}}t.ComblockSystem=class{constructor(){this.dt=0,this.enteredEntities=null,this.removedEntities=null,this.hasEntityEnter=!1,this.hasEntityRemove=!1,this.hasUpdate=!1,this.tmpExecute=null;let t=Object.hasOwnProperty,e=Object.getPrototypeOf(this),i=t.call(e,"entityEnter"),s=t.call(e,"entityRemove"),n=t.call(e,"firstUpdate"),h=t.call(e,"update");this.hasEntityEnter=i,this.hasEntityRemove=s,this.hasUpdate=h,i||s?(this.enteredEntities=new Map,this.removedEntities=new Map,this.execute=this.execute1,this.group=d(this.filter()),this.group.watchEntityEnterAndRemove(this.enteredEntities,this.removedEntities)):(this.execute=this.execute0,this.group=d(this.filter())),n&&(this.tmpExecute=this.execute,this.execute=this.updateOnce)}init(){}onDestroy(){}hasEntity(){return this.group.count>0}updateOnce(t){if(0!==this.group.count){if(this.dt=t,this.enteredEntities.size>0){var e=this.enteredEntities.values();for(let t of e)this.entityEnter(t);this.enteredEntities.clear()}for(let t of this.group.matchEntities)this.firstUpdate(t);this.execute=this.tmpExecute,this.execute(t),this.tmpExecute=null}}execute0(t){if(0!==this.group.count&&(this.dt=t,this.hasUpdate))for(let t of this.group.matchEntities)this.update(t)}execute1(t){if(this.removedEntities.size>0){if(this.hasEntityRemove){var e=this.removedEntities.values();for(let t of e)this.entityRemove(t)}this.removedEntities.clear()}if(0!==this.group.count){if(this.dt=t,this.enteredEntities.size>0){if(this.hasEntityEnter){e=this.enteredEntities.values();for(let t of e)this.entityEnter(t)}this.enteredEntities.clear()}if(this.hasUpdate)for(let t of this.group.matchEntities)this.update(t)}}};t.RootSystem=class{constructor(){this.executeSystemFlows=[],this.systemCnt=0}add(t){return t instanceof x?Array.prototype.push.apply(this.executeSystemFlows,t.comblockSystems):this.executeSystemFlows.push(t),this.systemCnt=this.executeSystemFlows.length,this}init(){this.executeSystemFlows.forEach((t=>t.init()))}execute(t){for(let e=0;e<this.systemCnt;e++)this.executeSystemFlows[e].execute(t)}clear(){this.executeSystemFlows.forEach((t=>t.onDestroy()))}};class x{constructor(){this._comblockSystems=[]}get comblockSystems(){return this._comblockSystems}add(t){return t instanceof x?(Array.prototype.push.apply(this._comblockSystems,t._comblockSystems),t._comblockSystems.length=0):this._comblockSystems.push(t),this}}t.System=x}(i||(i=t("ecs",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/VMCustom.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./VMBase.ts"],(function(t){"use strict";var e,o,n,i,r,s;return{setters:[function(t){e=t.cclegacy,o=t._decorator,n=t.Toggle},function(t){i=t.applyDecoratedDescriptor,r=t.initializerDefineProperty},function(t){s=t.default}],execute:function(){var a,c,l,h,p,u,m,C,d,V,_,f,b,g;e._RF.push({},"ce662fwsSVPLKpmHx+KocFu","VMCustom",void 0);const{ccclass:w,property:y,executeInEditMode:P,menu:M,help:k}=o;t("default",(a=M("ModelViewer/VM-Custom (自定义VM)"),c=k("https://github.com/wsssheep/cocos_creator_mvvm_tools/blob/master/docs/VMCustom.md"),l=y({tooltip:"激活controller,以开启双向绑定，否则只能接收消息"}),h=y({tooltip:"监视对象路径"}),p=y({tooltip:"绑定组件的名字"}),u=y({tooltip:"组件上需要监听的属性"}),m=y({tooltip:"刷新间隔频率(只影响脏检查的频率)",step:.01,range:[0,1],visible:function(){return!0===this.controller}}),w(C=P(C=a(C=c((V=i((d=class extends s{constructor(...t){super(...t),r(this,"controller",V,this),r(this,"watchPath",_,this),r(this,"componentName",f,this),r(this,"componentProperty",b,this),r(this,"refreshRate",g,this),this._timer=0,this._watchComponent=null,this._canWatchComponent=!1,this._oldValue=null}onLoad(){super.onLoad(),this.checkEditorComponent(),this._watchComponent=this.node.getComponent(this.componentName),this.checkComponentState()}onRestore(){this.checkEditorComponent()}start(){this.onValueInit()}checkEditorComponent(){}checkComponentState(){this._canWatchComponent=!1,this._watchComponent?this.componentProperty?this.componentProperty in this._watchComponent!=!1?this._canWatchComponent=!0:console.error("需要监听的组件的属性不存在"):console.error("未设置需要监听的组件 的属性"):console.error("未设置需要监听的组件")}getComponentValue(){return this._watchComponent[this.componentProperty]}setComponentValue(t){"cc.Toggle"==this.componentName?this.node.getComponent(n).isChecked=t:this._watchComponent[this.componentProperty]=t}onValueInit(){this.setComponentValue(this.VM.getValue(this.watchPath))}onValueController(t,e){this.VM.setValue(this.watchPath,t)}onValueChanged(t,e,o){this.setComponentValue(t)}update(t){if(!this.controller)return;if(!this._canWatchComponent||!1===this._watchComponent.enabled)return;if(this._timer+=t,this._timer<this.refreshRate)return;this._timer=0;let e=this._oldValue,o=this.getComponentValue();this._oldValue!==o&&(this._oldValue=this.getComponentValue(),this.onValueController(o,e))}}).prototype,"controller",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=i(d.prototype,"watchPath",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=i(d.prototype,"componentName",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=i(d.prototype,"componentProperty",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=i(d.prototype,"refreshRate",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),C=d))||C)||C)||C)||C));e._RF.pop()}}}));

System.register("chunks:///_virtual/NetManager.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"d8cd5el6GBGTYTW+N8b8EuJ","NetManager",void 0);class n{constructor(){this._channels={}}static getInstance(){return this._instance||(this._instance=new n),this._instance}setNetNode(e,t=0){this._channels[t]=e}removeNetNode(e){delete this._channels[e]}connect(e,t=0){return!!this._channels[t]&&this._channels[t].connect(e)}send(e,t=!1,n=0){let s=this._channels[n];return s?s.send(e,t):-1}request(e,t,n=!0,s=!1,c=0){let r=this._channels[c];r&&r.request(e,t,n,s)}requestUnique(e,t,n=!0,s=!1,c=0){let r=this._channels[c];return!!r&&r.requestUnique(e,t,n,s)}close(e,t,n=0){if(this._channels[n])return this._channels[n].closeSocket(e,t)}}e("NetManager",n),t._RF.pop()}}}));

System.register("chunks:///_virtual/DelegateComponent.ts",["cc"],(function(e){"use strict";var o,n,t;return{setters:[function(e){o=e.cclegacy,n=e._decorator,t=e.Component}],execute:function(){var s;o._RF.push({},"d8f1fGRD7dBzIeBSkOpd/Py","DelegateComponent",void 0);const{ccclass:a}=n;e("DelegateComponent",a("DelegateComponent")(s=class extends t{constructor(...e){super(...e),this.viewParams=null}add(){let e=this.viewParams;this.applyComponentsFunction(this.node,"onAdded",e.params),"function"==typeof e.callbacks.onAdded&&e.callbacks.onAdded(this.node,e.params)}remove(e){let o=this.viewParams;o.valid&&(this.applyComponentsFunction(this.node,"onBeforeRemove",o.params),"function"==typeof o.callbacks.onBeforeRemove?o.callbacks.onBeforeRemove(this.node,(()=>{this.removed(o,e)})):this.removed(o,e))}removed(e,o){e.valid=!1,"function"==typeof e.callbacks.onRemoved&&e.callbacks.onRemoved(this.node,e.params),o?this.node.destroy():this.node.removeFromParent()}onDestroy(){let e=this.viewParams;this.applyComponentsFunction(this.node,"onRemoved",e.params),"function"==typeof e.callbacks.onRemoved&&e.callbacks.onRemoved(this.node,e.params),this.viewParams=null}applyComponentsFunction(e,o,n){for(let t=0;t<e.components.length;t++){let s=e.components[t],a=s[o];a&&a.call(s,n)}}})||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/NetInterface.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"d9f8b+CV69FyKwnUdCjOtad","NetInterface",void 0);e("DefStringProtocol",class{getHeadlen(){return 0}getHearbeat(){return""}getPackageLen(e){return e.toString().length}checkResponsePackage(e){return!0}handlerResponsePackage(e){return 1==e.code&&(e.isCompress&&(e.data=function(e){let t=e.split("").map((function(e){return e.charCodeAt(0)})),a=new Uint8Array(t);return pako.inflate(a,{to:"string"})}(e.data)),e.data=JSON.parse(e.data),!0)}handlerRequestPackage(e){var t,a=e.action+"_"+e.method;return e.callback=a,e.isCompress&&(e.data=(t=e.data,pako.gzip(t,{to:"string"}))),a}getPackageId(e){return e.callback}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/RoundRectMask.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(t){"use strict";var e,s,i,a,n,o,r,u,p,c;return{setters:[function(t){e=t.cclegacy,s=t.Mask,i=t.CCFloat,a=t._decorator,n=t.Component,o=t.UITransform,r=t.game,u=t.Game},function(t){p=t.applyDecoratedDescriptor,c=t.initializerDefineProperty}],execute:function(){var d,h,l,k,m,R,M,f,g;e._RF.push({},"da0f8CBQkZDqaekNuERqKjA","RoundRectMask",void 0);const{ccclass:_,property:y,executeInEditMode:C,disallowMultiple:w,requireComponent:D,menu:b}=a;t("RoundRectMask",(d=_("RoundRectMask"),h=C(!0),l=w(!0),k=D(s),m=b("渲染组件/圆角遮罩"),R=y({type:i,tooltip:"圆角半径:\n0-1之间为最小边长比例值, \n>1为具体像素值"}),d(M=h(M=l(M=k(M=m((g=p((f=class extends n{constructor(...t){super(...t),c(this,"propRadius",g,this),this.mask=null}get radius(){return this.propRadius}set radius(t){this.propRadius=t,this.updateMask(t)}onEnable(){this.mask=this.getComponent(s),this.updateMask(this.radius)}updateMask(t){let e=t>=0?t:0;if(e<1){const t=this.node.getComponent(o);e=Math.min((null==t?void 0:t.width)||0,(null==t?void 0:t.width)||0)*e}this.mask&&(this.mask.radius=e,this.mask.onDraw=this.onDraw.bind(this.mask),this.mask._updateGraphics=this._updateGraphics.bind(this.mask),this.mask.type=s.Type.RECT)}_updateGraphics(){let t=this._graphics;t&&this.onDraw(t)}onDraw(t){const e=this.node.getComponent(o);t.clear();let s=e.width,i=e.height,a=-s*e.anchorX,n=-i*e.anchorY;t.roundRect(a,n,s,i,this.radius||0),r.renderType===u.RENDER_TYPE_CANVAS?t.stroke():t.fill()}}).prototype,"propRadius",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),M=f))||M)||M)||M)||M)||M));e._RF.pop()}}}));

System.register("chunks:///_virtual/LayerNotify.ts",["cc","./ResLoader.ts","./DelegateComponent.ts","./Defines.ts","./LayerUI.ts","./NotifyComponent.ts"],(function(e){"use strict";var t,n,a,o,s,r,i,c;return{setters:[function(e){t=e.cclegacy,n=e.error,a=e.instantiate},function(e){o=e.resLoader},function(e){s=e.DelegateComponent},function(e){r=e.ViewParams},function(e){i=e.LayerUI},function(e){c=e.NotifyComponent}],execute:function(){t._RF.push({},"da14ax+B2xNsL2taQFOh7we","LayerNotify",void 0);const u="common/prefab/notify";e("LayerNotify",class extends i{show(e,t){var n=new r;n.uuid=this.getUuid(u),n.prefabPath=u,n.params={content:e,useI18n:t},n.callbacks={},n.valid=!0,this.ui_nodes.set(n.uuid,n),this.load(n)}load(e){o.load(e.prefabPath,((t,o)=>{t&&n(t);let r=a(o);e.node=r,r.addComponent(s).viewParams=e,this.createNode(o,e)}))}createNode(e,t){let n=super.createNode(e,t),a=n.getComponent(c);return n.active=!0,a.toast(t.params.content,t.params.useI18n),n}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonTouchLong.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./ButtonEffect.ts"],(function(t){"use strict";var e,o,i,n,s,u;return{setters:[function(t){e=t.cclegacy,o=t.EventHandler,i=t._decorator},function(t){n=t.applyDecoratedDescriptor,s=t.initializerDefineProperty},function(t){u=t.default}],execute:function(){var c,r,h,a,p,l,T,_;e._RF.push({},"da96en7WYpPTaPIkO1l/Nux","ButtonTouchLong",void 0);const{ccclass:g,property:m,menu:v}=i;t("ButtonTouchLong",(c=g("ButtonTouchLong"),r=v("ui/button/ButtonTouchLong"),h=m({tooltip:"长按时间（秒）"}),a=m({type:[o],tooltip:"长按时间（秒）"}),c(p=r((T=n((l=class extends u{constructor(...t){super(...t),s(this,"time",T,this),s(this,"clickEvents",_,this),this._passTime=0,this._isTouchLong=!0,this._event=null}onLoad(){this._isTouchLong=!1,super.onLoad()}onTouchtStart(t){this._event=t,this._passTime=0,super.onTouchtStart(t)}onTouchEnd(t){this._passTime>this.time&&(t.propagationStopped=!0),this._event=null,this._passTime=0,this._isTouchLong=!1,super.onTouchEnd(t)}removeTouchLong(){this._event=null,this._isTouchLong=!1}update(t){this._event&&!this._isTouchLong&&(this._passTime+=t,this._passTime>=this.time&&(this._isTouchLong=!0,this.clickEvents.forEach((t=>{t.emit([t.customEventData])})),this.removeTouchLong()))}}).prototype,"time",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),_=n(l.prototype,"clickEvents",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=l))||p)||p));e._RF.pop()}}}));

System.register("chunks:///_virtual/LayerDialog.ts",["cc","./Defines.ts","./LayerPopup.ts"],(function(e){"use strict";var t,s,i;return{setters:[function(e){t=e.cclegacy},function(e){s=e.ViewParams},function(e){i=e.LayerPopUp}],execute:function(){t._RF.push({},"dcad5w8wHlEDJpIKJ4gUxEP","LayerDialog",void 0);e("LayerDialog",class extends i{constructor(...e){super(...e),this.queue=[]}add(e,t,i){this.black.enabled=!0;let u=e.prefab;var r=this.getUuid(u),a=this.ui_nodes.get(r);if(null==a){(a=new s).uuid=this.getUuid(u),a.prefabPath=u,a.params=t||{},a.callbacks=i||{};var n=a.callbacks.onRemoved;a.callbacks.onRemoved=(e,t)=>{n&&n(e,t),setTimeout((()=>{this.next()}),0)},a.valid=!0,this.ui_nodes.set(a.uuid,a)}return this.current&&this.current.valid?this.queue.push(a):(this.current=a,this.load(a)),r}next(){this.queue.length>0&&(this.current=this.queue.shift(),this.current.node?this.createNode(null,this.current):this.load(this.current))}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/NotifyComponent.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./LanguageLabel.ts"],(function(t){"use strict";var n,e,o,i,a,r,s,l;return{setters:[function(t){n=t.cclegacy,e=t.Label,o=t.Animation,i=t._decorator,a=t.Component},function(t){r=t.applyDecoratedDescriptor,s=t.initializerDefineProperty},function(t){l=t.LanguageLabel}],execute:function(){var c,u,p,d,h,b,f;n._RF.push({},"de1daMgSoJNGqNHLZHoRzt1","NotifyComponent",void 0);const{ccclass:m,property:y}=i;t("NotifyComponent",(c=m("NotifyComponent"),u=y(e),p=y(o),c((b=r((h=class extends a{constructor(...t){super(...t),s(this,"lab_content",b,this),s(this,"animation",f,this)}onLoad(){this.animation&&this.animation.on(o.EventType.FINISHED,this.onFinished,this)}onFinished(){this.node.destroy()}toast(t,n){var e;let o=null===(e=this.lab_content)||void 0===e?void 0:e.getComponent(l);n?o.dataID=t:(o&&(o.dataID=""),this.lab_content.string=t)}}).prototype,"lab_content",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=r(h.prototype,"animation",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=h))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/NetConfig.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"de66cfdp+NPdoTql8TK/EPP","NetConfig",void 0);t("netConfig",new class{constructor(){this.gameIp="192.168.1.150",this.gamePort="9587"}});e._RF.pop()}}}));

System.register("chunks:///_virtual/Role.ts",["cc","./ECS.ts","./RoleEnum.ts","./RoleModelComp.ts","./ViewUtil.ts","./MoveTo.ts","./RoleModelJobComp.ts","./RoleChangeJob.ts","./RoleModelLevelComp.ts","./RoleUpgrade.ts","./RoleModelBaseComp.ts","./RoleViewComp.ts"],(function(e){"use strict";var o,t,s,n,i,l,a,d,c,r,p,R,m,u,C;return{setters:[function(e){o=e.cclegacy,t=e.Vec3},function(e){s=e.ecs},function(e){n=e.RoleAnimatorType},function(e){i=e.RoleModelComp},function(e){l=e.ViewUtil},function(e){a=e.MoveToComp},function(e){d=e.RoleModelJobComp},function(e){c=e.RoleChangeJobComp,r=e.RoleChangeJobSystem},function(e){p=e.RoleModelLevelComp},function(e){R=e.RoleUpgradeComp,m=e.RoleUpgradeSystem},function(e){u=e.RoleModelBaseComp},function(e){C=e.RoleViewComp}],execute:function(){o._RF.push({},"deb5akLVylKA59zKO2WIC+K","Role",void 0);class h extends s.Entity{init(){this.addComponents(i,u,d,p)}changeJob(e){this.add(c).jobId=e}upgrade(e=0){this.add(R).lv=e}move(e){var o=this.get(a)||this.add(a);o.target=e,o.node=this.RoleView.node,o.speed=100}destroy(){this.remove(C),super.destroy()}load(e,o=t.ZERO){var s=l.createPrefabNode("game/battle/role"),n=s.getComponent(C);this.add(n),s.parent=e,s.setPosition(o)}attack(){this.RoleView.animator.setTrigger(n.Attack)}}e("Role",h);class g extends s.System{constructor(){super(),this.add(new r),this.add(new m)}}e("EcsRoleSystem",g),o._RF.pop()}}}));

System.register("chunks:///_virtual/RegexUtil.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"dec9bVPigFCmKy5NVk+0y7h","RegexUtil",void 0);t("default",class{static isDWORD(t){return/[^\x00-\xff]/.test(t)}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorStateLogic.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"e13cdjt51NAVrVegk2y1CMi","AnimatorStateLogic",void 0);t("AnimatorStateLogic",class{onEntry(){}onUpdate(){}onExit(){}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/RoleNumericMap.ts",["cc","./RoleEnum.ts","./RoleNumeric.ts"],(function(t){"use strict";var e,r,s;return{setters:[function(t){e=t.cclegacy},function(t){r=t.RoleAttributeType},function(t){s=t.RoleNumeric}],execute:function(){e._RF.push({},"e317eRM1yRMLbPql0r+/Pvt","RoleNumericMap",void 0);t("RoleNumericDecorator",class{constructor(){this.attribute=null,this.value=0}});t("RoleNumericMap",class{constructor(t){this.attributes=new Map,this.decorators=new Map,this.vm=null,this.vm=t}addDecorator(t){this.decorators.set(t,t.value),this.get(t.attribute).decorator+=t.value}removeDecorator(t){this.decorators.delete(t),this.get(t.attribute).decorator-=t.value}get(t){var e=this.attributes.get(t);if(null==e){switch(t){case r.physical:e=new a(t,this);break;default:e=new s(t,this)}this.attributes.set(t,e),e.onUpdate=t=>{this.vm[t.type]=t.value}}return e}forEach(t,e){this.attributes.forEach(t,e)}reset(){this.decorators.clear(),this.attributes.forEach(((t,e,r)=>{t.reset()}))}});class a extends s{update(){super.update(),this.attributes.get(r.hp).base=Math.floor(.5*this.value)}}t("RoleNumericPhysical",a),e._RF.pop()}}}));

System.register("chunks:///_virtual/AudioEffect.ts",["cc","./ResLoader.ts"],(function(e){"use strict";var t,s,c,o,r,i;return{setters:[function(e){t=e.cclegacy,s=e._decorator,c=e.AudioSource,o=e.AudioClip,r=e.error},function(e){i=e.resLoader}],execute:function(){var f;t._RF.push({},"e52d2ysY1BEbpcT2Cz0Wwss","AudioEffect",void 0);const{ccclass:u,menu:n}=s;e("AudioEffect",u("AudioEffect")(f=class extends c{constructor(...e){super(...e),this.effects=new Map}load(e,t){i.load(e,o,((s,c)=>{s&&r(s),this.effects.set(e,c),this.playOneShot(c,this.volume),t&&t()}))}release(){for(let e in this.effects)i.release(e);this.effects.clear()}})||f);t._RF.pop()}}}));

System.register("chunks:///_virtual/EventDispatcher.ts",["cc","./MessageManager.ts"],(function(s){"use strict";var t,e;return{setters:[function(s){t=s.cclegacy},function(s){e=s.MessageEventData}],execute:function(){t._RF.push({},"e718eJZxktJ+7AfmyovKw5s","EventDispatcher",void 0);s("EventDispatcher",class{constructor(){this._msg=null}on(s,t,n){null==this._msg&&(this._msg=new e),this._msg.on(s,t,n)}off(s){this._msg&&this._msg.off(s)}dispatchEvent(s,t=null){null==this._msg&&(this._msg=new e),this._msg.dispatchEvent(s,t)}destroy(){this._msg&&this._msg.removes(),this._msg=null}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorTransition.ts",["cc","./AnimatorCondition.ts"],(function(t){"use strict";var i,e,s;return{setters:[function(t){i=t.cclegacy},function(t){e=t.default,s=t.ParamType}],execute:function(){i._RF.push({},"e86eaRQmH5Ko59Lz/Rxrc0p","AnimatorTransition",void 0);t("default",class{constructor(t,i){this._toStateName="",this._hasExitTime=!1,this._conditions=[],this._ac=null,this._toStateName=t.toState,this._hasExitTime=t.hasExitTime,this._ac=i;for(let s=0;s<t.conditions.length;s++){let a=new e(t.conditions[s],i);this._conditions.push(a)}}isValid(){return this._hasExitTime||this._conditions.length>0}check(){if(this._toStateName===this._ac.curState.name)return!1;if(this._hasExitTime&&(this._ac.curState!==this._ac.animCompleteState||!this._ac.animComplete))return!1;for(let t=0;t<this._conditions.length;t++)if(!this._conditions[t].check())return!1;return!0}doTrans(){this._hasExitTime&&(this._ac.animComplete=!1);for(let t=0;t<this._conditions.length;t++){let i=this._conditions[t].getParamType(),e=this._conditions[t].getParamName();i===s.TRIGGER?this._ac.params.resetTrigger(e):i===s.AUTO_TRIGGER&&this._ac.params.resetAutoTrigger(e)}this._ac.changeState(this._toStateName)}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/RoleStateHit.ts",["cc","./AnimatorStateLogic.ts"],(function(t){"use strict";var e,o;return{setters:[function(t){e=t.cclegacy},function(t){o=t.AnimatorStateLogic}],execute:function(){e._RF.push({},"ea68b0h5RhMXJJQkkMM4LdM","RoleStateHit",void 0);t("RoleStateHit",class extends o{constructor(t,e){super(),this.role=t,this.anim=e}onEntry(){}onUpdate(){}onExit(){var t=this.role.RoleView.animator.onHitActionComplete;t&&t()}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/MoveTo.ts",["cc","./ECS.ts","./TimerManager.ts","./Vec3Util.ts"],(function(e){"use strict";var t,o,s,n,i,l;return{setters:[function(e){t=e.cclegacy,o=e.Node,s=e.Vec3},function(e){n=e.ecs},function(e){i=e.Timer},function(e){l=e.Vec3Util}],execute:function(){var r,c;t._RF.push({},"eb55etQ2s5OdYllNHXAsRg1","MoveTo",void 0);let a=e("MoveToComp",n.register("MoveTo")(r=class extends n.Comp{constructor(...e){super(...e),this.node=null,this.velocity=l.zero,this.speed=0,this.target=null,this.ns=o.NodeSpace.LOCAL,this.offset=0,this.offsetVector=null,this.onComplete=null,this.onChange=null}reset(){this.ns=o.NodeSpace.LOCAL,this.offset=0,this.target=null,this.offsetVector=null,this.onComplete=null,this.onChange=null}})||r),d=n.register("VariableMoveTo")(c=class extends n.Comp{constructor(...e){super(...e),this.timer=new i,this.end=null}reset(){this.end=null,this.timer.reset()}})||c;class u extends n.ComblockSystem{filter(){return n.allOf(a)}entityEnter(e){e.add(d)}entityRemove(e){e.remove(d)}update(e){let t,n=e.get(a),i=e.get(d);if(console.assert(n.speed>0,"移动速度必须要大于零"),t=n.target instanceof o?n.ns==o.NodeSpace.WORLD?n.target.worldPosition:n.target.position:n.target,null==i.end||!i.end.strictEquals(t)){var r;let c=t.clone();n.offsetVector&&(c=c.add(n.offsetVector));let a=n.ns==o.NodeSpace.WORLD?n.node.worldPosition:n.node.position;n.velocity=l.sub(c,a).normalize();let d=s.distance(a,c)-n.offset;null===(r=n.onChange)||void 0===r||r.call(this),d-n.offset<=0?this.exit(e):(i.timer.step=d/n.speed,i.end=t.clone(),i.target=n.velocity.clone().multiplyScalar(d).add(a))}if(n.speed>0){let e=l.mul(n.velocity,n.speed*this.dt);n.node.translate(e,o.NodeSpace.LOCAL)}i.timer.update(this.dt)&&(n.ns==o.NodeSpace.WORLD?n.node.worldPosition=i.target:n.node.position=i.target,this.exit(e))}exit(e){var t;null===(t=e.get(a).onComplete)||void 0===t||t.call(this),e.remove(d),e.remove(a)}}e("MoveToSystem",u),t._RF.pop()}}}));

System.register("chunks:///_virtual/ImageUtil.ts",["cc"],(function(e){"use strict";var t,n,o;return{setters:[function(e){t=e.Color,n=e.Texture2D,o=e.cclegacy}],execute:function(){o._RF.push({},"ebdf3rRnEdIYpKgGdW8gSmZ","ImageUtil",void 0);e("default",class{static getPixelColor(e,n,o){const r=document.createElement("canvas"),a=r.getContext("2d");r.width=e.width,r.height=e.height;const i=e.getHtmlElementObj();a.drawImage(i,0,0,e.width,e.height);const c=a.getImageData(0,0,e.width,e.height),g=(o-1)*e.width*4+4*(n-1),s=c.data.slice(g,g+4),l=new t(s[0],s[1],s[2],s[3]);return i.remove(),r.remove(),l}static imageToBase64(e,t){return new Promise((n=>{var o;let r=null===(o=/\.png|\.jpg|\.jpeg/.exec(e))||void 0===o?void 0:o[0];if([".png",".jpg",".jpeg"].includes(r)){const o=document.createElement("canvas"),a=o.getContext("2d"),i=new Image;i.src=e,i.onload=()=>{o.height=i.height,o.width=i.width,a.drawImage(i,0,0),r=".jpg"===r?"jpeg":r.replace(".","");const e=o.toDataURL(`image/${r}`);t&&t(e),n(e),i.remove(),o.remove()}}else console.warn("Not a jpg/jpeg or png resource!"),t&&t(""),n("")}))}static base64ToTexture(e){const t=document.createElement("img");t.src=e;const o=new n;return o.initWithElement(t),t.remove(),o}static base64ToBlob(e){const t=e.split(","),n=/image\/\w+|;/.exec(t[0])[0],o=window.atob(t[1]),r=new ArrayBuffer(o.length),a=new Uint8Array(r);for(let e=0;e<o.length;e++)a[e]=255&o.charCodeAt(e);return new Blob([a],{type:n})}}),o._RF.pop()}}}));

System.register("chunks:///_virtual/EffectDelayRelease.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./EffectSingleCase.ts"],(function(e){"use strict";var t,s,c,n,a,i;return{setters:[function(e){t=e.cclegacy,s=e._decorator,c=e.Component},function(e){n=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){i=e.EffectSingleCase}],execute:function(){var r,l,o;t._RF.push({},"ecbbfzuBdpAqY4JopdUUtFH","EffectDelayRelease",void 0);const{ccclass:u,property:f}=s;e("EffectDelayRelease",u("EffectDelayRelease")((o=n((l=class extends c{constructor(...e){super(...e),a(this,"delay",o,this)}start(){this.scheduleOnce(this.onDelay,this.delay)}onDelay(){i.instance.put(this.node)}}).prototype,"delay",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),r=l))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/StorageManager.ts",["cc","./Md5.ts","./env","./EncryptUtil.ts"],(function(e){"use strict";var t,r,n,o,l;return{setters:[function(e){t=e.cclegacy,r=e.sys},function(e){n=e.md5},function(e){o=e.PREVIEW},function(e){l=e.EncryptUtil}],execute:function(){let c;e("storage",void 0),t._RF.push({},"ed226gLF85Oyr+WhA9TJZLX","StorageManager",void 0),function(e){let t=null,c=null,u=-1;function i(e){null!=e?(e=n(e=`${e}_${u}`),r.localStorage.removeItem(e)):console.error("存储的key不能为空")}e.init=function(e,r){t=n(e),c=n(r)},e.setUser=function(e){u=e},e.set=function(e,o){if(null!=(e=`${e}_${u}`)){if(e=n(e),null==o)return console.warn("存储的值为空，则直接移除该存储"),void i(e);if("function"!=typeof o){if("object"==typeof o)try{o=JSON.stringify(o)}catch(e){return void console.error(`解析失败，str = ${o}`)}else"number"==typeof o&&(o+="");if(null!=t&&null!=c)try{o=l.aesEncrypt(o,t,c)}catch(e){o=null}r.localStorage.setItem(e,o)}else console.error("储存的值不能为方法")}else console.error("存储的key不能为空")},e.get=function(e,i){if(null==e)return void console.error("存储的key不能为空");e=n(e=`${e}_${u}`);let s=r.localStorage.getItem(e);if(null!=s&&""!==s&&!o&&null!=t&&null!=c)try{s=l.aesDecrypt(s,t,c)}catch(e){s=null}if(null==i||"string"==typeof i)return s;if(null===s)return i;if("number"==typeof i)return Number(s)||0;if("boolean"==typeof i)return"true"==s;if("object"==typeof i)try{return JSON.parse(s)}catch(e){return console.error("解析数据失败,str="+s),i}return s},e.remove=i,e.clear=function(){r.localStorage.clear()}}(c||(c=e("storage",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/RtToModel.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(e){"use strict";var t,r,i,o,n,s,a,l,c,u;return{setters:[function(e){t=e.cclegacy,r=e.Camera,i=e.MeshRenderer,o=e._decorator,n=e.Component,s=e.RenderTexture,a=e.view,l=e.gfx},function(e){c=e.applyDecoratedDescriptor,u=e.initializerDefineProperty}],execute:function(){var h,p,d,m,f,g,y;t._RF.push({},"ed72aAblFFGFIKKmkEHKifq","RtToModel",void 0);const{ccclass:b,property:w}=o;e("RtToModel",(h=b("RtToModel"),p=w(r),d=w(i),h((g=c((f=class extends n{constructor(...e){super(...e),u(this,"camara",g,this),u(this,"model",y,this),this.rt=new s}start(){const e=a.getVisibleSize(),t=new l.ColorAttachment,r=new l.DepthStencilAttachment,i=new l.RenderPassInfo([t],r,[]);this.rt.reset({width:e.width,height:e.height,passInfo:i}),this.camara.targetTexture=this.rt;this.model.material.setProperty("mainTexture",this.rt)}onDestroy(){this.rt.destroy()}}).prototype,"camara",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=c(f.prototype,"model",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=f))||m));t._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorSpineSecondary.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./AnimatorBase.ts","./AnimatorSpine.ts"],(function(t){"use strict";var i,n,s,e,a,r,o;return{setters:[function(t){i=t.cclegacy,n=t.sp,s=t._decorator},function(t){e=t.applyDecoratedDescriptor,a=t.initializerDefineProperty},function(t){r=t.default},function(t){o=t.default}],execute:function(){var h,l,c,p,u;i._RF.push({},"ef4a8mUoxFCwJZvhOC9aqyd","AnimatorSpineSecondary",void 0);const{ccclass:d,property:m,requireComponent:_}=s;t("default",(h=_(n.Skeleton),l=m({tooltip:"动画播放的trackIndex，必须大于0"}),d(c=h((u=e((p=class extends r{constructor(...t){super(...t),a(this,"TrackIndex",u,this),this._main=null,this._spine=null}start(){this.PlayOnStart&&!this._hasInit&&(this._hasInit=!0,this._spine=this.getComponent(n.Skeleton),this._main=this.getComponent(o),this._main.addSecondaryListener(this.onAnimFinished,this),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))}onInit(...t){this.PlayOnStart||this._hasInit||(this._hasInit=!0,this.initArgs(...t),this._spine=this.getComponent(n.Skeleton),this._main=this.getComponent(o),this._main.addSecondaryListener(this.onAnimFinished,this),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))}playAnimation(t,i){t?this._spine.setAnimation(this.TrackIndex,t,i):this._spine.clearTrack(this.TrackIndex)}}).prototype,"TrackIndex",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),c=p))||c)||c));i._RF.pop()}}}));

System.register("chunks:///_virtual/BTreeNode.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"f0aeepAwndJP7wlpP6QKx06","BTreeNode",void 0);t("BTreeNode",class{constructor(){this.title=this.constructor.name}start(t){}end(t){}setControl(t){this._control=t}running(t){this._control.running(this)}success(){this._control.success()}fail(){this._control.fail()}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/AnimationEventHandler.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"f0c5aeHTF5B9a7hg62tkEpe","AnimationEventHandler",void 0);class a{}e("AnimationEventHandler",class{constructor(){this.frameEvents=new Map,this.finishedEvents=new Map}addFrameEvent(e,t,n){var s=new a;s.callback=t,s.target=n,this.frameEvents.set(e,s)}addFinishedEvent(e,t,n){var s=new a;s.callback=t,s.target=n,this.finishedEvents.set(e,s)}onFrameEventCallback(e,t){var a=this.frameEvents.get(e);a&&a.callback.call(a.target,e,t)}onFinishedCallback(e){var t=this.finishedEvents.get(e.curStateName);t&&t.callback.call(t.target,e.curStateName,e)}playAnimation(e,t){}scaleTime(e){}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/AsyncQueue.ts",["cc"],(function(s){"use strict";var e,i,t;return{setters:[function(s){e=s.cclegacy,i=s.warn,t=s.log}],execute:function(){e._RF.push({},"f2a49Y3PzNOp7amCQe7grKK","AsyncQueue",void 0);class n{constructor(){this._runningAsyncTask=null,this._queues=[],this._isProcessingTaskUUID=0,this._enable=!0,this.complete=null}get queues(){return this._queues}get enable(){return this._enable}set enable(s){this._enable!==s&&(this._enable=s,s&&this.size>0&&this.play())}push(s,e=null){let i=n._$uuid_count++;return this._queues.push({uuid:i,callbacks:[s],params:e}),i}pushMulti(s,...e){let i=n._$uuid_count++;return this._queues.push({uuid:i,callbacks:e,params:s}),i}remove(s){var e;if((null===(e=this._runningAsyncTask)||void 0===e?void 0:e.uuid)!==s){for(let e=0;e<this._queues.length;e++)if(this._queues[e].uuid===s){this._queues.splice(e,1);break}}else i("正在执行的任务不可以移除")}get size(){return this._queues.length}get isProcessing(){return this._isProcessingTaskUUID>0}get isStop(){return!(this._queues.length>0)&&!this.isProcessing}get runningParams(){return this._runningAsyncTask?this._runningAsyncTask.params:null}clear(){this._queues=[],this._isProcessingTaskUUID=0,this._runningAsyncTask=null}next(s,e=null){this._isProcessingTaskUUID===s?(this._isProcessingTaskUUID=0,this._runningAsyncTask=null,this.play(e)):this._runningAsyncTask&&t(this._runningAsyncTask)}step(){this.isProcessing&&this.next(this._isProcessingTaskUUID)}play(s=null){if(this.isProcessing)return;if(!this._enable)return;let e=this._queues.shift();if(e){this._runningAsyncTask=e;let i=e.uuid;this._isProcessingTaskUUID=i;let t=e.callbacks;if(1==t.length){let n=(s=null)=>{this.next(i,s)};t[0](n,e.params,s)}else{let n=t.length,u=[],l=(s=null)=>{--n,u.push(s||null),0===n&&this.next(i,u)},r=n;for(let i=0;i<r;i++)t[i](l,e.params,s)}}else this._isProcessingTaskUUID=0,this._runningAsyncTask=null,this.complete&&this.complete(s)}yieldTime(s,e=null){this.push((function(i,t,n){let u=setTimeout((()=>{clearTimeout(u),e&&e(),i(n)}),s)}),{des:"AsyncQueue.yieldTime"})}static excuteTimes(s,e=null){let i=s;return()=>{--i,0===i&&e&&e()}}}s("AsyncQueue",n),n._$uuid_count=1,e._RF.pop()}}}));

System.register("chunks:///_virtual/RoleStateAttack.ts",["cc","./AnimatorStateLogic.ts"],(function(t){"use strict";var e,a;return{setters:[function(t){e=t.cclegacy},function(t){a=t.AnimatorStateLogic}],execute:function(){e._RF.push({},"f4792dE0/lNSY7msDRYmNIF","RoleStateAttack",void 0);t("RoleStateAttack",class extends a{constructor(t,e){super(),this.role=t,this.anim=e,this.anim.addFrameEvent("attack",this.onAttack,this)}onAttack(){var t=this.role.RoleView.animator.onAttackComplete;t&&t()}onEntry(){}onUpdate(){}onExit(){}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/ViewUtil.ts",["cc","./ResLoader.ts"],(function(e){"use strict";var t,n,a,o,i,r,c,l,s;return{setters:[function(e){t=e.cclegacy,n=e.UITransform,a=e.v3,o=e.Size,i=e.Prefab,r=e.instantiate,c=e.Animation,l=e.AnimationClip},function(e){s=e.resLoader}],execute:function(){t._RF.push({},"f607cCjAEZHVKVZ/FyRs5bA","ViewUtil",void 0);class d{static nodeTreeInfoLite(e,t){let n=t||new Map,a=e.children;for(let e=0;e<a.length;e++){let t=a[e];t.name.indexOf(" ")<0&&n.set(t.name,t),d.nodeTreeInfoLite(t,n)}return n}static findNodes(e,t,n){let a=n||[],o=t.children;for(let t=0;t<o.length;t++){let n=o[t].name;e.test(n)&&a.push(o[t]),d.findNodes(e,o[t],a)}return a}static calculateASpaceToBSpacePos(e,t,a){var o=e.getComponent(n).convertToWorldSpaceAR(a);return t.getComponent(n).convertToNodeSpaceAR(o)}static calculateScreenPosToSpacePos(e,t){let o=e.getUILocation(),i=a(o.x,o.y);return t.getComponent(n).convertToNodeSpaceAR(i)}static uniformScale(e,t,n,a){var i,r=n/e,c=a/t;return i=r<c?r:c,new o(Math.floor(e*i),Math.floor(t*i))}static createPrefabNode(e){var t=s.get(e,i);return r(t)}static addNodeAnimation(e,t,n=!0,a=!1){if(t&&t.isValid){var o=t.getComponent(c);null==o&&(o=t.addComponent(c));var i=s.get(e,l);if(i&&!(n&&o.getState(i.name)&&o.getState(i.name).isPlaying)){if(a)return o.defaultClip=i,void o.play();o.once(c.EventType.FINISHED,(()=>{o.defaultClip&&o.play()}),this),o.getState(i.name)||o.createState(i,i.name),o.play(i.name)}}}}e("ViewUtil",d),t._RF.pop()}}}));

System.register("chunks:///_virtual/Hot.ts",["cc","./ResLoader.ts"],(function(t){"use strict";var e,s,o,a,i;return{setters:[function(t){e=t.cclegacy,s=t.log,o=t.sys,a=t.error},function(t){i=t.resLoader}],execute:function(){e._RF.push({},"f6377Ckbb9Cg5R2ygFWMOCv","Hot",void 0);t("HotOptions",class{constructor(){this.onVersionInfo=null,this.onNeedToUpdate=null,this.onNoNeedToUpdate=null,this.onUpdateFailed=null,this.onUpdateSucceed=null,this.onUpdateProgress=null}check(){for(let t in this)if("check"!==t&&!this[t])return s(`参数HotOptions.${t}未设置！`),!1;return!0}});class n{constructor(){this.assetsMgr=null,this.options=null,this.state=n.State.None,this.storagePath="",this.manifest=""}init(t){o.isNative&&t.check()&&(this.options=t,this.assetsMgr||i.load("project",((t,e)=>{if(t)a("【热更新界面】缺少热更新配置文件");else{this.showSearchPath(),this.manifest=e.nativeUrl,this.storagePath=`${jsb.fileUtils.getWritablePath()}/hotupdate_storage`,this.assetsMgr=new jsb.AssetsManager(this.manifest,this.storagePath,((t,e)=>{var s;console.log("【热更新】客户端版本: "+t+", 当前最新版本: "+e),(null===(s=this.options)||void 0===s?void 0:s.onVersionInfo)&&this.options.onVersionInfo({local:t,server:e});let o=t.split("."),a=e.split(".");for(let t=0;t<o.length;++t){let e=parseInt(o[t]),s=parseInt(a[t]||"0");if(e!==s)return e-s}return a.length>o.length?-1:0})),this.assetsMgr.setVerifyCallback(((t,e)=>(e.compressed,!0)));var s=this.assetsMgr.getLocalManifest();console.log("【热更新】热更资源存放路径: "+this.storagePath),console.log("【热更新】本地资源配置路径: "+this.manifest),console.log("【热更新】本地包地址: "+s.getPackageUrl()),console.log("【热更新】远程 project.manifest 地址: "+s.getManifestFileUrl()),console.log("【热更新】远程 version.manifest 地址: "+s.getVersionFileUrl()),this.checkUpdate()}})))}clearHotUpdateStorage(){jsb.fileUtils.removeDirectory(this.storagePath)}checkUpdate(){this.assetsMgr?this.assetsMgr.getState()!==jsb.AssetsManager.State.UNINITED?this.assetsMgr.getLocalManifest().isLoaded()?(this.assetsMgr.setEventCallback(this.onHotUpdateCallBack.bind(this)),this.state=n.State.Check,this.assetsMgr.checkUpdate()):s("【热更新】加载本地 manifest 失败 ..."):a("【热更新】未初始化"):s("【热更新】请先初始化")}hotUpdate(){this.assetsMgr?(this.assetsMgr.setEventCallback(this.onHotUpdateCallBack.bind(this)),this.state=n.State.Update,this.assetsMgr.update()):s("【热更新】请先初始化")}onHotUpdateCallBack(t){var e,s;let o=t.getEventCode();switch(o){case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:console.log("【热更新】当前版本与远程版本一致且无须更新"),(null===(e=this.options)||void 0===e?void 0:e.onNoNeedToUpdate)&&this.options.onNoNeedToUpdate(o);break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:console.log("【热更新】发现新版本,请更新"),(null===(s=this.options)||void 0===s?void 0:s.onNeedToUpdate)&&this.options.onNeedToUpdate(o,this.assetsMgr.getTotalBytes());break;case jsb.EventAssetsManager.ASSET_UPDATED:console.log("【热更新】资产更新");break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:var a;if(this.state===n.State.Update)console.log("【热更新】更新中...",t.getDownloadedFiles(),t.getTotalFiles(),t.getPercent()),(null===(a=this.options)||void 0===a?void 0:a.onUpdateProgress)&&this.options.onUpdateProgress(t);break;case jsb.EventAssetsManager.UPDATE_FINISHED:this.onUpdateFinished();break;default:this.onUpdateFailed(o)}}onUpdateFailed(t){var e;this.assetsMgr.setEventCallback(null),(null===(e=this.options)||void 0===e?void 0:e.onUpdateFailed)&&this.options.onUpdateFailed(t)}onUpdateFinished(){var t;this.assetsMgr.setEventCallback(null);let e=jsb.fileUtils.getSearchPaths(),s=this.assetsMgr.getLocalManifest().getSearchPaths();Array.prototype.unshift.apply(e,s),localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(e)),jsb.fileUtils.setSearchPaths(e),console.log("【热更新】更新成功"),(null===(t=this.options)||void 0===t?void 0:t.onUpdateSucceed)&&this.options.onUpdateSucceed()}showSearchPath(){console.log("========================搜索路径========================");let t=jsb.fileUtils.getSearchPaths();for(let e=0;e<t.length;e++)console.log("["+e+"]: "+t[e]);console.log("======================================================")}}t("Hot",n),n.State={None:0,Check:1,Update:2},e._RF.pop()}}}));

System.register("chunks:///_virtual/HotUpdate.ts",["cc","./Oops.ts","./GameUIConfig.ts","./LoadingViewComp.ts","./TipsManager.ts","./Hot.ts"],(function(t){"use strict";var e,a,o,n,s,i,p,d,c,l,g;return{setters:[function(t){e=t.cclegacy,a=t._decorator,o=t.Component,n=t.sys,s=t.game},function(t){i=t.oops},function(t){p=t.UIID},function(t){d=t.LoadingViewComp},function(t){c=t.tips},function(t){l=t.Hot,g=t.HotOptions}],execute:function(){var r;e._RF.push({},"f64deiQLAhLh5HGqUqaI9oA","HotUpdate",void 0);const{ccclass:u,property:h}=a;t("HotUpdate",u("HotUpdate")(r=class extends o{constructor(...t){super(...t),this.hot=new l,this.lv=null}onLoad(){n.isNative&&(this.lv=this.getComponent(d),this.lv.data.prompt=i.language.getLangByID("update_tips_check_update"),this.startHotUpdate())}startHotUpdate(){let t=new g;t.onVersionInfo=t=>{},t.onUpdateProgress=t=>{this.lv.data.finished=t.getDownloadedFiles(),this.lv.data.total=t.getTotalFiles();let e,a,o=t.getPercent(),n=t.getTotalBytes(),s=t.getDownloadedBytes();n<1048576?(n=Math.ceil(n/1024),e=n+"K"):(e=(n/1048576).toFixed(1),e+="M"),s<1048576?(s=Math.ceil(s/1024),a=s+"K"):(a=(s/1048576).toFixed(1),a+="M"),this.lv.data.prompt="0K"==e?i.language.getLangByID("update_tips_check_update"):i.language.getLangByID("update_tips_update")+a+"/"+e+" ("+parseInt(100*o+"")+"%)"},t.onNeedToUpdate=(t,e)=>{this.lv.data.prompt=i.language.getLangByID("update_tips_new_version");let a="";e<1048576?(e=Math.ceil(e/1024),a+="KB"):(a=(e/1048576).toFixed(1),a+="MB"),this.checkForceUpdate((()=>{this.showUpdateDialog(a,(()=>{this.hot.hotUpdate()}))}))},t.onNoNeedToUpdate=()=>{this.lv.enter()},t.onUpdateFailed=()=>{this.lv.data.prompt=i.language.getLangByID("update_tips_update_fail"),this.hot.checkUpdate()},t.onUpdateSucceed=()=>{this.lv.data.prompt=i.language.getLangByID("update_tips_update_success"),setTimeout((()=>{this.lv.data.prompt="安卓重启",s.restart()}),1e3)},this.hot.init(t)}checkForceUpdate(t){let e={title:"common_prompt_title_sys",content:"update_tips_force",okWord:"common_prompt_ok",cancelWord:"common_prompt_cancal",okFunc:()=>{this.hot.clearHotUpdateStorage(),t()},cancelFunc:()=>{s.end()},needCancel:!0};i.gui.open(p.Window,e)}showUpdateDialog(t,e){n.getNetworkType()!=n.NetworkType.LAN?c.alert(i.language.getLangByID("update_nowifi_tip")+t,e):e()}})||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/Priority.ts",["cc","./BranchNode.ts"],(function(s){"use strict";var t,c;return{setters:[function(s){t=s.cclegacy},function(s){c=s.BranchNode}],execute:function(){t._RF.push({},"f7555DSpj9LbYpRDi8/UKdN","Priority",void 0);s("Priority",class extends c{success(){super.success(),this._control.success()}fail(){super.fail(),this._actualTask+=1,this._actualTask<this.children.length?this._run(this._blackboard):this._control.fail()}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/LabelNumber.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(e){"use strict";var t,r,i,o,n,u;return{setters:[function(e){t=e.cclegacy,r=e._decorator,i=e.Label,o=e.error},function(e){n=e.applyDecoratedDescriptor,u=e.initializerDefineProperty}],execute:function(){var s,p,a,l,c,m,b,h;t._RF.push({},"f7b43F70BhPlrz4IPhZGmsL","LabelNumber",void 0);const{ccclass:y,property:f,menu:_}=r;e("default",(s=y("LabelNumber"),p=_("ui/label/LabelNumber"),a=f({tooltip:"是否显示货币符号"}),s(l=p((m=n((c=class extends i{constructor(...e){super(...e),u(this,"_num",m,this),u(this,"_showSym",b,this),u(this,"useFix",h,this)}set num(e){this._num=e,this.updateLabel()}get num(){return this._num}set showSym(e){e&&(this._showSym=e,this.updateLabel())}get showSym(){return this._showSym}updateLabel(){"number"!=typeof this._num&&o("[LabelNumber] num不是一个合法数字"),this.string=this.num.toString()}}).prototype,"_num",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=n(c.prototype,"_showSym",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),n(c.prototype,"num",[f],Object.getOwnPropertyDescriptor(c.prototype,"num"),c.prototype),n(c.prototype,"showSym",[f],Object.getOwnPropertyDescriptor(c.prototype,"showSym"),c.prototype),h=n(c.prototype,"useFix",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),l=c))||l)||l));t._RF.pop()}}}));

System.register("chunks:///_virtual/RoleViewLoader.ts",["cc","./ResLoader.ts","./Config.ts","./RoleViewComp.ts"],(function(e){"use strict";var t,o,s,n,i,a,r;return{setters:[function(e){t=e.cclegacy,o=e._decorator,s=e.Component,n=e.sp},function(e){i=e.resLoader},function(e){a=e.config},function(e){r=e.RoleViewComp}],execute:function(){var c;t._RF.push({},"f8b09G7r6VIcbm3bJOdQS16","RoleViewLoader",void 0);const{ccclass:l,property:d}=o;e("RoleViewLoader",l("RoleViewLoader")(c=class extends s{constructor(...e){super(...e),this.spine=null}load(e){this.node.active=!1,this.spine=this.getComponent(r).spine;var t=a.game.getRolePath(e);i.load(t,n.SkeletonData,((e,o)=>{e?console.error(`动画名为【${t}】的角色资源不存在`):(this.spine.skeletonData=o,this.spine.skeletonData.addRef(),this.node.active=!0)}))}onDestroy(){this.spine.skeletonData.decRef()}})||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorBase.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./AnimatorController.ts"],(function(t){"use strict";var a,e,i,n,s,r,o;return{setters:[function(t){a=t.cclegacy,e=t.JsonAsset,i=t._decorator,n=t.Component},function(t){s=t.applyDecoratedDescriptor,r=t.initializerDefineProperty},function(t){o=t.default}],execute:function(){var l,c,u,h,p,m,_,g,d,y;a._RF.push({},"fc8c1ta9v1PBpsryV1YMF3s","AnimatorBase",void 0);const{ccclass:f,property:A,executionOrder:b,menu:S}=i;t("default",(l=b(-1e3),c=S("animator/AnimatorBase"),u=A({type:e,tooltip:"状态机json文件"}),h=A({tooltip:"是否在start中自动启动状态机"}),p=A({tooltip:"是否在update中自动触发状态机逻辑更新"}),f(m=l(m=c((g=s((_=class extends n{constructor(...t){super(...t),r(this,"AssetRawUrl",g,this),r(this,"PlayOnStart",d,this),r(this,"AutoUpdate",y,this),this._hasInit=!1,this._ac=null,this._stateLogicMap=null,this._onStateChangeCall=null,this._animationPlayer=null}onFrameEvent(t){var a;null===(a=this._animationPlayer)||void 0===a||a.onFrameEventCallback(t,this)}get curStateName(){return this._ac.curState.name}get curStateMotion(){return this._ac.curState.motion}getState(t){return this._ac.states.get(t)}onInit(...t){}initArgs(...t){t.forEach((t=>{t&&("function"==typeof t?this._onStateChangeCall=t:"object"==typeof t&&(t instanceof Map?this._stateLogicMap=t:this._animationPlayer=t))}))}updateAnimator(){let t=this._ac.curState.speed;if(this._ac.curState.multi&&(t*=this._ac.params.getNumber(this._ac.curState.multi)||1),this.scaleTime(t),this._stateLogicMap){let t=this._stateLogicMap.get(this._ac.curState.name);t&&t.onUpdate()}this._ac.updateAnimator()}update(){this._hasInit&&this.AutoUpdate&&this.updateAnimator()}manualUpdate(){this._hasInit&&!this.AutoUpdate&&this.updateAnimator()}initJson(t){this._ac=new o(this,t)}onAnimFinished(){var t;this._ac.onAnimationComplete(),null===(t=this._animationPlayer)||void 0===t||t.onFinishedCallback(this)}playAnimation(t,a){}scaleTime(t){}onStateChange(t,a){this.playAnimation(a.motion,a.loop);let e=t?t.name:"";if(this._stateLogicMap){let t=this._stateLogicMap.get(e);t&&t.onExit();let i=this._stateLogicMap.get(a.name);i&&i.onEntry()}this._onStateChangeCall&&this._onStateChangeCall(e,a.name)}setBool(t,a){this._ac.params.setBool(t,a)}getBool(t){return 0!==this._ac.params.getBool(t)}setNumber(t,a){this._ac.params.setNumber(t,a)}getNumber(t){return this._ac.params.getNumber(t)}setTrigger(t){this._ac.params.setTrigger(t)}resetTrigger(t){this._ac.params.resetTrigger(t)}autoTrigger(t){this._ac.params.autoTrigger(t)}play(t){this._hasInit&&this._ac.play(t)}}).prototype,"AssetRawUrl",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=s(_.prototype,"PlayOnStart",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y=s(_.prototype,"AutoUpdate",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m=_))||m)||m)||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/TipsManager.ts",["cc","./Oops.ts","./GameUIConfig.ts"],(function(e){"use strict";var o,t,n,c,i;return{setters:[function(e){o=e.cclegacy,t=e.tween,n=e.Vec3},function(e){c=e.oops},function(e){i=e.UIID}],execute:function(){o._RF.push({},"ff5dcVHtcZJ9q3TKa7/NRfI","TipsManager",void 0);var m=e("tips",new class{constructor(){this._timeId=""}networkRecovery(){this._timeId&&(c.timer.unschedule(this._timeId),this._timeId=""),c.gui.remove(i.Netinstable)}netInstableOpen(){c.gui.has(i.Netinstable)||c.gui.open(i.Netinstable)}netInstableClose(){c.gui.remove(i.Netinstable)}networkLatency(e){this._timeId&&c.timer.unschedule(this._timeId),this._timeId=c.timer.scheduleOnce(this.netInstableOpen,e)}test(e){let o={title:"common_prompt_title_sys",content:"common_prompt_content",okWord:"common_prompt_ok",cancelWord:"common_prompt_cancal",okFunc:()=>{console.log("okFunc")},cancelFunc:()=>{console.log("cancelFunc")},needCancel:!0};c.gui.open(i.Window,o,this.getPopCommonEffect())}alert(e,o,t,n){let s={title:t||"common_prompt_title_sys",content:e,okWord:n||"common_prompt_ok",okFunc:()=>{o&&o()},needCancel:!1};c.gui.open(i.Window,s,m.getPopCommonEffect())}confirm(e,o,t="common_prompt_ok"){let n={title:"common_prompt_title_sys",content:e,okWord:t,cancelWord:"common_prompt_cancal",okFunc:()=>{o&&o()},cancelFunc:()=>{},needCancel:!0};c.gui.open(i.Window,n,m.getPopCommonEffect())}getPopCommonEffect(e){let o={onAdded:(e,o)=>{e.setScale(.1,.1,.1),t(e).to(.2,{scale:new n(1,1,1)}).start()},onBeforeRemove:(e,o)=>{t(e).to(.2,{scale:new n(.1,.1,.1)}).call(o).start()}};if(e){if(e&&e.onAdded){let t=e.onAdded;e.onAdded=(e,n)=>{t(e,n),o.onAdded(e,n)}}if(e&&e.onBeforeRemove){let t=e.onBeforeRemove;e.onBeforeRemove=(e,n)=>{t(e,n),o.onBeforeRemove(e,n)}}return e}return o}});o._RF.pop()}}}));

System.register("chunks:///_virtual/Initialize.ts",["cc","./ECS.ts","./ResLoader.ts","./Oops.ts","./GameUIConfig.ts","./Config.ts","./AsyncQueue.ts","./LoadingViewComp.ts"],(function(e){"use strict";var n,t,a,o,s,i,u,g;return{setters:[function(e){n=e.cclegacy},function(e){t=e.ecs},function(e){a=e.resLoader},function(e){o=e.oops},function(e){s=e.UIID},function(e){i=e.config},function(e){u=e.AsyncQueue},function(e){g=e.LoadingViewComp}],execute:function(){n._RF.push({},"ffbceQs6Z9IoI5z6mt1avMw","Initialize",void 0);class l extends t.Entity{init(){var e=new u;this.loadCustom(e),this.loadLanguage(e),this.loadCommon(e),this.onComplete(e),e.play()}loadCustom(e){e.push((async(e,n,t)=>{a.load("language/font/"+o.language.current,e)}))}loadLanguage(e){e.push(((e,n,t)=>{let a=o.storage.get("language");null==a&&(a="zh",o.storage.set("language",a)),o.language.setAssetsPath(i.game.languagePathJson,i.game.languagePathTexture),o.language.setLanguage(a,e)}))}loadCommon(e){e.push(((e,n,t)=>{a.loadDir("common",e)}))}onComplete(e){e.complete=()=>{var e={onAdded:(e,n)=>{var t=e.getComponent(g);this.add(t)}};o.gui.open(s.Loading,null,e)}}}e("Initialize",l),n._RF.pop()}}}));

System.register("chunks:///_virtual/LabelChange.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./LabelNumber.ts"],(function(i){"use strict";var e,t,s,n,a;return{setters:[function(i){e=i.cclegacy,t=i._decorator},function(i){s=i.applyDecoratedDescriptor,n=i.initializerDefineProperty},function(i){a=i.default}],execute:function(){var h,l,c;e._RF.push({},"fff0fLwVNhNe59VirWTCPFJ","LabelChange",void 0);const{ccclass:r,property:u,menu:o}=t;i("LabelChange",r("LabelChange")(h=o("ui/label/LabelChange")((c=s((l=class extends a{constructor(...i){super(...i),n(this,"isInteger",c,this),this.duration=0,this.isBegin=!1,this.speed=0,this.end=0}changeTo(i,e,t){0!=i?this.playAnim(i,this.num,e,t):t&&t()}changeBy(i,e,t){0!=i?this.playAnim(i,this.num,this.num+e,t):t&&t()}stop(i=!0){this.num=this.end,this.isBegin=!1,i&&this.callback&&this.callback()}playAnim(i,e,t,s){this.duration=i,this.end=t,this.callback=s,this.speed=(t-e)/i,this.num=e,this.isBegin=!0}isEnd(i){return this.speed>0?i>=this.end:i<=this.end}update(i){if(this.isBegin){if(this.num==this.end)return this.isBegin=!1,void(this.callback&&this.callback());let e=this.num+i*this.speed;this.isInteger&&(e=Math.ceil(e)),this.isEnd(e)&&(e=this.end,this.isBegin=!1,this.callback&&this.callback()),this.num=e}}}).prototype,"isInteger",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=l))||h)||h);e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./JsonOb.ts","./Logger.ts","./GameConfig.ts","./BTreeNode.ts","./BehaviorTree.ts","./Decorator.ts","./MessageManager.ts","./EventDispatcher.ts","./NetState.ts","./ECS.ts","./ViewModel.ts","./RoleEnum.ts","./RoleNumeric.ts","./RoleNumericMap.ts","./RoleModelComp.ts","./Md5.ts","./ResLoader.ts","./EncryptUtil.ts","./StorageManager.ts","./Oops.ts","./BuildTimeConstants.ts","./TimerManager.ts","./UrlParse.ts","./GameQueryConfig.ts","./GUI.ts","./DelegateComponent.ts","./Defines.ts","./LayerUI.ts","./LayerPopup.ts","./LayerDialog.ts","./LanguageData.ts","./LanguageLabel.ts","./NotifyComponent.ts","./LayerNotify.ts","./UIMap.ts","./LayerManager.ts","./GameUIConfig.ts","./Config.ts","./GameEvent.ts","./NetConfig.ts","./ViewUtil.ts","./MathUtil.ts","./Vec3Util.ts","./MoveTo.ts","./JsonUtil.ts","./RoleModelJobComp.ts","./RoleEvent.ts","./RoleChangeJob.ts","./RoleTableLevelUp.ts","./RoleModelLevelComp.ts","./RoleUpgrade.ts","./RoleModelBaseComp.ts","./CCComp.ts","./AnimatorCondition.ts","./AnimatorParams.ts","./AnimatorTransition.ts","./AnimatorState.ts","./AnimatorController.ts","./AnimatorBase.ts","./AnimatorSpine.ts","./AnimationEventHandler.ts","./AnimatorStateLogic.ts","./RoleStateAttack.ts","./RoleStateDead.ts","./RoleStateHit.ts","./RoleViewAnimator.ts","./RoleViewController.ts","./RoleViewLoader.ts","./RoleViewComp.ts","./Role.ts","./AccountModelComp.ts","./AccountNetData.ts","./Account.ts","./EcsPositionSystem.ts","./RootSystem.ts","./AudioEffect.ts","./AudioMusic.ts","./AudioManager.ts","./EngineMessage.ts","./GameManager.ts","./LanguageSprite.ts","./LanguagePack.ts","./Language.ts","./HttpRequest.ts","./Root.ts","./SingletonModuleComp.ts","./AsyncQueue.ts","./VMParent.ts","./CCVMParentComp.ts","./LoadingViewComp.ts","./Initialize.ts","./Main.ts","./RoleViewInfoComp.ts","./RotateUtil.ts","./FlashSprite.ts","./ButtonSimple.ts","./ButtonEffect.ts","./BranchNode.ts","./Sequence.ts","./VMCompsEdit.ts","./StringFormat.ts","./VMBase.ts","./VMCustom.ts","./VMProgress.ts","./EffectSingleCase.ts","./EffectFinishedRelease.ts","./BhvButtonGroup.ts","./TipsManager.ts","./NetGameTips.ts","./AnimatorAnimation.ts","./AnimatorSkeletal.ts","./ArrayUtil.ts","./Demo.ts","./VMState.ts","./VMLabel.ts","./LabelTime.ts","./NetNode.ts","./IControl.ts","./FlashSpine.ts","./SpineFinishedRelease.ts","./CommonPrompt.ts","./DrawMeshSector.ts","./FreeFlightCamera.ts","./WebSock.ts","./BhvRollNumber.ts","./VMModify.ts","./ObjectUtil.ts","./Selector.ts","./Task.ts","./LoadingIndicator.ts","./CameraUtil.ts","./Priority.ts","./index.ts","./AnimatorCustomization.ts","./AnimatorDragonBones.ts","./GameComponent.ts","./RtToSprite.ts","./Ambilight.ts","./VMEvent.ts","./StringUtil.ts","./NetInterface.ts","./NetManager.ts","./NetNodeGame.ts","./NetChannelManager.ts","./BhvSwitchPage.ts","./LayerUtil.ts","./RandomManager.ts","./RoundRectMask.ts","./Badge.ts","./PlatformUtil.ts","./BhvFrameIndex.ts","./ButtonTouchLong.ts","./RegexUtil.ts","./ImageUtil.ts","./EffectDelayRelease.ts","./RtToModel.ts","./AnimatorSpineSecondary.ts","./Hot.ts","./HotUpdate.ts","./LabelNumber.ts","./LabelChange.ts","./MGOBE.mjs_cjs=&original=.js"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});